import { o as __toESM } from "./chunk-r2Y0G7H8.js";
import { C as computed, Cn as toDisplayString, D as createElementBlock, E as createCommentVNode, Gt as unref, It as ref, J as onBeforeUnmount, M as createVNode, Nt as onScopeDispose, P as defineComponent, Q as onUnmounted, T as createBlock, Z as onMounted, _ as Fragment, _t as watch, at as renderSlot, bn as normalizeStyle, bt as withCtx, et as openBlock, h as withModifiers, it as renderList, j as createTextVNode, k as createSlots, mt as useTemplateRef, ot as resolveComponent, p as vShow, vn as normalizeClass, w as createBaseVNode, xt as withDirectives } from "./vue.runtime.esm-bundler-XtMkEjzB.js";
import { yt as useI18n } from "./_MapCache-Bq6g7eJk.js";
import { A as N8nTags_default, At as N8nBadge_default, Bi as N8nCallout_default, C as N8nBreadcrumbs_default, Ci as useRoute, Et as N8nLoading_default, Hi as N8nButton_default, Oi as N8nTooltip_default, Pi as N8nActionBox_default, Q as N8nInfoTip_default, Tt as N8nActionToggle_default, Ui as N8nIcon_default, Vi as N8nText_default, _t as createEventBus, bt as N8nCard_default, d as N8nInlineTextEdit_default, ft as N8nSelect_default, gi as N8nLink_default, hi as N8nPromptInput_default, ot as N8nInputLabel_default, pt as N8nOption_default, st as Checkbox_default, wi as useRouter, zi as N8nHeading_default } from "./src-Vlm7Mxf-.js";
import { t as __plugin_vue_export_helper_default } from "./_plugin-vue_export-helper-DltO58Gh.js";
import "./sanitize-html-JHjOJhXQ.js";
import { Ba as FOLDER_NAME_ONLY_DOTS_REGEX, C as useNodeTypesStore, Fr as usePostHog, Gt as useProjectsStore, Hr as useStorage, Kt as ProjectTypes, La as FOLDER_LIST_ITEM_ACTIONS, Lt as useTelemetry, Ma as PROJECT_MOVE_RESOURCE_MODAL, Ot as useTagsStore, Ra as FOLDER_NAME_ILLEGAL_CHARACTERS_REGEX, Rr as useWorkflowsListStore, Ti as ResourceType, Tr as useMessage, Va as ILLEGAL_FOLDER_CHARACTERS, Wc as STORES, cr as trackTemplatesClick, fn as useDocumentTitle, lr as useCloudPlanStore, or as TemplateClickSource, qa as COMMUNITY_PLUS_ENROLLMENT_MODAL, r as useUIStore, s as useWorkflowsStore, t as useUsersStore, wr as useSourceControlStore, ws as useSettingsStore, xn as useTemplatesStore, yr as useToast, za as FOLDER_NAME_MAX_LENGTH } from "./users.store-BwYRQvCY.js";
import { Hs as WORKFLOW_SHARE_MODAL_KEY, Ka as jsonParse, Kc as TEMPLATE_ONBOARDING_EXPERIMENT, Ss as MODAL_CONFIRM, Xs as LOCAL_STORAGE_EXPERIMENTAL_DISMISSED_SUGGESTED_WORKFLOWS, Yc as EnterpriseEditionFeature, ds as DUPLICATE_MODAL_KEY, fs as EXPERIMENT_TEMPLATE_RECO_V2_KEY, i as DEFAULT_WORKFLOW_PAGE_SIZE, ko as PROJECT_ROOT, ps as EXPERIMENT_TEMPLATE_RECO_V3_KEY, qo as getResourcePermissions, rs as VIEWS, zs as WORKFLOW_HISTORY_VERSION_UNPUBLISH } from "./constants-RiJkz47J.js";
import "./merge-CLls_idn.js";
import { N as storeToRefs, j as defineStore } from "./_baseOrderBy-BE23B-S3.js";
import { t as useBannersStore } from "./banners.store-DdxlUUS2.js";
import { t as require_dateformat } from "./dateformat-Bc6vycUF.js";
import { n as require_debounce, t as useDebounce } from "./useDebounce-BghtiK4X.js";
import "./useEnvFeatureFlag-B-aCettH.js";
import "./uniqBy-MGaViHTj.js";
import "./nodeIcon-BqHYqRCI.js";
import { t as useFoldersStore } from "./folders.store-BY8Vuq5D.js";
import "./ProjectIcon-DSgmszLL.js";
import { t as ProjectCardBadge_default } from "./ProjectCardBadge-p0qAUpem.js";
import { t as useUsageStore } from "./usage.store-Dg91y7Cn.js";
import { t as useDynamicCredentials } from "./useDynamicCredentials-DoTPXWtP.js";
import { t as Draggable_default } from "./Draggable-BEBeE6ai.js";
import { t as NodeIcon_default } from "./NodeIcon-BdHBfPBt.js";
import "./pushConnection.store-DEbstjnC.js";
import "./nodeTransforms-D3mSzcq-.js";
import "./collaboration.store-NTtbhQMS.js";
import "./EnterpriseEdition.ee-BywnkH9A.js";
import { t as TimeAgo_default } from "./TimeAgo-DXYgDjKy.js";
import "./orderBy-Dox6KsmS.js";
import "./ProjectSharing-B3l0no-g.js";
import "./TagsDropdown-BNCsZvMf.js";
import { t as WorkflowTagsDropdown_default } from "./WorkflowTagsDropdown-Bp150m0d.js";
import { t as useInsightsStore } from "./insights.store-CLtsoNb5.js";
import "./insights.constants-DxLIjLji.js";
import "./insights.utils-BASoBGEw.js";
import "./templateTransforms-Cm6fDsYc.js";
import { t as useMcp } from "./useMcp-DH5GXgOW.js";
import { n as usePersonalizedTemplatesV3Store, r as usePersonalizedTemplatesV2Store, t as require_shuffle } from "./shuffle-DPtLM7ij.js";
import { t as useWorkflowActivate } from "./useWorkflowActivate-DsrXBqKN.js";
import "./values-BWUEBd1x.js";
import { r as useProjectPages, t as useReadyToRunStore } from "./readyToRun.store-2wJgp99Y.js";
import { t as useAITemplatesStarterCollectionStore } from "./aiTemplatesStarterCollection.store-D7vqaGyU.js";
import { n as useReadyToRunWorkflowsStore, t as FolderBreadcrumbs_default } from "./FolderBreadcrumbs-CHStNoyV.js";
import "./ProjectBreadcrumb-DnKbX_sP.js";
import { t as useEmptyStateBuilderPromptStore } from "./emptyStateBuilderPrompt.store-BIlqr1k9.js";
import { t as EmptySharedSectionActionBox_default } from "./EmptySharedSectionActionBox-BilwIHEM.js";
import { t as ResourcesListLayout_default } from "./ResourcesListLayout-B2EkUQyX.js";
import "./ResourceFiltersDropdown-C1uZCyHU.js";
import { n as ReadyToRunButton_default, t as ProjectHeader_default } from "./ProjectHeader-DtGEmwXm.js";
import { t as useMCPStore } from "./mcp.store-0ihaMOw4.js";
import { n as NUMBER_OF_TEMPLATES, r as useRecommendedTemplatesStore, t as RecommendedTemplateCard_default } from "./RecommendedTemplateCard-kBAbCoII.js";
import { t as InsightsSummary_default } from "./InsightsSummary-oiZ6M6xu.js";
var _hoisted_1$5 = { "data-test-id": "folder-card" };
var _hoisted_2$1 = { key: 0 };
var FolderCard_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "FolderCard",
	props: {
		data: {},
		personalProject: {},
		actions: { default: () => [] },
		readOnly: {
			type: Boolean,
			default: true
		},
		showOwnershipBadge: {
			type: Boolean,
			default: false
		}
	},
	emits: ["action", "folderOpened"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const i18n = useI18n();
		const route = useRoute();
		const router = useRouter();
		const foldersStore = useFoldersStore();
		const emit = __emit;
		const hiddenBreadcrumbsItemsAsync = ref(new Promise(() => {}));
		const cachedHiddenBreadcrumbsItems = ref([]);
		const resourceTypeLabel = computed(() => i18n.baseText("generic.folder").toLowerCase());
		const cardUrl = computed(() => {
			return getFolderUrl(props.data.id);
		});
		const projectName = computed(() => {
			if (props.data.homeProject?.type === ProjectTypes.Personal) return i18n.baseText("projects.menu.personal");
			return props.data.homeProject?.name;
		});
		const cardBreadcrumbs = computed(() => {
			if (props.data.parentFolder) return [{
				id: props.data.parentFolder.id,
				name: props.data.parentFolder.name,
				label: props.data.parentFolder.name,
				href: router.resolve({
					name: VIEWS.PROJECTS_FOLDERS,
					params: {
						projectId: props.data.homeProject?.id,
						folderId: props.data.parentFolder.id
					}
				}).href
			}];
			return [];
		});
		const showCardBreadcrumbs = computed(() => {
			return props.showOwnershipBadge && cardBreadcrumbs.value.length;
		});
		const getFolderUrl = (folderId) => {
			return router.resolve({
				name: VIEWS.PROJECTS_FOLDERS,
				params: {
					projectId: route.params.projectId,
					folderId
				},
				query: route.query
			}).href;
		};
		const onAction = async (action) => {
			if (action === FOLDER_LIST_ITEM_ACTIONS.OPEN) {
				emit("folderOpened", { folder: props.data });
				await router.push(cardUrl.value);
				return;
			}
			emit("action", {
				action,
				folderId: props.data.id
			});
		};
		const fetchHiddenBreadCrumbsItems = async () => {
			if (!props.data.homeProject?.id || !projectName.value || !props.data.parentFolder) hiddenBreadcrumbsItemsAsync.value = Promise.resolve([]);
			else {
				if (cachedHiddenBreadcrumbsItems.value.length) {
					hiddenBreadcrumbsItemsAsync.value = Promise.resolve(cachedHiddenBreadcrumbsItems.value);
					return;
				}
				const loadedItem = foldersStore.getHiddenBreadcrumbsItems({
					id: props.data.homeProject.id,
					name: projectName.value
				}, props.data.parentFolder.id);
				hiddenBreadcrumbsItemsAsync.value = loadedItem;
				cachedHiddenBreadcrumbsItems.value = await loadedItem;
			}
		};
		const onBreadcrumbItemClick = async (item) => {
			if (item.href) await router.push(item.href);
		};
		return (_ctx, _cache) => {
			const _component_RouterLink = resolveComponent("RouterLink");
			return openBlock(), createElementBlock("div", _hoisted_1$5, [createVNode(_component_RouterLink, {
				to: cardUrl.value,
				onClick: _cache[1] || (_cache[1] = () => emit("folderOpened", { folder: props.data }))
			}, {
				default: withCtx(() => [createVNode(unref(N8nCard_default), { class: normalizeClass(_ctx.$style.card) }, {
					prepend: withCtx(() => [createVNode(unref(N8nIcon_default), {
						"data-test-id": "folder-card-icon",
						class: normalizeClass(_ctx.$style["folder-icon"]),
						icon: "folder",
						size: "xlarge",
						"stroke-width": 1
					}, null, 8, ["class"])]),
					header: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["card-header"]) }, [createVNode(unref(N8nHeading_default), {
						tag: "h2",
						bold: "",
						size: "small",
						"data-test-id": "folder-card-name"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(__props.data.name), 1)]),
						_: 1
					}), __props.readOnly ? (openBlock(), createBlock(unref(N8nBadge_default), {
						key: 0,
						class: "ml-3xs",
						theme: "tertiary",
						bold: ""
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("workflows.item.readonly")), 1)]),
						_: 1
					})) : createCommentVNode("", true)], 2)]),
					footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["card-footer"]) }, [
						__props.data.workflowCount > 0 ? (openBlock(), createBlock(unref(N8nText_default), {
							key: 0,
							size: "small",
							color: "text-light",
							class: normalizeClass([_ctx.$style["info-cell"], _ctx.$style["info-cell--workflow-count"]]),
							"data-test-id": "folder-card-folder-count"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("generic.workflow", { interpolate: { count: __props.data.workflowCount } })), 1)]),
							_: 1
						}, 8, ["class"])) : createCommentVNode("", true),
						__props.data.subFolderCount > 0 ? (openBlock(), createBlock(unref(N8nText_default), {
							key: 1,
							size: "small",
							color: "text-light",
							class: normalizeClass([_ctx.$style["info-cell"], _ctx.$style["info-cell--workflow-count"]]),
							"data-test-id": "folder-card-workflow-count"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("generic.folderCount", { interpolate: { count: __props.data.subFolderCount } })), 1)]),
							_: 1
						}, 8, ["class"])) : createCommentVNode("", true),
						createVNode(unref(N8nText_default), {
							size: "small",
							color: "text-light",
							class: normalizeClass([_ctx.$style["info-cell"], _ctx.$style["info-cell--updated"]]),
							"data-test-id": "folder-card-last-updated"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("workerList.item.lastUpdated")) + " ", 1), createVNode(TimeAgo_default, { date: String(__props.data.updatedAt) }, null, 8, ["date"])]),
							_: 1
						}, 8, ["class"]),
						createVNode(unref(N8nText_default), {
							size: "small",
							color: "text-light",
							class: normalizeClass([_ctx.$style["info-cell"], _ctx.$style["info-cell--created"]]),
							"data-test-id": "folder-card-created"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("workflows.item.created")) + " ", 1), createVNode(TimeAgo_default, { date: String(__props.data.createdAt) }, null, 8, ["date"])]),
							_: 1
						}, 8, ["class"])
					], 2)]),
					append: withCtx(() => [createBaseVNode("div", {
						class: normalizeClass(_ctx.$style["card-actions"]),
						onClick: _cache[0] || (_cache[0] = withModifiers(() => {}, ["prevent"]))
					}, [__props.data.homeProject && __props.showOwnershipBadge ? (openBlock(), createElementBlock("div", _hoisted_2$1, [createVNode(ProjectCardBadge_default, {
						class: normalizeClass({
							[_ctx.$style.cardBadge]: true,
							[_ctx.$style["with-breadcrumbs"]]: showCardBreadcrumbs.value
						}),
						resource: __props.data,
						"resource-type": unref(ResourceType).Workflow,
						"resource-type-label": resourceTypeLabel.value,
						"personal-project": __props.personalProject,
						"show-badge-border": false
					}, {
						default: withCtx(() => [showCardBreadcrumbs.value ? (openBlock(), createElementBlock("div", {
							key: 0,
							class: normalizeClass(_ctx.$style.breadcrumbs)
						}, [createVNode(unref(N8nBreadcrumbs_default), {
							items: cardBreadcrumbs.value,
							"hidden-items": __props.data.parentFolder?.parentFolderId !== null ? hiddenBreadcrumbsItemsAsync.value : void 0,
							"path-truncated": __props.data.parentFolder?.parentFolderId !== null,
							"highlight-last-item": false,
							"hidden-items-trigger": "hover",
							theme: "small",
							"data-test-id": "folder-card-breadcrumbs",
							onTooltipOpened: fetchHiddenBreadCrumbsItems,
							onItemSelected: onBreadcrumbItemClick
						}, {
							prepend: withCtx(() => [..._cache[2] || (_cache[2] = [])]),
							_: 1
						}, 8, [
							"items",
							"hidden-items",
							"path-truncated"
						])], 2)) : createCommentVNode("", true)]),
						_: 1
					}, 8, [
						"class",
						"resource",
						"resource-type",
						"resource-type-label",
						"personal-project"
					])])) : createCommentVNode("", true), __props.actions.length ? (openBlock(), createBlock(unref(N8nActionToggle_default), {
						key: 1,
						actions: __props.actions,
						theme: "dark",
						"data-test-id": "folder-card-actions",
						onAction
					}, null, 8, ["actions"])) : createCommentVNode("", true)], 2)]),
					_: 1
				}, 8, ["class"])]),
				_: 1
			}, 8, ["to"])]);
		};
	}
});
const card$1 = "_card_mp6zu_125";
const cardBadge$1 = "_cardBadge_mp6zu_159";
var FolderCard_vue_vue_type_style_index_0_lang_module_default = {
	card: card$1,
	"folder-icon": "_folder-icon_mp6zu_133",
	"card-header": "_card-header_mp6zu_142",
	"card-footer": "_card-footer_mp6zu_150",
	"info-cell": "_info-cell_mp6zu_154",
	cardBadge: cardBadge$1,
	"with-breadcrumbs": "_with-breadcrumbs_mp6zu_159",
	"card-actions": "_card-actions_mp6zu_166",
	"info-cell--created": "_info-cell--created_mp6zu_184"
};
var FolderCard_default = /* @__PURE__ */ __plugin_vue_export_helper_default(FolderCard_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": FolderCard_vue_vue_type_style_index_0_lang_module_default }]]);
var import_dateformat = /* @__PURE__ */ __toESM(require_dateformat(), 1);
var _hoisted_1$4 = { key: 0 };
var WorkflowCard_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowCard",
	props: {
		data: {},
		readOnly: {
			type: Boolean,
			default: false
		},
		workflowListEventBus: { default: void 0 },
		showOwnershipBadge: {
			type: Boolean,
			default: false
		},
		areTagsEnabled: {
			type: Boolean,
			default: true
		},
		isMcpEnabled: {
			type: Boolean,
			default: false
		},
		areFoldersEnabled: {
			type: Boolean,
			default: false
		}
	},
	emits: [
		"expand:tags",
		"click:tag",
		"workflow:deleted",
		"workflow:archived",
		"workflow:unarchived",
		"workflow:unpublished",
		"workflow:active-toggle",
		"action:move-to-folder"
	],
	setup(__props, { emit: __emit }) {
		const WORKFLOW_LIST_ITEM_ACTIONS = {
			OPEN: "open",
			SHARE: "share",
			DUPLICATE: "duplicate",
			DELETE: "delete",
			ARCHIVE: "archive",
			UNARCHIVE: "unarchive",
			MOVE: "move",
			MOVE_TO_FOLDER: "moveToFolder",
			ENABLE_MCP_ACCESS: "enableMCPAccess",
			REMOVE_MCP_ACCESS: "removeMCPAccess",
			UNPUBLISH: "unpublish"
		};
		const props = __props;
		const emit = __emit;
		const toast = useToast();
		const message = useMessage();
		const locale = useI18n();
		const router = useRouter();
		const route = useRoute();
		const telemetry = useTelemetry();
		const mcp = useMcp();
		const { isEnabled: isDynamicCredentialsEnabled } = useDynamicCredentials();
		const uiStore = useUIStore();
		const usersStore = useUsersStore();
		const workflowsStore = useWorkflowsStore();
		const workflowsListStore = useWorkflowsListStore();
		const projectsStore = useProjectsStore();
		const foldersStore = useFoldersStore();
		const mcpStore = useMCPStore();
		const workflowActivate = useWorkflowActivate();
		const hiddenBreadcrumbsItemsAsync = ref(new Promise(() => {}));
		const cachedHiddenBreadcrumbsItems = ref([]);
		const mcpToggleStatus = ref(null);
		const resourceTypeLabel = computed(() => locale.baseText("generic.workflow").toLowerCase());
		const currentUser = computed(() => usersStore.currentUser ?? {});
		const workflowPermissions = computed(() => getResourcePermissions(props.data.scopes).workflow);
		const globalPermissions = computed(() => getResourcePermissions(usersStore.currentUser?.globalScopes).workflow);
		const projectPermissions = computed(() => getResourcePermissions(projectsStore.myProjects?.find((p) => props.data.homeProject?.id === p.id)?.scopes).workflow);
		const canCreateWorkflow = computed(() => globalPermissions.value.create ?? projectPermissions.value.create);
		const showCardBreadcrumbs = computed(() => {
			return props.showOwnershipBadge && !isSomeoneElsesWorkflow.value && cardBreadcrumbs.value.length;
		});
		const projectName = computed(() => {
			if (props.data.homeProject?.type === ProjectTypes.Personal) return locale.baseText("projects.menu.personal");
			return props.data.homeProject?.name;
		});
		const cardBreadcrumbs = computed(() => {
			if (props.data.parentFolder) return [{
				id: props.data.parentFolder.id,
				name: props.data.parentFolder.name,
				label: props.data.parentFolder.name,
				href: router.resolve({
					name: VIEWS.PROJECTS_FOLDERS,
					params: {
						projectId: props.data.homeProject?.id,
						folderId: props.data.parentFolder.id
					}
				}).href
			}];
			return [];
		});
		const actions = computed(() => {
			const items = [{
				label: locale.baseText("workflows.item.open"),
				value: WORKFLOW_LIST_ITEM_ACTIONS.OPEN
			}, {
				label: locale.baseText("workflows.item.share"),
				value: WORKFLOW_LIST_ITEM_ACTIONS.SHARE
			}];
			if (workflowPermissions.value.read && canCreateWorkflow.value && !props.readOnly && !props.data.isArchived) items.push({
				label: locale.baseText("workflows.item.duplicate"),
				value: WORKFLOW_LIST_ITEM_ACTIONS.DUPLICATE
			});
			if (!props.readOnly && props.areFoldersEnabled && (workflowPermissions.value.update || workflowPermissions.value.move && projectsStore.isTeamProjectFeatureEnabled) && route.name !== VIEWS.SHARED_WORKFLOWS) items.push({
				label: locale.baseText("folders.actions.moveToFolder"),
				value: WORKFLOW_LIST_ITEM_ACTIONS.MOVE_TO_FOLDER
			});
			if (workflowPermissions.value.delete && !props.readOnly) if (!props.data.isArchived) items.push({
				label: locale.baseText("workflows.item.archive"),
				value: WORKFLOW_LIST_ITEM_ACTIONS.ARCHIVE
			});
			else {
				items.push({
					label: locale.baseText("workflows.item.delete"),
					value: WORKFLOW_LIST_ITEM_ACTIONS.DELETE
				});
				items.push({
					label: locale.baseText("workflows.item.unarchive"),
					value: WORKFLOW_LIST_ITEM_ACTIONS.UNARCHIVE
				});
			}
			if (isWorkflowPublished.value && workflowPermissions.value.update && !props.readOnly && !props.data.isArchived) items.push({
				label: locale.baseText("menuActions.unpublish"),
				value: WORKFLOW_LIST_ITEM_ACTIONS.UNPUBLISH
			});
			if (props.isMcpEnabled && workflowPermissions.value.update && !props.readOnly && !props.data.isArchived) if (isAvailableInMCP.value) items.push({
				label: locale.baseText("workflows.item.disableMCPAccess"),
				value: WORKFLOW_LIST_ITEM_ACTIONS.REMOVE_MCP_ACCESS,
				disabled: !props.data.active
			});
			else items.push({
				label: locale.baseText("workflows.item.enableMCPAccess"),
				value: WORKFLOW_LIST_ITEM_ACTIONS.ENABLE_MCP_ACCESS,
				disabled: !props.data.active
			});
			return items;
		});
		const formattedCreatedAtDate = computed(() => {
			const currentYear = (/* @__PURE__ */ new Date()).getFullYear().toString();
			return (0, import_dateformat.default)(props.data.createdAt, `d mmmm${String(props.data.createdAt).startsWith(currentYear) ? "" : ", yyyy"}`);
		});
		const isAvailableInMCP = computed(() => {
			if (mcpToggleStatus.value === null) return props.data.settings?.availableInMCP ?? false;
			return mcpToggleStatus.value;
		});
		const isSomeoneElsesWorkflow = computed(() => props.data.homeProject?.type !== ProjectTypes.Team && props.data.homeProject?.id !== projectsStore.personalProject?.id);
		const isWorkflowPublished = computed(() => {
			return props.data.activeVersionId !== null;
		});
		const hasDynamicCredentials = computed(() => {
			return isDynamicCredentialsEnabled.value && props.data.hasResolvableCredentials;
		});
		const isResolverMissing = computed(() => {
			return isDynamicCredentialsEnabled.value && props.data.hasResolvableCredentials && !props.data.settings?.credentialResolverId;
		});
		async function onClick(event) {
			if (event?.ctrlKey || event?.metaKey) {
				const route$1 = router.resolve({
					name: VIEWS.WORKFLOW,
					params: { name: props.data.id }
				});
				window.open(route$1.href, "_blank");
				return;
			}
			await router.push({
				name: VIEWS.WORKFLOW,
				params: { name: props.data.id }
			});
		}
		function onClickTag(tagId, event) {
			event.stopPropagation();
			emit("click:tag", tagId, event);
		}
		function onExpandTags() {
			emit("expand:tags");
		}
		async function onAction(action) {
			switch (action) {
				case WORKFLOW_LIST_ITEM_ACTIONS.OPEN:
					await onClick();
					break;
				case WORKFLOW_LIST_ITEM_ACTIONS.DUPLICATE:
					uiStore.openModalWithData({
						name: DUPLICATE_MODAL_KEY,
						data: {
							id: props.data.id,
							name: props.data.name,
							tags: (props.data.tags ?? []).map((tag) => typeof tag !== "string" && "id" in tag ? tag.id : tag),
							externalEventBus: props.workflowListEventBus,
							parentFolderId: props.data.parentFolder?.id
						}
					});
					break;
				case WORKFLOW_LIST_ITEM_ACTIONS.SHARE:
					uiStore.openModalWithData({
						name: WORKFLOW_SHARE_MODAL_KEY,
						data: { id: props.data.id }
					});
					telemetry.track("User opened sharing modal", {
						workflow_id: props.data.id,
						user_id_sharer: currentUser.value.id,
						sub_view: "Workflows listing"
					});
					break;
				case WORKFLOW_LIST_ITEM_ACTIONS.DELETE:
					await deleteWorkflow();
					break;
				case WORKFLOW_LIST_ITEM_ACTIONS.ARCHIVE:
					await archiveWorkflow();
					break;
				case WORKFLOW_LIST_ITEM_ACTIONS.UNARCHIVE:
					await unarchiveWorkflow();
					break;
				case WORKFLOW_LIST_ITEM_ACTIONS.MOVE:
					moveResource();
					break;
				case WORKFLOW_LIST_ITEM_ACTIONS.MOVE_TO_FOLDER:
					emit("action:move-to-folder", {
						id: props.data.id,
						name: props.data.name,
						parentFolderId: props.data.parentFolder?.id,
						sharedWithProjects: props.data.sharedWithProjects,
						homeProjectId: props.data.homeProject?.id
					});
					break;
				case WORKFLOW_LIST_ITEM_ACTIONS.ENABLE_MCP_ACCESS:
					await toggleMCPAccess(true);
					break;
				case WORKFLOW_LIST_ITEM_ACTIONS.REMOVE_MCP_ACCESS:
					await toggleMCPAccess(false);
					break;
				case WORKFLOW_LIST_ITEM_ACTIONS.UNPUBLISH:
					await unpublishWorkflow();
					break;
			}
		}
		async function unpublishWorkflow() {
			if (!props.data.activeVersionId) {
				toast.showMessage({
					title: locale.baseText("workflowHistory.action.unpublish.notAvailable"),
					type: "warning"
				});
				return;
			}
			const unpublishEventBus = createEventBus();
			unpublishEventBus.once("unpublish", async () => {
				const success = await workflowActivate.unpublishWorkflowFromHistory(props.data.id);
				uiStore.closeModal(WORKFLOW_HISTORY_VERSION_UNPUBLISH);
				if (success) {
					emit("workflow:unpublished", { id: props.data.id });
					toast.showMessage({
						title: locale.baseText("workflowHistory.action.unpublish.success.title"),
						type: "success"
					});
				}
			});
			uiStore.openModalWithData({
				name: WORKFLOW_HISTORY_VERSION_UNPUBLISH,
				data: {
					versionName: props.data.name,
					eventBus: unpublishEventBus
				}
			});
		}
		async function toggleMCPAccess(enabled) {
			try {
				await mcpStore.toggleWorkflowMcpAccess(props.data.id, enabled);
				mcpToggleStatus.value = enabled;
				mcp.trackMcpAccessEnabledForWorkflow(props.data.id);
			} catch (error) {
				toast.showError(error, locale.baseText("workflowSettings.toggleMCP.error.title"));
				return;
			}
		}
		async function deleteWorkflow() {
			if (await message.confirm(locale.baseText("mainSidebar.confirmMessage.workflowDelete.message", { interpolate: { workflowName: props.data.name } }), locale.baseText("mainSidebar.confirmMessage.workflowDelete.headline"), {
				type: "warning",
				confirmButtonText: locale.baseText("mainSidebar.confirmMessage.workflowDelete.confirmButtonText"),
				cancelButtonText: locale.baseText("mainSidebar.confirmMessage.workflowDelete.cancelButtonText")
			}) !== "confirm") return;
			try {
				await workflowsListStore.deleteWorkflow(props.data.id);
			} catch (error) {
				toast.showError(error, locale.baseText("generic.deleteWorkflowError"));
				return;
			}
			toast.showMessage({
				title: locale.baseText("mainSidebar.showMessage.handleSelect1.title", { interpolate: { workflowName: props.data.name } }),
				type: "success"
			});
			emit("workflow:deleted");
		}
		async function archiveWorkflow() {
			if (props.data.active) {
				if (await message.confirm(locale.baseText("mainSidebar.confirmMessage.workflowArchive.message", { interpolate: { workflowName: props.data.name } }), locale.baseText("mainSidebar.confirmMessage.workflowArchive.headline"), {
					type: "warning",
					confirmButtonText: locale.baseText("mainSidebar.confirmMessage.workflowArchive.confirmButtonText"),
					cancelButtonText: locale.baseText("mainSidebar.confirmMessage.workflowArchive.cancelButtonText")
				}) !== "confirm") return;
			}
			try {
				await workflowsStore.archiveWorkflow(props.data.id);
			} catch (error) {
				toast.showError(error, locale.baseText("generic.archiveWorkflowError"));
				return;
			}
			toast.showMessage({
				title: locale.baseText("mainSidebar.showMessage.handleArchive.title", { interpolate: { workflowName: props.data.name } }),
				type: "success"
			});
			emit("workflow:archived");
		}
		async function unarchiveWorkflow() {
			try {
				await workflowsStore.unarchiveWorkflow(props.data.id);
			} catch (error) {
				toast.showError(error, locale.baseText("generic.unarchiveWorkflowError"));
				return;
			}
			toast.showMessage({
				title: locale.baseText("mainSidebar.showMessage.handleUnarchive.title", { interpolate: { workflowName: props.data.name } }),
				type: "success"
			});
			emit("workflow:unarchived");
		}
		const fetchHiddenBreadCrumbsItems = async () => {
			if (!props.data.homeProject?.id || !projectName.value || !props.data.parentFolder) hiddenBreadcrumbsItemsAsync.value = Promise.resolve([]);
			else {
				if (cachedHiddenBreadcrumbsItems.value.length) {
					hiddenBreadcrumbsItemsAsync.value = Promise.resolve(cachedHiddenBreadcrumbsItems.value);
					return;
				}
				const loadedItem = foldersStore.getHiddenBreadcrumbsItems({
					id: props.data.homeProject.id,
					name: projectName.value
				}, props.data.parentFolder.id);
				hiddenBreadcrumbsItemsAsync.value = loadedItem;
				cachedHiddenBreadcrumbsItems.value = await loadedItem;
			}
		};
		function moveResource() {
			uiStore.openModalWithData({
				name: PROJECT_MOVE_RESOURCE_MODAL,
				data: {
					resource: props.data,
					resourceType: ResourceType.Workflow,
					resourceTypeLabel: resourceTypeLabel.value,
					eventBus: props.workflowListEventBus
				}
			});
		}
		const onBreadcrumbItemClick = async (item) => {
			if (item.href) await router.push(item.href);
		};
		const tags = computed(() => props.data.tags?.map((tag) => typeof tag === "string" ? {
			id: tag,
			name: tag
		} : tag) ?? []);
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(N8nCard_default), {
				class: normalizeClass({
					[_ctx.$style.cardLink]: true,
					[_ctx.$style.cardArchived]: __props.data.isArchived
				}),
				"data-test-id": "workflow-card",
				onClick
			}, {
				header: withCtx(() => [createVNode(unref(N8nText_default), {
					tag: "h2",
					bold: "",
					class: normalizeClass({
						[_ctx.$style.cardHeading]: true,
						[_ctx.$style.cardHeadingArchived]: __props.data.isArchived
					}),
					"data-test-id": "workflow-card-name"
				}, {
					default: withCtx(() => [
						createTextVNode(toDisplayString(__props.data.name) + " ", 1),
						!workflowPermissions.value.update ? (openBlock(), createBlock(unref(N8nBadge_default), {
							key: 0,
							class: "ml-3xs",
							theme: "tertiary",
							bold: ""
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.item.readonly")), 1)]),
							_: 1
						})) : createCommentVNode("", true),
						hasDynamicCredentials.value ? (openBlock(), createBlock(unref(N8nTooltip_default), {
							key: 1,
							placement: "top"
						}, {
							content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.tooltipContent) }, [createBaseVNode("strong", null, toDisplayString(unref(locale).baseText("workflows.dynamic.tooltipTitle")), 1), createBaseVNode("span", null, toDisplayString(unref(locale).baseText("workflows.dynamic.tooltip")), 1)], 2)]),
							default: withCtx(() => [createVNode(unref(N8nBadge_default), {
								theme: "tertiary",
								class: "ml-3xs pl-3xs pr-3xs",
								"data-test-id": "workflow-card-dynamic-credentials"
							}, {
								default: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style.dynamicBadgeText) }, [createVNode(unref(N8nIcon_default), {
									icon: "key-round",
									size: "medium"
								}), createTextVNode(" " + toDisplayString(unref(locale).baseText("credentials.dynamic.badge")), 1)], 2)]),
								_: 1
							})]),
							_: 1
						})) : createCommentVNode("", true),
						isResolverMissing.value ? (openBlock(), createBlock(unref(N8nBadge_default), {
							key: 2,
							theme: "warning",
							class: "ml-3xs pl-3xs pr-3xs",
							"data-test-id": "workflow-card-resolver-missing"
						}, {
							default: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style.resolverMissingBadge) }, toDisplayString(unref(locale).baseText("workflows.dynamic.resolverMissing")), 3)]),
							_: 1
						})) : createCommentVNode("", true)
					]),
					_: 1
				}, 8, ["class"])]),
				append: withCtx(() => [createBaseVNode("div", {
					class: normalizeClass(_ctx.$style.cardActions),
					onClick: _cache[0] || (_cache[0] = withModifiers(() => {}, ["stop"]))
				}, [
					__props.showOwnershipBadge ? (openBlock(), createBlock(ProjectCardBadge_default, {
						key: 0,
						class: normalizeClass({
							[_ctx.$style.cardBadge]: true,
							[_ctx.$style["with-breadcrumbs"]]: showCardBreadcrumbs.value
						}),
						resource: __props.data,
						"resource-type": unref(ResourceType).Workflow,
						"resource-type-label": resourceTypeLabel.value,
						"personal-project": unref(projectsStore).personalProject,
						"show-badge-border": false
					}, {
						default: withCtx(() => [showCardBreadcrumbs.value ? (openBlock(), createElementBlock("div", {
							key: 0,
							class: normalizeClass(_ctx.$style.breadcrumbs)
						}, [createVNode(unref(N8nBreadcrumbs_default), {
							items: cardBreadcrumbs.value,
							"hidden-items": __props.data.parentFolder?.parentFolderId !== null ? hiddenBreadcrumbsItemsAsync.value : void 0,
							"path-truncated": __props.data.parentFolder?.parentFolderId !== null,
							"highlight-last-item": false,
							"hidden-items-trigger": "hover",
							theme: "small",
							"data-test-id": "workflow-card-breadcrumbs",
							onTooltipOpened: fetchHiddenBreadCrumbsItems,
							onItemSelected: onBreadcrumbItemClick
						}, {
							prepend: withCtx(() => [..._cache[2] || (_cache[2] = [])]),
							_: 1
						}, 8, [
							"items",
							"hidden-items",
							"path-truncated"
						])], 2)) : createCommentVNode("", true)]),
						_: 1
					}, 8, [
						"class",
						"resource",
						"resource-type",
						"resource-type-label",
						"personal-project"
					])) : createCommentVNode("", true),
					__props.data.isArchived ? (openBlock(), createBlock(unref(N8nText_default), {
						key: 1,
						color: "text-light",
						size: "small",
						bold: "",
						class: "ml-s mr-s",
						"data-test-id": "workflow-card-archived"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.item.archived")), 1)]),
						_: 1
					})) : isWorkflowPublished.value ? (openBlock(), createElementBlock("div", {
						key: 2,
						class: normalizeClass(_ctx.$style.publishIndicator),
						"data-test-id": "workflow-card-publish-indicator"
					}, [createBaseVNode("span", { class: normalizeClass(_ctx.$style.publishIndicatorDot) }, null, 2), createVNode(unref(N8nText_default), {
						size: "small",
						color: "text-base"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.published")), 1)]),
						_: 1
					})], 2)) : createCommentVNode("", true),
					createVNode(unref(N8nActionToggle_default), {
						actions: actions.value,
						theme: "dark",
						"data-test-id": "workflow-card-actions",
						onAction
					}, null, 8, ["actions"])
				], 2)]),
				default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.cardDescription) }, [
					withDirectives(createBaseVNode("span", null, [
						createTextVNode(toDisplayString(unref(locale).baseText("workflows.item.updated")) + " ", 1),
						createVNode(TimeAgo_default, { date: String(__props.data.updatedAt) }, null, 8, ["date"]),
						_cache[1] || (_cache[1] = createTextVNode(" | ", -1))
					], 512), [[vShow, __props.data]]),
					withDirectives(createBaseVNode("span", null, [createTextVNode(toDisplayString(unref(locale).baseText("workflows.item.created")) + " " + toDisplayString(formattedCreatedAtDate.value) + " ", 1), props.isMcpEnabled && isAvailableInMCP.value ? (openBlock(), createElementBlock("span", _hoisted_1$4, "|")) : createCommentVNode("", true)], 512), [[vShow, __props.data]]),
					withDirectives(createBaseVNode("span", {
						class: normalizeClass([_ctx.$style["description-cell"], _ctx.$style["description-cell--mcp"]]),
						"data-test-id": "workflow-card-mcp"
					}, [createVNode(unref(N8nTooltip_default), {
						placement: "right",
						content: unref(locale).baseText("workflows.item.availableInMCP"),
						"data-test-id": "workflow-card-mcp-tooltip"
					}, {
						default: withCtx(() => [createVNode(unref(N8nIcon_default), {
							icon: "mcp",
							size: "medium"
						})]),
						_: 1
					}, 8, ["content"])], 2), [[vShow, props.isMcpEnabled && isAvailableInMCP.value]]),
					props.areTagsEnabled && __props.data.tags && __props.data.tags.length > 0 ? withDirectives((openBlock(), createElementBlock("span", {
						key: 0,
						class: normalizeClass(_ctx.$style.cardTags)
					}, [createVNode(unref(N8nTags_default), {
						tags: tags.value,
						"truncate-at": 3,
						truncate: "",
						"data-test-id": "workflow-card-tags",
						"onClick:tag": onClickTag,
						onExpand: onExpandTags
					}, null, 8, ["tags"])], 2)), [[vShow, __props.data]]) : createCommentVNode("", true)
				], 2)]),
				_: 1
			}, 8, ["class"]);
		};
	}
});
const cardLink = "_cardLink_fcosa_125";
const cardHeading = "_cardHeading_fcosa_135";
const cardHeadingArchived = "_cardHeadingArchived_fcosa_143";
const cardDescription = "_cardDescription_fcosa_151";
const cardTags = "_cardTags_fcosa_161";
const cardActions = "_cardActions_fcosa_166";
const cardBadge = "_cardBadge_fcosa_177";
const cardArchived = "_cardArchived_fcosa_188";
const dynamicBadgeText = "_dynamicBadgeText_fcosa_202";
const resolverMissingBadge = "_resolverMissingBadge_fcosa_210";
const tooltipContent = "_tooltipContent_fcosa_218";
const publishIndicator = "_publishIndicator_fcosa_224";
const publishIndicatorDot = "_publishIndicatorDot_fcosa_237";
const breadcrumbs = "_breadcrumbs_fcosa_256";
var WorkflowCard_vue_vue_type_style_index_0_lang_module_default = {
	cardLink,
	cardHeading,
	cardHeadingArchived,
	"description-popper": "_description-popper_fcosa_147",
	cardDescription,
	cardTags,
	cardActions,
	cardBadge,
	"with-breadcrumbs": "_with-breadcrumbs_fcosa_181",
	cardArchived,
	"description-cell--mcp": "_description-cell--mcp_fcosa_194",
	dynamicBadgeText,
	resolverMissingBadge,
	tooltipContent,
	publishIndicator,
	publishIndicatorDot,
	breadcrumbs
};
var WorkflowCard_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowCard_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowCard_vue_vue_type_style_index_0_lang_module_default }]]);
var DEFAULT_EDGE = 80;
var DEFAULT_MAX_SPEED = 20;
function useAutoScrollOnDrag(options) {
	let frameId;
	let scrollStep = 0;
	const edgeSize = options.edgeSize ?? DEFAULT_EDGE;
	const maxSpeed = options.maxSpeed ?? DEFAULT_MAX_SPEED;
	const stopScrolling = () => {
		scrollStep = 0;
		if (frameId !== void 0) {
			cancelAnimationFrame(frameId);
			frameId = void 0;
		}
	};
	const step = () => {
		const container$2 = options.container.value;
		if (!container$2 || scrollStep === 0) {
			frameId = void 0;
			return;
		}
		container$2.scrollBy({ top: scrollStep });
		frameId = requestAnimationFrame(step);
	};
	const startScrolling = (delta) => {
		scrollStep = delta;
		frameId ??= requestAnimationFrame(step);
	};
	const handlePointerMove = (event) => {
		const container$2 = options.container.value;
		if (!container$2) {
			stopScrolling();
			return;
		}
		const { scrollHeight, clientHeight } = container$2;
		if (scrollHeight <= clientHeight) {
			stopScrolling();
			return;
		}
		const rect = container$2.getBoundingClientRect();
		const pointerY = event.clientY;
		let direction = 0;
		let distanceIntoEdge = 0;
		if (pointerY < rect.top) {
			direction = -1;
			distanceIntoEdge = edgeSize;
		} else if (pointerY > rect.bottom) {
			direction = 1;
			distanceIntoEdge = edgeSize;
		} else {
			const distanceToTop = pointerY - rect.top;
			const distanceToBottom = rect.bottom - pointerY;
			const isNearTop = distanceToTop < edgeSize;
			const isNearBottom = distanceToBottom < edgeSize;
			if (isNearTop || isNearBottom) if (!isNearBottom || distanceToTop <= distanceToBottom) {
				direction = -1;
				distanceIntoEdge = edgeSize - Math.min(distanceToTop, edgeSize);
			} else {
				direction = 1;
				distanceIntoEdge = edgeSize - Math.min(distanceToBottom, edgeSize);
			}
		}
		if (direction === 0) {
			stopScrolling();
			return;
		}
		const intensity = Math.min(distanceIntoEdge / edgeSize, 1);
		startScrolling(direction * Math.max(2, intensity * maxSpeed));
	};
	const addListeners = () => {
		window.addEventListener("mousemove", handlePointerMove);
	};
	const removeListeners = () => {
		window.removeEventListener("mousemove", handlePointerMove);
	};
	watch([options.isActive, options.container], ([isActive, container$2], _prev, onCleanup) => {
		removeListeners();
		stopScrolling();
		if (isActive && container$2) addListeners();
		onCleanup(() => {
			removeListeners();
			stopScrolling();
		});
	}, { immediate: true });
	onScopeDispose(() => {
		removeListeners();
		stopScrolling();
	});
}
function isDropTarget(target) {
	return target.type === "folder" || target.type === "project";
}
function isValidResourceType(value) {
	return [
		"folder",
		"workflow",
		"project"
	].includes(value);
}
function useFolders() {
	const i18n = useI18n();
	const foldersStore = useFoldersStore();
	const isDragging = computed(() => {
		return foldersStore.draggedElement !== null;
	});
	function validateFolderName(folderName) {
		if (FOLDER_NAME_ILLEGAL_CHARACTERS_REGEX.test(folderName)) return i18n.baseText("folders.invalidName.invalidCharacters.message", { interpolate: { illegalChars: ILLEGAL_FOLDER_CHARACTERS.join(" ") } });
		if (FOLDER_NAME_ONLY_DOTS_REGEX.test(folderName)) return i18n.baseText("folders.invalidName.only.dots.message");
		if (folderName.startsWith(".")) return i18n.baseText("folders.invalidName.starts.with.dot..message");
		if (folderName.trim() === "") return i18n.baseText("folders.invalidName.empty.message");
		if (folderName.length > 128) return i18n.baseText("folders.invalidName.tooLong.message", { interpolate: { maxLength: 128 } });
		return true;
	}
	function onDragStart(el) {
		const eventTarget = el.closest("[data-target]");
		if (!eventTarget) return;
		const dragTarget = getDragAndDropTarget(eventTarget);
		if (!dragTarget) return;
		if (dragTarget.type === "folder" || dragTarget.type === "workflow") {
			foldersStore.draggedElement = {
				type: dragTarget.type,
				id: dragTarget.id,
				name: dragTarget.name
			};
			document.body.classList.add("dragging-resource");
		}
	}
	function onDragEnd() {
		foldersStore.draggedElement = null;
		foldersStore.activeDropTarget = null;
		document.body.classList.remove("dragging-resource");
	}
	function onDragEnter(event) {
		const eventTarget = event.target;
		if (!eventTarget || !isDragging.value) return;
		event.preventDefault();
		event.stopPropagation();
		const dragTarget = getDragAndDropTarget(eventTarget);
		if (!dragTarget || dragTarget.type !== "folder") return;
		foldersStore.activeDropTarget = {
			type: dragTarget.type,
			id: dragTarget.id,
			name: dragTarget.name
		};
	}
	function resetDropTarget() {
		foldersStore.activeDropTarget = null;
	}
	function getDragAndDropTarget(el) {
		const dragTarget = el.closest("[data-target]");
		if (!dragTarget) return null;
		const targetResource = dragTarget.dataset.target;
		const targetId = dragTarget.dataset.resourceid;
		const targetName = dragTarget.dataset.resourcename;
		if (!targetResource || !targetId || !targetName || !isValidResourceType(targetResource)) return null;
		return {
			type: targetResource,
			id: targetId,
			name: targetName
		};
	}
	function handleDrop(event) {
		const eventTarget = event.target;
		if (!eventTarget || !isDragging.value) return {};
		event.preventDefault();
		const draggedResourceId = foldersStore.draggedElement?.id;
		const draggedResourceType = foldersStore.draggedElement?.type;
		const draggedResourceName = foldersStore.draggedElement?.name;
		if (!draggedResourceId || !draggedResourceType || !draggedResourceName) return {};
		onDragEnd();
		const dropTarget = getDragAndDropTarget(eventTarget);
		if (!dropTarget || !isDropTarget(dropTarget)) return {};
		return {
			draggedResource: {
				type: draggedResourceType,
				id: draggedResourceId,
				name: draggedResourceName
			},
			dropTarget: {
				type: dropTarget.type,
				id: dropTarget.id,
				name: dropTarget.name
			}
		};
	}
	return {
		validateFolderName,
		onDragStart,
		onDragEnd,
		onDragEnter,
		resetDropTarget,
		handleDrop
	};
}
var SIMPLE_TEMPLATES = [
	6270,
	5271,
	2178
];
var PREDEFINED_TEMPLATES_BY_NODE = {
	"n8n-nodes-base.gmail": [
		5678,
		4722,
		5694
	],
	"n8n-nodes-base.googleSheets": [
		5694,
		5690,
		5906
	],
	"n8n-nodes-base.telegram": [
		5626,
		2114,
		4875
	],
	"@n8n/n8n-nodes-langchain.openAi": [
		2462,
		2722,
		2178
	],
	"@n8n/n8n-nodes-langchain.googleGemini": [
		5993,
		6270,
		5677
	],
	"n8n-nodes-base.googleCalendar": [
		2328,
		3393,
		2110
	],
	"n8n-nodes-base.youTube": [
		3188,
		4846,
		4506
	],
	"n8n-nodes-base.airtable": [
		3053,
		2700,
		2579
	]
};
function getPredefinedFromSelected(selectedApps) {
	return Object.keys(PREDEFINED_TEMPLATES_BY_NODE).filter((node) => selectedApps.includes(node)).reduce((acc, app) => [...acc, ...PREDEFINED_TEMPLATES_BY_NODE[app]], []);
}
function getSuggestedTemplatesForLowCodingSkill(selectedApps) {
	if (selectedApps.length === 0) return SIMPLE_TEMPLATES;
	const predefinedSelected = getPredefinedFromSelected(selectedApps);
	if (predefinedSelected.length > 0) return predefinedSelected;
	return [];
}
function keepTop3Templates(templates) {
	if (templates.length <= 3) return templates;
	return Array.from(new Map(templates.map((t) => [t.id, t])).values()).sort((a, b) => b.totalViews - a.totalViews).slice(0, 3);
}
const usePersonalizedTemplatesStore = defineStore(STORES.PERSONALIZED_TEMPLATES, () => {
	const telemetry = useTelemetry();
	const posthogStore = usePostHog();
	const cloudPlanStore = useCloudPlanStore();
	const templatesStore = useTemplatesStore();
	const allSuggestedWorkflows = ref([]);
	const dismissedSuggestedWorkflowsStorage = useStorage(LOCAL_STORAGE_EXPERIMENTAL_DISMISSED_SUGGESTED_WORKFLOWS);
	const dismissedSuggestedWorkflows = computed(() => {
		return dismissedSuggestedWorkflowsStorage.value ? jsonParse(dismissedSuggestedWorkflowsStorage.value, { fallbackValue: [] }) : [];
	});
	const suggestedWorkflows = computed(() => allSuggestedWorkflows.value.filter(({ id }) => !dismissedSuggestedWorkflows.value.includes(id)));
	const dismissSuggestedWorkflow = (id) => {
		dismissedSuggestedWorkflowsStorage.value = JSON.stringify([...dismissedSuggestedWorkflows.value ?? [], id]);
	};
	const isFeatureEnabled = () => {
		return posthogStore.getVariant(TEMPLATE_ONBOARDING_EXPERIMENT.name) === TEMPLATE_ONBOARDING_EXPERIMENT.variantSuggestedTemplates && cloudPlanStore.userIsTrialing;
	};
	const trackUserWasRecommendedTemplates = (templateIds) => {
		telemetry.track("User was recommended personalized templates", { templateIds });
	};
	const trackUserClickedOnPersonalizedTemplate = (templateId) => {
		telemetry.track("User clicked on personalized template callout", { templateId });
	};
	const trackUserDismissedCallout = (templateId) => {
		telemetry.track("User dismissed personalized template callout", { templateId });
	};
	const fetchSuggestedWorkflows = async (codingSkill, selectedApps) => {
		if (!isFeatureEnabled()) return;
		try {
			if (codingSkill === 1) {
				const predefinedSelected = getSuggestedTemplatesForLowCodingSkill(selectedApps);
				if (predefinedSelected.length > 0) {
					const suggestedWorkflowsPromises$1 = predefinedSelected.map(async (id) => await templatesStore.fetchTemplateById(id.toString()));
					const top3Templates$1 = keepTop3Templates(await Promise.all(suggestedWorkflowsPromises$1));
					allSuggestedWorkflows.value = top3Templates$1;
					trackUserWasRecommendedTemplates(top3Templates$1.map((t) => t.id));
					return;
				}
			}
			const suggestedWorkflowsPromises = (await templatesStore.getWorkflows({
				categories: [],
				search: "",
				sort: "rank:desc",
				nodes: selectedApps.length > 0 ? selectedApps : void 0,
				combineWith: "or"
			})).slice(0, 3).map((workflow) => workflow.id).map(async (id) => await templatesStore.fetchTemplateById(id.toString()));
			const top3Templates = keepTop3Templates(await Promise.all(suggestedWorkflowsPromises));
			allSuggestedWorkflows.value = top3Templates;
			trackUserWasRecommendedTemplates(top3Templates.map((t) => t.id));
		} catch (error) {}
	};
	const getTemplateRoute = (id) => {
		return {
			name: VIEWS.TEMPLATE,
			params: { id }
		};
	};
	watch(() => cloudPlanStore.currentUserCloudInfo, async (userInfo) => {
		if (!userInfo) return;
		const codingSkill = cloudPlanStore.codingSkill;
		await fetchSuggestedWorkflows(codingSkill, cloudPlanStore.selectedApps ?? []);
	});
	return {
		isFeatureEnabled,
		suggestedWorkflows,
		dismissSuggestedWorkflow,
		trackUserClickedOnPersonalizedTemplate,
		trackUserDismissedCallout,
		getTemplateRoute
	};
});
var SuggestedWorkflowCard_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "SuggestedWorkflowCard",
	props: { data: {} },
	setup(__props) {
		const { data } = __props;
		const { dismissSuggestedWorkflow, getTemplateRoute, trackUserClickedOnPersonalizedTemplate, trackUserDismissedCallout } = usePersonalizedTemplatesStore();
		const locale = useI18n();
		const onDismissCallout = () => {
			trackUserDismissedCallout(data.id);
			dismissSuggestedWorkflow(data.id);
		};
		const onTryTemplate = () => {
			trackUserClickedOnPersonalizedTemplate(data.id);
			dismissSuggestedWorkflow(data.id);
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(N8nCallout_default), {
				theme: "secondary",
				iconless: true,
				class: normalizeClass(_ctx.$style["suggested-workflow-callout"]),
				slim: true
			}, {
				trailingContent: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["callout-trailing-content"]) }, [createVNode(unref(N8nLink_default), {
					"data-test-id": "suggested-workflow-button",
					size: "small",
					to: unref(getTemplateRoute)(unref(data).id),
					onClick: onTryTemplate
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.itemSuggestion.try")), 1)]),
					_: 1
				}, 8, ["to"]), createVNode(unref(N8nIcon_default), {
					size: "small",
					icon: "x",
					title: unref(locale).baseText("generic.dismiss"),
					class: "clickable",
					onClick: onDismissCallout
				}, null, 8, ["title"])], 2)]),
				default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["callout-content"]) }, toDisplayString(unref(data).name), 3)]),
				_: 1
			}, 8, ["class"]);
		};
	}
});
var SuggestedWorkflowCard_vue_vue_type_style_index_0_lang_module_default = {
	"suggested-workflow-callout": "_suggested-workflow-callout_1wrxf_125",
	"callout-content": "_callout-content_1wrxf_131",
	"callout-trailing-content": "_callout-trailing-content_1wrxf_135"
};
var SuggestedWorkflowCard_default = /* @__PURE__ */ __plugin_vue_export_helper_default(SuggestedWorkflowCard_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": SuggestedWorkflowCard_vue_vue_type_style_index_0_lang_module_default }]]);
var SuggestedWorkflows_vue_vue_type_style_index_0_lang_module_default = { "suggested-workflows": "_suggested-workflows_15lpu_125" };
var _sfc_main = {};
var _hoisted_1$3 = {
	class: "suggested-workflows",
	"data-test-id": "suggested-workflows"
};
function _sfc_render(_ctx, _cache) {
	return openBlock(), createElementBlock("div", _hoisted_1$3, [renderSlot(_ctx.$slots, "default")]);
}
var SuggestedWorkflows_default = /* @__PURE__ */ __plugin_vue_export_helper_default(_sfc_main, [["render", _sfc_render], ["__cssModules", { "$style": SuggestedWorkflows_vue_vue_type_style_index_0_lang_module_default }]]);
var NodeRecommendationCard_vue_vue_type_script_setup_true_lang_default$1 = /* @__PURE__ */ defineComponent({
	__name: "NodeRecommendationCard",
	props: { nodeName: {} },
	setup(__props) {
		const props = __props;
		const uiStore = useUIStore();
		const nodeTypesStore = useNodeTypesStore();
		const { trackMinicardClick } = usePersonalizedTemplatesV2Store();
		const nodeType = computed(() => nodeTypesStore.getNodeType(props.nodeName));
		const openModal = () => {
			trackMinicardClick(nodeType.value?.displayName ?? props.nodeName);
			uiStore.openModalWithData({
				name: EXPERIMENT_TEMPLATE_RECO_V2_KEY,
				data: { nodeName: props.nodeName }
			});
		};
		onMounted(async () => {
			await nodeTypesStore.loadNodeTypesIfNotLoaded();
		});
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", null, [createVNode(unref(N8nCard_default), {
				class: normalizeClass(_ctx.$style.nodeCard),
				hoverable: "",
				onClick: openModal
			}, {
				default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.emptyStateCardContent) }, [createVNode(NodeIcon_default, {
					"node-type": nodeType.value,
					class: normalizeClass(_ctx.$style.nodeIcon),
					"stroke-width": 1.5
				}, null, 8, ["node-type", "class"]), createVNode(unref(N8nText_default), {
					size: "xsmall",
					class: "mt-xs pl-2xs pr-2xs",
					bold: true
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(nodeType.value?.displayName), 1)]),
					_: 1
				})], 2)]),
				_: 1
			}, 8, ["class"])]);
		};
	}
});
var NodeRecommendationCard_vue_vue_type_style_index_0_lang_module_default$1 = {
	nodeCard: "_nodeCard_tubis_125",
	nodeIcon: "_nodeIcon_tubis_135",
	emptyStateCardContent: "_emptyStateCardContent_tubis_139"
};
var NodeRecommendationCard_default$1 = /* @__PURE__ */ __plugin_vue_export_helper_default(NodeRecommendationCard_vue_vue_type_script_setup_true_lang_default$1, [["__cssModules", { "$style": NodeRecommendationCard_vue_vue_type_style_index_0_lang_module_default$1 }]]);
var _hoisted_1$2 = {
	key: 0,
	class: "text-center mt-3xl",
	"data-test-id": "list-empty-state"
};
var TemplateRecommendationV2_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "TemplateRecommendationV2",
	setup(__props) {
		const templateRecoV2Store = usePersonalizedTemplatesV2Store();
		const locale = useI18n();
		return (_ctx, _cache) => {
			return unref(templateRecoV2Store).nodes.length ? (openBlock(), createElementBlock("div", _hoisted_1$2, [createVNode(unref(N8nHeading_default), {
				tag: "h2",
				size: "medium",
				class: "mb-2xs",
				color: "text-light"
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.templateRecoV2.exploreTemplates")), 1)]),
				_: 1
			}), createBaseVNode("div", { class: normalizeClass(_ctx.$style.nodeCardsContainer) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(templateRecoV2Store).nodes, (node) => {
				return openBlock(), createBlock(NodeRecommendationCard_default$1, {
					key: node,
					"node-name": node
				}, null, 8, ["node-name"]);
			}), 128))], 2)])) : createCommentVNode("", true);
		};
	}
});
var TemplateRecommendationV2_vue_vue_type_style_index_0_lang_module_default = { nodeCardsContainer: "_nodeCardsContainer_1seru_125" };
var TemplateRecommendationV2_default = /* @__PURE__ */ __plugin_vue_export_helper_default(TemplateRecommendationV2_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": TemplateRecommendationV2_vue_vue_type_style_index_0_lang_module_default }]]);
var NodeRecommendationCard_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "NodeRecommendationCard",
	props: { nodeName: {} },
	setup(__props) {
		const props = __props;
		const uiStore = useUIStore();
		const nodeTypesStore = useNodeTypesStore();
		const { trackPersonalizationCardClick, markTemplateRecommendationInteraction } = usePersonalizedTemplatesV3Store();
		const nodeType = computed(() => nodeTypesStore.getNodeType(props.nodeName));
		const openModal = () => {
			trackPersonalizationCardClick();
			markTemplateRecommendationInteraction();
			uiStore.openModalWithData({
				name: EXPERIMENT_TEMPLATE_RECO_V3_KEY,
				data: { nodeName: props.nodeName }
			});
		};
		onMounted(async () => {
			await nodeTypesStore.loadNodeTypesIfNotLoaded();
		});
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", null, [createVNode(unref(N8nCard_default), {
				class: normalizeClass(_ctx.$style.nodeCard),
				hoverable: "",
				onClick: openModal
			}, {
				default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.emptyStateCardContent) }, [createVNode(NodeIcon_default, {
					"node-type": nodeType.value,
					class: normalizeClass(_ctx.$style.nodeIcon),
					"stroke-width": 1.5
				}, null, 8, ["node-type", "class"]), createVNode(unref(N8nText_default), {
					size: "xsmall",
					class: "mt-xs pl-2xs pr-2xs",
					bold: true
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(nodeType.value?.displayName), 1)]),
					_: 1
				})], 2)]),
				_: 1
			}, 8, ["class"])]);
		};
	}
});
var NodeRecommendationCard_vue_vue_type_style_index_0_lang_module_default = {
	nodeCard: "_nodeCard_tubis_125",
	nodeIcon: "_nodeIcon_tubis_135",
	emptyStateCardContent: "_emptyStateCardContent_tubis_139"
};
var NodeRecommendationCard_default = /* @__PURE__ */ __plugin_vue_export_helper_default(NodeRecommendationCard_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": NodeRecommendationCard_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$1 = {
	key: 0,
	class: "text-center mt-3xl",
	"data-test-id": "list-empty-state"
};
var TemplateRecommendationV3_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "TemplateRecommendationV3",
	setup(__props) {
		const personalizedTemplateStore = usePersonalizedTemplatesV3Store();
		const locale = useI18n();
		return (_ctx, _cache) => {
			return unref(personalizedTemplateStore).hasChosenHubSpot ? (openBlock(), createElementBlock("div", _hoisted_1$1, [createVNode(unref(N8nHeading_default), {
				tag: "h2",
				size: "medium",
				class: "mb-2xs",
				color: "text-light"
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("experiments.personalizedTemplatesV3.exploreTemplates")), 1)]),
				_: 1
			}), createBaseVNode("div", { class: normalizeClass(_ctx.$style.nodeCardsContainer) }, [createVNode(NodeRecommendationCard_default, { "node-name": "n8n-nodes-base.hubspot" })], 2)])) : createCommentVNode("", true);
		};
	}
});
var TemplateRecommendationV3_vue_vue_type_style_index_0_lang_module_default = { nodeCardsContainer: "_nodeCardsContainer_1seru_125" };
var TemplateRecommendationV3_default = /* @__PURE__ */ __plugin_vue_export_helper_default(TemplateRecommendationV3_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": TemplateRecommendationV3_vue_vue_type_style_index_0_lang_module_default }]]);
var SkeletonTemplateCard_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "SkeletonTemplateCard",
	setup(__props) {
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(N8nCard_default), {
				class: normalizeClass(_ctx.$style.card),
				"aria-hidden": "true"
			}, {
				default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.cardContent) }, [
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.widthRow) }, [
						createBaseVNode("div", { class: normalizeClass(_ctx.$style.widthBlock) }, null, 2),
						createBaseVNode("div", { class: normalizeClass(_ctx.$style.widthBlock) }, null, 2),
						createBaseVNode("div", { class: normalizeClass(_ctx.$style.widthBlock) }, null, 2)
					], 2),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.nodes) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.nodeIcon) }, [createVNode(unref(N8nLoading_default), { variant: "custom" })], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.nodeIcon) }, [createVNode(unref(N8nLoading_default), { variant: "custom" })], 2)], 2),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.title) }, [createVNode(unref(N8nLoading_default), { variant: "custom" })], 2),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.title) }, [createVNode(unref(N8nLoading_default), { variant: "custom" })], 2),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.title) }, [createVNode(unref(N8nLoading_default), { variant: "custom" })], 2),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.stats) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.statItem) }, [createVNode(unref(N8nLoading_default), { variant: "custom" })], 2)], 2)
				], 2)]),
				_: 1
			}, 8, ["class"]);
		};
	}
});
var SkeletonTemplateCard_vue_vue_type_style_index_0_lang_module_default = {
	card: "_card_1pphi_125",
	widthRow: "_widthRow_1pphi_133",
	widthBlock: "_widthBlock_1pphi_140",
	cardContent: "_cardContent_1pphi_146",
	nodes: "_nodes_1pphi_153",
	nodeIcon: "_nodeIcon_1pphi_158",
	title: "_title_1pphi_168",
	stats: "_stats_1pphi_175",
	statItem: "_statItem_1pphi_179"
};
var SkeletonTemplateCard_default = /* @__PURE__ */ __plugin_vue_export_helper_default(SkeletonTemplateCard_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": SkeletonTemplateCard_vue_vue_type_style_index_0_lang_module_default }]]);
var RecommendedTemplatesSection_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "RecommendedTemplatesSection",
	setup(__props) {
		const locale = useI18n();
		const templatesStore = useRecommendedTemplatesStore();
		const { websiteTemplateRepositoryURL } = storeToRefs(useTemplatesStore());
		const templates = ref([]);
		const isLoadingTemplates = ref(false);
		onMounted(async () => {
			isLoadingTemplates.value = true;
			try {
				templates.value = await templatesStore.loadRecommendedTemplates();
			} finally {
				isLoadingTemplates.value = false;
			}
		});
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("section", {
				class: normalizeClass(_ctx.$style.container),
				"data-test-id": "recommended-templates-section"
			}, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.header) }, [createVNode(unref(N8nText_default), {
				tag: "h2",
				size: "large",
				bold: true
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.empty.startWithTemplate")), 1)]),
				_: 1
			}), createVNode(unref(N8nLink_default), {
				href: unref(websiteTemplateRepositoryURL),
				class: normalizeClass(_ctx.$style.allTemplatesLink)
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("templates.featured.seeMore")), 1)]),
				_: 1
			}, 8, ["href", "class"])], 2), isLoadingTemplates.value ? (openBlock(), createElementBlock("div", {
				key: 0,
				class: normalizeClass(_ctx.$style.suggestions)
			}, [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(6), (i) => {
				return openBlock(), createBlock(SkeletonTemplateCard_default, { key: i });
			}), 128))], 2)) : (openBlock(), createElementBlock("div", {
				key: 1,
				class: normalizeClass(_ctx.$style.suggestions)
			}, [(openBlock(true), createElementBlock(Fragment, null, renderList(templates.value, (template, index) => {
				return openBlock(), createBlock(RecommendedTemplateCard_default, {
					key: template.id,
					template,
					"tile-number": index + 1,
					clickable: true
				}, null, 8, ["template", "tile-number"]);
			}), 128))], 2))], 2);
		};
	}
});
var RecommendedTemplatesSection_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_d40wj_125",
	header: "_header_d40wj_131",
	allTemplatesLink: "_allTemplatesLink_d40wj_147",
	suggestions: "_suggestions_d40wj_151"
};
var RecommendedTemplatesSection_default = /* @__PURE__ */ __plugin_vue_export_helper_default(RecommendedTemplatesSection_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": RecommendedTemplatesSection_vue_vue_type_style_index_0_lang_module_default }]]);
function useWorkflowsEmptyState() {
	const i18n = useI18n();
	const usersStore = useUsersStore();
	const projectsStore = useProjectsStore();
	const sourceControlStore = useSourceControlStore();
	const recommendedTemplatesStore = useRecommendedTemplatesStore();
	const emptyStateBuilderPromptStore = useEmptyStateBuilderPromptStore();
	const currentUser = computed(() => usersStore.currentUser ?? {});
	const personalProject = computed(() => projectsStore.personalProject);
	const readOnlyEnv = computed(() => sourceControlStore.preferences.branchReadOnly);
	const projectPermissions = computed(() => {
		return getResourcePermissions(projectsStore.currentProject?.scopes ?? personalProject.value?.scopes);
	});
	const canCreateWorkflow = computed(() => !readOnlyEnv.value && projectPermissions.value.workflow.create);
	const showRecommendedTemplatesInline = computed(() => {
		return recommendedTemplatesStore.isFeatureEnabled && !readOnlyEnv.value && projectPermissions.value.workflow.create;
	});
	return {
		showBuilderPrompt: computed(() => {
			return emptyStateBuilderPromptStore.isFeatureEnabled && !readOnlyEnv.value && projectPermissions.value.workflow.create;
		}),
		showRecommendedTemplatesInline,
		builderHeading: computed(() => {
			const firstName = currentUser.value.firstName;
			if (firstName) return i18n.baseText("workflows.empty.heading.builder", { interpolate: { name: firstName } });
			return i18n.baseText("workflows.empty.heading.builder.userNotSetup");
		}),
		emptyStateHeading: computed(() => {
			const firstName = currentUser.value.firstName;
			if (showRecommendedTemplatesInline.value) {
				if (firstName) return i18n.baseText("workflows.empty.heading", { interpolate: { name: firstName } });
				return i18n.baseText("workflows.empty.heading.userNotSetup");
			} else {
				if (firstName) return i18n.baseText("workflows.empty.headingWithIcon", { interpolate: { name: firstName } });
				return i18n.baseText("workflows.empty.headingWithIcon.userNotSetup");
			}
		}),
		emptyStateDescription: computed(() => {
			if (readOnlyEnv.value) return i18n.baseText("workflows.empty.description.readOnlyEnv");
			else if (!projectPermissions.value.workflow.create) return i18n.baseText("workflows.empty.description.noPermission");
			else return i18n.baseText("workflows.empty.description");
		}),
		canCreateWorkflow,
		readOnlyEnv,
		projectPermissions
	};
}
const WORKFLOW_SUGGESTIONS = [
	{
		id: "multi-agent-research",
		summary: "a multi-agent research workflow",
		prompt: "Create a multi-agent AI workflow using `gpt-4.1-mini` where several agents work together to research a topic, fact-check the findings, and write a report that's sent as an HTML email. One agent should gather recent, credible information about the topic. Another agent should verify the facts and only mark something as \"verified\" if it appears in at least two independent sources. A third agent should combine the verified information into a clear, well-written report under 1,000 words. A final agent should edit and format the report to make it look clean and professional in the body of the email. Use Gmail to send the report."
	},
	{
		id: "email-summary",
		summary: "an email summary workflow",
		prompt: "Create an automation that runs on Monday mornings. It reads my Gmail inbox from the weekend, analyzes them with `gpt-4.1-mini` to find action items and priorities, and emails me a structured email using Gmail."
	},
	{
		id: "ai-news-digest",
		summary: "a daily AI news digest workflow",
		prompt: "Build an automation that runs every night 8pm. Use the NewsAPI \"/everything\" endpoint to search for AI-related news from the day. Pick the top 5 articles and use OpenAI `gpt-4.1-mini` to summarize each in two sentences. Generate an image using OpenAI based on the top article's summary. Send a structured Telegram message."
	},
	{
		id: "daily-weather-report",
		summary: "a daily weather report workflow",
		prompt: "Create an automation that checks the weather for my location every morning at 5 a.m using OpenWeather. Send me a short weather report by email using Gmail. Use OpenAI `gpt-4.1-mini` to write a short, fun formatted email body by adding personality when describing the weather and how the day might feel. Include all details relevant to decide on my plans and clothes for the day."
	},
	{
		id: "invoice-pipeline",
		summary: "an invoice processing workflow",
		prompt: "Create an invoice processing workflow using an n8n Form. When a user submits an invoice file (PDF or image) with their email address, use OpenAI `gpt-4.1-mini` to extract invoice data. Then, validate the date format is correct, the currency is valid, and the total amount is greater than zero. If validation fails, email the user a clear error message that explains which check failed from my Gmail. If the data passes validation, store the structured result in a datatable plus email the user. Every Monday morning, generate a weekly spending report using `gpt-4.1-mini` based on stored invoices and send a clean email using Gmail."
	},
	{
		id: "rag-assistant",
		summary: "a RAG knowledge agent",
		prompt: "Build an automation that creates a document-to-chat RAG pipeline. The workflow starts with an n8n Form where a user uploads one or more files (PDF, CSV, or JSON). Each upload should trigger a process that reads the file, splits it into chunks, and generates embeddings using OpenAI `gpt-4.1-mini` model, saved in one Pinecone table. Add a second part of the workflow for querying: use a Chat Message Trigger to act as a chatbot interface. When a user sends a question, retrieve the top 5 most relevant chunks from Pinecone, pass them into `gpt-4.1-mini` as context, and have it answer naturally using only the retrieved information. If a question can't be answered confidently, the bot should respond with: \"I couldn't find that in the uploaded documents.\" Log each chat interaction in a Data Table with the user query, matched file(s), and timestamp. Send a daily summary email through Gmail showing total questions asked, top files referenced, and any failed lookups."
	},
	{
		id: "lead-qualification",
		summary: "a lead qualification workflow",
		prompt: "Create an n8n form with a lead generation form I can embed on my website homepage. Build an automation that processes form submissions, uses AI to qualify the lead, sends data to an n8n data table. For high-score leads, it should also email them to offer to schedule a 15-min call in a free slot in my calendar."
	},
	{
		id: "youtube-auto-chapters",
		summary: "a YouTube chapter generator workflow",
		prompt: "Build an n8n workflow that automatically generates YouTube chapter timestamps from video captions. Use the n8n chat trigger for me to enter the URL of the YouTube video. Use the YouTube Get a video node to get the video title, description, and existing metadata. Use the YouTube Captions API to download the transcript for the given video ID. Send the transcript to AI agent using Anthropic's Claude model. Prompt the model to identify topic shifts and return structured output in timestamp - chapter format. Append the generated chapter list to the existing video description. Use the YouTube Update a video node to update the video description. Respond back with the updates using the respond to chat node."
	}
];
var import_shuffle = /* @__PURE__ */ __toESM(require_shuffle(), 1);
var TYPING_SPEED_MS = 40;
var BACKSPACE_SPEED_MS = 25;
var PAUSE_AT_FULL_TEXT_MS = 1500;
var PAUSE_AFTER_BACKSPACE_MS = 300;
var PREFIX = "Build ";
function useTypewriterPlaceholder(suggestions$1, isInputEmpty) {
	const currentIndex = ref(0);
	const displayedSuffix = ref("");
	let timeoutId = null;
	const currentSuggestion = computed(() => {
		const list = suggestions$1.value;
		if (list.length === 0) return "";
		return list[currentIndex.value % list.length]?.summary ?? "";
	});
	const placeholder = computed(() => PREFIX + displayedSuffix.value);
	function clearTimer() {
		if (timeoutId !== null) {
			clearTimeout(timeoutId);
			timeoutId = null;
		}
	}
	function typeNextChar() {
		if (!isInputEmpty.value) return;
		if (suggestions$1.value.length === 0) return;
		const target = currentSuggestion.value;
		if (displayedSuffix.value.length < target.length) {
			displayedSuffix.value = target.slice(0, displayedSuffix.value.length + 1);
			timeoutId = setTimeout(typeNextChar, TYPING_SPEED_MS);
		} else timeoutId = setTimeout(startBackspace, PAUSE_AT_FULL_TEXT_MS);
	}
	function startBackspace() {
		backspaceChar();
	}
	function backspaceChar() {
		if (!isInputEmpty.value) return;
		if (suggestions$1.value.length === 0) return;
		if (displayedSuffix.value.length > 0) {
			displayedSuffix.value = displayedSuffix.value.slice(0, -1);
			timeoutId = setTimeout(backspaceChar, BACKSPACE_SPEED_MS);
		} else {
			currentIndex.value = (currentIndex.value + 1) % suggestions$1.value.length;
			timeoutId = setTimeout(typeNextChar, PAUSE_AFTER_BACKSPACE_MS);
		}
	}
	function startAnimation() {
		clearTimer();
		typeNextChar();
	}
	function stopAnimation() {
		clearTimer();
	}
	watch(isInputEmpty, (empty) => {
		if (empty) startAnimation();
		else stopAnimation();
	}, { immediate: true });
	onUnmounted(() => {
		clearTimer();
	});
	return { placeholder };
}
var EmptyStateBuilderPrompt_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "EmptyStateBuilderPrompt",
	props: {
		projectId: {},
		parentFolderId: {}
	},
	emits: ["submit", "startFromScratch"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const router = useRouter();
		const toast = useToast();
		const i18n = useI18n();
		const telemetry = useTelemetry();
		const emptyStateBuilderPromptStore = useEmptyStateBuilderPromptStore();
		const emit = __emit;
		const textInputValue = ref("");
		const promptInputRef = ref();
		const importFileRef = ref(null);
		const { placeholder } = useTypewriterPlaceholder(computed(() => {
			return (0, import_shuffle.default)(WORKFLOW_SUGGESTIONS).slice(0, 6);
		}), computed(() => textInputValue.value.length === 0));
		function onSubmit() {
			if (!textInputValue.value.trim()) return;
			emit("submit", textInputValue.value);
		}
		function onFromScratch() {
			telemetry.track("User clicked from scratch in empty state");
			emit("startFromScratch");
		}
		function onTemplate() {
			trackTemplatesClick(TemplateClickSource.emptyStateBuilderPrompt);
			router.push({ name: VIEWS.TEMPLATES });
		}
		function onImportFromFile() {
			importFileRef.value?.click();
		}
		function handleFileImport() {
			const input = importFileRef.value;
			if (!input?.files?.length) return;
			const reader = new FileReader();
			reader.onload = async () => {
				const result = reader.result;
				if (typeof result !== "string") {
					input.value = "";
					return;
				}
				let workflowData;
				try {
					workflowData = JSON.parse(result);
				} catch {
					toast.showMessage({
						title: i18n.baseText("mainSidebar.showMessage.handleFileImport.title"),
						message: i18n.baseText("mainSidebar.showMessage.handleFileImport.message"),
						type: "error"
					});
					input.value = "";
					return;
				}
				try {
					await emptyStateBuilderPromptStore.createWorkflowFromImport(workflowData, props.projectId, props.parentFolderId);
				} catch {
					toast.showError(new Error(i18n.baseText("nodeView.couldntLoadWorkflow.invalidWorkflowObject")), i18n.baseText("nodeView.couldntImportWorkflow"));
				} finally {
					input.value = "";
				}
			};
			reader.readAsText(input.files[0]);
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { class: normalizeClass(_ctx.$style.container) }, [
				createBaseVNode("input", {
					ref_key: "importFileRef",
					ref: importFileRef,
					type: "file",
					accept: ".json",
					style: { "display": "none" },
					onChange: handleFileImport
				}, null, 544),
				createBaseVNode("p", { class: normalizeClass(_ctx.$style.subtitle) }, toDisplayString(unref(i18n).baseText("emptyStateBuilderPrompt.subtitle")), 3),
				createBaseVNode("div", { class: normalizeClass(_ctx.$style.promptInput) }, [createVNode(unref(N8nPromptInput_default), {
					ref_key: "promptInputRef",
					ref: promptInputRef,
					modelValue: textInputValue.value,
					"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => textInputValue.value = $event),
					placeholder: unref(placeholder),
					"min-lines": 4,
					"button-label": unref(i18n).baseText("emptyStateBuilderPrompt.buildWorkflow"),
					"data-test-id": "empty-state-builder-prompt-input",
					autofocus: "",
					onSubmit
				}, null, 8, [
					"modelValue",
					"placeholder",
					"button-label"
				])], 2),
				createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.alternativeActions) }, [
					createBaseVNode("span", { class: normalizeClass(_ctx.$style.startWithText) }, toDisplayString(unref(i18n).baseText("emptyStateBuilderPrompt.orStartWith")), 3),
					createVNode(unref(N8nTooltip_default), { content: unref(i18n).baseText("emptyStateBuilderPrompt.fromScratchTooltip") }, {
						default: withCtx(() => [createVNode(unref(N8nButton_default), {
							variant: "subtle",
							size: "small",
							icon: "play",
							onClick: onFromScratch
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("emptyStateBuilderPrompt.fromScratch")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["content"]),
					createVNode(unref(N8nTooltip_default), { content: unref(i18n).baseText("emptyStateBuilderPrompt.templateTooltip") }, {
						default: withCtx(() => [createVNode(unref(N8nButton_default), {
							variant: "subtle",
							size: "small",
							icon: "layout-template",
							onClick: onTemplate
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("emptyStateBuilderPrompt.template")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["content"]),
					createVNode(unref(N8nTooltip_default), { content: unref(i18n).baseText("emptyStateBuilderPrompt.importFromFileTooltip") }, {
						default: withCtx(() => [createVNode(unref(N8nButton_default), {
							variant: "subtle",
							size: "small",
							icon: "upload",
							onClick: onImportFromFile
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("emptyStateBuilderPrompt.importFromFile")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["content"])
				], 2)], 2)
			], 2);
		};
	}
});
const container = "_container_1wank_125";
const subtitle = "_subtitle_1wank_133";
const promptInput = "_promptInput_1wank_139";
const footer = "_footer_1wank_148";
const alternativeActions = "_alternativeActions_1wank_155";
const startWithText = "_startWithText_1wank_163";
var EmptyStateBuilderPrompt_vue_vue_type_style_index_0_lang_module_default = {
	container,
	subtitle,
	promptInput,
	"el-tooltip__trigger": "_el-tooltip__trigger_1wank_143",
	footer,
	alternativeActions,
	startWithText
};
var EmptyStateBuilderPrompt_default = /* @__PURE__ */ __plugin_vue_export_helper_default(EmptyStateBuilderPrompt_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": EmptyStateBuilderPrompt_vue_vue_type_style_index_0_lang_module_default }]]);
var EmptyStateLayout_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "EmptyStateLayout",
	emits: ["click:add"],
	setup(__props, { emit: __emit }) {
		const emit = __emit;
		const i18n = useI18n();
		const route = useRoute();
		const bannersStore = useBannersStore();
		const projectsStore = useProjectsStore();
		const projectPages = useProjectPages();
		const emptyStateBuilderPromptStore = useEmptyStateBuilderPromptStore();
		const readyToRunStore = useReadyToRunStore();
		const { showBuilderPrompt, showRecommendedTemplatesInline, builderHeading, emptyStateHeading, emptyStateDescription, canCreateWorkflow } = useWorkflowsEmptyState();
		const addWorkflow = () => {
			emit("click:add");
		};
		const showReadyToRunCard = computed(() => {
			return readyToRunStore.userCanClaimOpenAiCredits && canCreateWorkflow.value;
		});
		const handleReadyToRunClick = async () => {
			try {
				await readyToRunStore.claimCreditsAndOpenWorkflow("card", builderParentFolderId.value, builderProjectId.value);
			} catch {}
		};
		const containerStyle = computed(() => ({ minHeight: `calc(100vh - ${bannersStore.bannersHeight}px)` }));
		const builderProjectId = computed(() => projectPages.isOverviewSubPage ? projectsStore.personalProject?.id : route.params.projectId);
		const builderParentFolderId = computed(() => route.params.folderId);
		const handleBuilderPromptSubmit = async (prompt) => {
			await emptyStateBuilderPromptStore.createWorkflowWithPrompt(prompt, builderProjectId.value, builderParentFolderId.value);
		};
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				class: normalizeClass([_ctx.$style.emptyStateLayout, {
					[_ctx.$style.noTemplatesContent]: !unref(showRecommendedTemplatesInline) && !unref(showBuilderPrompt),
					[_ctx.$style.builderLayout]: unref(showBuilderPrompt)
				}]),
				style: normalizeStyle(containerStyle.value)
			}, [createBaseVNode("div", { class: normalizeClass([_ctx.$style.content, { [_ctx.$style.builderContent]: unref(showBuilderPrompt) }]) }, [unref(showBuilderPrompt) ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.welcomeBuilder) }, [createVNode(unref(N8nHeading_default), {
				tag: "h1",
				size: "xlarge"
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(builderHeading)), 1)]),
				_: 1
			})], 2), createVNode(EmptyStateBuilderPrompt_default, {
				"data-test-id": "empty-state-builder-prompt",
				"project-id": builderProjectId.value,
				"parent-folder-id": builderParentFolderId.value,
				onSubmit: handleBuilderPromptSubmit,
				onStartFromScratch: addWorkflow
			}, null, 8, ["project-id", "parent-folder-id"])], 64)) : unref(showRecommendedTemplatesInline) ? (openBlock(), createElementBlock(Fragment, { key: 1 }, [createVNode(unref(N8nHeading_default), {
				tag: "h1",
				size: "2xlarge",
				bold: "",
				class: normalizeClass(_ctx.$style.welcomeTitle)
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(emptyStateHeading)), 1)]),
				_: 1
			}, 8, ["class"]), createBaseVNode("div", { class: normalizeClass(_ctx.$style.templatesSection) }, [
				createVNode(RecommendedTemplatesSection_default),
				createBaseVNode("div", { class: normalizeClass(_ctx.$style.orDivider) }, [createVNode(unref(N8nText_default), { size: "large" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("generic.or")), 1)]),
					_: 1
				})], 2),
				createBaseVNode("div", { class: normalizeClass(_ctx.$style.actionButtons) }, [createVNode(ReadyToRunButton_default, {
					type: "secondary",
					size: "large"
				}), createVNode(unref(N8nButton_default), {
					variant: "subtle",
					icon: "file",
					size: "large",
					"data-test-id": "start-from-scratch-button",
					onClick: addWorkflow
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("workflows.empty.startFromScratch")), 1)]),
					_: 1
				})], 2)
			], 2)], 64)) : (openBlock(), createElementBlock(Fragment, { key: 2 }, [createVNode(unref(N8nHeading_default), {
				tag: "h1",
				size: "2xlarge",
				bold: "",
				class: normalizeClass(_ctx.$style.welcomeTitle)
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(emptyStateHeading)), 1)]),
				_: 1
			}, 8, ["class"]), createBaseVNode("div", { class: normalizeClass(_ctx.$style.fallbackContent) }, [createVNode(unref(N8nText_default), {
				tag: "p",
				size: "large",
				color: "text-base"
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(emptyStateDescription)), 1)]),
				_: 1
			}), unref(canCreateWorkflow) ? (openBlock(), createElementBlock("div", {
				key: 0,
				class: normalizeClass([_ctx.$style.actionCardsContainer, { [_ctx.$style.singleCard]: !showReadyToRunCard.value }])
			}, [showReadyToRunCard.value ? (openBlock(), createBlock(unref(N8nCard_default), {
				key: 0,
				class: normalizeClass(_ctx.$style.actionCard),
				hoverable: "",
				"data-test-id": "ready-to-run-card",
				onClick: handleReadyToRunClick
			}, {
				default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.cardContent) }, [createVNode(unref(N8nIcon_default), {
					class: normalizeClass(_ctx.$style.cardIcon),
					icon: "zap",
					color: "foreground-dark",
					"stroke-width": 1.5
				}, null, 8, ["class"]), createVNode(unref(N8nText_default), {
					size: "large",
					class: "mt-xs"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("workflows.empty.tryAiWorkflow")), 1)]),
					_: 1
				})], 2)]),
				_: 1
			}, 8, ["class"])) : createCommentVNode("", true), createVNode(unref(N8nCard_default), {
				class: normalizeClass(_ctx.$style.actionCard),
				hoverable: "",
				"data-test-id": "new-workflow-card",
				onClick: addWorkflow
			}, {
				default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.cardContent) }, [createVNode(unref(N8nIcon_default), {
					class: normalizeClass(_ctx.$style.cardIcon),
					icon: "file",
					color: "foreground-dark",
					"stroke-width": 1.5
				}, null, 8, ["class"]), createVNode(unref(N8nText_default), {
					size: "large",
					class: "mt-xs"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("workflows.empty.startFromScratch")), 1)]),
					_: 1
				})], 2)]),
				_: 1
			}, 8, ["class"])], 2)) : createCommentVNode("", true)], 2)], 64))], 2)], 6);
		};
	}
});
var EmptyStateLayout_vue_vue_type_style_index_0_lang_module_default = {
	emptyStateLayout: "_emptyStateLayout_1bn4b_125",
	noTemplatesContent: "_noTemplatesContent_1bn4b_136",
	builderLayout: "_builderLayout_1bn4b_139",
	content: "_content_1bn4b_147",
	builderContent: "_builderContent_1bn4b_154",
	welcomeBuilder: "_welcomeBuilder_1bn4b_159",
	welcomeTitle: "_welcomeTitle_1bn4b_163",
	templatesSection: "_templatesSection_1bn4b_167",
	fallbackContent: "_fallbackContent_1bn4b_171",
	actionCardsContainer: "_actionCardsContainer_1bn4b_178",
	singleCard: "_singleCard_1bn4b_185",
	actionCard: "_actionCard_1bn4b_178",
	cardIcon: "_cardIcon_1bn4b_209",
	cardContent: "_cardContent_1bn4b_213",
	orDivider: "_orDivider_1bn4b_229",
	actionButtons: "_actionButtons_1bn4b_234"
};
var EmptyStateLayout_default = /* @__PURE__ */ __plugin_vue_export_helper_default(EmptyStateLayout_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": EmptyStateLayout_vue_vue_type_style_index_0_lang_module_default }]]);
var import_debounce = /* @__PURE__ */ __toESM(require_debounce(), 1);
var _hoisted_1 = { key: 1 };
var _hoisted_2 = { class: "text-center mt-s" };
var _hoisted_3 = {
	key: 0,
	class: "mb-s"
};
var _hoisted_4 = { class: "mb-s" };
var _hoisted_5 = { class: "mb-s" };
var SEARCH_DEBOUNCE_TIME = 300;
var FILTERS_DEBOUNCE_TIME = 100;
var WorkflowsView_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowsView",
	setup(__props) {
		const StatusFilter = {
			ALL: "",
			ACTIVE: "active",
			DEACTIVATED: "deactivated"
		};
		const WORKFLOWS_SORT_MAP = {
			lastUpdated: "updatedAt:desc",
			lastCreated: "createdAt:desc",
			nameAsc: "name:asc",
			nameDesc: "name:desc"
		};
		const i18n = useI18n();
		const route = useRoute();
		const router = useRouter();
		const message = useMessage();
		const toast = useToast();
		const folderHelpers = useFolders();
		const sourceControlStore = useSourceControlStore();
		const usersStore = useUsersStore();
		const workflowsStore = useWorkflowsStore();
		const workflowsListStore = useWorkflowsListStore();
		const settingsStore = useSettingsStore();
		const projectsStore = useProjectsStore();
		const telemetry = useTelemetry();
		const uiStore = useUIStore();
		const tagsStore = useTagsStore();
		const foldersStore = useFoldersStore();
		const usageStore = useUsageStore();
		const insightsStore = useInsightsStore();
		const aiStarterTemplatesStore = useAITemplatesStarterCollectionStore();
		const personalizedTemplatesStore = usePersonalizedTemplatesStore();
		const readyToRunWorkflowsStore = useReadyToRunWorkflowsStore();
		const personalizedTemplatesV2Store = usePersonalizedTemplatesV2Store();
		const personalizedTemplatesV3Store = usePersonalizedTemplatesV3Store();
		const readyToRunStore = useReadyToRunStore();
		const documentTitle = useDocumentTitle();
		const { callDebounced } = useDebounce();
		const projectPages = useProjectPages();
		const { showRecommendedTemplatesInline, emptyStateHeading: emptyListHeading, emptyStateDescription: emptyListDescription, readOnlyEnv, projectPermissions } = useWorkflowsEmptyState();
		const loading = ref(true);
		const breadcrumbsLoading = ref(false);
		const filters = ref({
			search: "",
			homeProject: "",
			status: StatusFilter.ALL,
			showArchived: false,
			tags: []
		});
		const workflowListEventBus = createEventBus();
		const resourcesListLayoutRef = useTemplateRef("resourcesListLayout");
		const workflowsAndFolders = ref([]);
		const currentPage = ref(1);
		const pageSize = ref(50);
		const currentSort = ref("updatedAt:desc");
		const currentFolderId = ref(null);
		const showCardsBadge = ref(false);
		const folderActions = computed(() => [
			{
				label: i18n.baseText("generic.open"),
				value: FOLDER_LIST_ITEM_ACTIONS.OPEN,
				disabled: false,
				onlyAvailableOn: "card"
			},
			{
				label: i18n.baseText("folders.actions.create"),
				value: FOLDER_LIST_ITEM_ACTIONS.CREATE,
				disabled: readOnlyEnv.value || !hasPermissionToCreateFolders.value
			},
			{
				label: i18n.baseText("folders.actions.create.workflow"),
				value: FOLDER_LIST_ITEM_ACTIONS.CREATE_WORKFLOW,
				disabled: readOnlyEnv.value || !hasPermissionToCreateWorkflows.value
			},
			{
				label: i18n.baseText("generic.rename"),
				value: FOLDER_LIST_ITEM_ACTIONS.RENAME,
				disabled: readOnlyEnv.value || !hasPermissionToUpdateFolders.value
			},
			{
				label: i18n.baseText("folders.actions.moveToFolder"),
				value: FOLDER_LIST_ITEM_ACTIONS.MOVE,
				disabled: readOnlyEnv.value || !hasPermissionToUpdateFolders.value
			},
			{
				label: i18n.baseText("generic.delete"),
				value: FOLDER_LIST_ITEM_ACTIONS.DELETE,
				disabled: readOnlyEnv.value || !hasPermissionToDeleteFolders.value
			}
		]);
		const folderCardActions = computed(() => folderActions.value.filter((action) => !action.onlyAvailableOn || action.onlyAvailableOn === "card"));
		const mainBreadcrumbsActions = computed(() => folderActions.value.filter((action) => !action.onlyAvailableOn || action.onlyAvailableOn === "mainBreadcrumbs"));
		const isShareable = computed(() => settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.Sharing]);
		const foldersEnabled = computed(() => {
			return settingsStore.isFoldersFeatureEnabled;
		});
		const mcpEnabled = computed(() => {
			return settingsStore.isModuleActive("mcp") && settingsStore.moduleSettings.mcp?.mcpAccessEnabled;
		});
		const showFolders = computed(() => {
			return foldersEnabled.value && !projectPages.isOverviewSubPage && !projectPages.isSharedSubPage;
		});
		const currentFolder = computed(() => {
			return currentFolderId.value ? foldersStore.breadcrumbsCache[currentFolderId.value] : null;
		});
		const currentFolderParent = computed(() => {
			return currentFolder.value?.parentFolder ? foldersStore.breadcrumbsCache[currentFolder.value.parentFolder] : null;
		});
		const isDragging = computed(() => {
			return foldersStore.draggedElement !== null;
		});
		const isDragNDropEnabled = computed(() => {
			return !readOnlyEnv.value && hasPermissionToUpdateFolders.value;
		});
		const listScrollContainer = computed(() => {
			return resourcesListLayoutRef.value?.getScrollContainer?.() ?? null;
		});
		useAutoScrollOnDrag({
			isActive: computed(() => isDragging.value && isDragNDropEnabled.value),
			container: listScrollContainer
		});
		const hasPermissionToCreateFolders = computed(() => {
			if (!currentProject.value) return false;
			return getResourcePermissions(currentProject.value.scopes).folder.create === true;
		});
		const hasPermissionToUpdateFolders = computed(() => {
			if (!currentProject.value) return false;
			return getResourcePermissions(currentProject.value.scopes).folder.update === true;
		});
		const hasPermissionToDeleteFolders = computed(() => {
			if (!currentProject.value) return false;
			return getResourcePermissions(currentProject.value.scopes).folder.delete === true;
		});
		const hasPermissionToCreateWorkflows = computed(() => {
			if (!currentProject.value) return false;
			return getResourcePermissions(currentProject.value.scopes).workflow.create === true;
		});
		const currentProject = computed(() => projectsStore.currentProject);
		const projectName = computed(() => {
			if (currentProject.value?.type === ProjectTypes.Personal) return i18n.baseText("projects.menu.personal");
			return currentProject.value?.name;
		});
		const currentParentName = computed(() => {
			if (currentFolder.value) return currentFolder.value.name;
			return projectName.value;
		});
		const personalProject = computed(() => {
			return projectsStore.personalProject;
		});
		const workflowListResources = computed(() => {
			return (workflowsAndFolders.value || []).map((resource) => {
				if (resource.resource === "folder") return {
					resourceType: "folder",
					id: resource.id,
					name: resource.name,
					createdAt: resource.createdAt.toString(),
					updatedAt: resource.updatedAt.toString(),
					homeProject: resource.homeProject,
					workflowCount: resource.workflowCount,
					subFolderCount: resource.subFolderCount,
					parentFolder: resource.parentFolder
				};
				else return {
					resourceType: "workflow",
					id: resource.id,
					name: resource.name,
					description: resource.description,
					active: resource.active ?? false,
					activeVersionId: resource.activeVersionId,
					isArchived: resource.isArchived,
					updatedAt: resource.updatedAt.toString(),
					createdAt: resource.createdAt.toString(),
					homeProject: resource.homeProject,
					scopes: resource.scopes,
					sharedWithProjects: resource.sharedWithProjects,
					readOnly: !getResourcePermissions(resource.scopes).workflow.update,
					tags: resource.tags,
					parentFolder: resource.parentFolder,
					settings: resource.settings,
					hasResolvableCredentials: resource.hasResolvableCredentials
				};
			});
		});
		const statusFilterOptions = computed(() => [
			{
				label: i18n.baseText("workflows.filters.status.all"),
				value: StatusFilter.ALL
			},
			{
				label: i18n.baseText("workflows.filters.status.active"),
				value: StatusFilter.ACTIVE
			},
			{
				label: i18n.baseText("workflows.filters.status.deactivated"),
				value: StatusFilter.DEACTIVATED
			}
		]);
		const showReadyToRunWorkflowsCallout = computed(() => {
			const isEnabled = readyToRunWorkflowsStore.isFeatureEnabled;
			const isDismissed = readyToRunWorkflowsStore.isCalloutDismissed;
			return isEnabled && !isDismissed && !loading.value && !readOnlyEnv.value && (projectPages.isOverviewSubPage || hasPermissionToCreateFolders.value && hasPermissionToCreateWorkflows.value);
		});
		const hasFilters = computed(() => {
			return !!(filters.value.search || filters.value.status !== StatusFilter.ALL || filters.value.showArchived || filters.value.tags.length);
		});
		const showArchivedOnlyHint = computed(() => {
			return workflowsAndFolders.value.length === 0 && !hasFilters.value && !filters.value.showArchived && foldersStore.totalWorkflowCount > 0;
		});
		const isSelfHostedDeployment = computed(() => settingsStore.deploymentType === "default");
		const canUserRegisterCommunityPlus = computed(() => getResourcePermissions(usersStore.currentUser?.globalScopes).community.register);
		const showRegisteredCommunityCTA = computed(() => isSelfHostedDeployment.value && !foldersEnabled.value && canUserRegisterCommunityPlus.value);
		const showAIStarterCollectionCallout = computed(() => {
			return !loading.value && aiStarterTemplatesStore.isFeatureEnabled && !aiStarterTemplatesStore.calloutDismissed && !readOnlyEnv.value && (projectPages.isOverviewSubPage || hasPermissionToCreateFolders.value && hasPermissionToCreateWorkflows.value);
		});
		const showPersonalizedTemplates = computed(() => !loading.value && personalizedTemplatesStore.isFeatureEnabled());
		const shouldUseSimplifiedLayout = computed(() => {
			return !loading.value && readyToRunStore.getSimplifiedLayoutVisibility(route);
		});
		const hasActiveCallouts = computed(() => {
			return showAIStarterCollectionCallout.value || showPersonalizedTemplates.value || showReadyToRunWorkflowsCallout.value;
		});
		const showStartFromScratchCard = computed(() => {
			return !loading.value && !showRecommendedTemplatesInline.value && !readOnlyEnv.value && projectPermissions.value.workflow.create;
		});
		watch([() => route.params?.projectId, () => route.name], async () => {
			loading.value = true;
		});
		watch(() => route.params?.folderId, async (newVal) => {
			currentFolderId.value = newVal;
			filters.value.search = "";
			saveFiltersOnQueryString();
			await Promise.all([fetchWorkflows(), foldersStore.fetchTotalWorkflowsAndFoldersCount(route.params.projectId, currentFolderId.value ?? void 0)]);
		});
		sourceControlStore.$onAction(({ name: name$1, after }) => {
			if (name$1 !== "pullWorkfolder") return;
			after(async () => await initialize());
		});
		const refreshWorkflows = async () => {
			await Promise.all([fetchWorkflows(), foldersStore.fetchTotalWorkflowsAndFoldersCount(route.params.projectId, currentFolderId.value ?? void 0)]);
		};
		const onFolderDeleted = async (payload) => {
			const folderInfo = foldersStore.getCachedFolder(payload.folderId);
			foldersStore.deleteFoldersFromCache([payload.folderId, folderInfo?.parentFolder ?? ""]);
			const nextFolderId = currentFolderId.value === payload.folderId ? folderInfo?.parentFolder ?? null : currentFolderId.value;
			await foldersStore.fetchTotalWorkflowsAndFoldersCount(route.params.projectId, nextFolderId ?? void 0);
			if (currentFolderId.value === payload.folderId) router.push({
				name: VIEWS.PROJECTS_FOLDERS,
				params: {
					projectId: route.params.projectId,
					folderId: folderInfo?.parentFolder ?? ""
				}
			});
			else await fetchWorkflows();
			telemetry.track("User deleted folder", {
				folder_id: payload.folderId,
				deleted_sub_folders: payload.folderCount,
				deleted_sub_workflows: payload.workflowCount
			});
		};
		const showInsights = computed(() => {
			return projectPages.isOverviewSubPage && insightsStore.isSummaryEnabled && (workflowListResources.value.length > 0 || !personalizedTemplatesV2Store.isFeatureEnabled() && !personalizedTemplatesV3Store.isFeatureEnabled());
		});
		const showTemplateRecommendationV2 = computed(() => {
			return personalizedTemplatesV2Store.isFeatureEnabled() && !loading.value;
		});
		const showTemplateRecommendationV3 = computed(() => {
			return personalizedTemplatesV3Store.isFeatureEnabled() && !loading.value;
		});
		onMounted(async () => {
			documentTitle.set(i18n.baseText("workflows.heading"));
			usersStore.showPersonalizationSurvey();
			workflowListEventBus.on("resource-moved", fetchWorkflows);
			workflowListEventBus.on("workflow-duplicated", fetchWorkflows);
			workflowListEventBus.on("folder-deleted", onFolderDeleted);
			workflowListEventBus.on("folder-moved", moveFolder);
			workflowListEventBus.on("folder-transferred", onFolderTransferred);
			workflowListEventBus.on("workflow-moved", onWorkflowMoved);
			workflowListEventBus.on("workflow-transferred", onWorkflowTransferred);
		});
		onBeforeUnmount(() => {
			workflowListEventBus.off("resource-moved", fetchWorkflows);
			workflowListEventBus.off("workflow-duplicated", fetchWorkflows);
			workflowListEventBus.off("folder-deleted", onFolderDeleted);
			workflowListEventBus.off("folder-moved", moveFolder);
			workflowListEventBus.off("folder-transferred", onFolderTransferred);
			workflowListEventBus.off("workflow-moved", onWorkflowMoved);
			workflowListEventBus.off("workflow-transferred", onWorkflowTransferred);
		});
		const initialize = async () => {
			loading.value = true;
			await setFiltersFromQueryString();
			currentFolderId.value = route.params.folderId;
			const [resourcesPage] = await Promise.all([
				fetchWorkflows(),
				workflowsListStore.fetchActiveWorkflows(),
				usageStore.getLicenseInfo(),
				foldersStore.fetchTotalWorkflowsAndFoldersCount(route.params.projectId, currentFolderId.value ?? void 0)
			]);
			breadcrumbsLoading.value = false;
			workflowsAndFolders.value = resourcesPage;
			loading.value = false;
		};
		const fetchWorkflows = async () => {
			const delayedLoading = (0, import_debounce.default)(() => {
				loading.value = true;
			}, 300);
			const routeProjectId = route.params?.projectId;
			const homeProjectFilter = filters.value.homeProject || void 0;
			const parentFolder = route.params?.folderId || void 0;
			const tags = filters.value.tags.length ? filters.value.tags.map((tagId) => tagsStore.tagsById[tagId]?.name) : [];
			const activeFilter = filters.value.status === StatusFilter.ALL ? void 0 : filters.value.status === StatusFilter.ACTIVE;
			const archivedFilter = filters.value.showArchived ? void 0 : false;
			const fetchFolders = showFolders.value && !tags.length && activeFilter === void 0;
			try {
				const fetchedResources = await workflowsListStore.fetchWorkflowsPage(routeProjectId ?? homeProjectFilter, currentPage.value, pageSize.value, currentSort.value, {
					query: filters.value.search || void 0,
					active: activeFilter,
					isArchived: archivedFilter,
					tags: tags.length ? tags : void 0,
					parentFolderId: getParentFolderId(parentFolder)
				}, fetchFolders, projectPages.isSharedSubPage);
				foldersStore.cacheFolders(fetchedResources.filter((resource) => resource.resource === "folder").map((r) => ({
					id: r.id,
					name: r.name,
					parentFolder: r.parentFolder?.id
				})));
				const isCurrentFolderCached = foldersStore.breadcrumbsCache[parentFolder ?? ""] !== void 0;
				if (parentFolder && !isCurrentFolderCached && routeProjectId) {
					breadcrumbsLoading.value = true;
					await foldersStore.getFolderPath(routeProjectId, parentFolder);
					breadcrumbsLoading.value = false;
				}
				workflowsAndFolders.value = fetchedResources;
				showCardsBadge.value = projectPages.isOverviewSubPage || projectPages.isSharedSubPage || filters.value.search !== "";
				return fetchedResources;
			} catch (error) {
				toast.showError(error, i18n.baseText("workflows.list.error.fetching"));
				router.push({
					name: VIEWS.PROJECTS_FOLDERS,
					params: { projectId: routeProjectId }
				});
				return [];
			} finally {
				delayedLoading.cancel();
				loading.value = false;
				if (breadcrumbsLoading.value) breadcrumbsLoading.value = false;
			}
		};
		const getParentFolderId = (routeId) => {
			if (routeId !== null && routeId !== void 0) return routeId;
			if (projectPages.isOverviewSubPage || projectPages.isSharedSubPage || filters?.value.search) return;
			return "0";
		};
		const onFiltersUpdated = async () => {
			currentPage.value = 1;
			saveFiltersOnQueryString();
			if (!loading.value) await callDebounced(fetchWorkflows, {
				debounceTime: FILTERS_DEBOUNCE_TIME,
				trailing: true
			});
		};
		const onSearchUpdated = async (search) => {
			currentPage.value = 1;
			saveFiltersOnQueryString();
			if (search) await callDebounced(fetchWorkflows, {
				debounceTime: SEARCH_DEBOUNCE_TIME,
				trailing: true
			});
			else await fetchWorkflows();
		};
		const setPaginationAndSort = async (payload) => {
			if (payload.page) currentPage.value = payload.page;
			if (payload.pageSize) pageSize.value = payload.pageSize;
			if (payload.sort) currentSort.value = WORKFLOWS_SORT_MAP[payload.sort] ?? "updatedAt:desc";
			if (!loading.value) await callDebounced(fetchWorkflows, {
				debounceTime: FILTERS_DEBOUNCE_TIME,
				trailing: true
			});
		};
		const onClickTag = async (tagId) => {
			if (!filters.value.tags.includes(tagId)) {
				filters.value.tags.push(tagId);
				currentPage.value = 1;
				saveFiltersOnQueryString();
				await fetchWorkflows();
			}
		};
		const saveFiltersOnQueryString = () => {
			const currentQuery = { ...route.query };
			if (filters.value.search) currentQuery.search = filters.value.search;
			else delete currentQuery.search;
			if (filters.value.status !== StatusFilter.ALL) currentQuery.status = (filters.value.status === StatusFilter.ACTIVE).toString();
			else delete currentQuery.status;
			if (filters.value.showArchived) currentQuery.showArchived = "true";
			else delete currentQuery.showArchived;
			if (filters.value.tags.length) currentQuery.tags = filters.value.tags.join(",");
			else delete currentQuery.tags;
			if (filters.value.homeProject) currentQuery.homeProject = filters.value.homeProject;
			else delete currentQuery.homeProject;
			router.replace({ query: Object.keys(currentQuery).length ? currentQuery : void 0 });
		};
		const setFiltersFromQueryString = async () => {
			const newQuery = { ...route.query };
			const { tags, status, search, homeProject, sort, showArchived } = route.query ?? {};
			const isValidString = (value) => typeof value === "string" && value.trim().length > 0;
			if (isValidString(homeProject)) {
				await projectsStore.getAvailableProjects();
				if (isValidProjectId(homeProject)) {
					newQuery.homeProject = homeProject;
					filters.value.homeProject = homeProject;
				} else delete newQuery.homeProject;
			} else delete newQuery.homeProject;
			if (isValidString(search)) {
				newQuery.search = search;
				filters.value.search = search;
			} else delete newQuery.search;
			if (isValidString(tags)) {
				await tagsStore.fetchAll();
				const validTags = tags.split(",").filter((tag) => tagsStore.allTags.map((t) => t.id).includes(tag));
				if (validTags.length) {
					newQuery.tags = validTags.join(",");
					filters.value.tags = validTags;
				} else delete newQuery.tags;
			} else delete newQuery.tags;
			if (isValidString(status)) {
				newQuery.status = status;
				filters.value.status = status === "true" ? StatusFilter.ACTIVE : StatusFilter.DEACTIVATED;
			} else delete newQuery.status;
			if (isValidString(sort)) {
				const newSort = WORKFLOWS_SORT_MAP[sort] ?? "updatedAt:desc";
				newQuery.sort = sort;
				currentSort.value = newSort;
			} else delete newQuery.sort;
			if (isValidString(showArchived)) {
				newQuery.showArchived = showArchived;
				filters.value.showArchived = showArchived === "true";
			} else {
				delete newQuery.showArchived;
				filters.value.showArchived = false;
			}
			router.replace({ query: newQuery });
		};
		const addWorkflow = () => {
			uiStore.nodeViewInitialized = false;
			router.push({
				name: VIEWS.NEW_WORKFLOW,
				query: {
					projectId: route.params?.projectId,
					parentFolderId: route.params?.folderId
				}
			});
			telemetry.track("User clicked add workflow button", { source: "Workflows list" });
			trackEmptyCardClick("blank");
		};
		const trackEmptyCardClick = (option) => {
			telemetry.track("User clicked empty page option", { option });
		};
		function isValidProjectId(projectId) {
			return projectsStore.availableProjects.some((project) => project.id === projectId);
		}
		const createAIStarterWorkflows = async (source) => {
			try {
				const projectId = projectPages.isOverviewSubPage ? personalProject.value?.id : route.params.projectId;
				if (typeof projectId !== "string") {
					toast.showError(/* @__PURE__ */ new Error(), i18n.baseText("workflows.ai.starter.collection.error"));
					return;
				}
				const newFolder = await aiStarterTemplatesStore.createStarterWorkflows(projectId, currentFolderId.value ?? void 0);
				if (projectPages.isOverviewSubPage) await router.push({
					name: VIEWS.PROJECTS_FOLDERS,
					params: {
						projectId,
						folderId: newFolder.id
					}
				});
				else workflowsAndFolders.value.unshift({
					id: newFolder.id,
					name: newFolder.name,
					resource: "folder",
					createdAt: newFolder.createdAt,
					updatedAt: newFolder.updatedAt,
					subFolderCount: 0,
					workflowCount: 3,
					parentFolder: newFolder.parentFolder
				});
				aiStarterTemplatesStore.trackUserCreatedStarterCollection(source);
			} catch (error) {
				toast.showError(error, i18n.baseText("workflows.ai.starter.collection.error"));
				return;
			}
		};
		const handleCreateReadyToRunWorkflows = async (source) => {
			try {
				const projectId = projectPages.isOverviewSubPage ? personalProject.value?.id : route.params.projectId;
				if (typeof projectId !== "string") {
					toast.showError(/* @__PURE__ */ new Error(), i18n.baseText("workflows.readyToRunWorkflows.error"));
					return;
				}
				const newFolder = await readyToRunWorkflowsStore.createWorkflows(projectId, currentFolderId.value ?? void 0);
				readyToRunWorkflowsStore.trackCreateWorkflows(source);
				if (projectPages.isOverviewSubPage) await router.push({
					name: VIEWS.PROJECTS_FOLDERS,
					params: {
						projectId,
						folderId: newFolder.id
					}
				});
				else workflowsAndFolders.value.unshift({
					id: newFolder.id,
					name: newFolder.name,
					resource: "folder",
					createdAt: newFolder.createdAt,
					updatedAt: newFolder.updatedAt,
					subFolderCount: 0,
					workflowCount: 4,
					parentFolder: newFolder.parentFolder
				});
			} catch (error) {
				toast.showError(error, i18n.baseText("workflows.readyToRunWorkflows.error"));
				return;
			}
		};
		const dismissStarterCollectionCallout = () => {
			aiStarterTemplatesStore.dismissCallout();
			aiStarterTemplatesStore.trackUserDismissedCallout();
		};
		const onShowArchived = async () => {
			filters.value.showArchived = true;
			await onFiltersUpdated();
		};
		const handleDismissReadyToRunCallout = () => {
			readyToRunWorkflowsStore.dismissCallout();
			readyToRunWorkflowsStore.trackDismissCallout();
		};
		const onWorkflowActiveToggle = async (data) => {
			const workflow = workflowsAndFolders.value.find((w) => w.id === data.id);
			if (!workflow) return;
			workflow.active = data.active;
			workflow.activeVersionId = data.active ? workflow.versionId : null;
			try {
				const updatedWorkflow = await workflowsListStore.fetchWorkflow(data.id);
				if (updatedWorkflow.settings) workflow.settings = updatedWorkflow.settings;
			} catch (error) {
				toast.showError(error, i18n.baseText("workflows.list.error.fetching.one"));
			}
		};
		const onWorkflowUnpublished = async (data) => {
			const workflow = workflowsAndFolders.value.find((w) => w.id === data.id);
			if (!workflow) return;
			workflow.activeVersionId = null;
		};
		const getFolderListItem = (folderId) => {
			return workflowsAndFolders.value.find((resource) => resource.resource === "folder" && resource.id === folderId);
		};
		const getFolderContent = async (folderId) => {
			const folderListItem = getFolderListItem(folderId);
			if (folderListItem) return {
				workflowCount: folderListItem.workflowCount,
				subFolderCount: folderListItem.subFolderCount
			};
			try {
				const content$1 = await foldersStore.fetchFolderContent(currentProject.value?.id ?? "", folderId);
				return {
					workflowCount: content$1.totalWorkflows,
					subFolderCount: content$1.totalSubFolders
				};
			} catch (error) {
				toast.showMessage({
					title: i18n.baseText("folders.delete.error.message"),
					message: i18n.baseText("folders.not.found.message"),
					type: "error"
				});
				return {
					workflowCount: 0,
					subFolderCount: 0
				};
			}
		};
		const onFolderCardDrop = async (event) => {
			const { draggedResource, dropTarget } = folderHelpers.handleDrop(event);
			if (!draggedResource || !dropTarget) return;
			await moveResourceOnDrop(draggedResource, dropTarget);
		};
		const onBreadCrumbsItemDrop = async (item) => {
			if (!foldersStore.draggedElement) return;
			await moveResourceOnDrop({
				id: foldersStore.draggedElement.id,
				type: foldersStore.draggedElement.type,
				name: foldersStore.draggedElement.name
			}, {
				id: item.id,
				type: "folder",
				name: item.label
			});
			folderHelpers.onDragEnd();
		};
		const moveFolderToProjectRoot = async (id, name$1) => {
			if (!foldersStore.draggedElement) return;
			await moveResourceOnDrop({
				id: foldersStore.draggedElement.id,
				type: foldersStore.draggedElement.type,
				name: foldersStore.draggedElement.name
			}, {
				id,
				type: "project",
				name: name$1
			});
			folderHelpers.onDragEnd();
		};
		const moveResourceOnDrop = async (draggedResource, dropTarget) => {
			if (draggedResource.type === "folder") {
				await moveFolder({
					folder: {
						id: draggedResource.id,
						name: draggedResource.name
					},
					newParent: {
						id: dropTarget.id,
						name: dropTarget.name,
						type: dropTarget.type
					},
					options: {
						skipFetch: true,
						skipNavigation: true
					}
				});
				workflowsAndFolders.value = workflowsAndFolders.value.filter((folder) => folder.id !== draggedResource.id);
				const targetFolder = getFolderListItem(dropTarget.id);
				if (targetFolder) targetFolder.subFolderCount += 1;
			} else if (draggedResource.type === "workflow") {
				await onWorkflowMoved({
					workflow: {
						id: draggedResource.id,
						name: draggedResource.name,
						oldParentId: currentFolderId.value ?? ""
					},
					newParent: {
						id: dropTarget.id,
						name: dropTarget.name,
						type: dropTarget.type
					},
					options: { skipFetch: true }
				});
				workflowsAndFolders.value = workflowsAndFolders.value.filter((workflow) => workflow.id !== draggedResource.id);
				const targetFolder = getFolderListItem(dropTarget.id);
				if (targetFolder) targetFolder.workflowCount += 1;
			}
		};
		const onBreadcrumbItemClick = (item) => {
			if (item.href) {
				loading.value = true;
				router.push(item.href).then(() => {
					currentFolderId.value = item.id;
					loading.value = false;
				}).catch((error) => {
					toast.showError(error, i18n.baseText("folders.open.error.title"));
				});
			}
		};
		const onBreadCrumbsAction = async (action) => {
			switch (action) {
				case FOLDER_LIST_ITEM_ACTIONS.CREATE:
					if (!route.params.projectId) return;
					const currentParent = currentFolder.value?.name || projectName.value;
					if (!currentParent) return;
					await createFolder({
						id: route.params.folderId ?? "-1",
						name: currentParent,
						type: currentFolder.value ? "folder" : "project"
					});
					break;
				case FOLDER_LIST_ITEM_ACTIONS.CREATE_WORKFLOW:
					addWorkflow();
					break;
				case FOLDER_LIST_ITEM_ACTIONS.DELETE:
					if (!route.params.folderId) return;
					const content$1 = await getFolderContent(route.params.folderId);
					await deleteFolder(route.params.folderId, content$1.workflowCount, content$1.subFolderCount);
					break;
				case FOLDER_LIST_ITEM_ACTIONS.RENAME:
					onNameToggle();
					break;
				case FOLDER_LIST_ITEM_ACTIONS.MOVE:
					if (!currentFolder.value) return;
					uiStore.openMoveToFolderModal("folder", {
						id: currentFolder.value?.id,
						name: currentFolder.value?.name,
						parentFolderId: currentFolder.value?.parentFolder
					}, workflowListEventBus);
					break;
				default: break;
			}
		};
		const onFolderCardAction = async (payload) => {
			const clickedFolder = foldersStore.getCachedFolder(payload.folderId);
			if (!clickedFolder) return;
			switch (payload.action) {
				case FOLDER_LIST_ITEM_ACTIONS.CREATE:
					await createFolder({
						id: clickedFolder.id,
						name: clickedFolder.name,
						type: "folder"
					}, { openAfterCreate: true });
					break;
				case FOLDER_LIST_ITEM_ACTIONS.CREATE_WORKFLOW:
					currentFolderId.value = clickedFolder.id;
					router.push({
						name: VIEWS.NEW_WORKFLOW,
						query: {
							projectId: route.params?.projectId,
							parentFolderId: clickedFolder.id
						}
					});
					break;
				case FOLDER_LIST_ITEM_ACTIONS.DELETE: {
					const content$1 = await getFolderContent(clickedFolder.id);
					await deleteFolder(clickedFolder.id, content$1.workflowCount, content$1.subFolderCount);
					break;
				}
				case FOLDER_LIST_ITEM_ACTIONS.RENAME:
					await renameFolder(clickedFolder.id);
					break;
				case FOLDER_LIST_ITEM_ACTIONS.MOVE:
					uiStore.openMoveToFolderModal("folder", {
						id: clickedFolder.id,
						name: clickedFolder.name,
						parentFolderId: clickedFolder.parentFolder
					}, workflowListEventBus);
					break;
				default: break;
			}
		};
		const createFolder = async (parent, options = { openAfterCreate: false }) => {
			const promptResponse = await message.prompt(i18n.baseText("folders.add.to.parent.message", { interpolate: { parent: parent.name } }), {
				confirmButtonText: i18n.baseText("generic.create"),
				cancelButtonText: i18n.baseText("generic.cancel"),
				inputValidator: folderHelpers.validateFolderName,
				customClass: "add-folder-modal"
			});
			if (promptResponse.action === "confirm") {
				const folderName = promptResponse.value;
				try {
					const newFolder = await foldersStore.createFolder(folderName, route.params.projectId, parent.type === "folder" ? parent.id : void 0);
					const newFolderURL = router.resolve({
						name: VIEWS.PROJECTS_FOLDERS,
						params: {
							projectId: route.params.projectId,
							folderId: newFolder.id
						}
					}).href;
					toast.showToast({
						title: i18n.baseText("folders.add.success.title"),
						message: i18n.baseText("folders.add.success.message", { interpolate: {
							link: newFolderURL,
							folderName: newFolder.name
						} }),
						onClick: (event) => {
							if (event?.target instanceof HTMLAnchorElement) {
								event.preventDefault();
								router.push(newFolderURL);
							}
						},
						type: "success"
					});
					telemetry.track("User created folder", { folder_id: newFolder.id });
					if (options.openAfterCreate) await router.push({
						name: VIEWS.PROJECTS_FOLDERS,
						params: {
							projectId: route.params.projectId,
							folderId: parent.id
						}
					});
					else if (!workflowsAndFolders.value.length) {
						workflowsAndFolders.value = [{
							id: newFolder.id,
							name: newFolder.name,
							resource: "folder",
							createdAt: newFolder.createdAt,
							updatedAt: newFolder.updatedAt,
							homeProject: projectsStore.currentProject,
							workflowCount: 0,
							subFolderCount: 0
						}];
						foldersStore.cacheFolders([{
							id: newFolder.id,
							name: newFolder.name,
							parentFolder: currentFolder.value?.id
						}]);
					} else await fetchWorkflows();
				} catch (error) {
					toast.showError(error, i18n.baseText("folders.create.error.title"));
				}
			}
		};
		const renameFolder = async (folderId) => {
			const folder = foldersStore.getCachedFolder(folderId);
			if (!folder || !currentProject.value) return;
			const promptResponse = await message.prompt(i18n.baseText("folders.rename.message", { interpolate: { folderName: folder.name } }), {
				confirmButtonText: i18n.baseText("generic.rename"),
				cancelButtonText: i18n.baseText("generic.cancel"),
				inputValue: folder.name,
				customClass: "rename-folder-modal",
				inputValidator: folderHelpers.validateFolderName
			});
			if (promptResponse.action === "confirm") {
				const newFolderName = promptResponse.value;
				try {
					await foldersStore.renameFolder(currentProject.value?.id, folderId, newFolderName);
					foldersStore.breadcrumbsCache[folderId].name = newFolderName;
					toast.showMessage({
						title: i18n.baseText("folders.rename.success.message", { interpolate: { folderName: newFolderName } }),
						type: "success"
					});
					await fetchWorkflows();
					telemetry.track("User renamed folder", { folder_id: folderId });
				} catch (error) {
					toast.showError(error, i18n.baseText("folders.rename.error.title"));
				}
			}
		};
		const createFolderInCurrent = async () => {
			if (showRegisteredCommunityCTA.value) {
				uiStore.openModalWithData({
					name: COMMUNITY_PLUS_ENROLLMENT_MODAL,
					data: { customHeading: i18n.baseText("folders.registeredCommunity.cta.heading") }
				});
				return;
			}
			if (!route.params.projectId) return;
			const currentParent = currentFolder.value?.name || projectName.value;
			if (!currentParent) return;
			await createFolder({
				id: route.params.folderId ?? "-1",
				name: currentParent,
				type: currentFolder.value ? "folder" : "project"
			});
		};
		const deleteFolder = async (folderId, workflowCount, subFolderCount) => {
			if (subFolderCount || workflowCount) uiStore.openDeleteFolderModal(folderId, workflowListEventBus, {
				workflowCount,
				subFolderCount
			});
			else {
				await foldersStore.deleteFolder(route.params.projectId, folderId);
				toast.showMessage({
					title: i18n.baseText("folders.delete.success.message"),
					type: "success"
				});
				await onFolderDeleted({
					folderId,
					workflowCount,
					folderCount: subFolderCount
				});
			}
		};
		const moveFolder = async (payload) => {
			if (!route.params.projectId) return;
			loading.value = true;
			try {
				if (!payload.options?.skipApiCall) await foldersStore.moveFolder(route.params.projectId, payload.folder.id, payload.newParent.type === "folder" ? payload.newParent.id : "0");
				const isCurrentFolder = currentFolderId.value === payload.folder.id;
				const newFolderURL = router.resolve({
					name: VIEWS.PROJECTS_FOLDERS,
					params: {
						projectId: route.params.projectId,
						folderId: payload.newParent.type === "folder" ? payload.newParent.id : void 0
					}
				}).href;
				if (isCurrentFolder && !payload.options?.skipNavigation) {
					router.push(newFolderURL);
					toast.showMessage({
						title: i18n.baseText("folders.move.success.title"),
						message: i18n.baseText("folders.move.success.messageNoAccess", { interpolate: {
							folderName: payload.folder.name,
							newFolderName: payload.newParent.name
						} }),
						type: "success"
					});
				} else {
					toast.showToast({
						title: i18n.baseText("folders.move.success.title"),
						message: i18n.baseText("folders.move.success.message", { interpolate: {
							folderName: payload.folder.name,
							newFolderName: payload.newParent.name
						} }),
						onClick: (event) => {
							if (event?.target instanceof HTMLAnchorElement) {
								event.preventDefault();
								router.push(newFolderURL);
							}
						},
						type: "success"
					});
					if (!payload.options?.skipFetch) await fetchWorkflows();
				}
			} catch (error) {
				toast.showError(error, i18n.baseText("folders.move.error.title"));
			} finally {
				loading.value = false;
			}
		};
		const onFolderTransferred = async (payload) => {
			loading.value = true;
			try {
				const isCurrentFolder = currentFolderId.value === payload.source.folder.id;
				const newFolderURL = router.resolve({
					name: VIEWS.PROJECTS_FOLDERS,
					params: {
						projectId: payload.destination.canAccess ? payload.destination.projectId : payload.source.projectId,
						folderId: payload.destination.canAccess ? payload.source.folder.id : void 0
					}
				}).href;
				if (isCurrentFolder) if (payload.destination.canAccess) router.push(newFolderURL);
				else router.push({
					name: VIEWS.PROJECTS_WORKFLOWS,
					params: { projectId: payload.source.projectId }
				});
				else {
					await refreshWorkflows();
					if (payload.destination.canAccess) toast.showToast({
						title: i18n.baseText("folders.move.success.title"),
						message: i18n.baseText("folders.move.success.message", { interpolate: {
							folderName: payload.source.folder.name,
							newFolderName: payload.destination.parentFolder.name
						} }),
						onClick: (event) => {
							if (event?.target instanceof HTMLAnchorElement) {
								event.preventDefault();
								router.push(newFolderURL);
							}
						},
						type: "success"
					});
					else toast.showToast({
						title: i18n.baseText("folders.move.success.title"),
						message: i18n.baseText("folders.move.success.messageNoAccess", { interpolate: {
							folderName: payload.source.folder.name,
							newFolderName: payload.destination.parentFolder.name
						} }),
						type: "success"
					});
				}
			} catch (error) {
				toast.showError(error, i18n.baseText("folders.move.error.title"));
			} finally {
				loading.value = false;
			}
		};
		const moveWorkflowToFolder = async (payload) => {
			if (showRegisteredCommunityCTA.value) {
				uiStore.openModalWithData({
					name: COMMUNITY_PLUS_ENROLLMENT_MODAL,
					data: { customHeading: i18n.baseText("folders.registeredCommunity.cta.heading") }
				});
				return;
			}
			uiStore.openMoveToFolderModal("workflow", {
				id: payload.id,
				name: payload.name,
				parentFolderId: payload.parentFolderId,
				sharedWithProjects: payload.sharedWithProjects,
				homeProjectId: payload.homeProjectId
			}, workflowListEventBus);
		};
		const onWorkflowTransferred = async (payload) => {
			loading.value = true;
			try {
				await refreshWorkflows();
				if (payload.destination.canAccess) toast.showToast({
					title: i18n.baseText("folders.move.workflow.success.title"),
					message: i18n.baseText("folders.move.workflow.success.message", { interpolate: {
						workflowName: payload.source.workflow.name,
						newFolderName: payload.destination.parentFolder.name
					} }),
					onClick: (event) => {
						if (event?.target instanceof HTMLAnchorElement) {
							event.preventDefault();
							router.push({
								name: VIEWS.PROJECTS_FOLDERS,
								params: {
									projectId: payload.destination.projectId,
									folderId: payload.destination.parentFolder.id
								}
							});
						}
					},
					type: "success"
				});
				else toast.showToast({
					title: i18n.baseText("folders.move.workflow.success.title"),
					message: i18n.baseText("folders.move.workflow.success.messageNoAccess", { interpolate: {
						workflowName: payload.source.workflow.name,
						newFolderName: payload.destination.parentFolder.name
					} }),
					type: "success"
				});
			} catch (error) {
				toast.showError(error, i18n.baseText("folders.move.workflow.error.title"));
			} finally {
				loading.value = false;
			}
		};
		const onWorkflowMoved = async (payload) => {
			if (!route.params.projectId) return;
			loading.value = true;
			try {
				const newFolderURL = router.resolve({
					name: VIEWS.PROJECTS_FOLDERS,
					params: {
						projectId: route.params.projectId,
						folderId: payload.newParent.type === "folder" ? payload.newParent.id : void 0
					}
				}).href;
				if (!payload.options?.skipApiCall) {
					const workflowResource = workflowsAndFolders.value.find((resource) => resource.id === payload.workflow.id);
					await workflowsStore.updateWorkflow(payload.workflow.id, {
						parentFolderId: payload.newParent.type === "folder" ? payload.newParent.id : "0",
						versionId: workflowResource?.versionId
					});
				}
				if (!payload.options?.skipFetch) await fetchWorkflows();
				toast.showToast({
					title: i18n.baseText("folders.move.workflow.success.title"),
					message: i18n.baseText("folders.move.workflow.success.message", { interpolate: {
						workflowName: payload.workflow.name,
						newFolderName: payload.newParent.name
					} }),
					onClick: (event) => {
						if (event?.target instanceof HTMLAnchorElement) {
							event.preventDefault();
							router.push(newFolderURL);
						}
					},
					type: "success"
				});
				telemetry.track("User moved content", {
					workflow_id: payload.workflow.id,
					source_folder_id: payload.workflow.oldParentId,
					destination_folder_id: payload.newParent.id
				});
			} catch (error) {
				toast.showError(error, i18n.baseText("folders.move.workflow.error.title"));
			} finally {
				loading.value = false;
			}
		};
		const onCreateWorkflowClick = () => {
			router.push({
				name: VIEWS.NEW_WORKFLOW,
				query: {
					projectId: currentProject.value?.id,
					parentFolderId: route.params.folderId
				}
			});
		};
		const renameInput = useTemplateRef("renameInput");
		function onNameToggle() {
			setTimeout(() => {
				if (renameInput.value?.forceFocus) renameInput.value.forceFocus();
			}, 0);
		}
		const onNameSubmit = async (name$1) => {
			if (!currentFolder.value || !currentProject.value) return;
			const newName = name$1.trim();
			if (!newName) {
				toast.showMessage({
					title: i18n.baseText("renameAction.emptyName.title"),
					message: i18n.baseText("renameAction.emptyName.message"),
					type: "error"
				});
				return;
			}
			if (newName === currentFolder.value.name) {
				renameInput.value?.forceCancel();
				return;
			}
			const validationResult = folderHelpers.validateFolderName(newName);
			if (typeof validationResult === "string") {
				toast.showMessage({
					title: i18n.baseText("renameAction.invalidName.title"),
					message: validationResult,
					type: "error"
				});
				renameInput.value?.forceCancel();
				return;
			} else try {
				await foldersStore.renameFolder(currentProject.value?.id, currentFolder.value.id, newName);
				foldersStore.breadcrumbsCache[currentFolder.value.id].name = newName;
				toast.showMessage({
					title: i18n.baseText("folders.rename.success.message", { interpolate: { folderName: newName } }),
					type: "success"
				});
				telemetry.track("User renamed folder", { folder_id: currentFolder.value.id });
			} catch (error) {
				toast.showError(error, i18n.baseText("folders.rename.error.title"));
				renameInput.value?.forceCancel();
			}
		};
		return (_ctx, _cache) => {
			return shouldUseSimplifiedLayout.value ? (openBlock(), createBlock(EmptyStateLayout_default, {
				key: 0,
				"onClick:add": addWorkflow
			})) : (openBlock(), createBlock(ResourcesListLayout_default, {
				key: 1,
				ref: "resourcesListLayout",
				filters: filters.value,
				"onUpdate:filters": [_cache[3] || (_cache[3] = ($event) => filters.value = $event), onFiltersUpdated],
				"resource-key": "workflows",
				type: "list-paginated",
				resources: workflowListResources.value,
				"type-props": { itemSize: 80 },
				shareable: isShareable.value,
				initialize,
				disabled: unref(readOnlyEnv) || !unref(projectPermissions).workflow.create,
				loading: false,
				"resources-refreshing": loading.value,
				"custom-page-size": unref(50),
				"total-items": unref(workflowsListStore).totalWorkflowCount,
				"dont-perform-sorting-and-filtering": true,
				"has-empty-state": unref(foldersStore).totalWorkflowCount === 0 && !currentFolderId.value,
				"onClick:add": addWorkflow,
				"onUpdate:search": onSearchUpdated,
				"onUpdate:paginationAndSort": setPaginationAndSort,
				onMouseleave: unref(folderHelpers).resetDropTarget
			}, createSlots({
				header: withCtx(() => [createVNode(ProjectHeader_default, {
					"has-active-callouts": hasActiveCallouts.value,
					onCreateFolder: createFolderInCurrent
				}, {
					default: withCtx(() => [showInsights.value ? (openBlock(), createBlock(InsightsSummary_default, {
						key: 0,
						loading: unref(insightsStore).weeklySummary.isLoading,
						summary: unref(insightsStore).weeklySummary.state,
						"time-range": "week"
					}, null, 8, ["loading", "summary"])) : createCommentVNode("", true)]),
					_: 1
				}, 8, ["has-active-callouts"])]),
				callout: withCtx(() => [showAIStarterCollectionCallout.value ? (openBlock(), createBlock(unref(N8nCallout_default), {
					key: 0,
					theme: "secondary",
					icon: "gift",
					class: normalizeClass(_ctx.$style["easy-ai-workflow-callout"])
				}, {
					trailingContent: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["callout-trailing-content"]) }, [createVNode(unref(N8nButton_default), {
						variant: "subtle",
						"data-test-id": "easy-ai-button",
						size: "small",
						onClick: _cache[0] || (_cache[0] = ($event) => createAIStarterWorkflows("callout"))
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("generic.startNow")), 1)]),
						_: 1
					}), createVNode(unref(N8nIcon_default), {
						size: "small",
						icon: "x",
						title: unref(i18n).baseText("generic.dismiss"),
						class: "clickable",
						onClick: dismissStarterCollectionCallout
					}, null, 8, ["title"])], 2)]),
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("workflows.ai.starter.collection.callout")) + " ", 1)]),
					_: 1
				}, 8, ["class"])) : showPersonalizedTemplates.value ? (openBlock(), createBlock(SuggestedWorkflows_default, { key: 1 }, {
					default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(personalizedTemplatesStore).suggestedWorkflows, (workflow) => {
						return openBlock(), createBlock(SuggestedWorkflowCard_default, {
							key: workflow.id,
							"data-test-id": "resource-list-item-suggested-workflow",
							data: {
								id: workflow.id,
								name: workflow.name
							}
						}, null, 8, ["data"]);
					}), 128))]),
					_: 1
				})) : createCommentVNode("", true), showReadyToRunWorkflowsCallout.value ? (openBlock(), createBlock(unref(N8nCallout_default), {
					key: 2,
					theme: "secondary",
					icon: "bolt-filled",
					class: normalizeClass(_ctx.$style["easy-ai-workflow-callout"])
				}, {
					trailingContent: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["callout-trailing-content"]) }, [createVNode(unref(N8nButton_default), {
						variant: "subtle",
						"data-test-id": "easy-ai-button",
						size: "small",
						onClick: _cache[1] || (_cache[1] = ($event) => handleCreateReadyToRunWorkflows("callout"))
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("generic.startNow")), 1)]),
						_: 1
					}), createVNode(unref(N8nIcon_default), {
						size: "small",
						icon: "x",
						title: unref(i18n).baseText("generic.dismiss"),
						class: "clickable",
						onClick: handleDismissReadyToRunCallout
					}, null, 8, ["title"])], 2)]),
					default: withCtx(() => [createTextVNode(toDisplayString(unref(readyToRunWorkflowsStore).getCalloutText()) + " ", 1)]),
					_: 1
				}, 8, ["class"])) : createCommentVNode("", true)]),
				breadcrumbs: withCtx(() => [breadcrumbsLoading.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style["breadcrumbs-loading"])
				}, [createVNode(unref(N8nLoading_default), {
					loading: breadcrumbsLoading.value,
					rows: 1,
					variant: "p"
				}, null, 8, ["loading"])], 2)) : showFolders.value && currentFolder.value ? (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style["breadcrumbs-container"]),
					"data-test-id": "main-breadcrumbs"
				}, [createVNode(FolderBreadcrumbs_default, {
					"current-folder": currentFolderParent.value,
					actions: mainBreadcrumbsActions.value,
					"hidden-items-trigger": isDragging.value ? "hover" : "click",
					"current-folder-as-link": true,
					onItemSelected: onBreadcrumbItemClick,
					onAction: onBreadCrumbsAction,
					onItemDrop: onBreadCrumbsItemDrop,
					onProjectDrop: moveFolderToProjectRoot
				}, {
					append: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style["path-separator"]) }, "/", 2), (openBlock(), createBlock(unref(N8nInlineTextEdit_default), {
						ref_key: "renameInput",
						ref: renameInput,
						key: currentFolder.value?.id,
						"data-test-id": "breadcrumbs-item-current",
						placeholder: unref(i18n).baseText("folders.rename.placeholder"),
						"model-value": currentFolder.value.name,
						"max-length": 30,
						"read-only": unref(readOnlyEnv) || !hasPermissionToUpdateFolders.value,
						class: normalizeClass({
							[_ctx.$style.name]: true,
							[_ctx.$style["pointer-disabled"]]: isDragging.value
						}),
						"onUpdate:modelValue": onNameSubmit
					}, null, 8, [
						"placeholder",
						"model-value",
						"read-only",
						"class"
					]))]),
					_: 1
				}, 8, [
					"current-folder",
					"actions",
					"hidden-items-trigger"
				])], 2)) : createCommentVNode("", true)]),
				item: withCtx(({ item: data, index }) => [data.resourceType === "folder" ? (openBlock(), createBlock(Draggable_default, {
					key: `folder-${index}`,
					disabled: !isDragNDropEnabled.value,
					type: "move",
					"target-data-key": "folder",
					onDragstart: unref(folderHelpers).onDragStart,
					onDragend: unref(folderHelpers).onDragEnd
				}, {
					preview: withCtx(() => [createVNode(unref(N8nCard_default), null, {
						default: withCtx(() => [createVNode(unref(N8nText_default), {
							tag: "h2",
							bold: ""
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(data.name), 1)]),
							_: 2
						}, 1024)]),
						_: 2
					}, 1024)]),
					default: withCtx(() => [createVNode(FolderCard_default, {
						data,
						actions: folderCardActions.value,
						"read-only": unref(readOnlyEnv) || !hasPermissionToDeleteFolders.value && !hasPermissionToCreateFolders.value,
						"personal-project": personalProject.value,
						"data-resourceid": data.id,
						"data-resourcename": data.name,
						class: normalizeClass([{
							["mb-2xs"]: true,
							[_ctx.$style["drag-active"]]: isDragging.value,
							[_ctx.$style.dragging]: unref(foldersStore).draggedElement?.type === "folder" && unref(foldersStore).draggedElement?.id === data.id,
							[_ctx.$style["drop-active"]]: unref(foldersStore).activeDropTarget?.id === data.id
						}, "mb-2xs"]),
						"show-ownership-badge": showCardsBadge.value,
						"data-target": "folder",
						"data-droppable": "",
						onAction: onFolderCardAction,
						onMouseenter: unref(folderHelpers).onDragEnter,
						onMouseup: onFolderCardDrop
					}, null, 8, [
						"data",
						"actions",
						"read-only",
						"personal-project",
						"data-resourceid",
						"data-resourcename",
						"class",
						"show-ownership-badge",
						"onMouseenter"
					])]),
					_: 2
				}, 1032, [
					"disabled",
					"onDragstart",
					"onDragend"
				])) : (openBlock(), createBlock(Draggable_default, {
					key: `workflow-${index}`,
					disabled: !isDragNDropEnabled.value,
					type: "move",
					"target-data-key": "workflow",
					onDragstart: unref(folderHelpers).onDragStart,
					onDragend: unref(folderHelpers).onDragEnd
				}, {
					preview: withCtx(() => [createVNode(unref(N8nCard_default), null, {
						default: withCtx(() => [createVNode(unref(N8nText_default), {
							tag: "h2",
							bold: ""
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(data.name), 1)]),
							_: 2
						}, 1024)]),
						_: 2
					}, 1024)]),
					default: withCtx(() => [createVNode(WorkflowCard_default, {
						"data-test-id": "resources-list-item-workflow",
						"data-target": "workflow",
						class: normalizeClass({
							["mb-2xs"]: true,
							[_ctx.$style["drag-active"]]: isDragging.value,
							[_ctx.$style.dragging]: unref(foldersStore).draggedElement?.type === "workflow" && unref(foldersStore).draggedElement?.id === data.id
						}),
						data,
						"workflow-list-event-bus": unref(workflowListEventBus),
						"read-only": unref(readOnlyEnv),
						"data-resourceid": data.id,
						"data-resourcename": data.name,
						"show-ownership-badge": showCardsBadge.value,
						"are-folders-enabled": unref(settingsStore).isFoldersFeatureEnabled,
						"are-tags-enabled": unref(settingsStore).areTagsEnabled,
						"is-mcp-enabled": mcpEnabled.value,
						"onClick:tag": onClickTag,
						"onWorkflow:deleted": refreshWorkflows,
						"onWorkflow:archived": refreshWorkflows,
						"onWorkflow:unarchived": refreshWorkflows,
						"onWorkflow:moved": fetchWorkflows,
						"onWorkflow:duplicated": fetchWorkflows,
						"onWorkflow:unpublished": onWorkflowUnpublished,
						"onWorkflow:activeToggle": onWorkflowActiveToggle,
						"onAction:moveToFolder": moveWorkflowToFolder,
						onMouseenter: _cache[2] || (_cache[2] = ($event) => isDragging.value ? unref(folderHelpers).resetDropTarget() : {})
					}, null, 8, [
						"class",
						"data",
						"workflow-list-event-bus",
						"read-only",
						"data-resourceid",
						"data-resourcename",
						"show-ownership-badge",
						"are-folders-enabled",
						"are-tags-enabled",
						"is-mcp-enabled"
					])]),
					_: 2
				}, 1032, [
					"disabled",
					"onDragstart",
					"onDragend"
				]))]),
				empty: withCtx(() => [unref(projectPages).isSharedSubPage && personalProject.value ? (openBlock(), createBlock(EmptySharedSectionActionBox_default, {
					key: 0,
					"personal-project": personalProject.value,
					"resource-type": "workflows"
				}, null, 8, ["personal-project"])) : (openBlock(), createElementBlock("div", _hoisted_1, [unref(showRecommendedTemplatesInline) ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.templatesContainer)
				}, [createVNode(RecommendedTemplatesSection_default)], 2)) : (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.emptyStateNoTemplates),
					"data-test-id": "list-empty-state"
				}, [createBaseVNode("div", _hoisted_2, [createVNode(unref(N8nHeading_default), {
					tag: "h2",
					size: "xlarge",
					class: "mb-2xs"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(emptyListHeading)), 1)]),
					_: 1
				}), createVNode(unref(N8nText_default), {
					size: "large",
					color: "text-base"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(emptyListDescription)), 1)]),
					_: 1
				})]), showStartFromScratchCard.value ? (openBlock(), createBlock(unref(N8nCard_default), {
					key: 0,
					class: normalizeClass(_ctx.$style.emptyStateCard),
					hoverable: "",
					"data-test-id": "new-workflow-card",
					onClick: addWorkflow
				}, {
					default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.emptyStateCardContent) }, [createVNode(unref(N8nIcon_default), {
						class: normalizeClass(_ctx.$style.emptyStateCardIcon),
						icon: "file",
						color: "foreground-dark",
						"stroke-width": 1.5
					}, null, 8, ["class"]), createVNode(unref(N8nText_default), {
						size: "large",
						class: "mt-xs"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("workflows.empty.startFromScratch")), 1)]),
						_: 1
					})], 2)]),
					_: 1
				}, 8, ["class"])) : createCommentVNode("", true)], 2)), showTemplateRecommendationV3.value ? (openBlock(), createBlock(TemplateRecommendationV3_default, { key: 2 })) : showTemplateRecommendationV2.value ? (openBlock(), createBlock(TemplateRecommendationV2_default, { key: 3 })) : createCommentVNode("", true)]))]),
				filters: withCtx(({ setKeyValue }) => [
					unref(settingsStore).areTagsEnabled ? (openBlock(), createElementBlock("div", _hoisted_3, [createVNode(unref(N8nInputLabel_default), {
						label: unref(i18n).baseText("workflows.filters.tags"),
						bold: false,
						size: "small",
						color: "text-base",
						class: "mb-3xs"
					}, null, 8, ["label"]), createVNode(WorkflowTagsDropdown_default, {
						placeholder: unref(i18n).baseText("workflowOpen.filterWorkflows"),
						"model-value": filters.value.tags,
						"create-enabled": false,
						"onUpdate:modelValue": ($event) => setKeyValue("tags", $event)
					}, null, 8, [
						"placeholder",
						"model-value",
						"onUpdate:modelValue"
					])])) : createCommentVNode("", true),
					createBaseVNode("div", _hoisted_4, [createVNode(unref(N8nInputLabel_default), {
						label: unref(i18n).baseText("workflows.filters.status"),
						bold: false,
						size: "small",
						color: "text-base",
						class: "mb-3xs"
					}, null, 8, ["label"]), createVNode(unref(N8nSelect_default), {
						"data-test-id": "status-dropdown",
						"model-value": filters.value.status,
						"onUpdate:modelValue": ($event) => setKeyValue("status", $event)
					}, {
						default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(statusFilterOptions.value, (option) => {
							return openBlock(), createBlock(unref(N8nOption_default), {
								key: option.label,
								label: option.label,
								value: option.value,
								"data-test-id": "status"
							}, null, 8, ["label", "value"]);
						}), 128))]),
						_: 1
					}, 8, ["model-value", "onUpdate:modelValue"])]),
					createBaseVNode("div", _hoisted_5, [createVNode(unref(Checkbox_default), {
						label: unref(i18n).baseText("workflows.filters.showArchived"),
						"model-value": filters.value.showArchived || false,
						"data-test-id": "show-archived-checkbox",
						"onUpdate:modelValue": ($event) => setKeyValue("showArchived", $event)
					}, null, 8, [
						"label",
						"model-value",
						"onUpdate:modelValue"
					])])
				]),
				postamble: withCtx(() => [workflowsAndFolders.value.length === 0 && !hasFilters.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style["empty-folder-container"]),
					"data-test-id": "empty-folder-container"
				}, [showArchivedOnlyHint.value ? (openBlock(), createBlock(unref(N8nInfoTip_default), {
					key: 0,
					bold: false
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("workflows.archivedOnly.hint")) + " ", 1), createVNode(unref(N8nLink_default), {
						size: "small",
						"data-test-id": "show-archived-link",
						onClick: onShowArchived
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n).baseText("workflows.archivedOnly.hint.link")), 1)]),
						_: 1
					})]),
					_: 1
				})) : createCommentVNode("", true), unref(projectPages).isSharedSubPage && personalProject.value ? (openBlock(), createBlock(EmptySharedSectionActionBox_default, {
					key: 1,
					"personal-project": personalProject.value,
					"resource-type": "workflows"
				}, null, 8, ["personal-project"])) : currentFolder.value ? (openBlock(), createBlock(unref(N8nActionBox_default), {
					key: 2,
					"data-test-id": "empty-folder-action-box",
					heading: unref(i18n).baseText("folders.empty.actionbox.title", { interpolate: { folderName: currentFolder.value.name } }),
					"button-text": unref(i18n).baseText("generic.create.workflow"),
					"button-type": "secondary",
					"button-disabled": unref(readOnlyEnv) || !unref(projectPermissions).workflow.create,
					"onClick:button": onCreateWorkflowClick
				}, {
					disabledButtonTooltip: withCtx(() => [createTextVNode(toDisplayString(unref(readOnlyEnv) ? unref(i18n).baseText("readOnlyEnv.cantAdd.workflow") : unref(i18n).baseText("generic.missing.permissions")), 1)]),
					_: 1
				}, 8, [
					"heading",
					"button-text",
					"button-disabled"
				])) : createCommentVNode("", true)], 2)) : createCommentVNode("", true), unref(showRecommendedTemplatesInline) && showArchivedOnlyHint.value ? (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.templatesContainer)
				}, [createVNode(RecommendedTemplatesSection_default)], 2)) : createCommentVNode("", true)]),
				_: 2
			}, [showFolders.value || showRegisteredCommunityCTA.value ? {
				name: "add-button",
				fn: withCtx(() => [createVNode(unref(N8nTooltip_default), {
					placement: "top",
					disabled: !showRegisteredCommunityCTA.value && (unref(readOnlyEnv) || !hasPermissionToCreateFolders.value)
				}, {
					content: withCtx(() => [createBaseVNode("span", null, toDisplayString(currentParentName.value ? unref(i18n).baseText("folders.add.to.parent.message", { interpolate: { parent: currentParentName.value } }) : unref(i18n).baseText("folders.add.here.message")), 1)]),
					default: withCtx(() => [createVNode(unref(N8nButton_default), {
						variant: "outline",
						size: "small",
						iconOnly: "",
						icon: "folder-plus",
						"data-test-id": "add-folder-button",
						class: normalizeClass(_ctx.$style["add-folder-button"]),
						disabled: !showRegisteredCommunityCTA.value && (unref(readOnlyEnv) || !hasPermissionToCreateFolders.value),
						onClick: createFolderInCurrent
					}, null, 8, ["class", "disabled"])]),
					_: 1
				}, 8, ["disabled"])]),
				key: "0"
			} : void 0]), 1032, [
				"filters",
				"resources",
				"shareable",
				"disabled",
				"resources-refreshing",
				"custom-page-size",
				"total-items",
				"has-empty-state",
				"onMouseleave"
			]));
		};
	}
});
const templatesContainer = "_templatesContainer_152id_125";
const emptyStateCard = "_emptyStateCard_152id_145";
const emptyStateCardContent = "_emptyStateCardContent_152id_158";
const emptyStateCardIcon = "_emptyStateCardIcon_152id_165";
const emptyStateNoTemplates = "_emptyStateNoTemplates_152id_172";
const dragging = "_dragging_152id_206";
const name = "_name_152id_224";
var WorkflowsView_vue_vue_type_style_index_0_lang_module_default = {
	templatesContainer,
	"easy-ai-workflow-callout": "_easy-ai-workflow-callout_152id_134",
	"callout-trailing-content": "_callout-trailing-content_152id_139",
	emptyStateCard,
	emptyStateCardContent,
	emptyStateCardIcon,
	emptyStateNoTemplates,
	"add-folder-button": "_add-folder-button_152id_180",
	"breadcrumbs-container": "_breadcrumbs-container_152id_185",
	"breadcrumbs-loading": "_breadcrumbs-loading_152id_191",
	"empty-folder-container": "_empty-folder-container_152id_197",
	"drag-active": "_drag-active_152id_201",
	dragging,
	"drop-active": "_drop-active_152id_213",
	"path-separator": "_path-separator_152id_218",
	name,
	"pointer-disabled": "_pointer-disabled_152id_230"
};
var WorkflowsView_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowsView_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowsView_vue_vue_type_style_index_0_lang_module_default }]]);
export { WorkflowsView_default as default };
