const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FixedCollectionParameter-DjZT94-B.js","assets/_plugin-vue_export-helper-DltO58Gh.js","assets/src-Vlm7Mxf-.js","assets/CalendarDate-DpJ94D5y.js","assets/_MapCache-Bq6g7eJk.js","assets/vue.runtime.esm-bundler-XtMkEjzB.js","assets/chunk-r2Y0G7H8.js","assets/sanitize-html-JHjOJhXQ.js","assets/en-BoKY3_VE.js","assets/src-q0lmo6wZ.css","assets/nodeCreator.store-tiiu6Zuw.js","assets/constants-RiJkz47J.js","assets/merge-CLls_idn.js","assets/users.store-BwYRQvCY.js","assets/_baseOrderBy-BE23B-S3.js","assets/dateformat-Bc6vycUF.js","assets/useDebounce-BghtiK4X.js","assets/nodeIcon-BqHYqRCI.js","assets/canvas.utils-BI57Gahu.js","assets/RunData-DoLiVaik.js","assets/uniqBy-MGaViHTj.js","assets/NDVEmptyState-H24YyLF4.js","assets/NDVEmptyState-Bho0_Ev8.css","assets/vue-json-pretty-CuBVqeNj.js","assets/useRunWorkflow-juGxUJAw.js","assets/useCanvasOperations-NgUCm3TB.js","assets/core-VADtcMBO.js","assets/core-XmFv11t6.js","assets/xml-BMqNMrYo.js","assets/VueMarkdown-BoWi9FFe.js","assets/usePinnedData-BH7clGFt.js","assets/folders.store-BY8Vuq5D.js","assets/executions.store-CrIhMc4b.js","assets/useCanvasOperations-BGIelHPw.css","assets/retry-C1TxraVv.js","assets/pushConnection.store-DEbstjnC.js","assets/assistant.store-BTYElwjc.js","assets/collaboration.store-NTtbhQMS.js","assets/useClipboard-BYpnCAGs.js","assets/chatPanel.store-yTWZP9H2.js","assets/useExecutionHelpers-BOOTTweM.js","assets/dateFormatter-DCnAq71P.js","assets/externalSecrets.ee.store-B6OogwlK.js","assets/useEnvFeatureFlag-B-aCettH.js","assets/RunDataHtml-Cw8vfNJ3.js","assets/RunDataHtml-CPkTgQ0s.css","assets/RunData-y_mkyVlS.css","assets/ParameterInputList-CMifcPXg.js","assets/exports-DYzjmh6G.js","assets/vue-B-h9D2g4.js","assets/comlink-CKk5H2qz.js","assets/date-picker-BpFPErDn.js","assets/flatten-mCjMx1nN.js","assets/dialog-BI9bvPzT.js","assets/VirtualSchema-BeuLcrBR.js","assets/Draggable-BEBeE6ai.js","assets/Draggable-Dqq_ig-6.css","assets/NodeIcon-BdHBfPBt.js","assets/NodeIcon-DYIwbj2N.css","assets/useCalloutHelpers-BjdGJ4pa.js","assets/useTelemetryContext-CYrdY3-2.js","assets/useTelemetryContext-DHOsGVft.css","assets/nodeTransforms-D3mSzcq-.js","assets/TextWithHighlights-Dz1Q69Xq.js","assets/TextWithHighlights-_TQjEA06.css","assets/VirtualSchema-BcG_eYav.css","assets/CredentialIcon-D3LfD1As.js","assets/CredentialIcon-CiJkhU0f.css","assets/useQuickConnect-ksDLeUyB.js","assets/useDynamicCredentials-DoTPXWtP.js","assets/ParameterInputList-H1Ra_i78.css","assets/FixedCollectionParameter-DrPDLSNp.css","assets/useImportCurlCommand-DzyBtMnf.js","assets/DefaultLayout-Cc9i-BTa.js","assets/MainSidebarHeader-BuxreDGw.js","assets/versions.store-C9Ch1_0N.js","assets/KeyboardShortcutTooltip-BU16z1Q2.js","assets/KeyboardShortcutTooltip-DD3OwInQ.css","assets/useGlobalEntityCreation-CVsL3s3m.js","assets/sortByProperty-BZDM0ZKf.js","assets/usePageRedirectionHelper-CR50q2Bt.js","assets/MainSidebarHeader-D7boBmWi.css","assets/AppSidebar-0yg_pWGM.js","assets/useBugReporting-D-qlUawL.js","assets/useKeybindings-BrHKmGZk.js","assets/useSettingsItems-BPnNaxkj.js","assets/resourceCenter.store-BUDGMFRL.js","assets/readyToRun.store-2wJgp99Y.js","assets/constants-DLAfnKfU.js","assets/sourceControl.eventBus-CPeWfug7.js","assets/AppSidebar-mYGOYLqt.css","assets/BaseLayout-DRnUeQfL.js","assets/BaseLayout-CkVqrWV-.css","assets/SettingsLayout-D_sgSAI2.js","assets/SettingsLayout-CJsPAP2z.css","assets/WorkflowLayout-_gKnOFlM.js","assets/router-CwYP0MuY.js","assets/dist-CkSZ-RAZ.js","assets/banners.store-DdxlUUS2.js","assets/banners-CXsyom4e.css","assets/sso.store-CYzwTRBb.js","assets/roles.store-CnmTuWAs.js","assets/mcp.constants-BWjeHDaU.js","assets/dataTable.store-BEsKD9h6.js","assets/insights.store-CLtsoNb5.js","assets/insights.utils-BASoBGEw.js","assets/insights.constants-DxLIjLji.js","assets/useLogsTreeExpand-C5r2tV0R.js","assets/AnimatedSpinner-DxjSO1-I.js","assets/AnimatedSpinner-CoP6Lyme.css","assets/useLogsTreeExpand-CDwBt1Gl.css","assets/TimeAgo-DXYgDjKy.js","assets/usePushConnection-DH5jnkU9.js","assets/aiTemplatesStarterCollection.store-D7vqaGyU.js","assets/LogsPanel-DQmueNJk.js","assets/useResizablePanel-DE9WHFOF.js","assets/useResizablePanel-DMgTNuUZ.css","assets/fileUtils-DkworP0q.js","assets/LogsPanel-CwH8I-EF.css","assets/ProjectIcon-DSgmszLL.js","assets/ProjectIcon-qI5XwJ2W.css","assets/ConnectionTracker-CNPbWS99.js","assets/ConnectionTracker-c7uDDNb0.css","assets/useWorkflowActivate-DsrXBqKN.js","assets/useWorkflowsCache-TiozQ1uR.js","assets/injectStrict-DRL1gb3N.js","assets/LoadingView-CugGjCO7.js","assets/LoadingView-MYqN0aDW.css","assets/FolderBreadcrumbs-CHStNoyV.js","assets/ProjectBreadcrumb-DnKbX_sP.js","assets/ProjectBreadcrumb-CfLxfIkN.css","assets/FolderBreadcrumbs-C8gGVMbV.css","assets/useMcp-DH5GXgOW.js","assets/useExecutionDebugging-pMrbkd3g.js","assets/TagsDropdown-BNCsZvMf.js","assets/TagsDropdown-B9j1q4U_.css","assets/WorkflowTagsDropdown-Bp150m0d.js","assets/utils-DlUruFxQ.js","assets/WorkflowLayout--fKuiLNv.css","assets/AuthLayout-BJlUoO_k.js","assets/DemoLayout-Bnjdf_Uk.js","assets/ChatLayout-BUV3Ttqx.js","assets/chat.store-B7ugtf0m.js","assets/ChatAgentAvatar-Ci7oSLfw.js","assets/ChatAgentAvatar-DE4w7qBz.css","assets/ChatLayout-CwCkN0iQ.css"])))=>i.map(i=>d[i]);
import { o as __toESM, t as __commonJSMin } from "./chunk-r2Y0G7H8.js";
import { $ as onUpdated, Bt as toRaw, C as computed, Cn as toDisplayString, D as createElementBlock, E as createCommentVNode, G as nextTick, Gt as unref, It as ref, J as onBeforeUnmount, L as h, M as createVNode, N as defineAsyncComponent, P as defineComponent, Pt as reactive, Q as onUnmounted, T as createBlock, U as mergeModels, Ut as toValue, W as mergeProps, Z as onMounted, _ as Fragment, _t as watch, at as renderSlot, b as Teleport, bn as normalizeStyle, bt as withCtx, c as useCssModule, ct as resolveDynamicComponent, et as openBlock, f as vModelText, ft as useModel, h as withModifiers, i as createApp, it as renderList, j as createTextVNode, jt as isRef, k as createSlots, m as withKeys, mt as useTemplateRef, n as Transition, ot as resolveComponent, p as vShow, pt as useSlots, q as onBeforeMount, r as TransitionGroup, st as resolveDirective, vn as normalizeClass, vt as watchEffect, w as createBaseVNode, xt as withDirectives, y as Suspense, yn as normalizeProps, zt as shallowRef } from "./vue.runtime.esm-bundler-XtMkEjzB.js";
import { C as useCssVar, D as useElementSize, Q as refDebounced, _t as i18nInstance, bt as I18nT, gt as i18n$1, m as require_isArray, pt as addCredentialTranslation, vt as setLanguage, x as useAsyncState, yt as useI18n, z as useStorage } from "./_MapCache-Bq6g7eJk.js";
import { $n as addUnit, At as N8nBadge_default, Bi as N8nCallout_default, Ci as useRoute, Di as isWorkflowUpdatedMessage, Dt as N8nActionDropdown_default, Et as N8nLoading_default, F as N8nSpinner_default, Fi as truncate, Ft as ElOptionGroup, Gi as use, Hi as N8nButton_default, Hn as close_default, Ht as ElTag, I as N8nResizeWrapper_default, It as ElSelect, Jt as ElFocusTrap, Ki as __vitePreload, Lt as ElDropdown, Mi as N8nIconButton_default, N as N8nTag_default, Oi as N8nTooltip_default, Ot as N8nKeyboardShortcut_default, Pi as N8nActionBox_default, Pt as ElOption, Q as N8nInfoTip_default, Rt as ElDropdownItem, T as N8nUsersList_default, Ti as isTaskAbortedMessage, U as N8nNotice_default, Ui as N8nIcon_default, V as N8nPopover_default, Vi as N8nText_default, Y as N8nMarkdown_default, Z as N8nInputNumber_default, _t as createEventBus, at as N8nFormInput_default, bt as N8nCard_default, c as N8nCommandBar_default, d as N8nInlineTextEdit_default, di as AskAssistantText_default, et as InlineAskAssistantButton_default, fn as useNamespace, ft as N8nSelect_default, gi as N8nLink_default, gt as createFormEventBus, hi as N8nPromptInput_default, it as N8nFormInputs_default, j as N8nTabs_default, ji as Input_default, jn as buildProps, jt as ElSwitch, kt as useDeviceSupport, m as require_get, mi as AskAssistantChat_default$1, mn as useDeprecated, nn as ElIcon, o as N8nPlugin, ot as N8nInputLabel_default, p as N8nDataTableServer_default, pi as AskAssistantIcon_default, pn as useLocale, pt as N8nOption_default, q as N8nMenuItem_default, rn as _export_sfc, st as Checkbox_default, wi as useRouter, wn as withInstall, z as N8nRadioButtons_default, zi as N8nHeading_default, zt as ElDropdownMenu } from "./src-Vlm7Mxf-.js";
import { t as __plugin_vue_export_helper_default } from "./_plugin-vue_export-helper-DltO58Gh.js";
import "./sanitize-html-JHjOJhXQ.js";
import { n as ElTableColumn, t as ElTable } from "./table-Bdj2dCBf.js";
import { t as ElDatePicker } from "./date-picker-BpFPErDn.js";
import { $a as AUTOMATION_BENEFICIARY_MY_TEAM, $c as ElOverlay, $o as REPORTED_SOURCE_FRIEND, Aa as COMMUNITY_PACKAGE_MANAGE_ACTIONS, Ao as LEGAL_INDUSTRY, Ar as useFocusedNodesStore, Bo as MARKETING_INDUSTRY, Br as validate_default, Bt as useNDVStore, C as useNodeTypesStore, Co as ECOMMERCE_COMPANY_TYPE, Cr as useLoadingService, Cs as TELECOMS_INDUSTRY, Da as COMMUNITY_NODES_RISKS_DOCS_URL, Di as splitName, Do as HEALTHCARE_INDUSTRY, Dr as useWorkflowHistoryStore, Dt as useAnnotationTagsStore, Ea as COMMUNITY_NODES_INSTALLATION_DOCS_URL, Ec as createCredentialResolver, Ei as getTruncatedProjectName, Eo as GOVERNMENT_INDUSTRY, Er as useNpsSurveyStore, Et as useWorkflowsEEStore, Fa as SOURCE_CONTROL_PUSH_MODAL_KEY, Fi as getAuthTypeForNodeCredential, Fo as MARKETING_AUTOMATION_DATA_SYNCHING, Fr as usePostHog, Fs as getThirdPartyLicenses, Ft as useEnvironmentsStore, Ga as VARIABLE_MODAL_KEY, Go as OTHER_COMPANY_TYPE, Gt as useProjectsStore, Ha as MOVE_FOLDER_MODAL_KEY, Ho as MSP_INDUSTRY, Hr as useStorage$1, Ia as DELETE_FOLDER_MODAL_KEY, Ii as getMainAuthField, Io as MARKETING_AUTOMATION_GOAL_KEY, It as useNodeHelpers, Ja as DEBUG_PAYWALL_MODAL_KEY, Ji as isValueExpression, Jo as PERSONALIZATION_MODAL_KEY, Ka as COMMUNITY_PLUS_DOCS_URL, Kc as getBannerRowHeight, Ko as OTHER_INDUSTRY_OPTION, Kr as isCredentialModalState, Kt as ProjectTypes, Lc as sendUserEvent, Li as getNodeAuthFields, Ln as getNodeViewTab, Lo as MARKETING_AUTOMATION_LEAD_GENERATION_GOAL, Lr as BUILDER_ENABLED_VIEWS, Lt as useTelemetry, Ma as PROJECT_MOVE_RESOURCE_MODAL, Mo as MARKETING_AUTOMATION_ACTIONS, Mr as isPlanModePlanMessage, Mt as removeWorkflowExecutionData, Na as SOURCE_CONTROL_PULL_MODAL_KEY, Ni as getAppNameFromCredType, No as MARKETING_AUTOMATION_AD_CAMPAIGN, Nr as isPlanModeQuestionsMessage, Oa as COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY, Oc as getCredentialResolver, Oo as INVITE_USER_MODAL_KEY, Or as require_FileSaver_min, Ot as useTagsStore, Pa as SOURCE_CONTROL_PULL_RESULT_MODAL_KEY, Po as MARKETING_AUTOMATION_CUSTOMER_COMMUNICATION, Pr as isPlanModeUserAnswersMessage, Q as capitalCase, Qa as AUTOMATION_BENEFICIARY_KEY, Qc as ElLoading, Qo as REPORTED_SOURCE_EVENT, Ri as getNodeAuthOptions, Ro as MARKETING_AUTOMATION_OTHER, Rr as useWorkflowsListStore, Rt as TelemetryPlugin, So as DIGITAL_AGENCY_COMPANY_TYPE, Ss as SYSTEMS_INTEGRATOR_COMPANY_TYPE, Ta as API_KEY_CREATE_OR_EDIT_MODAL_KEY, Ti as ResourceType, To as FINANCE_INSURANCE_INDUSTRY, Tr as useMessage, Tt as useWorkflowHelpers, Ua as CREDENTIAL_EDIT_MODAL_KEY, Uo as OTHER_AUTOMATION_GOAL, Ut as workflowStateEventBus, Vi as getTriggerNodeServiceName, Vo as MEDIA_INDUSTRY, Vt as injectWorkflowState, Wa as CREDENTIAL_SELECT_MODAL_KEY, Wi as isAuthRelatedParameter, Wo as OTHER_COMPANY_INDUSTRY_EXTENDED_KEY, Xa as MAX_TAG_NAME_LENGTH, Xi as updateNodeAuthType, Xo as PHYSICAL_RETAIL_OR_SERVICES, Ya as ANNOTATION_TAGS_MANAGER_MODAL_KEY, Yo as PERSONAL_COMPANY_TYPE, Za as TAGS_MANAGER_MODAL_KEY, Zc as ElMessageBox, Zi as getAllCredentials, Zo as REAL_ESTATE_OR_CONSTRUCTION, _o as DEVOPS_AUTOMATION_OTHER, _r as useRBACStore, _s as ROLE_OTHER_KEY, ac as deleteSecretProviderConnection, ao as COMPANY_SIZE_20_99, as as REPORTED_SOURCE_OTHER_KEY, bo as DEVOPS_REPORTING_GOAL, br as useStyles, bs as SAAS_COMPANY_TYPE, co as COMPANY_SIZE_KEY, cs as REPORTED_SOURCE_YOUTUBE, d as isChatNode, dn as useBrowserNotifications, do as DELETE_USER_MODAL_KEY, ds as ROLE_DATA_SCIENCE, eo as AUTOMATION_BENEFICIARY_OTHER_TEAMS, es as REPORTED_SOURCE_GOOGLE, fi as useHistoryStore, fn as useDocumentTitle, fo as DEVOPS_AUTOMATION_CI_CD_GOAL, fs as ROLE_DEVOPS, g as executionRetryMessage, ga as nodeViewEventBus, gi as Command, go as DEVOPS_AUTOMATION_GOAL_OTHER_KEY, gs as ROLE_OTHER, hi as BulkCommand, hn as useWorkflowSaveStore, ho as DEVOPS_AUTOMATION_GOAL_KEY, hs as ROLE_KEY, i as getAll, ic as createSecretProviderConnection, ii as isValidCredentialResponse, io as COMPANY_SIZE_100_499, is as REPORTED_SOURCE_OTHER, ja as NPM_KEYWORD_SEARCH_URL, jc as updateCredentialResolver, ji as getActivatableTriggerNodes, jo as MANUFACTURING_INDUSTRY, jr as useChatPanelStateStore, ka as COMMUNITY_PACKAGE_INSTALL_MODAL_KEY, ko as IT_INDUSTRY, lc as testSecretProviderConnection, lo as COMPANY_SIZE_PERSONAL_USE, lr as useCloudPlanStore, ls as ROLE_BUSINESS_OWNER, mn as useBackendConnectionStore, mo as DEVOPS_AUTOMATION_DATA_SYNCING_GOAL, ms as ROLE_IT, no as COMPANY_INDUSTRY_EXTENDED_KEY, ns as REPORTED_SOURCE_LINKEDIN, o as subscribe, oc as getSecretProviderConnectionByKey, oo as COMPANY_SIZE_20_OR_LESS, os as REPORTED_SOURCE_PODCAST, pn as useWorkflowSaving, po as DEVOPS_AUTOMATION_CLOUD_INFRASTRUCTURE_ORCHESTRATION_GOAL, ps as ROLE_ENGINEERING, qa as COMMUNITY_PLUS_ENROLLMENT_MODAL, qo as OTHER_MARKETING_AUTOMATION_GOAL_KEY, r as useUIStore, ro as COMPANY_SIZE_1000_OR_MORE, rs as REPORTED_SOURCE_LLM, rt as useCredentialsStore, s as useWorkflowsStore, so as COMPANY_SIZE_500_999, ss as REPORTED_SOURCE_TWITTER, t as useUsersStore, to as AUTOMATION_BENEFICIARY_SELF, ts as REPORTED_SOURCE_KEY, uc as updateSecretProviderConnection, un as useBuilderStore, uo as COMPANY_TYPE_KEY, ur as hasPermission, us as ROLE_CUSTOMER_SUPPORT, vo as DEVOPS_INCIDENT_RESPONSE_GOAL, vs as ROLE_SALES_AND_MARKETING, vt as isTestableExpression, w as useActionsGenerator, wi as MAX_NAME_LENGTH, wo as EDUCATION_TYPE, wr as useSourceControlStore, ws as useSettingsStore, xn as useTemplatesStore, xo as DEVOPS_TICKETING_SYSTEMS_INTEGRATIONS_GOAL, xr as useExternalHooks, xs as SECURITY_INDUSTRY, yo as DEVOPS_MONITORING_AND_ALERTING_GOAL, yr as useToast, ys as ROLE_SECURITY, zi as getNodeCredentialForSelectedAuthType, zo as MARKETING_AUTOMATION_REPORTING, zt as telemetry } from "./users.store-BwYRQvCY.js";
import { A as GoogleAuthButton_default, C as require_set, E as RunDataMarkdown_default, N as JsEditor_default, P as HtmlEditor_default, S as require_unset, a as ParameterOptions_default, i as ParameterInputFull_default, o as ParameterInputWrapper_default, t as ParameterInputList_default, w as useDocumentVisibility, x as setParameterValue } from "./ParameterInputList-CMifcPXg.js";
import { t as ElRadio } from "./radio-C-EO8aaN.js";
import { n as ElRow, t as ElCol } from "./col-CzbFUcWF.js";
import { i as dialogProps, n as useDialog, r as dialogEmits } from "./dialog-BI9bvPzT.js";
import { t as BaseLayout_default } from "./BaseLayout-DRnUeQfL.js";
import { $i as messageEventBusDestinationTypeNames, As as WHATS_NEW_MODAL_KEY, Bs as WORKFLOW_PUBLISH_MODAL_KEY, Co as FORM_TRIGGER_NODE_TYPE, Cr as WEBHOOK_NODE_TYPE$1, Cs as NEW_ASSISTANT_SESSION_MODAL, D as APP_MODALS_ELEMENT_ID, Ds as SETUP_CREDENTIALS_MODAL_KEY, Es as SECRETS_PROVIDER_CONNECTION_MODAL_KEY, Fs as WORKFLOW_EXTRACTION_NAME_MODAL_KEY, Gc as TAMPER_PROOF_INVITE_LINKS, Go as SOURCE_CONTROL_FILE_TYPE, Gt as CHAT_TRIGGER_NODE_TYPE$1, Ho as WORKFLOW_VERSION_NAME_MAX_LENGTH, Hs as WORKFLOW_SHARE_MODAL_KEY, Ia as isINodePropertyCollection, Ii as traverseNodeParameters, Ir as DATA_TABLE_DETAILS, Is as WORKFLOW_HISTORY_NAME_VERSION_MODAL_KEY, Ji as MessageEventBusDestinationTypeNames, Ka as jsonParse, Ki as isExpression, Ko as isSourceControlledFileStatus, Ls as WORKFLOW_HISTORY_PUBLISH_MODAL_KEY, Lt as AI_MCP_TOOL_NODE_TYPE, M as VALID_WORKFLOW_IMPORT_URL_REGEX, Ms as WORKFLOW_ACTIVE_MODAL_KEY, No as WEBHOOK_NODE_TYPE, Ns as WORKFLOW_DESCRIPTION_MODAL_KEY, O as CODEMIRROR_TOOLTIP_CONTAINER_ELEMENT_ID, Oa as mergeNodeProperties, Oo as OPEN_AI_API_CREDENTIAL_TYPE, Os as STOP_MANY_EXECUTIONS_MODAL_KEY, Pc as EXECUTION_LOGIC_V2_EXPERIMENT, Po as require_isEqual, Ps as WORKFLOW_DIFF_MODAL_KEY, Qi as defaultMessageEventBusDestinationWebhookOptions, Rs as WORKFLOW_HISTORY_VERSION_RESTORE, S as RELEASE_NOTES_URL, Sa as isHitlToolType, Ss as MODAL_CONFIRM, Ts as PROMPT_MFA_CODE_MODAL_KEY, Tt as NODE_CREATOR_OPEN_SOURCES, Ua as deepCopy, Uo as SOURCE_CONTROL_FILE_LOCATION, Us as LOCAL_STORAGE_ACTIVATION_FLAG, V as HIRING_BANNER, Vo as WORKFLOW_VERSION_DESCRIPTION_MAX_LENGTH, Vr as DATA_TABLE_VIEW, Vs as WORKFLOW_SETTINGS_MODAL_KEY, Wa as isCommunityPackageName, Wo as SOURCE_CONTROL_FILE_STATUS, Xi as defaultMessageEventBusDestinationSentryOptions, Yc as EnterpriseEditionFeature, Yi as defaultMessageEventBusDestinationOptions, Zi as defaultMessageEventBusDestinationSyslogOptions, _s as IMPORT_WORKFLOW_URL_MODAL_KEY, as as BINARY_DATA_VIEW_MODAL_KEY, br as TIME_SAVED_NODE_TYPE, c as BUILTIN_CREDENTIALS_DOCS_URL, co as NodeConnectionTypes, cs as CONFIRM_PASSWORD_MODAL_KEY, dl as MFA_AUTHENTICATION_CODE_WINDOW_EXPIRED, dn as EXECUTE_WORKFLOW_NODE_TYPE, ds as DUPLICATE_MODAL_KEY, ei as PROJECT_DATA_TABLES, fs as EXPERIMENT_TEMPLATE_RECO_V2_KEY, gi as NodeDiffStatus, go as BINARY_MODE_SEPARATE, gs as IMPORT_CURL_MODAL_KEY, h as DOCS_DOMAIN, hi as shouldAutoPublishWorkflow, ho as BINARY_MODE_COMBINED, hs as FROM_AI_PARAMETERS_MODAL_KEY, is as ABOUT_MODAL_KEY, j as VALID_EMAIL_REGEX, ji as require__baseIteratee, js as WORKFLOW_ACTIVATION_CONFLICTING_WEBHOOK_MODAL_KEY, ks as VERSIONS_MODAL_KEY, ls as CREDENTIAL_RESOLVER_EDIT_MODAL_KEY, ma as getNodeParametersIssues, ms as EXTERNAL_SECRETS_PROVIDER_MODAL_KEY, n as DEFAULT_NEW_WORKFLOW_NAME, ns as MAIN_HEADER_TABS, o as MAX_WORKFLOW_NAME_LENGTH, os as CHANGE_PASSWORD_MODAL_KEY, pa as getNodeParameters, ps as EXPERIMENT_TEMPLATE_RECO_V3_KEY, qo as getResourcePermissions, rs as VIEWS, so as DateTime, ss as CHAT_EMBED_MODAL_KEY, t as AutoSaveState, ti as ROLE, ul as MFA_AUTHENTICATION_CODE_INPUT_MAX_LENGTH, us as DELETE_SECRETS_PROVIDER_MODAL_KEY, vo as CHAT_TRIGGER_NODE_TYPE, vs as LOG_STREAM_MODAL_KEY, w as TEMPLATES_URLS, ws as NPS_SURVEY_MODAL_KEY, ys as MFA_SETUP_MODAL_KEY, za as isResourceLocatorValue, zs as WORKFLOW_HISTORY_VERSION_UNPUBLISH } from "./constants-RiJkz47J.js";
import { v as require__baseAssignValue } from "./merge-CLls_idn.js";
import { A as createPinia, C as LOGSTREAMING_DEFAULT_MAX_SOCKETS, N as storeToRefs, S as LOGSTREAMING_DEFAULT_MAX_FREE_SOCKETS, _ as axios_default, b as LOGSTREAMING_CB_DEFAULT_FAILURE_WINDOW_MS, c as ResponseError, g as AxiosError, i as getAndParseConfigFromMetaTag, k as PiniaVuePlugin, n as require__baseEach, r as useRootStore, v as assert, x as LOGSTREAMING_CB_DEFAULT_MAX_FAILURES } from "./_baseOrderBy-BE23B-S3.js";
import { n as BaseBanner_default, t as useBannersStore } from "./banners.store-DdxlUUS2.js";
import { t as require_dateformat } from "./dateformat-Bc6vycUF.js";
import { n as require_debounce, t as useDebounce } from "./useDebounce-BghtiK4X.js";
import { t as useVersionsStore } from "./versions.store-C9Ch1_0N.js";
import { t as usePageRedirectionHelper } from "./usePageRedirectionHelper-CR50q2Bt.js";
import { t as useDataTableStore } from "./dataTable.store-BEsKD9h6.js";
import { t as Modal_default } from "./Modal-C-bnsegV.js";
import { t as useClipboard } from "./useClipboard-BYpnCAGs.js";
import { n as EXTERNAL_LINKS, r as useDebugInfo, t as useBugReporting } from "./useBugReporting-D-qlUawL.js";
import { t as useExecutionsStore } from "./executions.store-CrIhMc4b.js";
import { t as CopyInput_default } from "./CopyInput-B2UlcgRz.js";
import { t as useApiKeysStore } from "./apiKeys.store-2k-BuA2t.js";
import { t as useAssistantStore } from "./assistant.store-BTYElwjc.js";
import { t as useChatPanelStore } from "./chatPanel.store-yTWZP9H2.js";
import { n as mfaEventBus, r as promptMfaCodeBus, t as confirmPasswordEventBus } from "./auth.eventBus-eGJfU5Iw.js";
import "./RunData-DoLiVaik.js";
import "./NDVEmptyState-H24YyLF4.js";
import { $ as addNonEnumerableProperty, A as dsnToString, At as GLOBAL_OBJ, B as merge, C as DEFAULT_ENVIRONMENT, Ct as stackParserFromStackParserOptions, D as getActiveSpan, Dt as originalConsoleMethods, E as hasSpansEnabled, Et as debug, F as getClient, G as addExceptionTypeValue, H as dateTimestampInSeconds, I as getCurrentScope, J as uuid4, K as checkOrSetAlreadyCaught, L as getIsolationScope, M as SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME, N as SEMANTIC_ATTRIBUTE_PROFILE_ID, O as showSpanDropWarning, Ot as getGlobalSingleton, P as SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN, Q as safeMathRandom, R as getTraceContextFromScope, S as getDynamicSamplingContextFromScope, St as getFunctionName, T as shouldIgnoreSpan, Tt as consoleSandbox, U as timestampInSeconds, V as updateSession, W as addExceptionMechanism, X as stringMatchesSomePattern, Y as safeJoin, Z as safeDateNow, _ as envelopeContainsItemType, _t as isString, a as setTag, at as getLocationHref, b as serializeEnvelope, bt as createStackParser, c as prepareEvent, ct as isDOMException, d as startInactiveSpan, dt as isEvent, et as extractExceptionKeysForMessage, f as createEventEnvelope, ft as isInstanceOf, g as createEnvelope, gt as isRequest, h as createAttachmentEnvelopeItem, ht as isPrimitive, i as captureSession, it as getComponentName, j as makeDsn, jt as DEBUG_BUILD$3, k as parseSampleRate, kt as SDK_VERSION, l as rejectedSyncPromise, lt as isError, m as addItemToEnvelope, mt as isPlainObject, n as captureException, nt as getOriginalFunction, o as setUser, ot as htmlTreeAsString, p as createSessionEnvelope, pt as isParameterizedString, q as getEventDescription, rt as markFunctionWrapped, s as startSession, st as isDOMError, t as captureEvent, tt as fill, u as resolvedSyncPromise, ut as isErrorEvent, v as envelopeItemTypeToDataCategory, vt as isThenable, w as reparentChildSpans, wt as CONSOLE_LEVELS, x as normalizeToSize, xt as getFramesFromEvent, y as forEachEnvelopeItem, yt as UNKNOWN_FUNCTION, z as withScope } from "./exports-DYzjmh6G.js";
import "./useEnvFeatureFlag-B-aCettH.js";
import { t as useExternalSecretsStore } from "./externalSecrets.ee.store-B6OogwlK.js";
import { t as require_uniqBy } from "./uniqBy-MGaViHTj.js";
import { n as useCommunityNodesStore, t as require_semver } from "./semver-Cqu_UB5T.js";
import "./usePinnedData-BH7clGFt.js";
import "./nodeIcon-BqHYqRCI.js";
import { l as shouldIgnoreCanvasShortcut, o as mapLegacyConnectionsToCanvasConnections } from "./canvas.utils-BI57Gahu.js";
import { t as useNodeCreatorStore } from "./nodeCreator.store-tiiu6Zuw.js";
import { a as useLogsStore, r as canvasEventBus, t as useCanvasOperations } from "./useCanvasOperations-NgUCm3TB.js";
import { t as useFoldersStore } from "./folders.store-BY8Vuq5D.js";
import { o as useInstallNode } from "./QuickConnectBanner-DdHTFyFX.js";
import { t as useQuickConnect } from "./useQuickConnect-ksDLeUyB.js";
import { n as isIconOrEmoji, t as ProjectIcon_default } from "./ProjectIcon-DSgmszLL.js";
import { t as ProjectCardBadge_default } from "./ProjectCardBadge-p0qAUpem.js";
import { t as useUsageStore } from "./usage.store-Dg91y7Cn.js";
import { t as CredentialIcon_default } from "./CredentialIcon-D3LfD1As.js";
import { t as useDynamicCredentials } from "./useDynamicCredentials-DoTPXWtP.js";
import { t as RunDataHtml_default } from "./RunDataHtml-Cw8vfNJ3.js";
import "./Draggable-BEBeE6ai.js";
import { t as NodeIcon_default } from "./NodeIcon-BdHBfPBt.js";
import { c as script, l as script$1 } from "./VirtualSchema-BeuLcrBR.js";
import { t as useCalloutHelpers } from "./useCalloutHelpers-BjdGJ4pa.js";
import { t as useTelemetryContext } from "./useTelemetryContext-CYrdY3-2.js";
import { n as useAgentRequestStore, t as useRunWorkflow } from "./useRunWorkflow-juGxUJAw.js";
import { n as useHeartbeat } from "./pushConnection.store-DEbstjnC.js";
import { t as TOOL_NODE_TYPES_NEED_INPUT } from "./nodeTransforms-D3mSzcq-.js";
import { t as P } from "./vue-json-pretty-CuBVqeNj.js";
import { t as useCollaborationStore } from "./collaboration.store-NTtbhQMS.js";
import "./dateFormatter-DCnAq71P.js";
import "./useExecutionHelpers-BOOTTweM.js";
import { t as EnterpriseEdition_ee_default } from "./EnterpriseEdition.ee-BywnkH9A.js";
import "./useFreeAiCredits-CggdbObE.js";
import { r as FreeAiCreditsCallout_default } from "./NodeSettings-CE8YEYS9.js";
import { t as TimeAgo_default } from "./TimeAgo-DXYgDjKy.js";
import { t as require_orderBy } from "./orderBy-Dox6KsmS.js";
import { t as ProjectSharing_default } from "./ProjectSharing-B3l0no-g.js";
import { t as useRolesStore } from "./roles.store-CnmTuWAs.js";
import { t as KeyboardShortcutTooltip_default } from "./KeyboardShortcutTooltip-BU16z1Q2.js";
import { t as sortByProperty } from "./sortByProperty-BZDM0ZKf.js";
import "./TagsDropdown-BNCsZvMf.js";
import { t as WorkflowTagsDropdown_default } from "./WorkflowTagsDropdown-Bp150m0d.js";
import { n as ExternalSecretsProviderImage_ee_default, r as useExternalSecretsProvider, t as ExternalSecretsProviderConnectionSwitch_ee_default } from "./ExternalSecretsProviderConnectionSwitch.ee-j1uVz-LO.js";
import { t as SecretsProviderImage_ee_default } from "./SecretsProviderImage.ee-BK19pf02.js";
import "./dist-CkSZ-RAZ.js";
import "./sso.store-CYzwTRBb.js";
import { n as useRecentResources, r as registerModuleRoutes, t as router_default } from "./router-CwYP0MuY.js";
import "./insights.store-CLtsoNb5.js";
import "./insights.constants-DxLIjLji.js";
import "./insights.utils-BASoBGEw.js";
import { a as CHAT_PERSONAL_AGENTS_VIEW, l as CHAT_VIEW, n as CHAT_CONVERSATION_VIEW, u as CHAT_WORKFLOW_AGENTS_VIEW, y as providerDisplayNames } from "./constants-DLAfnKfU.js";
import { t as useLogStreamingStore } from "./logStreaming.store-BtMXURnL.js";
import "./vue-B-h9D2g4.js";
import "./templateTransforms-Cm6fDsYc.js";
import { n as AppsRequiringCredsNotice_default, r as useCredentialSetupState, t as SetupTemplateFormStep_default } from "./SetupTemplateFormStep-Bbh6wSdn.js";
import "./CredentialPicker-Cuv7bXtA.js";
import { t as sourceControlEventBus } from "./sourceControl.eventBus-CPeWfug7.js";
import { n as useGlobalLinkActions, r as useWorkflowExtraction, t as CanvasRunWorkflowButton_default } from "./CanvasRunWorkflowButton-B9G8Hgth.js";
import { r as generateVersionName } from "./utils-DlUruFxQ.js";
import { t as useMcp } from "./useMcp-DH5GXgOW.js";
import { t as useCredentialResolvers } from "./useCredentialResolvers-h5bLNdGP.js";
import { a as NodeDiff_default, i as useProvideViewportSync, n as useWorkflowDiff, o as DiffBadge_default, r as WorkflowDiffContent_default, t as useWorkflowDiffUI } from "./useWorkflowDiffUI-DJv1UNtz.js";
import "./useCanvasMapping-S7ste8PD.js";
import "./useKeybindings-BrHKmGZk.js";
import "./useActions-Dh6zg0le.js";
import { n as usePersonalizedTemplatesV3Store, r as usePersonalizedTemplatesV2Store, t as require_shuffle } from "./shuffle-DPtLM7ij.js";
import { t as useWorkflowActivate } from "./useWorkflowActivate-DsrXBqKN.js";
import { t as useGlobalEntityCreation } from "./useGlobalEntityCreation-CVsL3s3m.js";
import { l as getAgentRoute, p as isLlmProvider, t as useChatStore, y as stringifyModel } from "./chat.store-B7ugtf0m.js";
import { t as SlideTransition_default } from "./SlideTransition-nPSGVK0N.js";
import "./values-BWUEBd1x.js";
import { t as LoadingView_default } from "./LoadingView-CugGjCO7.js";
import { a as LineController, c as PointElement, d as plugin_title, f as plugin_tooltip, i as Chart, n as BarElement, o as LineElement, r as CategoryScale, s as LinearScale, u as plugin_legend } from "./chart-FPC8it2j.js";
(function polyfill() {
	const relList = document.createElement("link").relList;
	if (relList && relList.supports && relList.supports("modulepreload")) return;
	for (const link$3 of document.querySelectorAll("link[rel=\"modulepreload\"]")) processPreload(link$3);
	new MutationObserver((mutations) => {
		for (const mutation of mutations) {
			if (mutation.type !== "childList") continue;
			for (const node of mutation.addedNodes) if (node.tagName === "LINK" && node.rel === "modulepreload") processPreload(node);
		}
	}).observe(document, {
		childList: true,
		subtree: true
	});
	function getFetchOpts(link$3) {
		const fetchOpts = {};
		if (link$3.integrity) fetchOpts.integrity = link$3.integrity;
		if (link$3.referrerPolicy) fetchOpts.referrerPolicy = link$3.referrerPolicy;
		if (link$3.crossOrigin === "use-credentials") fetchOpts.credentials = "include";
		else if (link$3.crossOrigin === "anonymous") fetchOpts.credentials = "omit";
		else fetchOpts.credentials = "same-origin";
		return fetchOpts;
	}
	function processPreload(link$3) {
		if (link$3.ep) return;
		link$3.ep = true;
		const fetchOpts = getFetchOpts(link$3);
		fetch(link$3.href, fetchOpts);
	}
})();
var drawerProps = buildProps({
	...dialogProps,
	direction: {
		type: String,
		default: "rtl",
		values: [
			"ltr",
			"rtl",
			"ttb",
			"btt"
		]
	},
	size: {
		type: [String, Number],
		default: "30%"
	},
	withHeader: {
		type: Boolean,
		default: true
	},
	modalFade: {
		type: Boolean,
		default: true
	},
	headerAriaLevel: {
		type: String,
		default: "2"
	}
});
var _sfc_main$1 = defineComponent({
	name: "ElDrawer",
	components: {
		ElOverlay,
		ElFocusTrap,
		ElIcon,
		Close: close_default
	},
	inheritAttrs: false,
	props: drawerProps,
	emits: dialogEmits,
	setup(props, { slots }) {
		useDeprecated({
			scope: "el-drawer",
			from: "the title slot",
			replacement: "the header slot",
			version: "3.0.0",
			ref: "https://element-plus.org/en-US/component/drawer.html#slots"
		}, computed(() => !!slots.title));
		useDeprecated({
			scope: "el-drawer",
			from: "custom-class",
			replacement: "class",
			version: "2.3.0",
			ref: "https://element-plus.org/en-US/component/drawer.html#attributes",
			type: "Attribute"
		}, computed(() => !!props.customClass));
		const drawerRef = ref();
		const focusStartRef = ref();
		const ns = useNamespace("drawer");
		const { t } = useLocale();
		const isHorizontal = computed(() => props.direction === "rtl" || props.direction === "ltr");
		const drawerSize = computed(() => addUnit(props.size));
		return {
			...useDialog(props, drawerRef),
			drawerRef,
			focusStartRef,
			isHorizontal,
			drawerSize,
			ns,
			t
		};
	}
});
var _hoisted_1$46 = [
	"aria-label",
	"aria-labelledby",
	"aria-describedby"
];
var _hoisted_2$20 = ["id", "aria-level"];
var _hoisted_3$12 = ["aria-label"];
var _hoisted_4$10 = ["id"];
function _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {
	const _component_close = resolveComponent("close");
	const _component_el_icon = resolveComponent("el-icon");
	const _component_el_focus_trap = resolveComponent("el-focus-trap");
	const _component_el_overlay = resolveComponent("el-overlay");
	return openBlock(), createBlock(Teleport, {
		to: "body",
		disabled: !_ctx.appendToBody
	}, [createVNode(Transition, {
		name: _ctx.ns.b("fade"),
		onAfterEnter: _ctx.afterEnter,
		onAfterLeave: _ctx.afterLeave,
		onBeforeLeave: _ctx.beforeLeave,
		persisted: ""
	}, {
		default: withCtx(() => [withDirectives(createVNode(_component_el_overlay, {
			mask: _ctx.modal,
			"overlay-class": _ctx.modalClass,
			"z-index": _ctx.zIndex,
			onClick: _ctx.onModalClick
		}, {
			default: withCtx(() => [createVNode(_component_el_focus_trap, {
				loop: "",
				trapped: _ctx.visible,
				"focus-trap-el": _ctx.drawerRef,
				"focus-start-el": _ctx.focusStartRef,
				onReleaseRequested: _ctx.onCloseRequested
			}, {
				default: withCtx(() => [createBaseVNode("div", mergeProps({
					ref: "drawerRef",
					"aria-modal": "true",
					"aria-label": _ctx.title || void 0,
					"aria-labelledby": !_ctx.title ? _ctx.titleId : void 0,
					"aria-describedby": _ctx.bodyId
				}, _ctx.$attrs, {
					class: [
						_ctx.ns.b(),
						_ctx.direction,
						_ctx.visible && "open",
						_ctx.customClass
					],
					style: _ctx.isHorizontal ? "width: " + _ctx.drawerSize : "height: " + _ctx.drawerSize,
					role: "dialog",
					onClick: _cache[1] || (_cache[1] = withModifiers(() => {}, ["stop"]))
				}), [
					createBaseVNode("span", {
						ref: "focusStartRef",
						class: normalizeClass(_ctx.ns.e("sr-focus")),
						tabindex: "-1"
					}, null, 2),
					_ctx.withHeader ? (openBlock(), createElementBlock("header", {
						key: 0,
						class: normalizeClass(_ctx.ns.e("header"))
					}, [!_ctx.$slots.title ? renderSlot(_ctx.$slots, "header", {
						key: 0,
						close: _ctx.handleClose,
						titleId: _ctx.titleId,
						titleClass: _ctx.ns.e("title")
					}, () => [!_ctx.$slots.title ? (openBlock(), createElementBlock("span", {
						key: 0,
						id: _ctx.titleId,
						role: "heading",
						"aria-level": _ctx.headerAriaLevel,
						class: normalizeClass(_ctx.ns.e("title"))
					}, toDisplayString(_ctx.title), 11, _hoisted_2$20)) : createCommentVNode("v-if", true)]) : renderSlot(_ctx.$slots, "title", { key: 1 }, () => [createCommentVNode(" DEPRECATED SLOT ")]), _ctx.showClose ? (openBlock(), createElementBlock("button", {
						key: 2,
						"aria-label": _ctx.t("el.drawer.close"),
						class: normalizeClass(_ctx.ns.e("close-btn")),
						type: "button",
						onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleClose && _ctx.handleClose(...args))
					}, [createVNode(_component_el_icon, { class: normalizeClass(_ctx.ns.e("close")) }, {
						default: withCtx(() => [createVNode(_component_close)]),
						_: 1
					}, 8, ["class"])], 10, _hoisted_3$12)) : createCommentVNode("v-if", true)], 2)) : createCommentVNode("v-if", true),
					_ctx.rendered ? (openBlock(), createElementBlock("div", {
						key: 1,
						id: _ctx.bodyId,
						class: normalizeClass(_ctx.ns.e("body"))
					}, [renderSlot(_ctx.$slots, "default")], 10, _hoisted_4$10)) : createCommentVNode("v-if", true),
					_ctx.$slots.footer ? (openBlock(), createElementBlock("div", {
						key: 2,
						class: normalizeClass(_ctx.ns.e("footer"))
					}, [renderSlot(_ctx.$slots, "footer")], 2)) : createCommentVNode("v-if", true)
				], 16, _hoisted_1$46)]),
				_: 3
			}, 8, [
				"trapped",
				"focus-trap-el",
				"focus-start-el",
				"onReleaseRequested"
			])]),
			_: 3
		}, 8, [
			"mask",
			"overlay-class",
			"z-index",
			"onClick"
		]), [[vShow, _ctx.visible]])]),
		_: 3
	}, 8, [
		"name",
		"onAfterEnter",
		"onAfterLeave",
		"onBeforeLeave"
	])], 8, ["disabled"]);
}
var ElDrawer = withInstall(/* @__PURE__ */ _export_sfc(_sfc_main$1, [["render", _sfc_render$1], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]));
var NonProductionLicenseBanner_default = /* @__PURE__ */ defineComponent({
	__name: "NonProductionLicenseBanner",
	setup(__props) {
		return (_ctx, _cache) => {
			return openBlock(), createBlock(BaseBanner_default, {
				name: "NON_PRODUCTION_LICENSE",
				dismissible: false
			}, {
				mainContent: withCtx(() => [createBaseVNode("span", null, toDisplayString(unref(i18n$1).baseText("banners.nonProductionLicense.message")), 1)]),
				_: 1
			});
		};
	}
});
var TrialOverBanner_default = /* @__PURE__ */ defineComponent({
	__name: "TrialOverBanner",
	setup(__props) {
		const pageRedirectionHelper = usePageRedirectionHelper();
		function onUpgradePlanClick() {
			pageRedirectionHelper.goToUpgrade("canvas-nav", "upgrade-canvas-nav", "redirect");
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(BaseBanner_default, {
				"custom-icon": "info",
				theme: "warning",
				name: "TRIAL_OVER"
			}, {
				mainContent: withCtx(() => [createBaseVNode("span", null, toDisplayString(unref(i18n$1).baseText("banners.trialOver.message")), 1)]),
				trailingContent: withCtx(() => [createVNode(unref(N8nButton_default), {
					class: "n8n-button--success",
					variant: "solid",
					icon: "zap",
					size: "small",
					onClick: onUpgradePlanClick
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$1).baseText("generic.upgradeNow")), 1)]),
					_: 1
				})]),
				_: 1
			});
		};
	}
});
var _hoisted_1$45 = { key: 0 };
var _hoisted_2$19 = ["value", "max"];
var PROGRESS_BAR_MINIMUM_THRESHOLD = 8;
var TrialBanner_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "TrialBanner",
	setup(__props) {
		const cloudPlanStore = useCloudPlanStore();
		const pageRedirectionHelper = usePageRedirectionHelper();
		const router = useRouter();
		const bannerTimeLeft = computed(() => cloudPlanStore.bannerTimeLeft);
		const showExecutions = computed(() => cloudPlanStore.showExecutions);
		const bannerCta = computed(() => ({
			text: cloudPlanStore.bannerCta.text,
			icon: cloudPlanStore.bannerCta.icon,
			size: cloudPlanStore.bannerCta.size,
			style: cloudPlanStore.bannerCta.style,
			href: cloudPlanStore.bannerCta.href
		}));
		const bannerIcon = computed(() => cloudPlanStore.bannerIcon);
		const storeTrialTimeLeft = computed(() => cloudPlanStore.trialTimeLeft);
		const messageText = computed(() => {
			if (bannerTimeLeft.value.text) return bannerTimeLeft.value.text;
			const { count, unit } = storeTrialTimeLeft.value;
			return i18n$1.baseText(`banners.trial.message.${unit}`, {
				adjustToNumber: count,
				interpolate: { count: String(count) }
			});
		});
		const cloudPlanData = computed(() => {
			const planData = cloudPlanStore.currentPlanData;
			const usage = cloudPlanStore.currentUsageData;
			if (!planData || !usage) return null;
			return {
				...planData,
				usage
			};
		});
		const trialHasExecutionsLeft = computed(() => {
			if (!cloudPlanData.value?.usage) return 0;
			return cloudPlanData.value.usage.executions < cloudPlanData.value.monthlyExecutionsLimit;
		});
		const currentExecutionsWithThreshold = computed(() => {
			if (!cloudPlanData.value?.usage) return 0;
			const usedExecutions = cloudPlanData.value.usage.executions;
			const threshold = PROGRESS_BAR_MINIMUM_THRESHOLD * cloudPlanData.value.monthlyExecutionsLimit / 100;
			return usedExecutions < threshold ? threshold : usedExecutions;
		});
		const maxExecutions = computed(() => {
			if (!cloudPlanData.value?.monthlyExecutionsLimit) return 0;
			return cloudPlanData.value.monthlyExecutionsLimit;
		});
		const currentExecutions = computed(() => {
			if (!cloudPlanData.value?.usage) return 0;
			const usedExecutions = cloudPlanData.value.usage.executions;
			const executionsQuota = cloudPlanData.value.monthlyExecutionsLimit;
			return usedExecutions > executionsQuota ? executionsQuota : usedExecutions;
		});
		function onCtaClick() {
			if (bannerCta.value.href) if (bannerCta.value.href.startsWith("http")) window.open(bannerCta.value.href, "_blank");
			else router.push(bannerCta.value.href);
			else pageRedirectionHelper.goToUpgrade("canvas-nav", "upgrade-canvas-nav", "redirect");
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(BaseBanner_default, {
				name: "TRIAL",
				theme: "custom",
				dismissible: unref(cloudPlanStore).bannerDismissible,
				"dismiss-permanently": "",
				"custom-icon": bannerIcon.value
			}, {
				mainContent: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.content) }, [bannerTimeLeft.value.show ? (openBlock(), createElementBlock("span", _hoisted_1$45, toDisplayString(messageText.value), 1)) : createCommentVNode("", true), showExecutions.value ? (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.usageCounter)
				}, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.progressBarDiv) }, [createBaseVNode("progress", {
					class: normalizeClass([trialHasExecutionsLeft.value ? _ctx.$style.progressBarSuccess : _ctx.$style.progressBarDanger, _ctx.$style.progressBar]),
					value: currentExecutionsWithThreshold.value,
					max: maxExecutions.value
				}, null, 10, _hoisted_2$19)], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.executionsCountSection) }, [
					createVNode(unref(N8nText_default), {
						size: "xsmall",
						color: trialHasExecutionsLeft.value ? "text-dark" : "danger"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(currentExecutions.value) + "/" + toDisplayString(maxExecutions.value), 1)]),
						_: 1
					}, 8, ["color"]),
					_cache[0] || (_cache[0] = createTextVNode("\xA0", -1)),
					createVNode(unref(N8nText_default), {
						size: "xsmall",
						color: trialHasExecutionsLeft.value ? "text-dark" : "danger"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$1).baseText("executionUsage.label.executions")), 1)]),
						_: 1
					}, 8, ["color"])
				], 2)], 2)) : createCommentVNode("", true)], 2)]),
				trailingContent: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.trailingContentWrapper) }, [createVNode(unref(N8nButton_default), {
					variant: bannerCta.value.style,
					icon: bannerCta.value.icon,
					size: bannerCta.value.size,
					onClick: onCtaClick
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(bannerCta.value.text), 1)]),
					_: 1
				}, 8, [
					"variant",
					"icon",
					"size"
				])], 2)]),
				_: 1
			}, 8, ["dismissible", "custom-icon"]);
		};
	}
});
var TrialBanner_vue_vue_type_style_index_0_lang_module_default = {
	content: "_content_1fc63_125",
	progressBarDiv: "_progressBarDiv_1fc63_131",
	progressBar: "_progressBar_1fc63_131",
	progressBarSuccess: "_progressBarSuccess_1fc63_160",
	progressBarDanger: "_progressBarDanger_1fc63_170",
	usageText: "_usageText_1fc63_179",
	usageCounter: "_usageCounter_1fc63_186",
	danger: "_danger_1fc63_194",
	executionsCountSection: "_executionsCountSection_1fc63_198",
	trailingContentWrapper: "_trailingContentWrapper_1fc63_202"
};
var TrialBanner_default = /* @__PURE__ */ __plugin_vue_export_helper_default(TrialBanner_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": TrialBanner_vue_vue_type_style_index_0_lang_module_default }]]);
var V1Banner_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "V1Banner",
	setup(__props) {
		const bannersStore = useBannersStore();
		async function dismissPermanently() {
			await bannersStore.dismissBanner("V1", "permanent");
		}
		const hasOwnerPermission = computed(() => hasPermission(["instanceOwner"]));
		return (_ctx, _cache) => {
			const _directive_n8n_html = resolveDirective("n8n-html");
			return openBlock(), createBlock(BaseBanner_default, {
				"custom-icon": "info",
				theme: "warning",
				name: "V1",
				class: normalizeClass(_ctx.$style.v1container)
			}, {
				mainContent: withCtx(() => [withDirectives(createBaseVNode("span", null, null, 512), [[_directive_n8n_html, unref(i18n$1).baseText("banners.v1.message")]]), hasOwnerPermission.value ? (openBlock(), createElementBlock("a", {
					key: 0,
					class: normalizeClass(_ctx.$style.link),
					"data-test-id": "banner-confirm-v1",
					onClick: dismissPermanently
				}, [withDirectives(createBaseVNode("span", null, null, 512), [[_directive_n8n_html, unref(i18n$1).baseText("generic.dontShowAgain")]])], 2)) : createCommentVNode("", true)]),
				_: 1
			}, 8, ["class"]);
		};
	}
});
var V1Banner_vue_vue_type_style_index_0_lang_module_default = {
	v1container: "_v1container_182t0_125",
	link: "_link_182t0_126"
};
var V1Banner_default = /* @__PURE__ */ __plugin_vue_export_helper_default(V1Banner_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": V1Banner_vue_vue_type_style_index_0_lang_module_default }]]);
var EmailConfirmationBanner_default = /* @__PURE__ */ defineComponent({
	__name: "EmailConfirmationBanner",
	setup(__props) {
		const toast = useToast();
		const cloudPlanStore = useCloudPlanStore();
		const userEmail = computed(() => {
			return cloudPlanStore.currentUserCloudInfo?.email ?? "";
		});
		async function onConfirmEmailClick() {
			try {
				await useUsersStore().sendConfirmationEmail();
				toast.showMessage({
					type: "success",
					title: i18n$1.baseText("banners.confirmEmail.toast.success.heading"),
					message: i18n$1.baseText("banners.confirmEmail.toast.success.message")
				});
			} catch (error$2) {
				toast.showMessage({
					type: "error",
					title: i18n$1.baseText("banners.confirmEmail.toast.error.heading"),
					message: error$2.message
				});
			}
		}
		return (_ctx, _cache) => {
			const _component_RouterLink = resolveComponent("RouterLink");
			return openBlock(), createBlock(BaseBanner_default, {
				name: "EMAIL_CONFIRMATION",
				theme: "warning"
			}, {
				mainContent: withCtx(() => [createBaseVNode("span", null, [
					createTextVNode(toDisplayString(unref(i18n$1).baseText("banners.confirmEmail.message.1")) + " ", 1),
					createVNode(_component_RouterLink, { to: "/settings/personal" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(userEmail.value), 1)]),
						_: 1
					}),
					createTextVNode(" " + toDisplayString(unref(i18n$1).baseText("banners.confirmEmail.message.2")), 1)
				])]),
				trailingContent: withCtx(() => [createVNode(unref(N8nButton_default), {
					class: "n8n-button--success",
					variant: "solid",
					icon: "mail",
					size: "small",
					"data-test-id": "confirm-email-button",
					onClick: onConfirmEmailClick
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$1).baseText("banners.confirmEmail.button")), 1)]),
					_: 1
				})]),
				_: 1
			});
		};
	}
});
var DataTableStorageLimitWarningBanner_default = /* @__PURE__ */ defineComponent({
	__name: "DataTableStorageLimitWarningBanner",
	setup(__props) {
		const dataTableStore = useDataTableStore();
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createBlock(BaseBanner_default, {
				name: "DATA_TABLE_STORAGE_LIMIT_WARNING",
				dismissible: true,
				theme: "warning"
			}, {
				mainContent: withCtx(() => [createBaseVNode("span", null, toDisplayString(unref(i18n$2).baseText("dataTable.banner.storageLimitWarning.message", { interpolate: { usage: `${unref(dataTableStore).dataTableSize} / ${unref(dataTableStore).maxSizeMB}MB` } })), 1)]),
				_: 1
			});
		};
	}
});
var DataTableStorageLimitErrorBanner_default = /* @__PURE__ */ defineComponent({
	__name: "DataTableStorageLimitErrorBanner",
	setup(__props) {
		const dataTableStore = useDataTableStore();
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createBlock(BaseBanner_default, {
				name: "DATA_TABLE_STORAGE_LIMIT_ERROR",
				dismissible: true,
				theme: "danger"
			}, {
				mainContent: withCtx(() => [createBaseVNode("span", null, toDisplayString(unref(i18n$2).baseText("dataTable.banner.storageLimitError.message", { interpolate: { usage: `${unref(dataTableStore).dataTableSize} / ${unref(dataTableStore).maxSizeMB}MB` } })), 1)]),
				_: 1
			});
		};
	}
});
var WorkflowAutoDeactivatedBanner_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowAutoDeactivatedBanner",
	setup(__props) {
		return (_ctx, _cache) => {
			return openBlock(), createBlock(BaseBanner_default, {
				name: "WORKFLOW_AUTO_DEACTIVATED",
				theme: "warning",
				"custom-icon": "info"
			}, {
				mainContent: withCtx(() => [createBaseVNode("span", null, toDisplayString(unref(i18n$1).baseText("banners.workflowAutoDeactivated.message")), 1)]),
				_: 1
			});
		};
	}
});
var _hoisted_1$44 = { "data-test-id": "banner-stack" };
const N8N_BANNERS = {
	V1: {
		priority: 350,
		component: V1Banner_default
	},
	WORKFLOW_AUTO_DEACTIVATED: {
		priority: 340,
		component: WorkflowAutoDeactivatedBanner_default
	},
	TRIAL_OVER: {
		priority: 260,
		component: TrialOverBanner_default
	},
	EMAIL_CONFIRMATION: {
		priority: 250,
		component: EmailConfirmationBanner_default
	},
	TRIAL: {
		priority: 150,
		component: TrialBanner_default
	},
	NON_PRODUCTION_LICENSE: {
		priority: 140,
		component: NonProductionLicenseBanner_default
	},
	DATA_TABLE_STORAGE_LIMIT_WARNING: {
		priority: 300,
		component: DataTableStorageLimitWarningBanner_default
	},
	DATA_TABLE_STORAGE_LIMIT_ERROR: {
		priority: 400,
		component: DataTableStorageLimitErrorBanner_default
	}
};
var BannerStack_default = /* @__PURE__ */ defineComponent({
	__name: "BannerStack",
	setup(__props) {
		const bannersStore = useBannersStore();
		async function updateCurrentBannerHeight() {
			const bannerHeight = await getBannerRowHeight();
			bannersStore.updateBannersHeight(bannerHeight);
		}
		const getBannerForName = (bannerName) => {
			return N8N_BANNERS[bannerName] || bannersStore.dynamicBannersMap[bannerName];
		};
		const removeUndefinedValues = (obj) => {
			return Object.fromEntries(Object.entries(obj).filter(([_, value]) => value !== void 0));
		};
		const currentlyShownBanner = computed(() => {
			updateCurrentBannerHeight();
			if (bannersStore.bannerStack.length === 0) return null;
			let currentBanner = getBannerForName(bannersStore.bannerStack[0]);
			let currentBannerName = bannersStore.bannerStack[0];
			bannersStore.bannerStack.forEach((bannerName, index) => {
				if (index === 0) return;
				const bannerToCompare = getBannerForName(bannerName);
				if (bannerToCompare.priority > currentBanner.priority) {
					currentBanner = bannerToCompare;
					currentBannerName = bannerName;
				}
			});
			return {
				component: currentBanner.component,
				props: removeUndefinedValues({
					name: currentBannerName,
					content: currentBanner.content,
					theme: currentBanner.theme,
					isDismissible: currentBanner.isDismissible,
					dismissPermanently: currentBanner.dismissPermanently
				})
			};
		});
		onMounted(async () => {
			await updateCurrentBannerHeight();
		});
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", _hoisted_1$44, [currentlyShownBanner.value ? (openBlock(), createBlock(resolveDynamicComponent(currentlyShownBanner.value.component), normalizeProps(mergeProps({ key: 0 }, currentlyShownBanner.value.props)), null, 16)) : createCommentVNode("", true)]);
		};
	}
});
var AppBanners_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "AppBanners",
	setup(__props) {
		const route = useRoute();
		const isDemoMode = computed(() => route.name === VIEWS.DEMO || route.name === VIEWS.DEMO_DIFF);
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				id: "banners",
				class: normalizeClass(_ctx.$style.banners)
			}, [!isDemoMode.value ? (openBlock(), createBlock(BannerStack_default, { key: 0 })) : createCommentVNode("", true)], 2);
		};
	}
});
var AppBanners_vue_vue_type_style_index_0_lang_module_default = { banners: "_banners_d938c_125" };
var AppBanners_default = /* @__PURE__ */ __plugin_vue_export_helper_default(AppBanners_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": AppBanners_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$43 = { class: "action-buttons" };
var AboutModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "AboutModal",
	setup(__props) {
		const modalBus = createEventBus();
		const toast = useToast();
		const i18n$2 = useI18n();
		const debugInfo = useDebugInfo();
		const clipboard = useClipboard();
		const rootStore = useRootStore();
		const closeDialog = () => {
			modalBus.emit("close");
		};
		const downloadThirdPartyLicenses = async () => {
			try {
				const thirdPartyLicenses = await getThirdPartyLicenses(rootStore.restApiContext);
				const blob = new File([thirdPartyLicenses], "THIRD_PARTY_LICENSES.md", { type: "text/markdown" });
				window.open(URL.createObjectURL(blob));
			} catch (error$2) {
				toast.showToast({
					title: i18n$2.baseText("about.thirdPartyLicenses.downloadError"),
					message: error$2.message,
					type: "error"
				});
			}
		};
		const copyDebugInfoToClipboard = async () => {
			toast.showToast({
				title: i18n$2.baseText("about.debug.toast.title"),
				message: i18n$2.baseText("about.debug.toast.message"),
				type: "info",
				duration: 5e3
			});
			await clipboard.copy(debugInfo.generateDebugInfo());
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				"max-width": "540px",
				title: unref(i18n$2).baseText("about.aboutN8n"),
				"event-bus": unref(modalBus),
				name: unref(ABOUT_MODAL_KEY),
				center: true
			}, {
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.container) }, [
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 8,
							class: "info-name"
						}, {
							default: withCtx(() => [createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("about.n8nVersion")), 1)]),
								_: 1
							})]),
							_: 1
						}), createVNode(unref(ElCol), { span: 16 }, {
							default: withCtx(() => [createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(rootStore).versionCli), 1)]),
								_: 1
							})]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 8,
							class: "info-name"
						}, {
							default: withCtx(() => [createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("about.sourceCode")), 1)]),
								_: 1
							})]),
							_: 1
						}), createVNode(unref(ElCol), { span: 16 }, {
							default: withCtx(() => [createVNode(unref(N8nLink_default), { to: "https://github.com/n8n-io/n8n" }, {
								default: withCtx(() => [..._cache[0] || (_cache[0] = [createTextVNode("https://github.com/n8n-io/n8n", -1)])]),
								_: 1
							})]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 8,
							class: "info-name"
						}, {
							default: withCtx(() => [createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("about.license")), 1)]),
								_: 1
							})]),
							_: 1
						}), createVNode(unref(ElCol), { span: 16 }, {
							default: withCtx(() => [createVNode(unref(N8nLink_default), { to: "https://github.com/n8n-io/n8n/blob/master/LICENSE.md" }, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("about.n8nLicense")), 1)]),
								_: 1
							})]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 8,
							class: "info-name"
						}, {
							default: withCtx(() => [createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("about.thirdPartyLicenses")), 1)]),
								_: 1
							})]),
							_: 1
						}), createVNode(unref(ElCol), { span: 16 }, {
							default: withCtx(() => [createVNode(unref(N8nLink_default), { onClick: downloadThirdPartyLicenses }, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("about.thirdPartyLicensesLink")), 1)]),
								_: 1
							})]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 8,
							class: "info-name"
						}, {
							default: withCtx(() => [createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("about.instanceID")), 1)]),
								_: 1
							})]),
							_: 1
						}), createVNode(unref(ElCol), { span: 16 }, {
							default: withCtx(() => [createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(rootStore).instanceId), 1)]),
								_: 1
							})]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 8,
							class: "info-name"
						}, {
							default: withCtx(() => [createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("about.debug.title")), 1)]),
								_: 1
							})]),
							_: 1
						}), createVNode(unref(ElCol), { span: 16 }, {
							default: withCtx(() => [createBaseVNode("div", {
								class: normalizeClass(_ctx.$style.debugInfo),
								onClick: copyDebugInfoToClipboard
							}, [createVNode(unref(N8nLink_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("about.debug.message")), 1)]),
								_: 1
							})], 2)]),
							_: 1
						})]),
						_: 1
					})
				], 2)]),
				footer: withCtx(() => [createBaseVNode("div", _hoisted_1$43, [createVNode(unref(N8nButton_default), {
					float: "right",
					label: unref(i18n$2).baseText("about.close"),
					"data-test-id": "close-about-modal-button",
					onClick: closeDialog
				}, null, 8, ["label"])])]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var AboutModal_vue_vue_type_style_index_0_lang_module_default = { container: "_container_1mbqn_125" };
var AboutModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(AboutModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": AboutModal_vue_vue_type_style_index_0_lang_module_default }]]);
var ActivationModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ActivationModal",
	setup(__props) {
		const checked = ref(false);
		const executionsStore = useExecutionsStore();
		const workflowsStore = useWorkflowsStore();
		const nodeTypesStore = useNodeTypesStore();
		const uiStore = useUIStore();
		const router = useRouter();
		const i18n$2 = useI18n();
		const modalTitle = computed(() => i18n$2.baseText("activationModal.workflowPublished"));
		const triggerContent = computed(() => {
			const foundTriggers = getActivatableTriggerNodes(workflowsStore.workflowTriggerNodes);
			if (!foundTriggers.length) return "";
			if (foundTriggers.length > 1) return i18n$2.baseText("activationModal.yourTriggersWillNowFire");
			const trigger$1 = foundTriggers[0];
			const triggerNodeType = nodeTypesStore.getNodeType(trigger$1.type, trigger$1.typeVersion);
			if (triggerNodeType) {
				if (triggerNodeType.activationMessage) return triggerNodeType.activationMessage;
				const serviceName = getTriggerNodeServiceName(triggerNodeType);
				if (trigger$1.webhookId) return i18n$2.baseText("activationModal.yourWorkflowWillNowListenForEvents", { interpolate: { serviceName } });
				else if (triggerNodeType.polling) return i18n$2.baseText("activationModal.yourWorkflowWillNowRegularlyCheck", { interpolate: { serviceName } });
			}
			return i18n$2.baseText("activationModal.yourTriggerWillNowFire");
		});
		const showExecutionsList = async () => {
			const activeExecution = executionsStore.activeExecution;
			const currentWorkflow = workflowsStore.workflowId;
			if (activeExecution) router.push({
				name: VIEWS.EXECUTION_PREVIEW,
				params: {
					name: currentWorkflow,
					executionId: activeExecution.id
				}
			}).catch(() => {});
			else router.push({
				name: VIEWS.EXECUTION_HOME,
				params: { name: currentWorkflow }
			}).catch(() => {});
			uiStore.closeModal(WORKFLOW_ACTIVE_MODAL_KEY);
		};
		const showSettings = async () => {
			uiStore.openModal(WORKFLOW_SETTINGS_MODAL_KEY);
		};
		const handleCheckboxChange = (checkboxValue) => {
			const boolValue = typeof checkboxValue === "boolean" ? checkboxValue : Boolean(checkboxValue);
			checked.value = boolValue;
			useStorage$1(LOCAL_STORAGE_ACTIVATION_FLAG).value = boolValue.toString();
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(WORKFLOW_ACTIVE_MODAL_KEY),
				title: modalTitle.value,
				width: "460px"
			}, {
				content: withCtx(() => [createBaseVNode("div", null, [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [createTextVNode(toDisplayString(triggerContent.value), 1)]),
					_: 1
				})]), createBaseVNode("div", { class: normalizeClass(_ctx.$style.spaced) }, [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [
						createVNode(unref(N8nText_default), { bold: true }, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("activationModal.theseExecutionsWillNotShowUp")), 1)]),
							_: 1
						}),
						createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("activationModal.butYouCanSeeThem")) + " ", 1),
						createBaseVNode("a", { onClick: showExecutionsList }, toDisplayString(unref(i18n$2).baseText("activationModal.executionList")), 1),
						createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("activationModal.ifYouChooseTo")) + " ", 1),
						createBaseVNode("a", { onClick: showSettings }, toDisplayString(unref(i18n$2).baseText("activationModal.saveExecutions")), 1)
					]),
					_: 1
				})], 2)]),
				footer: withCtx(({ close }) => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(Checkbox_default), {
					"model-value": checked.value,
					"onUpdate:modelValue": handleCheckboxChange
				}, {
					label: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.dontShowAgain")), 1)]),
					_: 1
				}, 8, ["model-value"]), createVNode(unref(N8nButton_default), {
					label: unref(i18n$2).baseText("activationModal.gotIt"),
					onClick: close
				}, null, 8, ["label", "onClick"])], 2)]),
				_: 1
			}, 8, ["name", "title"]);
		};
	}
});
var ActivationModal_vue_vue_type_style_index_0_lang_module_default = {
	spaced: "_spaced_1mc84_125",
	footer: "_footer_1mc84_129"
};
var ActivationModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ActivationModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ActivationModal_vue_vue_type_style_index_0_lang_module_default }]]);
var ApiKeyScopes_vue_vue_type_style_index_0_lang_module_default = {
	"api-key-scopes": "_api-key-scopes_1tru2_2",
	"scopes-dropdown-container": "_scopes-dropdown-container_1tru2_12",
	"scopes-checkbox": "_scopes-checkbox_1tru2_42"
};
var ApiKeyScopes_default = /* @__PURE__ */ __plugin_vue_export_helper_default({
	__name: "ApiKeyScopes",
	props: {
		modelValue: {
			type: Array,
			default: () => []
		},
		availableScopes: {
			type: Array,
			default: () => []
		},
		enabled: {
			type: Boolean,
			default: false
		}
	},
	emits: ["update:modelValue"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const selectedScopes = ref(props.modelValue);
		const i18n$2 = useI18n();
		const { goToUpgrade } = usePageRedirectionHelper();
		const checkAll = ref(false);
		const indeterminate = ref(false);
		const popperContainer = ref(null);
		const groupedScopes = computed(() => {
			const groups = {};
			props.availableScopes.forEach((scope) => {
				const [resource, action$1] = scope.split(":");
				if (!groups[resource]) groups[resource] = [];
				if (action$1) groups[resource].push(action$1);
			});
			return groups;
		});
		watch(selectedScopes, (newValue) => {
			if (newValue.length === props.availableScopes.length) {
				indeterminate.value = false;
				checkAll.value = true;
			} else if (newValue.length > 0) indeterminate.value = true;
			else if (newValue.length === 0) {
				indeterminate.value = false;
				checkAll.value = false;
			}
			emit("update:modelValue", newValue);
		});
		watch(checkAll, (newValue) => {
			if (newValue) selectedScopes.value = props.availableScopes;
			else selectedScopes.value = [];
		});
		function goToUpgradeApiKeyScopes() {
			goToUpgrade("api-key-scopes", "upgrade-api-key-scopes");
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { class: normalizeClass(_ctx.$style["api-key-scopes"]) }, [
				createBaseVNode("div", {
					ref_key: "popperContainer",
					ref: popperContainer
				}, null, 512),
				createVNode(unref(N8nInputLabel_default), {
					label: unref(i18n$2).baseText("settings.api.scopes.label"),
					color: "text-dark"
				}, {
					default: withCtx(() => [createVNode(unref(ElSelect), {
						modelValue: selectedScopes.value,
						"onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => selectedScopes.value = $event),
						"data-test-id": "scopes-select",
						"popper-class": _ctx.$style["scopes-dropdown-container"],
						teleported: true,
						multiple: "",
						"collapse-tags": "",
						"max-collapse-tags": 10,
						placement: "top",
						"reserve-keyword": false,
						placeholder: unref(i18n$2).baseText("settings.api.scopes.placeholder"),
						"append-to": popperContainer.value
					}, {
						header: withCtx(() => [createVNode(unref(Checkbox_default), {
							modelValue: checkAll.value,
							"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => checkAll.value = $event),
							disabled: !__props.enabled,
							class: normalizeClass(_ctx.$style["scopes-checkbox"]),
							indeterminate: indeterminate.value,
							label: unref(i18n$2).baseText("settings.api.scopes.selectAll")
						}, null, 8, [
							"modelValue",
							"disabled",
							"class",
							"indeterminate",
							"label"
						])]),
						default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(groupedScopes.value, (actions$5, resource) => {
							return openBlock(), createBlock(unref(ElOptionGroup), {
								key: resource,
								disabled: !__props.enabled,
								label: unref(capitalCase)(resource).toUpperCase()
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(actions$5, (action$1) => {
									return openBlock(), createBlock(unref(ElOption), {
										key: `${resource}:${action$1}`,
										label: `${resource}:${action$1}`,
										value: `${resource}:${action$1}`
									}, null, 8, ["label", "value"]);
								}), 128))]),
								_: 2
							}, 1032, ["disabled", "label"]);
						}), 128))]),
						_: 1
					}, 8, [
						"modelValue",
						"popper-class",
						"placeholder",
						"append-to"
					])]),
					_: 1
				}, 8, ["label"]),
				!__props.enabled ? (openBlock(), createBlock(unref(N8nNotice_default), { key: 0 }, {
					default: withCtx(() => [createVNode(unref(I18nT), {
						keypath: "settings.api.scopes.upgrade",
						scope: "global"
					}, {
						link: withCtx(() => [createVNode(unref(N8nLink_default), {
							size: "small",
							onClick: goToUpgradeApiKeyScopes
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.upgrade")), 1)]),
							_: 1
						})]),
						_: 1
					})]),
					_: 1
				})) : createCommentVNode("", true)
			], 2);
		};
	}
}, [["__cssModules", { "$style": ApiKeyScopes_vue_vue_type_style_index_0_lang_module_default }]]);
var ApiKeyCreateOrEditModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ApiKeyCreateOrEditModal",
	props: {
		mode: { default: "new" },
		activeId: { default: "" }
	},
	setup(__props) {
		const EXPIRATION_OPTIONS = {
			"7_DAYS": 7,
			"30_DAYS": 30,
			"60_DAYS": 60,
			"90_DAYS": 90,
			CUSTOM: 1,
			NO_EXPIRATION: 0
		};
		const i18n$2 = useI18n();
		const { showError, showMessage } = useToast();
		const uiStore = useUIStore();
		const rootStore = useRootStore();
		const { createApiKey, updateApiKey, apiKeysById, availableScopes } = useApiKeysStore();
		const documentTitle = useDocumentTitle();
		const label$4 = ref("");
		const expirationDaysFromNow = ref(EXPIRATION_OPTIONS["30_DAYS"]);
		const modalBus = createEventBus();
		const newApiKey = ref(null);
		const loading$2 = ref(false);
		const rawApiKey = ref("");
		const customExpirationDate = ref("");
		const showExpirationDateSelector = ref(false);
		const apiKeyCreationDate = ref("");
		const selectedScopes = ref([]);
		const settingsStore = useSettingsStore();
		const apiKeyStore = useApiKeysStore();
		const apiKeyScopesEnabled = computed(() => settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.ApiKeyScopes]);
		const calculateExpirationDate = (daysFromNow) => {
			return DateTime.now().setZone(rootStore.timezone).startOf("day").plus({ days: daysFromNow });
		};
		const getExpirationOptionLabel = (value) => {
			if (EXPIRATION_OPTIONS.CUSTOM === value) return i18n$2.baseText("settings.api.view.modal.form.expiration.custom");
			if (EXPIRATION_OPTIONS.NO_EXPIRATION === value) return i18n$2.baseText("settings.api.view.modal.form.expiration.none");
			return i18n$2.baseText("settings.api.view.modal.form.expiration.days", { interpolate: { numberOfDays: value } });
		};
		const expirationDate = ref(calculateExpirationDate(expirationDaysFromNow.value).toFormat("ccc, MMM d yyyy"));
		const inputRef = ref(null);
		const props = __props;
		const allFormFieldsAreSet = computed(() => {
			const isExpirationDateSet = expirationDaysFromNow.value === EXPIRATION_OPTIONS.NO_EXPIRATION || expirationDaysFromNow.value === EXPIRATION_OPTIONS.CUSTOM && customExpirationDate.value || expirationDate.value;
			return label$4.value && (!apiKeyScopesEnabled.value ? true : selectedScopes.value.length) && (props.mode === "edit" ? true : isExpirationDateSet);
		});
		const isCustomDateInThePast = (date) => Date.now() > date.getTime();
		onMounted(() => {
			documentTitle.set(i18n$2.baseText("settings.api"));
			setTimeout(() => {
				inputRef.value?.focus();
			});
			if (props.mode === "edit") {
				const apiKey = apiKeysById[props.activeId];
				label$4.value = apiKey.label ?? "";
				apiKeyCreationDate.value = getApiKeyCreationTime(apiKey);
				selectedScopes.value = !apiKeyScopesEnabled.value ? apiKeyStore.availableScopes : apiKey.scopes.filter((scope) => apiKeyStore.availableScopes.includes(scope));
			}
			if (props.mode === "new" && !apiKeyScopesEnabled.value) selectedScopes.value = availableScopes;
		});
		function onInput(value) {
			label$4.value = value;
		}
		function onScopeSelectionChanged(scopes) {
			selectedScopes.value = scopes;
		}
		const getApiKeyCreationTime = (apiKey) => {
			const time = DateTime.fromMillis(Date.parse(apiKey.createdAt)).toFormat("ccc, MMM d yyyy");
			return i18n$2.baseText("settings.api.creationTime", { interpolate: { time } });
		};
		async function onEdit() {
			try {
				loading$2.value = true;
				await updateApiKey(props.activeId, {
					label: label$4.value,
					scopes: selectedScopes.value
				});
				showMessage({
					type: "success",
					title: i18n$2.baseText("settings.api.update.toast")
				});
				closeModal();
			} catch (error$2) {
				showError(error$2, i18n$2.baseText("settings.api.edit.error"));
			} finally {
				loading$2.value = false;
			}
		}
		function closeModal() {
			uiStore.closeModal(API_KEY_CREATE_OR_EDIT_MODAL_KEY);
		}
		const onSave = async () => {
			if (!label$4.value) return;
			let expirationUnixTimestamp = null;
			if (expirationDaysFromNow.value === EXPIRATION_OPTIONS.CUSTOM) expirationUnixTimestamp = parseInt(customExpirationDate.value, 10);
			else if (expirationDaysFromNow.value !== EXPIRATION_OPTIONS.NO_EXPIRATION) expirationUnixTimestamp = calculateExpirationDate(expirationDaysFromNow.value).toUnixInteger();
			const payload = {
				label: label$4.value,
				expiresAt: expirationUnixTimestamp,
				scopes: selectedScopes.value
			};
			try {
				loading$2.value = true;
				newApiKey.value = await createApiKey(payload);
				rawApiKey.value = newApiKey.value.rawApiKey;
				showMessage({
					type: "success",
					title: i18n$2.baseText("settings.api.create.toast")
				});
			} catch (error$2) {
				showError(error$2, i18n$2.baseText("settings.api.create.error"));
			} finally {
				loading$2.value = false;
			}
		};
		const modalTitle = computed(() => {
			let path = "edit";
			if (props.mode === "new") if (newApiKey.value) path = "created";
			else path = "create";
			return i18n$2.baseText(`settings.api.view.modal.title.${path}`);
		});
		const onSelect = (value) => {
			if (value === EXPIRATION_OPTIONS.CUSTOM) {
				showExpirationDateSelector.value = true;
				expirationDate.value = "";
				return;
			}
			if (value !== EXPIRATION_OPTIONS.NO_EXPIRATION) {
				expirationDate.value = calculateExpirationDate(value).toFormat("ccc, MMM d yyyy");
				showExpirationDateSelector.value = false;
				return;
			}
			expirationDate.value = "";
			showExpirationDateSelector.value = false;
		};
		async function handleEnterKey(event) {
			if (event.key === "Enter") if (props.mode === "new") await onSave();
			else await onEdit();
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				title: modalTitle.value,
				"event-bus": unref(modalBus),
				name: unref(API_KEY_CREATE_OR_EDIT_MODAL_KEY),
				width: "600px",
				"lock-scroll": false,
				"close-on-esc": true,
				"close-on-click-modal": false,
				"show-close": true
			}, {
				content: withCtx(() => [createBaseVNode("div", { onKeyup: withKeys(handleEnterKey, ["enter"]) }, [newApiKey.value ? (openBlock(), createBlock(unref(N8nCard_default), {
					key: 0,
					class: "mb-4xs"
				}, {
					default: withCtx(() => [createVNode(CopyInput_default, {
						label: newApiKey.value.label,
						value: newApiKey.value.rawApiKey,
						"redact-value": true,
						"copy-button-text": unref(i18n$2).baseText("generic.clickToCopy"),
						"toast-title": unref(i18n$2).baseText("settings.api.view.copy.toast"),
						hint: unref(i18n$2).baseText("settings.api.view.copy")
					}, null, 8, [
						"label",
						"value",
						"copy-button-text",
						"toast-title",
						"hint"
					])]),
					_: 1
				})) : (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.form)
				}, [
					createVNode(unref(N8nInputLabel_default), {
						label: unref(i18n$2).baseText("settings.api.view.modal.form.label"),
						color: "text-dark"
					}, {
						default: withCtx(() => [createVNode(unref(Input_default), {
							ref_key: "inputRef",
							ref: inputRef,
							required: "",
							"model-value": label$4.value,
							size: "large",
							type: "text",
							placeholder: unref(i18n$2).baseText("settings.api.view.modal.form.label.placeholder"),
							maxlength: 50,
							"data-test-id": "api-key-label",
							"onUpdate:modelValue": onInput
						}, null, 8, ["model-value", "placeholder"])]),
						_: 1
					}, 8, ["label"]),
					__props.mode === "new" ? (openBlock(), createElementBlock("div", {
						key: 0,
						class: normalizeClass(_ctx.$style.expirationSection)
					}, [
						createVNode(unref(N8nInputLabel_default), {
							label: unref(i18n$2).baseText("settings.api.view.modal.form.expiration"),
							color: "text-dark"
						}, {
							default: withCtx(() => [createVNode(unref(N8nSelect_default), {
								modelValue: expirationDaysFromNow.value,
								"onUpdate:modelValue": [_cache[0] || (_cache[0] = ($event) => expirationDaysFromNow.value = $event), onSelect],
								size: "large",
								filterable: "",
								readonly: "",
								"data-test-id": "expiration-select"
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(Object.keys(EXPIRATION_OPTIONS), (key) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key,
										value: EXPIRATION_OPTIONS[key],
										label: getExpirationOptionLabel(EXPIRATION_OPTIONS[key])
									}, null, 8, ["value", "label"]);
								}), 128))]),
								_: 1
							}, 8, ["modelValue"])]),
							_: 1
						}, 8, ["label"]),
						expirationDate.value ? (openBlock(), createBlock(unref(N8nText_default), {
							key: 0,
							class: "mb-xs"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.api.view.modal.form.expirationText", { interpolate: { expirationDate: expirationDate.value } })), 1)]),
							_: 1
						})) : createCommentVNode("", true),
						showExpirationDateSelector.value ? (openBlock(), createBlock(unref(ElDatePicker), {
							key: 1,
							modelValue: customExpirationDate.value,
							"onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => customExpirationDate.value = $event),
							type: "date",
							teleported: false,
							placeholder: "yyyy-mm-dd",
							"value-format": "X",
							"disabled-date": isCustomDateInThePast
						}, null, 8, ["modelValue"])) : createCommentVNode("", true)
					], 2)) : createCommentVNode("", true),
					createVNode(ApiKeyScopes_default, {
						modelValue: selectedScopes.value,
						"onUpdate:modelValue": [_cache[2] || (_cache[2] = ($event) => selectedScopes.value = $event), onScopeSelectionChanged],
						"available-scopes": unref(availableScopes),
						enabled: apiKeyScopesEnabled.value
					}, null, 8, [
						"modelValue",
						"available-scopes",
						"enabled"
					])
				], 2))], 32)]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [
					__props.mode === "new" && !newApiKey.value ? (openBlock(), createBlock(unref(N8nButton_default), {
						key: 0,
						loading: loading$2.value,
						disabled: !allFormFieldsAreSet.value,
						label: unref(i18n$2).baseText("settings.api.view.modal.save.button"),
						onClick: onSave
					}, null, 8, [
						"loading",
						"disabled",
						"label"
					])) : __props.mode === "new" ? (openBlock(), createBlock(unref(N8nButton_default), {
						key: 1,
						label: unref(i18n$2).baseText("settings.api.view.modal.done.button"),
						onClick: closeModal
					}, null, 8, ["label"])) : createCommentVNode("", true),
					__props.mode === "edit" ? (openBlock(), createBlock(unref(N8nButton_default), {
						key: 2,
						disabled: !allFormFieldsAreSet.value,
						label: unref(i18n$2).baseText("settings.api.view.modal.save.button"),
						onClick: onEdit
					}, null, 8, ["disabled", "label"])) : createCommentVNode("", true),
					__props.mode === "edit" ? (openBlock(), createBlock(unref(N8nText_default), {
						key: 3,
						size: "small",
						color: "text-light"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(apiKeyCreationDate.value), 1)]),
						_: 1
					})) : createCommentVNode("", true)
				], 2)]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var ApiKeyCreateOrEditModal_vue_vue_type_style_index_0_lang_module_default = {
	notice: "_notice_gomyt_125",
	form: "_form_gomyt_129",
	expirationSection: "_expirationSection_gomyt_135",
	footer: "_footer_gomyt_142"
};
var ApiKeyCreateOrEditModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ApiKeyCreateOrEditModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ApiKeyCreateOrEditModal_vue_vue_type_style_index_0_lang_module_default }]]);
var NewAssistantSessionModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "NewAssistantSessionModal",
	props: {
		name: {},
		data: {}
	},
	setup(__props) {
		const i18n$2 = useI18n();
		const uiStore = useUIStore();
		const assistantStore = useAssistantStore();
		const chatPanelStore = useChatPanelStore();
		const props = __props;
		const close = () => {
			uiStore.closeModal(NEW_ASSISTANT_SESSION_MODAL);
		};
		const startNewSession = async () => {
			if ("errorHelp" in props.data.context) {
				await chatPanelStore.openWithErrorHelper(props.data.context.errorHelp);
				assistantStore.trackUserOpenedAssistant({
					source: "error",
					task: "error",
					has_existing_session: true
				});
			} else if ("credHelp" in props.data.context) await chatPanelStore.openWithCredHelp(props.data.context.credHelp.credType);
			close();
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "460px",
				height: "250px",
				"data-test-id": "new-assistant-session-modal",
				name: unref(NEW_ASSISTANT_SESSION_MODAL),
				center: true,
				"append-to-body": true
			}, {
				header: withCtx(() => [
					createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.newSessionModal.title.part1")) + " ", 1),
					createBaseVNode("span", { class: normalizeClass(_ctx.$style.assistantIcon) }, [createVNode(unref(AskAssistantIcon_default), { size: "medium" })], 2),
					createVNode(unref(AskAssistantText_default), {
						size: "xlarge",
						text: unref(i18n$2).baseText("aiAssistant.assistant")
					}, null, 8, ["text"]),
					createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("aiAssistant.newSessionModal.title.part2")), 1)
				]),
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.container) }, [createBaseVNode("p", null, [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.newSessionModal.message")), 1)]),
					_: 1
				})]), createBaseVNode("p", null, [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.newSessionModal.question")), 1)]),
					_: 1
				})])], 2)]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					label: unref(i18n$2).baseText("generic.cancel"),
					onClick: close
				}, null, 8, ["label"]), createVNode(unref(N8nButton_default), {
					label: unref(i18n$2).baseText("aiAssistant.newSessionModal.confirm"),
					onClick: startNewSession
				}, null, 8, ["label"])], 2)]),
				_: 1
			}, 8, ["name"]);
		};
	}
});
var NewAssistantSessionModal_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_1yu53_125",
	assistantIcon: "_assistantIcon_1yu53_132",
	footer: "_footer_1yu53_136"
};
var NewAssistantSessionModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(NewAssistantSessionModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": NewAssistantSessionModal_vue_vue_type_style_index_0_lang_module_default }]]);
var ChangePasswordModal_default = /* @__PURE__ */ defineComponent({
	__name: "ChangePasswordModal",
	setup(__props) {
		const config$1 = ref(null);
		const formBus = createFormEventBus();
		const modalBus = createEventBus();
		const password = ref("");
		const loading$2 = ref(false);
		const i18n$2 = useI18n();
		const { showMessage, showError } = useToast();
		const usersStore = useUsersStore();
		const passwordsMatch = (value) => {
			if (typeof value !== "string") return false;
			if (value !== password.value) return { messageKey: "auth.changePassword.passwordsMustMatchError" };
			return false;
		};
		const onInput = (e) => {
			if (e.name === "password" && typeof e.value === "string") password.value = e.value;
		};
		const onSubmit = async (data) => {
			const values = data;
			try {
				loading$2.value = true;
				await usersStore.updateCurrentUserPassword({
					currentPassword: values.currentPassword,
					newPassword: values.password,
					mfaCode: values.mfaCode
				});
				showMessage({
					type: "success",
					title: i18n$2.baseText("auth.changePassword.passwordUpdated"),
					message: i18n$2.baseText("auth.changePassword.passwordUpdatedMessage")
				});
				modalBus.emit("close");
			} catch (error$2) {
				showError(error$2, i18n$2.baseText("auth.changePassword.error"));
			} finally {
				loading$2.value = false;
			}
		};
		const onSubmitClick = () => {
			formBus.emit("submit");
		};
		onMounted(() => {
			const inputs = {
				currentPassword: {
					name: "currentPassword",
					properties: {
						label: i18n$2.baseText("auth.changePassword.currentPassword"),
						type: "password",
						required: true,
						autocomplete: "current-password",
						capitalize: true,
						focusInitially: true
					}
				},
				mfaCode: {
					name: "mfaCode",
					properties: {
						label: i18n$2.baseText("auth.changePassword.mfaCode"),
						type: "text",
						required: true,
						capitalize: true
					}
				},
				newPassword: {
					name: "password",
					properties: {
						label: i18n$2.baseText("auth.newPassword"),
						type: "password",
						required: true,
						validationRules: [{ name: "DEFAULT_PASSWORD_RULES" }],
						infoText: i18n$2.baseText("auth.defaultPasswordRequirements"),
						autocomplete: "new-password",
						capitalize: true
					}
				},
				newPasswordAgain: {
					name: "password2",
					properties: {
						label: i18n$2.baseText("auth.changePassword.reenterNewPassword"),
						type: "password",
						required: true,
						validators: { TWO_PASSWORDS_MATCH: { validate: passwordsMatch } },
						validationRules: [{ name: "TWO_PASSWORDS_MATCH" }],
						autocomplete: "new-password",
						capitalize: true
					}
				}
			};
			const { currentUser } = usersStore;
			config$1.value = currentUser?.mfaEnabled ? [
				inputs.currentPassword,
				inputs.mfaCode,
				inputs.newPassword,
				inputs.newPasswordAgain
			] : [
				inputs.currentPassword,
				inputs.newPassword,
				inputs.newPasswordAgain
			];
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(CHANGE_PASSWORD_MODAL_KEY),
				title: unref(i18n$2).baseText("auth.changePassword"),
				center: true,
				width: "460px",
				"event-bus": unref(modalBus),
				onEnter: onSubmitClick
			}, {
				content: withCtx(() => [config$1.value ? (openBlock(), createBlock(unref(N8nFormInputs_default), {
					key: 0,
					inputs: config$1.value,
					"event-bus": unref(formBus),
					"column-view": true,
					onUpdate: onInput,
					onSubmit
				}, null, 8, ["inputs", "event-bus"])) : createCommentVNode("", true)]),
				footer: withCtx(() => [createVNode(unref(N8nButton_default), {
					loading: loading$2.value,
					label: unref(i18n$2).baseText("auth.changePassword"),
					float: "right",
					"data-test-id": "change-password-button",
					onClick: onSubmitClick
				}, null, 8, ["loading", "label"])]),
				_: 1
			}, 8, [
				"name",
				"title",
				"event-bus"
			]);
		};
	}
});
var ConfirmPasswordModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ConfirmPasswordModal",
	setup(__props) {
		const config$1 = ref(null);
		const formBus = createFormEventBus();
		const loading$2 = ref(false);
		const i18n$2 = useI18n();
		const onSubmit = (data) => {
			const currentPassword = data.currentPassword;
			if (!currentPassword) return;
			loading$2.value = true;
			confirmPasswordEventBus.emit("close", { currentPassword });
		};
		const onSubmitClick = () => {
			formBus.emit("submit");
		};
		onMounted(() => {
			config$1.value = [{ currentPassword: {
				name: "currentPassword",
				properties: {
					label: i18n$2.baseText("auth.confirmPassword.currentPassword"),
					type: "password",
					required: true,
					autocomplete: "current-password",
					capitalize: true,
					focusInitially: true
				}
			} }.currentPassword];
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(CONFIRM_PASSWORD_MODAL_KEY),
				title: unref(i18n$2).baseText("auth.confirmPassword"),
				center: true,
				width: "460px",
				"event-bus": unref(confirmPasswordEventBus),
				onEnter: onSubmitClick
			}, {
				content: withCtx(() => [createVNode(unref(N8nText_default), {
					class: normalizeClass(_ctx.$style.description),
					tag: "p"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("auth.confirmPassword.confirmPasswordToChangeEmail")), 1)]),
					_: 1
				}, 8, ["class"]), config$1.value ? (openBlock(), createBlock(unref(N8nFormInputs_default), {
					key: 0,
					inputs: config$1.value,
					"event-bus": unref(formBus),
					"column-view": true,
					onSubmit
				}, null, 8, ["inputs", "event-bus"])) : createCommentVNode("", true)]),
				footer: withCtx(() => [createVNode(unref(N8nButton_default), {
					loading: loading$2.value,
					label: unref(i18n$2).baseText("generic.confirm"),
					float: "right",
					"data-test-id": "confirm-password-button",
					onClick: onSubmitClick
				}, null, 8, ["loading", "label"])]),
				_: 1
			}, 8, [
				"name",
				"title",
				"event-bus"
			]);
		};
	}
});
var ConfirmPasswordModal_vue_vue_type_style_index_0_lang_module_default = { description: "_description_z8d8j_125" };
var ConfirmPasswordModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ConfirmPasswordModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ConfirmPasswordModal_vue_vue_type_style_index_0_lang_module_default }]]);
var handlers = {};
var instrumented = {};
function addHandler(type, handler) {
	handlers[type] = handlers[type] || [];
	handlers[type].push(handler);
}
function maybeInstrument(type, instrumentFn) {
	if (!instrumented[type]) {
		instrumented[type] = true;
		try {
			instrumentFn();
		} catch (e) {
			DEBUG_BUILD$3 && debug.error(`Error while instrumenting ${type}`, e);
		}
	}
}
function triggerHandlers(type, data) {
	const typeHandlers = type && handlers[type];
	if (!typeHandlers) return;
	for (const handler of typeHandlers) try {
		handler(data);
	} catch (e) {
		DEBUG_BUILD$3 && debug.error(`Error while triggering instrumentation handler.\nType: ${type}\nName: ${getFunctionName(handler)}\nError:`, e);
	}
}
var _oldOnErrorHandler = null;
function addGlobalErrorInstrumentationHandler(handler) {
	const type = "error";
	addHandler(type, handler);
	maybeInstrument(type, instrumentError);
}
function instrumentError() {
	_oldOnErrorHandler = GLOBAL_OBJ.onerror;
	GLOBAL_OBJ.onerror = function(msg, url, line, column$1, error$2) {
		triggerHandlers("error", {
			column: column$1,
			error: error$2,
			line,
			msg,
			url
		});
		if (_oldOnErrorHandler) return _oldOnErrorHandler.apply(this, arguments);
		return false;
	};
	GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__ = true;
}
var _oldOnUnhandledRejectionHandler = null;
function addGlobalUnhandledRejectionInstrumentationHandler(handler) {
	const type = "unhandledrejection";
	addHandler(type, handler);
	maybeInstrument(type, instrumentUnhandledRejection);
}
function instrumentUnhandledRejection() {
	_oldOnUnhandledRejectionHandler = GLOBAL_OBJ.onunhandledrejection;
	GLOBAL_OBJ.onunhandledrejection = function(e) {
		triggerHandlers("unhandledrejection", e);
		if (_oldOnUnhandledRejectionHandler) return _oldOnUnhandledRejectionHandler.apply(this, arguments);
		return true;
	};
	GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__ = true;
}
var SENTRY_API_VERSION = "7";
function getBaseApiEndpoint(dsn) {
	const protocol = dsn.protocol ? `${dsn.protocol}:` : "";
	const port = dsn.port ? `:${dsn.port}` : "";
	return `${protocol}//${dsn.host}${port}${dsn.path ? `/${dsn.path}` : ""}/api/`;
}
function _getIngestEndpoint(dsn) {
	return `${getBaseApiEndpoint(dsn)}${dsn.projectId}/envelope/`;
}
function _encodedAuth(dsn, sdkInfo) {
	const params = { sentry_version: SENTRY_API_VERSION };
	if (dsn.publicKey) params.sentry_key = dsn.publicKey;
	if (sdkInfo) params.sentry_client = `${sdkInfo.name}/${sdkInfo.version}`;
	return new URLSearchParams(params).toString();
}
function getEnvelopeEndpointWithUrlEncodedAuth(dsn, tunnel, sdkInfo) {
	return tunnel ? tunnel : `${_getIngestEndpoint(dsn)}?${_encodedAuth(dsn, sdkInfo)}`;
}
var installedIntegrations = [];
function filterDuplicates(integrations) {
	const integrationsByName = {};
	integrations.forEach((currentInstance) => {
		const { name: name$3 } = currentInstance;
		const existingInstance = integrationsByName[name$3];
		if (existingInstance && !existingInstance.isDefaultInstance && currentInstance.isDefaultInstance) return;
		integrationsByName[name$3] = currentInstance;
	});
	return Object.values(integrationsByName);
}
function getIntegrationsToSetup(options$1) {
	const defaultIntegrations = options$1.defaultIntegrations || [];
	const userIntegrations = options$1.integrations;
	defaultIntegrations.forEach((integration) => {
		integration.isDefaultInstance = true;
	});
	let integrations;
	if (Array.isArray(userIntegrations)) integrations = [...defaultIntegrations, ...userIntegrations];
	else if (typeof userIntegrations === "function") {
		const resolvedUserIntegrations = userIntegrations(defaultIntegrations);
		integrations = Array.isArray(resolvedUserIntegrations) ? resolvedUserIntegrations : [resolvedUserIntegrations];
	} else integrations = defaultIntegrations;
	return filterDuplicates(integrations);
}
function setupIntegrations(client, integrations) {
	const integrationIndex = {};
	integrations.forEach((integration) => {
		if (integration) setupIntegration(client, integration, integrationIndex);
	});
	return integrationIndex;
}
function afterSetupIntegrations(client, integrations) {
	for (const integration of integrations) if (integration?.afterAllSetup) integration.afterAllSetup(client);
}
function setupIntegration(client, integration, integrationIndex) {
	if (integrationIndex[integration.name]) {
		DEBUG_BUILD$3 && debug.log(`Integration skipped because it was already installed: ${integration.name}`);
		return;
	}
	integrationIndex[integration.name] = integration;
	if (!installedIntegrations.includes(integration.name) && typeof integration.setupOnce === "function") {
		integration.setupOnce();
		installedIntegrations.push(integration.name);
	}
	if (integration.setup && typeof integration.setup === "function") integration.setup(client);
	if (typeof integration.preprocessEvent === "function") {
		const callback = integration.preprocessEvent.bind(integration);
		client.on("preprocessEvent", (event, hint$1) => callback(event, hint$1, client));
	}
	if (typeof integration.processEvent === "function") {
		const callback = integration.processEvent.bind(integration);
		const processor = Object.assign((event, hint$1) => callback(event, hint$1, client), { id: integration.name });
		client.addEventProcessor(processor);
	}
	DEBUG_BUILD$3 && debug.log(`Integration installed: ${integration.name}`);
}
function defineIntegration(fn) {
	return fn;
}
function createLogContainerEnvelopeItem(items) {
	return [{
		type: "log",
		item_count: items.length,
		content_type: "application/vnd.sentry.items.log+json"
	}, { items }];
}
function createLogEnvelope(logs, metadata, tunnel, dsn) {
	const headers = {};
	if (metadata?.sdk) headers.sdk = {
		name: metadata.sdk.name,
		version: metadata.sdk.version
	};
	if (!!tunnel && !!dsn) headers.dsn = dsnToString(dsn);
	return createEnvelope(headers, [createLogContainerEnvelopeItem(logs)]);
}
function _INTERNAL_flushLogsBuffer(client, maybeLogBuffer) {
	const logBuffer = maybeLogBuffer ?? _INTERNAL_getLogBuffer(client) ?? [];
	if (logBuffer.length === 0) return;
	const clientOptions = client.getOptions();
	const envelope = createLogEnvelope(logBuffer, clientOptions._metadata, clientOptions.tunnel, client.getDsn());
	_getBufferMap$1().set(client, []);
	client.emit("flushLogs");
	client.sendEnvelope(envelope);
}
function _INTERNAL_getLogBuffer(client) {
	return _getBufferMap$1().get(client);
}
function _getBufferMap$1() {
	return getGlobalSingleton("clientToLogBufferMap", () => /* @__PURE__ */ new WeakMap());
}
function createMetricContainerEnvelopeItem(items) {
	return [{
		type: "trace_metric",
		item_count: items.length,
		content_type: "application/vnd.sentry.items.trace-metric+json"
	}, { items }];
}
function createMetricEnvelope(metrics, metadata, tunnel, dsn) {
	const headers = {};
	if (metadata?.sdk) headers.sdk = {
		name: metadata.sdk.name,
		version: metadata.sdk.version
	};
	if (!!tunnel && !!dsn) headers.dsn = dsnToString(dsn);
	return createEnvelope(headers, [createMetricContainerEnvelopeItem(metrics)]);
}
function _INTERNAL_flushMetricsBuffer(client, maybeMetricBuffer) {
	const metricBuffer = maybeMetricBuffer ?? _INTERNAL_getMetricBuffer(client) ?? [];
	if (metricBuffer.length === 0) return;
	const clientOptions = client.getOptions();
	const envelope = createMetricEnvelope(metricBuffer, clientOptions._metadata, clientOptions.tunnel, client.getDsn());
	_getBufferMap().set(client, []);
	client.emit("flushMetrics");
	client.sendEnvelope(envelope);
}
function _INTERNAL_getMetricBuffer(client) {
	return _getBufferMap().get(client);
}
function _getBufferMap() {
	return getGlobalSingleton("clientToMetricBufferMap", () => /* @__PURE__ */ new WeakMap());
}
var SENTRY_BUFFER_FULL_ERROR = Symbol.for("SentryBufferFullError");
function makePromiseBuffer(limit = 100) {
	const buffer = /* @__PURE__ */ new Set();
	function isReady() {
		return buffer.size < limit;
	}
	function remove(task) {
		buffer.delete(task);
	}
	function add(taskProducer) {
		if (!isReady()) return rejectedSyncPromise(SENTRY_BUFFER_FULL_ERROR);
		const task = taskProducer();
		buffer.add(task);
		task.then(() => remove(task), () => remove(task));
		return task;
	}
	function drain(timeout) {
		if (!buffer.size) return resolvedSyncPromise(true);
		const drainPromise = Promise.allSettled(Array.from(buffer)).then(() => true);
		if (!timeout) return drainPromise;
		const promises = [drainPromise, new Promise((resolve$1) => setTimeout(() => resolve$1(false), timeout))];
		return Promise.race(promises);
	}
	return {
		get $() {
			return Array.from(buffer);
		},
		add,
		drain
	};
}
var DEFAULT_RETRY_AFTER = 60 * 1e3;
function parseRetryAfterHeader(header$12, now = safeDateNow()) {
	const headerDelay = parseInt(`${header$12}`, 10);
	if (!isNaN(headerDelay)) return headerDelay * 1e3;
	const headerDate = Date.parse(`${header$12}`);
	if (!isNaN(headerDate)) return headerDate - now;
	return DEFAULT_RETRY_AFTER;
}
function disabledUntil(limits, dataCategory) {
	return limits[dataCategory] || limits.all || 0;
}
function isRateLimited(limits, dataCategory, now = safeDateNow()) {
	return disabledUntil(limits, dataCategory) > now;
}
function updateRateLimits(limits, { statusCode, headers }, now = safeDateNow()) {
	const updatedRateLimits = { ...limits };
	const rateLimitHeader = headers?.["x-sentry-rate-limits"];
	const retryAfterHeader = headers?.["retry-after"];
	if (rateLimitHeader) for (const limit of rateLimitHeader.trim().split(",")) {
		const [retryAfter, categories, , , namespaces] = limit.split(":", 5);
		const headerDelay = parseInt(retryAfter, 10);
		const delay = (!isNaN(headerDelay) ? headerDelay : 60) * 1e3;
		if (!categories) updatedRateLimits.all = now + delay;
		else for (const category of categories.split(";")) if (category === "metric_bucket") {
			if (!namespaces || namespaces.split(";").includes("custom")) updatedRateLimits[category] = now + delay;
		} else updatedRateLimits[category] = now + delay;
	}
	else if (retryAfterHeader) updatedRateLimits.all = now + parseRetryAfterHeader(retryAfterHeader, now);
	else if (statusCode === 429) updatedRateLimits.all = now + 60 * 1e3;
	return updatedRateLimits;
}
function createTransport(options$1, makeRequest, buffer = makePromiseBuffer(options$1.bufferSize || 64)) {
	let rateLimits = {};
	const flush = (timeout) => buffer.drain(timeout);
	function send(envelope) {
		const filteredEnvelopeItems = [];
		forEachEnvelopeItem(envelope, (item$2, type) => {
			const dataCategory = envelopeItemTypeToDataCategory(type);
			if (isRateLimited(rateLimits, dataCategory)) options$1.recordDroppedEvent("ratelimit_backoff", dataCategory);
			else filteredEnvelopeItems.push(item$2);
		});
		if (filteredEnvelopeItems.length === 0) return Promise.resolve({});
		const filteredEnvelope = createEnvelope(envelope[0], filteredEnvelopeItems);
		const recordEnvelopeLoss = (reason) => {
			if (envelopeContainsItemType(filteredEnvelope, ["client_report"])) {
				DEBUG_BUILD$3 && debug.warn(`Dropping client report. Will not send outcomes (reason: ${reason}).`);
				return;
			}
			forEachEnvelopeItem(filteredEnvelope, (item$2, type) => {
				options$1.recordDroppedEvent(reason, envelopeItemTypeToDataCategory(type));
			});
		};
		const requestTask = () => makeRequest({ body: serializeEnvelope(filteredEnvelope) }).then((response) => {
			if (response.statusCode !== void 0 && (response.statusCode < 200 || response.statusCode >= 300)) DEBUG_BUILD$3 && debug.warn(`Sentry responded with status code ${response.statusCode} to sent event.`);
			rateLimits = updateRateLimits(rateLimits, response);
			return response;
		}, (error$2) => {
			recordEnvelopeLoss("network_error");
			DEBUG_BUILD$3 && debug.error("Encountered error running transport request:", error$2);
			throw error$2;
		});
		return buffer.add(requestTask).then((result) => result, (error$2) => {
			if (error$2 === SENTRY_BUFFER_FULL_ERROR) {
				DEBUG_BUILD$3 && debug.error("Skipped sending event because buffer is full.");
				recordEnvelopeLoss("queue_overflow");
				return Promise.resolve({});
			} else throw error$2;
		});
	}
	return {
		send,
		flush
	};
}
function createClientReportEnvelope(discarded_events, dsn, timestamp) {
	const clientReportItem = [{ type: "client_report" }, {
		timestamp: timestamp || dateTimestampInSeconds(),
		discarded_events
	}];
	return createEnvelope(dsn ? { dsn } : {}, [clientReportItem]);
}
function getPossibleEventMessages(event) {
	const possibleMessages = [];
	if (event.message) possibleMessages.push(event.message);
	try {
		const lastException = event.exception.values[event.exception.values.length - 1];
		if (lastException?.value) {
			possibleMessages.push(lastException.value);
			if (lastException.type) possibleMessages.push(`${lastException.type}: ${lastException.value}`);
		}
	} catch {}
	return possibleMessages;
}
function convertTransactionEventToSpanJson(event) {
	const { trace_id, parent_span_id, span_id, status, origin, data, op } = event.contexts?.trace ?? {};
	return {
		data: data ?? {},
		description: event.transaction,
		op,
		parent_span_id,
		span_id: span_id ?? "",
		start_timestamp: event.start_timestamp ?? 0,
		status,
		timestamp: event.timestamp,
		trace_id: trace_id ?? "",
		origin,
		profile_id: data?.[SEMANTIC_ATTRIBUTE_PROFILE_ID],
		exclusive_time: data?.[SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],
		measurements: event.measurements,
		is_segment: true
	};
}
function convertSpanJsonToTransactionEvent(span) {
	return {
		type: "transaction",
		timestamp: span.timestamp,
		start_timestamp: span.start_timestamp,
		transaction: span.description,
		contexts: { trace: {
			trace_id: span.trace_id,
			span_id: span.span_id,
			parent_span_id: span.parent_span_id,
			op: span.op,
			status: span.status,
			origin: span.origin,
			data: {
				...span.data,
				...span.profile_id && { ["sentry.profile_id"]: span.profile_id },
				...span.exclusive_time && { ["sentry.exclusive_time"]: span.exclusive_time }
			}
		} },
		measurements: span.measurements
	};
}
var ALREADY_SEEN_ERROR = "Not capturing exception because it's already been captured.";
var MISSING_RELEASE_FOR_SESSION_ERROR = "Discarded session because of missing or non-string release";
var INTERNAL_ERROR_SYMBOL = Symbol.for("SentryInternalError");
var DO_NOT_SEND_EVENT_SYMBOL = Symbol.for("SentryDoNotSendEventError");
var DEFAULT_FLUSH_INTERVAL = 5e3;
function _makeInternalError(message$2) {
	return {
		message: message$2,
		[INTERNAL_ERROR_SYMBOL]: true
	};
}
function _makeDoNotSendEventError(message$2) {
	return {
		message: message$2,
		[DO_NOT_SEND_EVENT_SYMBOL]: true
	};
}
function _isInternalError(error$2) {
	return !!error$2 && typeof error$2 === "object" && INTERNAL_ERROR_SYMBOL in error$2;
}
function _isDoNotSendEventError(error$2) {
	return !!error$2 && typeof error$2 === "object" && DO_NOT_SEND_EVENT_SYMBOL in error$2;
}
function setupWeightBasedFlushing(client, afterCaptureHook, flushHook, estimateSizeFn, flushFn) {
	let weight = 0;
	let flushTimeout;
	let isTimerActive = false;
	client.on(flushHook, () => {
		weight = 0;
		clearTimeout(flushTimeout);
		isTimerActive = false;
	});
	client.on(afterCaptureHook, (item$2) => {
		weight += estimateSizeFn(item$2);
		if (weight >= 8e5) flushFn(client);
		else if (!isTimerActive) {
			isTimerActive = true;
			flushTimeout = setTimeout(() => {
				flushFn(client);
			}, DEFAULT_FLUSH_INTERVAL);
		}
	});
	client.on("flush", () => {
		flushFn(client);
	});
}
var Client = class {
	constructor(options$1) {
		this._options = options$1;
		this._integrations = {};
		this._numProcessing = 0;
		this._outcomes = {};
		this._hooks = {};
		this._eventProcessors = [];
		this._promiseBuffer = makePromiseBuffer(options$1.transportOptions?.bufferSize ?? 64);
		if (options$1.dsn) this._dsn = makeDsn(options$1.dsn);
		else DEBUG_BUILD$3 && debug.warn("No DSN provided, client will not send events.");
		if (this._dsn) {
			const url = getEnvelopeEndpointWithUrlEncodedAuth(this._dsn, options$1.tunnel, options$1._metadata ? options$1._metadata.sdk : void 0);
			this._transport = options$1.transport({
				tunnel: this._options.tunnel,
				recordDroppedEvent: this.recordDroppedEvent.bind(this),
				...options$1.transportOptions,
				url
			});
		}
		this._options.enableLogs = this._options.enableLogs ?? this._options._experiments?.enableLogs;
		if (this._options.enableLogs) setupWeightBasedFlushing(this, "afterCaptureLog", "flushLogs", estimateLogSizeInBytes, _INTERNAL_flushLogsBuffer);
		if (this._options.enableMetrics ?? this._options._experiments?.enableMetrics ?? true) setupWeightBasedFlushing(this, "afterCaptureMetric", "flushMetrics", estimateMetricSizeInBytes, _INTERNAL_flushMetricsBuffer);
	}
	captureException(exception, hint$1, scope) {
		const eventId = uuid4();
		if (checkOrSetAlreadyCaught(exception)) {
			DEBUG_BUILD$3 && debug.log(ALREADY_SEEN_ERROR);
			return eventId;
		}
		const hintWithEventId = {
			event_id: eventId,
			...hint$1
		};
		this._process(() => this.eventFromException(exception, hintWithEventId).then((event) => this._captureEvent(event, hintWithEventId, scope)).then((res) => res), "error");
		return hintWithEventId.event_id;
	}
	captureMessage(message$2, level, hint$1, currentScope) {
		const hintWithEventId = {
			event_id: uuid4(),
			...hint$1
		};
		const eventMessage = isParameterizedString(message$2) ? message$2 : String(message$2);
		const isMessage = isPrimitive(message$2);
		const promisedEvent = isMessage ? this.eventFromMessage(eventMessage, level, hintWithEventId) : this.eventFromException(message$2, hintWithEventId);
		this._process(() => promisedEvent.then((event) => this._captureEvent(event, hintWithEventId, currentScope)), isMessage ? "unknown" : "error");
		return hintWithEventId.event_id;
	}
	captureEvent(event, hint$1, currentScope) {
		const eventId = uuid4();
		if (hint$1?.originalException && checkOrSetAlreadyCaught(hint$1.originalException)) {
			DEBUG_BUILD$3 && debug.log(ALREADY_SEEN_ERROR);
			return eventId;
		}
		const hintWithEventId = {
			event_id: eventId,
			...hint$1
		};
		const sdkProcessingMetadata = event.sdkProcessingMetadata || {};
		const capturedSpanScope = sdkProcessingMetadata.capturedSpanScope;
		const capturedSpanIsolationScope = sdkProcessingMetadata.capturedSpanIsolationScope;
		const dataCategory = getDataCategoryByType(event.type);
		this._process(() => this._captureEvent(event, hintWithEventId, capturedSpanScope || currentScope, capturedSpanIsolationScope), dataCategory);
		return hintWithEventId.event_id;
	}
	captureSession(session) {
		this.sendSession(session);
		updateSession(session, { init: false });
	}
	getDsn() {
		return this._dsn;
	}
	getOptions() {
		return this._options;
	}
	getSdkMetadata() {
		return this._options._metadata;
	}
	getTransport() {
		return this._transport;
	}
	async flush(timeout) {
		const transport = this._transport;
		if (!transport) return true;
		this.emit("flush");
		const clientFinished = await this._isClientDoneProcessing(timeout);
		const transportFlushed = await transport.flush(timeout);
		return clientFinished && transportFlushed;
	}
	async close(timeout) {
		const result = await this.flush(timeout);
		this.getOptions().enabled = false;
		this.emit("close");
		return result;
	}
	getEventProcessors() {
		return this._eventProcessors;
	}
	addEventProcessor(eventProcessor) {
		this._eventProcessors.push(eventProcessor);
	}
	init() {
		if (this._isEnabled() || this._options.integrations.some(({ name: name$3 }) => name$3.startsWith("Spotlight"))) this._setupIntegrations();
	}
	getIntegrationByName(integrationName) {
		return this._integrations[integrationName];
	}
	addIntegration(integration) {
		const isAlreadyInstalled = this._integrations[integration.name];
		setupIntegration(this, integration, this._integrations);
		if (!isAlreadyInstalled) afterSetupIntegrations(this, [integration]);
	}
	sendEvent(event, hint$1 = {}) {
		this.emit("beforeSendEvent", event, hint$1);
		let env = createEventEnvelope(event, this._dsn, this._options._metadata, this._options.tunnel);
		for (const attachment of hint$1.attachments || []) env = addItemToEnvelope(env, createAttachmentEnvelopeItem(attachment));
		this.sendEnvelope(env).then((sendResponse) => this.emit("afterSendEvent", event, sendResponse));
	}
	sendSession(session) {
		const { release: clientReleaseOption, environment: clientEnvironmentOption = DEFAULT_ENVIRONMENT } = this._options;
		if ("aggregates" in session) {
			const sessionAttrs = session.attrs || {};
			if (!sessionAttrs.release && !clientReleaseOption) {
				DEBUG_BUILD$3 && debug.warn(MISSING_RELEASE_FOR_SESSION_ERROR);
				return;
			}
			sessionAttrs.release = sessionAttrs.release || clientReleaseOption;
			sessionAttrs.environment = sessionAttrs.environment || clientEnvironmentOption;
			session.attrs = sessionAttrs;
		} else {
			if (!session.release && !clientReleaseOption) {
				DEBUG_BUILD$3 && debug.warn(MISSING_RELEASE_FOR_SESSION_ERROR);
				return;
			}
			session.release = session.release || clientReleaseOption;
			session.environment = session.environment || clientEnvironmentOption;
		}
		this.emit("beforeSendSession", session);
		const env = createSessionEnvelope(session, this._dsn, this._options._metadata, this._options.tunnel);
		this.sendEnvelope(env);
	}
	recordDroppedEvent(reason, category, count = 1) {
		if (this._options.sendClientReports) {
			const key = `${reason}:${category}`;
			DEBUG_BUILD$3 && debug.log(`Recording outcome: "${key}"${count > 1 ? ` (${count} times)` : ""}`);
			this._outcomes[key] = (this._outcomes[key] || 0) + count;
		}
	}
	on(hook, callback) {
		const hookCallbacks = this._hooks[hook] = this._hooks[hook] || /* @__PURE__ */ new Set();
		const uniqueCallback = (...args) => callback(...args);
		hookCallbacks.add(uniqueCallback);
		return () => {
			hookCallbacks.delete(uniqueCallback);
		};
	}
	emit(hook, ...rest) {
		const callbacks = this._hooks[hook];
		if (callbacks) callbacks.forEach((callback) => callback(...rest));
	}
	async sendEnvelope(envelope) {
		this.emit("beforeEnvelope", envelope);
		if (this._isEnabled() && this._transport) try {
			return await this._transport.send(envelope);
		} catch (reason) {
			DEBUG_BUILD$3 && debug.error("Error while sending envelope:", reason);
			return {};
		}
		DEBUG_BUILD$3 && debug.error("Transport disabled");
		return {};
	}
	_setupIntegrations() {
		const { integrations } = this._options;
		this._integrations = setupIntegrations(this, integrations);
		afterSetupIntegrations(this, integrations);
	}
	_updateSessionFromEvent(session, event) {
		let crashed = event.level === "fatal";
		let errored = false;
		const exceptions = event.exception?.values;
		if (exceptions) {
			errored = true;
			crashed = false;
			for (const ex of exceptions) if (ex.mechanism?.handled === false) {
				crashed = true;
				break;
			}
		}
		const sessionNonTerminal = session.status === "ok";
		if (sessionNonTerminal && session.errors === 0 || sessionNonTerminal && crashed) {
			updateSession(session, {
				...crashed && { status: "crashed" },
				errors: session.errors || Number(errored || crashed)
			});
			this.captureSession(session);
		}
	}
	async _isClientDoneProcessing(timeout) {
		let ticked = 0;
		while (!timeout || ticked < timeout) {
			await new Promise((resolve$1) => setTimeout(resolve$1, 1));
			if (!this._numProcessing) return true;
			ticked++;
		}
		return false;
	}
	_isEnabled() {
		return this.getOptions().enabled !== false && this._transport !== void 0;
	}
	_prepareEvent(event, hint$1, currentScope, isolationScope) {
		const options$1 = this.getOptions();
		const integrations = Object.keys(this._integrations);
		if (!hint$1.integrations && integrations?.length) hint$1.integrations = integrations;
		this.emit("preprocessEvent", event, hint$1);
		if (!event.type) isolationScope.setLastEventId(event.event_id || hint$1.event_id);
		return prepareEvent(options$1, event, hint$1, currentScope, this, isolationScope).then((evt) => {
			if (evt === null) return evt;
			this.emit("postprocessEvent", evt, hint$1);
			evt.contexts = {
				trace: getTraceContextFromScope(currentScope),
				...evt.contexts
			};
			evt.sdkProcessingMetadata = {
				dynamicSamplingContext: getDynamicSamplingContextFromScope(this, currentScope),
				...evt.sdkProcessingMetadata
			};
			return evt;
		});
	}
	_captureEvent(event, hint$1 = {}, currentScope = getCurrentScope(), isolationScope = getIsolationScope()) {
		if (DEBUG_BUILD$3 && isErrorEvent$1(event)) debug.log(`Captured error event \`${getPossibleEventMessages(event)[0] || "<unknown>"}\``);
		return this._processEvent(event, hint$1, currentScope, isolationScope).then((finalEvent) => {
			return finalEvent.event_id;
		}, (reason) => {
			if (DEBUG_BUILD$3) if (_isDoNotSendEventError(reason)) debug.log(reason.message);
			else if (_isInternalError(reason)) debug.warn(reason.message);
			else debug.warn(reason);
		});
	}
	_processEvent(event, hint$1, currentScope, isolationScope) {
		const options$1 = this.getOptions();
		const { sampleRate } = options$1;
		const isTransaction = isTransactionEvent(event);
		const isError$1 = isErrorEvent$1(event);
		const beforeSendLabel = `before send for type \`${event.type || "error"}\``;
		const parsedSampleRate = typeof sampleRate === "undefined" ? void 0 : parseSampleRate(sampleRate);
		if (isError$1 && typeof parsedSampleRate === "number" && safeMathRandom() > parsedSampleRate) {
			this.recordDroppedEvent("sample_rate", "error");
			return rejectedSyncPromise(_makeDoNotSendEventError(`Discarding event because it's not included in the random sample (sampling rate = ${sampleRate})`));
		}
		const dataCategory = getDataCategoryByType(event.type);
		return this._prepareEvent(event, hint$1, currentScope, isolationScope).then((prepared) => {
			if (prepared === null) {
				this.recordDroppedEvent("event_processor", dataCategory);
				throw _makeDoNotSendEventError("An event processor returned `null`, will not send event.");
			}
			if (hint$1.data && hint$1.data.__sentry__ === true) return prepared;
			return _validateBeforeSendResult(processBeforeSend(this, options$1, prepared, hint$1), beforeSendLabel);
		}).then((processedEvent) => {
			if (processedEvent === null) {
				this.recordDroppedEvent("before_send", dataCategory);
				if (isTransaction) {
					const spanCount = 1 + (event.spans || []).length;
					this.recordDroppedEvent("before_send", "span", spanCount);
				}
				throw _makeDoNotSendEventError(`${beforeSendLabel} returned \`null\`, will not send event.`);
			}
			const session = currentScope.getSession() || isolationScope.getSession();
			if (isError$1 && session) this._updateSessionFromEvent(session, processedEvent);
			if (isTransaction) {
				const droppedSpanCount = (processedEvent.sdkProcessingMetadata?.spanCountBeforeProcessing || 0) - (processedEvent.spans ? processedEvent.spans.length : 0);
				if (droppedSpanCount > 0) this.recordDroppedEvent("before_send", "span", droppedSpanCount);
			}
			const transactionInfo = processedEvent.transaction_info;
			if (isTransaction && transactionInfo && processedEvent.transaction !== event.transaction) {
				const source = "custom";
				processedEvent.transaction_info = {
					...transactionInfo,
					source
				};
			}
			this.sendEvent(processedEvent, hint$1);
			return processedEvent;
		}).then(null, (reason) => {
			if (_isDoNotSendEventError(reason) || _isInternalError(reason)) throw reason;
			this.captureException(reason, {
				mechanism: {
					handled: false,
					type: "internal"
				},
				data: { __sentry__: true },
				originalException: reason
			});
			throw _makeInternalError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${reason}`);
		});
	}
	_process(taskProducer, dataCategory) {
		this._numProcessing++;
		this._promiseBuffer.add(taskProducer).then((value) => {
			this._numProcessing--;
			return value;
		}, (reason) => {
			this._numProcessing--;
			if (reason === SENTRY_BUFFER_FULL_ERROR) this.recordDroppedEvent("queue_overflow", dataCategory);
			return reason;
		});
	}
	_clearOutcomes() {
		const outcomes = this._outcomes;
		this._outcomes = {};
		return Object.entries(outcomes).map(([key, quantity]) => {
			const [reason, category] = key.split(":");
			return {
				reason,
				category,
				quantity
			};
		});
	}
	_flushOutcomes() {
		DEBUG_BUILD$3 && debug.log("Flushing outcomes...");
		const outcomes = this._clearOutcomes();
		if (outcomes.length === 0) {
			DEBUG_BUILD$3 && debug.log("No outcomes to send");
			return;
		}
		if (!this._dsn) {
			DEBUG_BUILD$3 && debug.log("No dsn provided, will not send outcomes");
			return;
		}
		DEBUG_BUILD$3 && debug.log("Sending outcomes:", outcomes);
		const envelope = createClientReportEnvelope(outcomes, this._options.tunnel && dsnToString(this._dsn));
		this.sendEnvelope(envelope);
	}
};
function getDataCategoryByType(type) {
	return type === "replay_event" ? "replay" : type || "error";
}
function _validateBeforeSendResult(beforeSendResult, beforeSendLabel) {
	const invalidValueError = `${beforeSendLabel} must return \`null\` or a valid event.`;
	if (isThenable(beforeSendResult)) return beforeSendResult.then((event) => {
		if (!isPlainObject(event) && event !== null) throw _makeInternalError(invalidValueError);
		return event;
	}, (e) => {
		throw _makeInternalError(`${beforeSendLabel} rejected with ${e}`);
	});
	else if (!isPlainObject(beforeSendResult) && beforeSendResult !== null) throw _makeInternalError(invalidValueError);
	return beforeSendResult;
}
function processBeforeSend(client, options$1, event, hint$1) {
	const { beforeSend: beforeSend$1, beforeSendTransaction, beforeSendSpan, ignoreSpans } = options$1;
	let processedEvent = event;
	if (isErrorEvent$1(processedEvent) && beforeSend$1) return beforeSend$1(processedEvent, hint$1);
	if (isTransactionEvent(processedEvent)) {
		if (beforeSendSpan || ignoreSpans) {
			const rootSpanJson = convertTransactionEventToSpanJson(processedEvent);
			if (ignoreSpans?.length && shouldIgnoreSpan(rootSpanJson, ignoreSpans)) return null;
			if (beforeSendSpan) {
				const processedRootSpanJson = beforeSendSpan(rootSpanJson);
				if (!processedRootSpanJson) showSpanDropWarning();
				else processedEvent = merge(event, convertSpanJsonToTransactionEvent(processedRootSpanJson));
			}
			if (processedEvent.spans) {
				const processedSpans = [];
				const initialSpans = processedEvent.spans;
				for (const span of initialSpans) {
					if (ignoreSpans?.length && shouldIgnoreSpan(span, ignoreSpans)) {
						reparentChildSpans(initialSpans, span);
						continue;
					}
					if (beforeSendSpan) {
						const processedSpan = beforeSendSpan(span);
						if (!processedSpan) {
							showSpanDropWarning();
							processedSpans.push(span);
						} else processedSpans.push(processedSpan);
					} else processedSpans.push(span);
				}
				const droppedSpans = processedEvent.spans.length - processedSpans.length;
				if (droppedSpans) client.recordDroppedEvent("before_send", "span", droppedSpans);
				processedEvent.spans = processedSpans;
			}
		}
		if (beforeSendTransaction) {
			if (processedEvent.spans) {
				const spanCountBefore = processedEvent.spans.length;
				processedEvent.sdkProcessingMetadata = {
					...event.sdkProcessingMetadata,
					spanCountBeforeProcessing: spanCountBefore
				};
			}
			return beforeSendTransaction(processedEvent, hint$1);
		}
	}
	return processedEvent;
}
function isErrorEvent$1(event) {
	return event.type === void 0;
}
function isTransactionEvent(event) {
	return event.type === "transaction";
}
function estimateMetricSizeInBytes(metric) {
	let weight = 0;
	if (metric.name) weight += metric.name.length * 2;
	weight += 8;
	return weight + estimateAttributesSizeInBytes(metric.attributes);
}
function estimateLogSizeInBytes(log) {
	let weight = 0;
	if (log.message) weight += log.message.length * 2;
	return weight + estimateAttributesSizeInBytes(log.attributes);
}
function estimateAttributesSizeInBytes(attributes) {
	if (!attributes) return 0;
	let weight = 0;
	Object.values(attributes).forEach((value) => {
		if (Array.isArray(value)) weight += value.length * estimatePrimitiveSizeInBytes(value[0]);
		else if (isPrimitive(value)) weight += estimatePrimitiveSizeInBytes(value);
		else weight += 100;
	});
	return weight;
}
function estimatePrimitiveSizeInBytes(value) {
	if (typeof value === "string") return value.length * 2;
	else if (typeof value === "number") return 8;
	else if (typeof value === "boolean") return 4;
	return 0;
}
function hasSentryFetchUrlHost(error$2) {
	return isError(error$2) && "__sentry_fetch_url_host__" in error$2 && typeof error$2.__sentry_fetch_url_host__ === "string";
}
function _enhanceErrorWithSentryInfo(error$2) {
	if (hasSentryFetchUrlHost(error$2)) return `${error$2.message} (${error$2.__sentry_fetch_url_host__})`;
	return error$2.message;
}
function initAndBind(clientClass, options$1) {
	if (options$1.debug === true) if (DEBUG_BUILD$3) debug.enable();
	else consoleSandbox(() => {
		console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.");
	});
	getCurrentScope().update(options$1.initialScope);
	const client = new clientClass(options$1);
	setCurrentClient(client);
	client.init();
	return client;
}
function setCurrentClient(client) {
	getCurrentScope().setClient(client);
}
function parseUrl(url) {
	if (!url) return {};
	const match = url.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);
	if (!match) return {};
	const query = match[6] || "";
	const fragment = match[8] || "";
	return {
		host: match[4],
		path: match[5],
		protocol: match[2],
		search: query,
		hash: fragment,
		relative: match[5] + query + fragment
	};
}
function stripDataUrlContent(url, includeDataPrefix = true) {
	if (url.startsWith("data:")) {
		const match = url.match(/^data:([^;,]+)/);
		const mimeType = match ? match[1] : "text/plain";
		const isBase64 = url.includes(";base64,");
		const dataStart = url.indexOf(",");
		let dataPrefix = "";
		if (includeDataPrefix && dataStart !== -1) {
			const data = url.slice(dataStart + 1);
			dataPrefix = data.length > 10 ? `${data.slice(0, 10)}... [truncated]` : data;
		}
		return `data:${mimeType}${isBase64 ? ",base64" : ""}${dataPrefix ? `,${dataPrefix}` : ""}`;
	}
	return url;
}
function addAutoIpAddressToSession(session) {
	if ("aggregates" in session) {
		if (session.attrs?.["ip_address"] === void 0) session.attrs = {
			...session.attrs,
			ip_address: "{{auto}}"
		};
	} else if (session.ipAddress === void 0) session.ipAddress = "{{auto}}";
}
function applySdkMetadata(options$1, name$3, names = [name$3], source = "npm") {
	const metadata = options$1._metadata || {};
	if (!metadata.sdk) metadata.sdk = {
		name: `sentry.javascript.${name$3}`,
		packages: names.map((name$4) => ({
			name: `${source}:@sentry/${name$4}`,
			version: SDK_VERSION
		})),
		version: SDK_VERSION
	};
	options$1._metadata = metadata;
}
var DEFAULT_BREADCRUMBS = 100;
function addBreadcrumb(breadcrumb, hint$1) {
	const client = getClient();
	const isolationScope = getIsolationScope();
	if (!client) return;
	const { beforeBreadcrumb = null, maxBreadcrumbs = DEFAULT_BREADCRUMBS } = client.getOptions();
	if (maxBreadcrumbs <= 0) return;
	const mergedBreadcrumb = {
		timestamp: dateTimestampInSeconds(),
		...breadcrumb
	};
	const finalBreadcrumb = beforeBreadcrumb ? consoleSandbox(() => beforeBreadcrumb(mergedBreadcrumb, hint$1)) : mergedBreadcrumb;
	if (finalBreadcrumb === null) return;
	if (client.emit) client.emit("beforeAddBreadcrumb", finalBreadcrumb, hint$1);
	isolationScope.addBreadcrumb(finalBreadcrumb, maxBreadcrumbs);
}
var originalFunctionToString;
var INTEGRATION_NAME$9 = "FunctionToString";
var SETUP_CLIENTS = /* @__PURE__ */ new WeakMap();
var _functionToStringIntegration = (() => {
	return {
		name: INTEGRATION_NAME$9,
		setupOnce() {
			originalFunctionToString = Function.prototype.toString;
			try {
				Function.prototype.toString = function(...args) {
					const originalFunction = getOriginalFunction(this);
					const context = SETUP_CLIENTS.has(getClient()) && originalFunction !== void 0 ? originalFunction : this;
					return originalFunctionToString.apply(context, args);
				};
			} catch {}
		},
		setup(client) {
			SETUP_CLIENTS.set(client, true);
		}
	};
});
var functionToStringIntegration = defineIntegration(_functionToStringIntegration);
var DEFAULT_IGNORE_ERRORS = [
	/^Script error\.?$/,
	/^Javascript error: Script error\.? on line 0$/,
	/^ResizeObserver loop completed with undelivered notifications.$/,
	/^Cannot redefine property: googletag$/,
	/^Can't find variable: gmo$/,
	/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,
	"can't redefine non-configurable property \"solana\"",
	"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)",
	"Can't find variable: _AutofillCallbackHandler",
	/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,
	/^Java exception was raised during method invocation$/
];
var INTEGRATION_NAME$8 = "EventFilters";
var eventFiltersIntegration = defineIntegration((options$1 = {}) => {
	let mergedOptions;
	return {
		name: INTEGRATION_NAME$8,
		setup(client) {
			mergedOptions = _mergeOptions(options$1, client.getOptions());
		},
		processEvent(event, _hint, client) {
			if (!mergedOptions) mergedOptions = _mergeOptions(options$1, client.getOptions());
			return _shouldDropEvent$1(event, mergedOptions) ? null : event;
		}
	};
});
var inboundFiltersIntegration = defineIntegration(((options$1 = {}) => {
	return {
		...eventFiltersIntegration(options$1),
		name: "InboundFilters"
	};
}));
function _mergeOptions(internalOptions = {}, clientOptions = {}) {
	return {
		allowUrls: [...internalOptions.allowUrls || [], ...clientOptions.allowUrls || []],
		denyUrls: [...internalOptions.denyUrls || [], ...clientOptions.denyUrls || []],
		ignoreErrors: [
			...internalOptions.ignoreErrors || [],
			...clientOptions.ignoreErrors || [],
			...internalOptions.disableErrorDefaults ? [] : DEFAULT_IGNORE_ERRORS
		],
		ignoreTransactions: [...internalOptions.ignoreTransactions || [], ...clientOptions.ignoreTransactions || []]
	};
}
function _shouldDropEvent$1(event, options$1) {
	if (!event.type) {
		if (_isIgnoredError(event, options$1.ignoreErrors)) {
			DEBUG_BUILD$3 && debug.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${getEventDescription(event)}`);
			return true;
		}
		if (_isUselessError(event)) {
			DEBUG_BUILD$3 && debug.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${getEventDescription(event)}`);
			return true;
		}
		if (_isDeniedUrl(event, options$1.denyUrls)) {
			DEBUG_BUILD$3 && debug.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${getEventDescription(event)}.\nUrl: ${_getEventFilterUrl(event)}`);
			return true;
		}
		if (!_isAllowedUrl(event, options$1.allowUrls)) {
			DEBUG_BUILD$3 && debug.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${getEventDescription(event)}.\nUrl: ${_getEventFilterUrl(event)}`);
			return true;
		}
	} else if (event.type === "transaction") {
		if (_isIgnoredTransaction(event, options$1.ignoreTransactions)) {
			DEBUG_BUILD$3 && debug.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${getEventDescription(event)}`);
			return true;
		}
	}
	return false;
}
function _isIgnoredError(event, ignoreErrors) {
	if (!ignoreErrors?.length) return false;
	return getPossibleEventMessages(event).some((message$2) => stringMatchesSomePattern(message$2, ignoreErrors));
}
function _isIgnoredTransaction(event, ignoreTransactions) {
	if (!ignoreTransactions?.length) return false;
	const name$3 = event.transaction;
	return name$3 ? stringMatchesSomePattern(name$3, ignoreTransactions) : false;
}
function _isDeniedUrl(event, denyUrls) {
	if (!denyUrls?.length) return false;
	const url = _getEventFilterUrl(event);
	return !url ? false : stringMatchesSomePattern(url, denyUrls);
}
function _isAllowedUrl(event, allowUrls) {
	if (!allowUrls?.length) return true;
	const url = _getEventFilterUrl(event);
	return !url ? true : stringMatchesSomePattern(url, allowUrls);
}
function _getLastValidUrl(frames = []) {
	for (let i$1 = frames.length - 1; i$1 >= 0; i$1--) {
		const frame = frames[i$1];
		if (frame && frame.filename !== "<anonymous>" && frame.filename !== "[native code]") return frame.filename || null;
	}
	return null;
}
function _getEventFilterUrl(event) {
	try {
		const frames = [...event.exception?.values ?? []].reverse().find((value) => value.mechanism?.parent_id === void 0 && value.stacktrace?.frames?.length)?.stacktrace?.frames;
		return frames ? _getLastValidUrl(frames) : null;
	} catch {
		DEBUG_BUILD$3 && debug.error(`Cannot extract url for event ${getEventDescription(event)}`);
		return null;
	}
}
function _isUselessError(event) {
	if (!event.exception?.values?.length) return false;
	return !event.message && !event.exception.values.some((value) => value.stacktrace || value.type && value.type !== "Error" || value.value);
}
function applyAggregateErrorsToEvent(exceptionFromErrorImplementation, parser, key, limit, event, hint$1) {
	if (!event.exception?.values || !hint$1 || !isInstanceOf(hint$1.originalException, Error)) return;
	const originalException = event.exception.values.length > 0 ? event.exception.values[event.exception.values.length - 1] : void 0;
	if (originalException) event.exception.values = aggregateExceptionsFromError(exceptionFromErrorImplementation, parser, limit, hint$1.originalException, key, event.exception.values, originalException, 0);
}
function aggregateExceptionsFromError(exceptionFromErrorImplementation, parser, limit, error$2, key, prevExceptions, exception, exceptionId) {
	if (prevExceptions.length >= limit + 1) return prevExceptions;
	let newExceptions = [...prevExceptions];
	if (isInstanceOf(error$2[key], Error)) {
		applyExceptionGroupFieldsForParentException(exception, exceptionId);
		const newException = exceptionFromErrorImplementation(parser, error$2[key]);
		const newExceptionId = newExceptions.length;
		applyExceptionGroupFieldsForChildException(newException, key, newExceptionId, exceptionId);
		newExceptions = aggregateExceptionsFromError(exceptionFromErrorImplementation, parser, limit, error$2[key], key, [newException, ...newExceptions], newException, newExceptionId);
	}
	if (Array.isArray(error$2.errors)) error$2.errors.forEach((childError, i$1) => {
		if (isInstanceOf(childError, Error)) {
			applyExceptionGroupFieldsForParentException(exception, exceptionId);
			const newException = exceptionFromErrorImplementation(parser, childError);
			const newExceptionId = newExceptions.length;
			applyExceptionGroupFieldsForChildException(newException, `errors[${i$1}]`, newExceptionId, exceptionId);
			newExceptions = aggregateExceptionsFromError(exceptionFromErrorImplementation, parser, limit, childError, key, [newException, ...newExceptions], newException, newExceptionId);
		}
	});
	return newExceptions;
}
function applyExceptionGroupFieldsForParentException(exception, exceptionId) {
	exception.mechanism = {
		handled: true,
		type: "auto.core.linked_errors",
		...exception.mechanism,
		...exception.type === "AggregateError" && { is_exception_group: true },
		exception_id: exceptionId
	};
}
function applyExceptionGroupFieldsForChildException(exception, source, exceptionId, parentId) {
	exception.mechanism = {
		handled: true,
		...exception.mechanism,
		type: "chained",
		source,
		exception_id: exceptionId,
		parent_id: parentId
	};
}
function addConsoleInstrumentationHandler(handler) {
	const type = "console";
	addHandler(type, handler);
	maybeInstrument(type, instrumentConsole);
}
function instrumentConsole() {
	if (!("console" in GLOBAL_OBJ)) return;
	CONSOLE_LEVELS.forEach(function(level) {
		if (!(level in GLOBAL_OBJ.console)) return;
		fill(GLOBAL_OBJ.console, level, function(originalConsoleMethod) {
			originalConsoleMethods[level] = originalConsoleMethod;
			return function(...args) {
				triggerHandlers("console", {
					args,
					level
				});
				originalConsoleMethods[level]?.apply(GLOBAL_OBJ.console, args);
			};
		});
	});
}
function severityLevelFromString(level) {
	return level === "warn" ? "warning" : [
		"fatal",
		"error",
		"warning",
		"log",
		"info",
		"debug"
	].includes(level) ? level : "log";
}
var INTEGRATION_NAME$7 = "CaptureConsole";
var _captureConsoleIntegration = ((options$1 = {}) => {
	const levels = options$1.levels || CONSOLE_LEVELS;
	const handled = options$1.handled ?? true;
	return {
		name: INTEGRATION_NAME$7,
		setup(client) {
			if (!("console" in GLOBAL_OBJ)) return;
			addConsoleInstrumentationHandler(({ args, level }) => {
				if (getClient() !== client || !levels.includes(level)) return;
				consoleHandler(args, level, handled);
			});
		}
	};
});
var captureConsoleIntegration = defineIntegration(_captureConsoleIntegration);
function consoleHandler(args, level, handled) {
	const severityLevel = severityLevelFromString(level);
	const syntheticException = /* @__PURE__ */ new Error();
	const captureContext = {
		level: severityLevelFromString(level),
		extra: { arguments: args }
	};
	withScope((scope) => {
		scope.addEventProcessor((event) => {
			event.logger = "console";
			addExceptionMechanism(event, {
				handled,
				type: "auto.core.capture_console"
			});
			return event;
		});
		if (level === "assert") {
			if (!args[0]) {
				const message$3 = `Assertion failed: ${safeJoin(args.slice(1), " ") || "console.assert"}`;
				scope.setExtra("arguments", args.slice(1));
				scope.captureMessage(message$3, severityLevel, {
					captureContext,
					syntheticException
				});
			}
			return;
		}
		const error$2 = args.find((arg) => arg instanceof Error);
		if (error$2) {
			captureException(error$2, captureContext);
			return;
		}
		const message$2 = safeJoin(args, " ");
		scope.captureMessage(message$2, severityLevel, {
			captureContext,
			syntheticException
		});
	});
}
var INTEGRATION_NAME$6 = "Dedupe";
var _dedupeIntegration = (() => {
	let previousEvent;
	return {
		name: INTEGRATION_NAME$6,
		processEvent(currentEvent) {
			if (currentEvent.type) return currentEvent;
			try {
				if (_shouldDropEvent(currentEvent, previousEvent)) {
					DEBUG_BUILD$3 && debug.warn("Event dropped due to being a duplicate of previously captured event.");
					return null;
				}
			} catch {}
			return previousEvent = currentEvent;
		}
	};
});
var dedupeIntegration = defineIntegration(_dedupeIntegration);
function _shouldDropEvent(currentEvent, previousEvent) {
	if (!previousEvent) return false;
	if (_isSameMessageEvent(currentEvent, previousEvent)) return true;
	if (_isSameExceptionEvent(currentEvent, previousEvent)) return true;
	return false;
}
function _isSameMessageEvent(currentEvent, previousEvent) {
	const currentMessage = currentEvent.message;
	const previousMessage = previousEvent.message;
	if (!currentMessage && !previousMessage) return false;
	if (currentMessage && !previousMessage || !currentMessage && previousMessage) return false;
	if (currentMessage !== previousMessage) return false;
	if (!_isSameFingerprint(currentEvent, previousEvent)) return false;
	if (!_isSameStacktrace(currentEvent, previousEvent)) return false;
	return true;
}
function _isSameExceptionEvent(currentEvent, previousEvent) {
	const previousException = _getExceptionFromEvent(previousEvent);
	const currentException = _getExceptionFromEvent(currentEvent);
	if (!previousException || !currentException) return false;
	if (previousException.type !== currentException.type || previousException.value !== currentException.value) return false;
	if (!_isSameFingerprint(currentEvent, previousEvent)) return false;
	if (!_isSameStacktrace(currentEvent, previousEvent)) return false;
	return true;
}
function _isSameStacktrace(currentEvent, previousEvent) {
	let currentFrames = getFramesFromEvent(currentEvent);
	let previousFrames = getFramesFromEvent(previousEvent);
	if (!currentFrames && !previousFrames) return true;
	if (currentFrames && !previousFrames || !currentFrames && previousFrames) return false;
	currentFrames = currentFrames;
	previousFrames = previousFrames;
	if (previousFrames.length !== currentFrames.length) return false;
	for (let i$1 = 0; i$1 < previousFrames.length; i$1++) {
		const frameA = previousFrames[i$1];
		const frameB = currentFrames[i$1];
		if (frameA.filename !== frameB.filename || frameA.lineno !== frameB.lineno || frameA.colno !== frameB.colno || frameA.function !== frameB.function) return false;
	}
	return true;
}
function _isSameFingerprint(currentEvent, previousEvent) {
	let currentFingerprint = currentEvent.fingerprint;
	let previousFingerprint = previousEvent.fingerprint;
	if (!currentFingerprint && !previousFingerprint) return true;
	if (currentFingerprint && !previousFingerprint || !currentFingerprint && previousFingerprint) return false;
	currentFingerprint = currentFingerprint;
	previousFingerprint = previousFingerprint;
	try {
		return !!(currentFingerprint.join("") === previousFingerprint.join(""));
	} catch {
		return false;
	}
}
function _getExceptionFromEvent(event) {
	return event.exception?.values?.[0];
}
function normalizeArray(parts, allowAboveRoot) {
	let up = 0;
	for (let i$1 = parts.length - 1; i$1 >= 0; i$1--) {
		const last = parts[i$1];
		if (last === ".") parts.splice(i$1, 1);
		else if (last === "..") {
			parts.splice(i$1, 1);
			up++;
		} else if (up) {
			parts.splice(i$1, 1);
			up--;
		}
	}
	if (allowAboveRoot) for (; up--;) parts.unshift("..");
	return parts;
}
var splitPathRe = /^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;
function splitPath(filename) {
	const truncated = filename.length > 1024 ? `<truncated>${filename.slice(-1024)}` : filename;
	const parts = splitPathRe.exec(truncated);
	return parts ? parts.slice(1) : [];
}
function resolve(...args) {
	let resolvedPath = "";
	let resolvedAbsolute = false;
	for (let i$1 = args.length - 1; i$1 >= -1 && !resolvedAbsolute; i$1--) {
		const path = i$1 >= 0 ? args[i$1] : "/";
		if (!path) continue;
		resolvedPath = `${path}/${resolvedPath}`;
		resolvedAbsolute = path.charAt(0) === "/";
	}
	resolvedPath = normalizeArray(resolvedPath.split("/").filter((p) => !!p), !resolvedAbsolute).join("/");
	return (resolvedAbsolute ? "/" : "") + resolvedPath || ".";
}
function trim(arr) {
	let start = 0;
	for (; start < arr.length; start++) if (arr[start] !== "") break;
	let end = arr.length - 1;
	for (; end >= 0; end--) if (arr[end] !== "") break;
	if (start > end) return [];
	return arr.slice(start, end - start + 1);
}
function relative(from, to) {
	from = resolve(from).slice(1);
	to = resolve(to).slice(1);
	const fromParts = trim(from.split("/"));
	const toParts = trim(to.split("/"));
	const length = Math.min(fromParts.length, toParts.length);
	let samePartsLength = length;
	for (let i$1 = 0; i$1 < length; i$1++) if (fromParts[i$1] !== toParts[i$1]) {
		samePartsLength = i$1;
		break;
	}
	let outputParts = [];
	for (let i$1 = samePartsLength; i$1 < fromParts.length; i$1++) outputParts.push("..");
	outputParts = outputParts.concat(toParts.slice(samePartsLength));
	return outputParts.join("/");
}
function basename(path, ext) {
	let f = splitPath(path)[2] || "";
	if (ext && f.slice(ext.length * -1) === ext) f = f.slice(0, f.length - ext.length);
	return f;
}
var INTEGRATION_NAME$5 = "RewriteFrames";
var rewriteFramesIntegration = defineIntegration((options$1 = {}) => {
	const root = options$1.root;
	const prefix = options$1.prefix || "app:///";
	const isBrowser = "window" in GLOBAL_OBJ && !!GLOBAL_OBJ.window;
	const iteratee = options$1.iteratee || generateIteratee({
		isBrowser,
		root,
		prefix
	});
	function _processExceptionsEvent(event) {
		try {
			return {
				...event,
				exception: {
					...event.exception,
					values: event.exception.values.map((value) => ({
						...value,
						...value.stacktrace && { stacktrace: _processStacktrace(value.stacktrace) }
					}))
				}
			};
		} catch {
			return event;
		}
	}
	function _processStacktrace(stacktrace) {
		return {
			...stacktrace,
			frames: stacktrace?.frames?.map((f) => iteratee(f))
		};
	}
	return {
		name: INTEGRATION_NAME$5,
		processEvent(originalEvent) {
			let processedEvent = originalEvent;
			if (originalEvent.exception && Array.isArray(originalEvent.exception.values)) processedEvent = _processExceptionsEvent(processedEvent);
			return processedEvent;
		}
	};
});
function generateIteratee({ isBrowser, root, prefix }) {
	return (frame) => {
		if (!frame.filename) return frame;
		const isWindowsFrame = /^[a-zA-Z]:\\/.test(frame.filename) || frame.filename.includes("\\") && !frame.filename.includes("/");
		const startsWithSlash = /^\//.test(frame.filename);
		if (isBrowser) {
			if (root) {
				const oldFilename = frame.filename;
				if (oldFilename.indexOf(root) === 0) frame.filename = oldFilename.replace(root, prefix);
			}
		} else if (isWindowsFrame || startsWithSlash) {
			const filename = isWindowsFrame ? frame.filename.replace(/^[a-zA-Z]:/, "").replace(/\\/g, "/") : frame.filename;
			frame.filename = `${prefix}${root ? relative(root, filename) : basename(filename)}`;
		}
		return frame;
	};
}
function getBreadcrumbLogLevelFromHttpStatusCode(statusCode) {
	if (statusCode === void 0) return;
	else if (statusCode >= 400 && statusCode < 500) return "warning";
	else if (statusCode >= 500) return "error";
	else return;
}
var WINDOW$2 = GLOBAL_OBJ;
function supportsHistory() {
	return "history" in WINDOW$2 && !!WINDOW$2.history;
}
function _isFetchSupported() {
	if (!("fetch" in WINDOW$2)) return false;
	try {
		new Headers();
		new Request("data:,");
		new Response();
		return true;
	} catch {
		return false;
	}
}
function isNativeFunction(func) {
	return func && /^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(func.toString());
}
function supportsNativeFetch() {
	if (typeof EdgeRuntime === "string") return true;
	if (!_isFetchSupported()) return false;
	if (isNativeFunction(WINDOW$2.fetch)) return true;
	let result = false;
	const doc = WINDOW$2.document;
	if (doc && typeof doc.createElement === "function") try {
		const sandbox = doc.createElement("iframe");
		sandbox.hidden = true;
		doc.head.appendChild(sandbox);
		if (sandbox.contentWindow?.fetch) result = isNativeFunction(sandbox.contentWindow.fetch);
		doc.head.removeChild(sandbox);
	} catch (err) {
		DEBUG_BUILD$3 && debug.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", err);
	}
	return result;
}
function addFetchInstrumentationHandler(handler, skipNativeFetchCheck) {
	const type = "fetch";
	addHandler(type, handler);
	maybeInstrument(type, () => instrumentFetch(void 0, skipNativeFetchCheck));
}
function instrumentFetch(onFetchResolved, skipNativeFetchCheck = false) {
	if (skipNativeFetchCheck && !supportsNativeFetch()) return;
	fill(GLOBAL_OBJ, "fetch", function(originalFetch) {
		return function(...args) {
			const virtualError = /* @__PURE__ */ new Error();
			const { method, url } = parseFetchArgs(args);
			const handlerData = {
				args,
				fetchData: {
					method,
					url
				},
				startTimestamp: timestampInSeconds() * 1e3,
				virtualError,
				headers: getHeadersFromFetchArgs(args)
			};
			if (!onFetchResolved) triggerHandlers("fetch", { ...handlerData });
			return originalFetch.apply(GLOBAL_OBJ, args).then(async (response) => {
				if (onFetchResolved) onFetchResolved(response);
				else triggerHandlers("fetch", {
					...handlerData,
					endTimestamp: timestampInSeconds() * 1e3,
					response
				});
				return response;
			}, (error$2) => {
				triggerHandlers("fetch", {
					...handlerData,
					endTimestamp: timestampInSeconds() * 1e3,
					error: error$2
				});
				if (isError(error$2) && error$2.stack === void 0) {
					error$2.stack = virtualError.stack;
					addNonEnumerableProperty(error$2, "framesToPop", 1);
				}
				const enhanceOption = getClient()?.getOptions().enhanceFetchErrorMessages ?? "always";
				if (enhanceOption !== false && error$2 instanceof TypeError && (error$2.message === "Failed to fetch" || error$2.message === "Load failed" || error$2.message === "NetworkError when attempting to fetch resource.")) try {
					const hostname = new URL(handlerData.fetchData.url).host;
					if (enhanceOption === "always") error$2.message = `${error$2.message} (${hostname})`;
					else addNonEnumerableProperty(error$2, "__sentry_fetch_url_host__", hostname);
				} catch {}
				throw error$2;
			});
		};
	});
}
function hasProp(obj, prop) {
	return !!obj && typeof obj === "object" && !!obj[prop];
}
function getUrlFromResource(resource) {
	if (typeof resource === "string") return resource;
	if (!resource) return "";
	if (hasProp(resource, "url")) return resource.url;
	if (resource.toString) return resource.toString();
	return "";
}
function parseFetchArgs(fetchArgs) {
	if (fetchArgs.length === 0) return {
		method: "GET",
		url: ""
	};
	if (fetchArgs.length === 2) {
		const [resource, options$1] = fetchArgs;
		return {
			url: getUrlFromResource(resource),
			method: hasProp(options$1, "method") ? String(options$1.method).toUpperCase() : isRequest(resource) && hasProp(resource, "method") ? String(resource.method).toUpperCase() : "GET"
		};
	}
	const arg = fetchArgs[0];
	return {
		url: getUrlFromResource(arg),
		method: hasProp(arg, "method") ? String(arg.method).toUpperCase() : "GET"
	};
}
function getHeadersFromFetchArgs(fetchArgs) {
	const [requestArgument, optionsArgument] = fetchArgs;
	try {
		if (typeof optionsArgument === "object" && optionsArgument !== null && "headers" in optionsArgument && optionsArgument.headers) return new Headers(optionsArgument.headers);
		if (isRequest(requestArgument)) return new Headers(requestArgument.headers);
	} catch {}
}
function getSDKSource() {
	return "npm";
}
var WINDOW = GLOBAL_OBJ;
var ignoreOnError = 0;
function shouldIgnoreOnError() {
	return ignoreOnError > 0;
}
function ignoreNextOnError() {
	ignoreOnError++;
	setTimeout(() => {
		ignoreOnError--;
	});
}
function wrap(fn, options$1 = {}) {
	function isFunction(fn$1) {
		return typeof fn$1 === "function";
	}
	if (!isFunction(fn)) return fn;
	try {
		const wrapper$5 = fn.__sentry_wrapped__;
		if (wrapper$5) if (typeof wrapper$5 === "function") return wrapper$5;
		else return fn;
		if (getOriginalFunction(fn)) return fn;
	} catch {
		return fn;
	}
	const sentryWrapped = function(...args) {
		try {
			const wrappedArguments = args.map((arg) => wrap(arg, options$1));
			return fn.apply(this, wrappedArguments);
		} catch (ex) {
			ignoreNextOnError();
			withScope((scope) => {
				scope.addEventProcessor((event) => {
					if (options$1.mechanism) {
						addExceptionTypeValue(event, void 0, void 0);
						addExceptionMechanism(event, options$1.mechanism);
					}
					event.extra = {
						...event.extra,
						arguments: args
					};
					return event;
				});
				captureException(ex);
			});
			throw ex;
		}
	};
	try {
		for (const property in fn) if (Object.prototype.hasOwnProperty.call(fn, property)) sentryWrapped[property] = fn[property];
	} catch {}
	markFunctionWrapped(sentryWrapped, fn);
	addNonEnumerableProperty(fn, "__sentry_wrapped__", sentryWrapped);
	try {
		if (Object.getOwnPropertyDescriptor(sentryWrapped, "name").configurable) Object.defineProperty(sentryWrapped, "name", { get() {
			return fn.name;
		} });
	} catch {}
	return sentryWrapped;
}
function getHttpRequestData() {
	const url = getLocationHref();
	const { referrer } = WINDOW.document || {};
	const { userAgent } = WINDOW.navigator || {};
	return {
		url,
		headers: {
			...referrer && { Referer: referrer },
			...userAgent && { "User-Agent": userAgent }
		}
	};
}
function exceptionFromError(stackParser, ex) {
	const frames = parseStackFrames(stackParser, ex);
	const exception = {
		type: extractType(ex),
		value: extractMessage(ex)
	};
	if (frames.length) exception.stacktrace = { frames };
	if (exception.type === void 0 && exception.value === "") exception.value = "Unrecoverable error caught";
	return exception;
}
function eventFromPlainObject(stackParser, exception, syntheticException, isUnhandledRejection) {
	const normalizeDepth = getClient()?.getOptions().normalizeDepth;
	const errorFromProp = getErrorPropertyFromObject(exception);
	const extra = { __serialized__: normalizeToSize(exception, normalizeDepth) };
	if (errorFromProp) return {
		exception: { values: [exceptionFromError(stackParser, errorFromProp)] },
		extra
	};
	const event = {
		exception: { values: [{
			type: isEvent(exception) ? exception.constructor.name : isUnhandledRejection ? "UnhandledRejection" : "Error",
			value: getNonErrorObjectExceptionValue(exception, { isUnhandledRejection })
		}] },
		extra
	};
	if (syntheticException) {
		const frames = parseStackFrames(stackParser, syntheticException);
		if (frames.length) event.exception.values[0].stacktrace = { frames };
	}
	return event;
}
function eventFromError(stackParser, ex) {
	return { exception: { values: [exceptionFromError(stackParser, ex)] } };
}
function parseStackFrames(stackParser, ex) {
	const stacktrace = ex.stacktrace || ex.stack || "";
	const skipLines = getSkipFirstStackStringLines(ex);
	const framesToPop = getPopFirstTopFrames(ex);
	try {
		return stackParser(stacktrace, skipLines, framesToPop);
	} catch {}
	return [];
}
var reactMinifiedRegexp = /Minified React error #\d+;/i;
function getSkipFirstStackStringLines(ex) {
	if (ex && reactMinifiedRegexp.test(ex.message)) return 1;
	return 0;
}
function getPopFirstTopFrames(ex) {
	if (typeof ex.framesToPop === "number") return ex.framesToPop;
	return 0;
}
function isWebAssemblyException(exception) {
	if (typeof WebAssembly !== "undefined" && typeof WebAssembly.Exception !== "undefined") return exception instanceof WebAssembly.Exception;
	else return false;
}
function extractType(ex) {
	const name$3 = ex?.name;
	if (!name$3 && isWebAssemblyException(ex)) return ex.message && Array.isArray(ex.message) && ex.message.length == 2 ? ex.message[0] : "WebAssembly.Exception";
	return name$3;
}
function extractMessage(ex) {
	const message$2 = ex?.message;
	if (isWebAssemblyException(ex)) {
		if (Array.isArray(ex.message) && ex.message.length == 2) return ex.message[1];
		return "wasm exception";
	}
	if (!message$2) return "No error message";
	if (message$2.error && typeof message$2.error.message === "string") return _enhanceErrorWithSentryInfo(message$2.error);
	return _enhanceErrorWithSentryInfo(ex);
}
function eventFromException(stackParser, exception, hint$1, attachStacktrace) {
	const event = eventFromUnknownInput(stackParser, exception, hint$1?.syntheticException || void 0, attachStacktrace);
	addExceptionMechanism(event);
	event.level = "error";
	if (hint$1?.event_id) event.event_id = hint$1.event_id;
	return resolvedSyncPromise(event);
}
function eventFromMessage(stackParser, message$2, level = "info", hint$1, attachStacktrace) {
	const event = eventFromString(stackParser, message$2, hint$1?.syntheticException || void 0, attachStacktrace);
	event.level = level;
	if (hint$1?.event_id) event.event_id = hint$1.event_id;
	return resolvedSyncPromise(event);
}
function eventFromUnknownInput(stackParser, exception, syntheticException, attachStacktrace, isUnhandledRejection) {
	let event;
	if (isErrorEvent(exception) && exception.error) return eventFromError(stackParser, exception.error);
	if (isDOMError(exception) || isDOMException(exception)) {
		const domException = exception;
		if ("stack" in exception) event = eventFromError(stackParser, exception);
		else {
			const name$3 = domException.name || (isDOMError(domException) ? "DOMError" : "DOMException");
			const message$2 = domException.message ? `${name$3}: ${domException.message}` : name$3;
			event = eventFromString(stackParser, message$2, syntheticException, attachStacktrace);
			addExceptionTypeValue(event, message$2);
		}
		if ("code" in domException) event.tags = {
			...event.tags,
			"DOMException.code": `${domException.code}`
		};
		return event;
	}
	if (isError(exception)) return eventFromError(stackParser, exception);
	if (isPlainObject(exception) || isEvent(exception)) {
		event = eventFromPlainObject(stackParser, exception, syntheticException, isUnhandledRejection);
		addExceptionMechanism(event, { synthetic: true });
		return event;
	}
	event = eventFromString(stackParser, exception, syntheticException, attachStacktrace);
	addExceptionTypeValue(event, `${exception}`, void 0);
	addExceptionMechanism(event, { synthetic: true });
	return event;
}
function eventFromString(stackParser, message$2, syntheticException, attachStacktrace) {
	const event = {};
	if (attachStacktrace && syntheticException) {
		const frames = parseStackFrames(stackParser, syntheticException);
		if (frames.length) event.exception = { values: [{
			value: message$2,
			stacktrace: { frames }
		}] };
		addExceptionMechanism(event, { synthetic: true });
	}
	if (isParameterizedString(message$2)) {
		const { __sentry_template_string__, __sentry_template_values__ } = message$2;
		event.logentry = {
			message: __sentry_template_string__,
			params: __sentry_template_values__
		};
		return event;
	}
	event.message = message$2;
	return event;
}
function getNonErrorObjectExceptionValue(exception, { isUnhandledRejection }) {
	const keys = extractExceptionKeysForMessage(exception);
	const captureType = isUnhandledRejection ? "promise rejection" : "exception";
	if (isErrorEvent(exception)) return `Event \`ErrorEvent\` captured as ${captureType} with message \`${exception.message}\``;
	if (isEvent(exception)) return `Event \`${getObjectClassName(exception)}\` (type=${exception.type}) captured as ${captureType}`;
	return `Object captured as ${captureType} with keys: ${keys}`;
}
function getObjectClassName(obj) {
	try {
		const prototype = Object.getPrototypeOf(obj);
		return prototype ? prototype.constructor.name : void 0;
	} catch {}
}
function getErrorPropertyFromObject(obj) {
	for (const prop in obj) if (Object.prototype.hasOwnProperty.call(obj, prop)) {
		const value = obj[prop];
		if (value instanceof Error) return value;
	}
}
var BrowserClient = class extends Client {
	constructor(options$1) {
		const opts = applyDefaultOptions(options$1);
		applySdkMetadata(opts, "browser", ["browser"], WINDOW.SENTRY_SDK_SOURCE || getSDKSource());
		if (opts._metadata?.sdk) opts._metadata.sdk.settings = {
			infer_ip: opts.sendDefaultPii ? "auto" : "never",
			...opts._metadata.sdk.settings
		};
		super(opts);
		const { sendDefaultPii, sendClientReports, enableLogs, _experiments, enableMetrics: enableMetricsOption } = this._options;
		const enableMetrics = enableMetricsOption ?? _experiments?.enableMetrics ?? true;
		if (WINDOW.document && (sendClientReports || enableLogs || enableMetrics)) WINDOW.document.addEventListener("visibilitychange", () => {
			if (WINDOW.document.visibilityState === "hidden") {
				if (sendClientReports) this._flushOutcomes();
				if (enableLogs) _INTERNAL_flushLogsBuffer(this);
				if (enableMetrics) _INTERNAL_flushMetricsBuffer(this);
			}
		});
		if (sendDefaultPii) this.on("beforeSendSession", addAutoIpAddressToSession);
	}
	eventFromException(exception, hint$1) {
		return eventFromException(this._options.stackParser, exception, hint$1, this._options.attachStacktrace);
	}
	eventFromMessage(message$2, level = "info", hint$1) {
		return eventFromMessage(this._options.stackParser, message$2, level, hint$1, this._options.attachStacktrace);
	}
	_prepareEvent(event, hint$1, currentScope, isolationScope) {
		event.platform = event.platform || "javascript";
		return super._prepareEvent(event, hint$1, currentScope, isolationScope);
	}
};
function applyDefaultOptions(optionsArg) {
	return {
		release: typeof __SENTRY_RELEASE__ === "string" ? __SENTRY_RELEASE__ : WINDOW.SENTRY_RELEASE?.id,
		sendClientReports: true,
		parentSpanIsAlwaysRootSpan: true,
		...optionsArg
	};
}
var DEBUG_BUILD$2 = typeof __SENTRY_DEBUG__ === "undefined" || __SENTRY_DEBUG__;
var WINDOW$1 = GLOBAL_OBJ;
var DEBOUNCE_DURATION = 1e3;
var debounceTimerID;
var lastCapturedEventType;
var lastCapturedEventTargetId;
function addClickKeypressInstrumentationHandler(handler) {
	const type = "dom";
	addHandler(type, handler);
	maybeInstrument(type, instrumentDOM);
}
function instrumentDOM() {
	if (!WINDOW$1.document) return;
	const triggerDOMHandler = triggerHandlers.bind(null, "dom");
	const globalDOMEventHandler = makeDOMEventHandler(triggerDOMHandler, true);
	WINDOW$1.document.addEventListener("click", globalDOMEventHandler, false);
	WINDOW$1.document.addEventListener("keypress", globalDOMEventHandler, false);
	["EventTarget", "Node"].forEach((target) => {
		const proto$1 = WINDOW$1[target]?.prototype;
		if (!proto$1?.hasOwnProperty?.("addEventListener")) return;
		fill(proto$1, "addEventListener", function(originalAddEventListener) {
			return function(type, listener, options$1) {
				if (type === "click" || type == "keypress") try {
					const handlers$1 = this.__sentry_instrumentation_handlers__ = this.__sentry_instrumentation_handlers__ || {};
					const handlerForType = handlers$1[type] = handlers$1[type] || { refCount: 0 };
					if (!handlerForType.handler) {
						const handler = makeDOMEventHandler(triggerDOMHandler);
						handlerForType.handler = handler;
						originalAddEventListener.call(this, type, handler, options$1);
					}
					handlerForType.refCount++;
				} catch {}
				return originalAddEventListener.call(this, type, listener, options$1);
			};
		});
		fill(proto$1, "removeEventListener", function(originalRemoveEventListener) {
			return function(type, listener, options$1) {
				if (type === "click" || type == "keypress") try {
					const handlers$1 = this.__sentry_instrumentation_handlers__ || {};
					const handlerForType = handlers$1[type];
					if (handlerForType) {
						handlerForType.refCount--;
						if (handlerForType.refCount <= 0) {
							originalRemoveEventListener.call(this, type, handlerForType.handler, options$1);
							handlerForType.handler = void 0;
							delete handlers$1[type];
						}
						if (Object.keys(handlers$1).length === 0) delete this.__sentry_instrumentation_handlers__;
					}
				} catch {}
				return originalRemoveEventListener.call(this, type, listener, options$1);
			};
		});
	});
}
function isSimilarToLastCapturedEvent(event) {
	if (event.type !== lastCapturedEventType) return false;
	try {
		if (!event.target || event.target._sentryId !== lastCapturedEventTargetId) return false;
	} catch {}
	return true;
}
function shouldSkipDOMEvent(eventType, target) {
	if (eventType !== "keypress") return false;
	if (!target?.tagName) return true;
	if (target.tagName === "INPUT" || target.tagName === "TEXTAREA" || target.isContentEditable) return false;
	return true;
}
function makeDOMEventHandler(handler, globalListener = false) {
	return (event) => {
		if (!event || event["_sentryCaptured"]) return;
		const target = getEventTarget(event);
		if (shouldSkipDOMEvent(event.type, target)) return;
		addNonEnumerableProperty(event, "_sentryCaptured", true);
		if (target && !target._sentryId) addNonEnumerableProperty(target, "_sentryId", uuid4());
		const name$3 = event.type === "keypress" ? "input" : event.type;
		if (!isSimilarToLastCapturedEvent(event)) {
			handler({
				event,
				name: name$3,
				global: globalListener
			});
			lastCapturedEventType = event.type;
			lastCapturedEventTargetId = target ? target._sentryId : void 0;
		}
		clearTimeout(debounceTimerID);
		debounceTimerID = WINDOW$1.setTimeout(() => {
			lastCapturedEventTargetId = void 0;
			lastCapturedEventType = void 0;
		}, DEBOUNCE_DURATION);
	};
}
function getEventTarget(event) {
	try {
		return event.target;
	} catch {
		return null;
	}
}
var lastHref;
function addHistoryInstrumentationHandler(handler) {
	const type = "history";
	addHandler(type, handler);
	maybeInstrument(type, instrumentHistory);
}
function instrumentHistory() {
	WINDOW$1.addEventListener("popstate", () => {
		const to = WINDOW$1.location.href;
		const from = lastHref;
		lastHref = to;
		if (from === to) return;
		triggerHandlers("history", {
			from,
			to
		});
	});
	if (!supportsHistory()) return;
	function historyReplacementFunction(originalHistoryFunction) {
		return function(...args) {
			const url = args.length > 2 ? args[2] : void 0;
			if (url) {
				const from = lastHref;
				const to = getAbsoluteUrl(String(url));
				lastHref = to;
				if (from === to) return originalHistoryFunction.apply(this, args);
				triggerHandlers("history", {
					from,
					to
				});
			}
			return originalHistoryFunction.apply(this, args);
		};
	}
	fill(WINDOW$1.history, "pushState", historyReplacementFunction);
	fill(WINDOW$1.history, "replaceState", historyReplacementFunction);
}
function getAbsoluteUrl(urlOrPath) {
	try {
		return new URL(urlOrPath, WINDOW$1.location.origin).toString();
	} catch {
		return urlOrPath;
	}
}
var cachedImplementations = {};
function getNativeImplementation(name$3) {
	const cached = cachedImplementations[name$3];
	if (cached) return cached;
	let impl = WINDOW$1[name$3];
	if (isNativeFunction(impl)) return cachedImplementations[name$3] = impl.bind(WINDOW$1);
	const document$1 = WINDOW$1.document;
	if (document$1 && typeof document$1.createElement === "function") try {
		const sandbox = document$1.createElement("iframe");
		sandbox.hidden = true;
		document$1.head.appendChild(sandbox);
		const contentWindow = sandbox.contentWindow;
		if (contentWindow?.[name$3]) impl = contentWindow[name$3];
		document$1.head.removeChild(sandbox);
	} catch (e) {
		DEBUG_BUILD$2 && debug.warn(`Could not create sandbox iframe for ${name$3} check, bailing to window.${name$3}: `, e);
	}
	if (!impl) return impl;
	return cachedImplementations[name$3] = impl.bind(WINDOW$1);
}
function clearCachedImplementation(name$3) {
	cachedImplementations[name$3] = void 0;
}
var SENTRY_XHR_DATA_KEY = "__sentry_xhr_v3__";
function addXhrInstrumentationHandler(handler) {
	const type = "xhr";
	addHandler(type, handler);
	maybeInstrument(type, instrumentXHR);
}
function instrumentXHR() {
	if (!WINDOW$1.XMLHttpRequest) return;
	const xhrproto = XMLHttpRequest.prototype;
	xhrproto.open = new Proxy(xhrproto.open, { apply(originalOpen, xhrOpenThisArg, xhrOpenArgArray) {
		const virtualError = /* @__PURE__ */ new Error();
		const startTimestamp = timestampInSeconds() * 1e3;
		const method = isString(xhrOpenArgArray[0]) ? xhrOpenArgArray[0].toUpperCase() : void 0;
		const url = parseXhrUrlArg(xhrOpenArgArray[1]);
		if (!method || !url) return originalOpen.apply(xhrOpenThisArg, xhrOpenArgArray);
		xhrOpenThisArg[SENTRY_XHR_DATA_KEY] = {
			method,
			url,
			request_headers: {}
		};
		if (method === "POST" && url.match(/sentry_key/)) xhrOpenThisArg.__sentry_own_request__ = true;
		const onreadystatechangeHandler = () => {
			const xhrInfo = xhrOpenThisArg[SENTRY_XHR_DATA_KEY];
			if (!xhrInfo) return;
			if (xhrOpenThisArg.readyState === 4) {
				try {
					xhrInfo.status_code = xhrOpenThisArg.status;
				} catch {}
				triggerHandlers("xhr", {
					endTimestamp: timestampInSeconds() * 1e3,
					startTimestamp,
					xhr: xhrOpenThisArg,
					virtualError
				});
			}
		};
		if ("onreadystatechange" in xhrOpenThisArg && typeof xhrOpenThisArg.onreadystatechange === "function") xhrOpenThisArg.onreadystatechange = new Proxy(xhrOpenThisArg.onreadystatechange, { apply(originalOnreadystatechange, onreadystatechangeThisArg, onreadystatechangeArgArray) {
			onreadystatechangeHandler();
			return originalOnreadystatechange.apply(onreadystatechangeThisArg, onreadystatechangeArgArray);
		} });
		else xhrOpenThisArg.addEventListener("readystatechange", onreadystatechangeHandler);
		xhrOpenThisArg.setRequestHeader = new Proxy(xhrOpenThisArg.setRequestHeader, { apply(originalSetRequestHeader, setRequestHeaderThisArg, setRequestHeaderArgArray) {
			const [header$12, value] = setRequestHeaderArgArray;
			const xhrInfo = setRequestHeaderThisArg[SENTRY_XHR_DATA_KEY];
			if (xhrInfo && isString(header$12) && isString(value)) xhrInfo.request_headers[header$12.toLowerCase()] = value;
			return originalSetRequestHeader.apply(setRequestHeaderThisArg, setRequestHeaderArgArray);
		} });
		return originalOpen.apply(xhrOpenThisArg, xhrOpenArgArray);
	} });
	xhrproto.send = new Proxy(xhrproto.send, { apply(originalSend, sendThisArg, sendArgArray) {
		const sentryXhrData = sendThisArg[SENTRY_XHR_DATA_KEY];
		if (!sentryXhrData) return originalSend.apply(sendThisArg, sendArgArray);
		if (sendArgArray[0] !== void 0) sentryXhrData.body = sendArgArray[0];
		triggerHandlers("xhr", {
			startTimestamp: timestampInSeconds() * 1e3,
			xhr: sendThisArg
		});
		return originalSend.apply(sendThisArg, sendArgArray);
	} });
}
function parseXhrUrlArg(url) {
	if (isString(url)) return url;
	try {
		return url.toString();
	} catch {}
}
var DEFAULT_BROWSER_TRANSPORT_BUFFER_SIZE = 40;
function makeFetchTransport(options$1, nativeFetch = getNativeImplementation("fetch")) {
	let pendingBodySize = 0;
	let pendingCount = 0;
	async function makeRequest(request) {
		const requestSize = request.body.length;
		pendingBodySize += requestSize;
		pendingCount++;
		const requestOptions = {
			body: request.body,
			method: "POST",
			referrerPolicy: "strict-origin",
			headers: options$1.headers,
			keepalive: pendingBodySize <= 6e4 && pendingCount < 15,
			...options$1.fetchOptions
		};
		try {
			const response = await nativeFetch(options$1.url, requestOptions);
			return {
				statusCode: response.status,
				headers: {
					"x-sentry-rate-limits": response.headers.get("X-Sentry-Rate-Limits"),
					"retry-after": response.headers.get("Retry-After")
				}
			};
		} catch (e) {
			clearCachedImplementation("fetch");
			throw e;
		} finally {
			pendingBodySize -= requestSize;
			pendingCount--;
		}
	}
	return createTransport(options$1, makeRequest, makePromiseBuffer(options$1.bufferSize || DEFAULT_BROWSER_TRANSPORT_BUFFER_SIZE));
}
var DEBUG_BUILD$1 = typeof __SENTRY_DEBUG__ === "undefined" || __SENTRY_DEBUG__;
var CHROME_PRIORITY = 30;
var GECKO_PRIORITY = 50;
function createFrame(filename, func, lineno, colno) {
	const frame = {
		filename,
		function: func === "<anonymous>" ? "?" : func,
		in_app: true
	};
	if (lineno !== void 0) frame.lineno = lineno;
	if (colno !== void 0) frame.colno = colno;
	return frame;
}
var chromeRegexNoFnName = /^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i;
var chromeRegex = /^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i;
var chromeEvalRegex = /\((\S*)(?::(\d+))(?::(\d+))\)/;
var chromeDataUriRegex = /at (.+?) ?\(data:(.+?),/;
var chromeStackParserFn = (line) => {
	const dataUriMatch = line.match(chromeDataUriRegex);
	if (dataUriMatch) return {
		filename: `<data:${dataUriMatch[2]}>`,
		function: dataUriMatch[1]
	};
	const noFnParts = chromeRegexNoFnName.exec(line);
	if (noFnParts) {
		const [, filename, line$1, col] = noFnParts;
		return createFrame(filename, "?", +line$1, +col);
	}
	const parts = chromeRegex.exec(line);
	if (parts) {
		if (parts[2] && parts[2].indexOf("eval") === 0) {
			const subMatch = chromeEvalRegex.exec(parts[2]);
			if (subMatch) {
				parts[2] = subMatch[1];
				parts[3] = subMatch[2];
				parts[4] = subMatch[3];
			}
		}
		const [func, filename] = extractSafariExtensionDetails(parts[1] || "?", parts[2]);
		return createFrame(filename, func, parts[3] ? +parts[3] : void 0, parts[4] ? +parts[4] : void 0);
	}
};
var chromeStackLineParser = [CHROME_PRIORITY, chromeStackParserFn];
var geckoREgex = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i;
var geckoEvalRegex = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i;
var gecko = (line) => {
	const parts = geckoREgex.exec(line);
	if (parts) {
		if (parts[3] && parts[3].indexOf(" > eval") > -1) {
			const subMatch = geckoEvalRegex.exec(parts[3]);
			if (subMatch) {
				parts[1] = parts[1] || "eval";
				parts[3] = subMatch[1];
				parts[4] = subMatch[2];
				parts[5] = "";
			}
		}
		let filename = parts[3];
		let func = parts[1] || "?";
		[func, filename] = extractSafariExtensionDetails(func, filename);
		return createFrame(filename, func, parts[4] ? +parts[4] : void 0, parts[5] ? +parts[5] : void 0);
	}
};
var defaultStackParser = createStackParser(...[chromeStackLineParser, [GECKO_PRIORITY, gecko]]);
var extractSafariExtensionDetails = (func, filename) => {
	const isSafariExtension = func.indexOf("safari-extension") !== -1;
	const isSafariWebExtension = func.indexOf("safari-web-extension") !== -1;
	return isSafariExtension || isSafariWebExtension ? [func.indexOf("@") !== -1 ? func.split("@")[0] : "?", isSafariExtension ? `safari-extension:${filename}` : `safari-web-extension:${filename}`] : [func, filename];
};
var MAX_ALLOWED_STRING_LENGTH = 1024;
var INTEGRATION_NAME$4 = "Breadcrumbs";
var _breadcrumbsIntegration = ((options$1 = {}) => {
	const _options = {
		console: true,
		dom: true,
		fetch: true,
		history: true,
		sentry: true,
		xhr: true,
		...options$1
	};
	return {
		name: INTEGRATION_NAME$4,
		setup(client) {
			if (_options.console) addConsoleInstrumentationHandler(_getConsoleBreadcrumbHandler(client));
			if (_options.dom) addClickKeypressInstrumentationHandler(_getDomBreadcrumbHandler(client, _options.dom));
			if (_options.xhr) addXhrInstrumentationHandler(_getXhrBreadcrumbHandler(client));
			if (_options.fetch) addFetchInstrumentationHandler(_getFetchBreadcrumbHandler(client));
			if (_options.history) addHistoryInstrumentationHandler(_getHistoryBreadcrumbHandler(client));
			if (_options.sentry) client.on("beforeSendEvent", _getSentryBreadcrumbHandler(client));
		}
	};
});
var breadcrumbsIntegration = defineIntegration(_breadcrumbsIntegration);
function _getSentryBreadcrumbHandler(client) {
	return function addSentryBreadcrumb(event) {
		if (getClient() !== client) return;
		addBreadcrumb({
			category: `sentry.${event.type === "transaction" ? "transaction" : "event"}`,
			event_id: event.event_id,
			level: event.level,
			message: getEventDescription(event)
		}, { event });
	};
}
function _getDomBreadcrumbHandler(client, dom) {
	return function _innerDomBreadcrumb(handlerData) {
		if (getClient() !== client) return;
		let target;
		let componentName;
		let keyAttrs = typeof dom === "object" ? dom.serializeAttribute : void 0;
		let maxStringLength = typeof dom === "object" && typeof dom.maxStringLength === "number" ? dom.maxStringLength : void 0;
		if (maxStringLength && maxStringLength > MAX_ALLOWED_STRING_LENGTH) {
			DEBUG_BUILD$1 && debug.warn(`\`dom.maxStringLength\` cannot exceed ${MAX_ALLOWED_STRING_LENGTH}, but a value of ${maxStringLength} was configured. Sentry will use ${MAX_ALLOWED_STRING_LENGTH} instead.`);
			maxStringLength = MAX_ALLOWED_STRING_LENGTH;
		}
		if (typeof keyAttrs === "string") keyAttrs = [keyAttrs];
		try {
			const event = handlerData.event;
			const element = _isEvent(event) ? event.target : event;
			target = htmlTreeAsString(element, {
				keyAttrs,
				maxStringLength
			});
			componentName = getComponentName(element);
		} catch {
			target = "<unknown>";
		}
		if (target.length === 0) return;
		const breadcrumb = {
			category: `ui.${handlerData.name}`,
			message: target
		};
		if (componentName) breadcrumb.data = { "ui.component_name": componentName };
		addBreadcrumb(breadcrumb, {
			event: handlerData.event,
			name: handlerData.name,
			global: handlerData.global
		});
	};
}
function _getConsoleBreadcrumbHandler(client) {
	return function _consoleBreadcrumb(handlerData) {
		if (getClient() !== client) return;
		const breadcrumb = {
			category: "console",
			data: {
				arguments: handlerData.args,
				logger: "console"
			},
			level: severityLevelFromString(handlerData.level),
			message: safeJoin(handlerData.args, " ")
		};
		if (handlerData.level === "assert") if (handlerData.args[0] === false) {
			breadcrumb.message = `Assertion failed: ${safeJoin(handlerData.args.slice(1), " ") || "console.assert"}`;
			breadcrumb.data.arguments = handlerData.args.slice(1);
		} else return;
		addBreadcrumb(breadcrumb, {
			input: handlerData.args,
			level: handlerData.level
		});
	};
}
function _getXhrBreadcrumbHandler(client) {
	return function _xhrBreadcrumb(handlerData) {
		if (getClient() !== client) return;
		const { startTimestamp, endTimestamp } = handlerData;
		const sentryXhrData = handlerData.xhr[SENTRY_XHR_DATA_KEY];
		if (!startTimestamp || !endTimestamp || !sentryXhrData) return;
		const { method, url, status_code, body: body$2 } = sentryXhrData;
		const data = {
			method,
			url,
			status_code
		};
		const hint$1 = {
			xhr: handlerData.xhr,
			input: body$2,
			startTimestamp,
			endTimestamp
		};
		const breadcrumb = {
			category: "xhr",
			data,
			type: "http",
			level: getBreadcrumbLogLevelFromHttpStatusCode(status_code)
		};
		client.emit("beforeOutgoingRequestBreadcrumb", breadcrumb, hint$1);
		addBreadcrumb(breadcrumb, hint$1);
	};
}
function _getFetchBreadcrumbHandler(client) {
	return function _fetchBreadcrumb(handlerData) {
		if (getClient() !== client) return;
		const { startTimestamp, endTimestamp } = handlerData;
		if (!endTimestamp) return;
		if (handlerData.fetchData.url.match(/sentry_key/) && handlerData.fetchData.method === "POST") return;
		handlerData.fetchData.method, handlerData.fetchData.url;
		if (handlerData.error) {
			const data = handlerData.fetchData;
			const hint$1 = {
				data: handlerData.error,
				input: handlerData.args,
				startTimestamp,
				endTimestamp
			};
			const breadcrumb = {
				category: "fetch",
				data,
				level: "error",
				type: "http"
			};
			client.emit("beforeOutgoingRequestBreadcrumb", breadcrumb, hint$1);
			addBreadcrumb(breadcrumb, hint$1);
		} else {
			const response = handlerData.response;
			const data = {
				...handlerData.fetchData,
				status_code: response?.status
			};
			handlerData.fetchData.request_body_size;
			handlerData.fetchData.response_body_size;
			response?.status;
			const hint$1 = {
				input: handlerData.args,
				response,
				startTimestamp,
				endTimestamp
			};
			const breadcrumb = {
				category: "fetch",
				data,
				type: "http",
				level: getBreadcrumbLogLevelFromHttpStatusCode(data.status_code)
			};
			client.emit("beforeOutgoingRequestBreadcrumb", breadcrumb, hint$1);
			addBreadcrumb(breadcrumb, hint$1);
		}
	};
}
function _getHistoryBreadcrumbHandler(client) {
	return function _historyBreadcrumb(handlerData) {
		if (getClient() !== client) return;
		let from = handlerData.from;
		let to = handlerData.to;
		const parsedLoc = parseUrl(WINDOW.location.href);
		let parsedFrom = from ? parseUrl(from) : void 0;
		const parsedTo = parseUrl(to);
		if (!parsedFrom?.path) parsedFrom = parsedLoc;
		if (parsedLoc.protocol === parsedTo.protocol && parsedLoc.host === parsedTo.host) to = parsedTo.relative;
		if (parsedLoc.protocol === parsedFrom.protocol && parsedLoc.host === parsedFrom.host) from = parsedFrom.relative;
		addBreadcrumb({
			category: "navigation",
			data: {
				from,
				to
			}
		});
	};
}
function _isEvent(event) {
	return !!event && !!event.target;
}
var DEFAULT_EVENT_TARGET = [
	"EventTarget",
	"Window",
	"Node",
	"ApplicationCache",
	"AudioTrackList",
	"BroadcastChannel",
	"ChannelMergerNode",
	"CryptoOperation",
	"EventSource",
	"FileReader",
	"HTMLUnknownElement",
	"IDBDatabase",
	"IDBRequest",
	"IDBTransaction",
	"KeyOperation",
	"MediaController",
	"MessagePort",
	"ModalWindow",
	"Notification",
	"SVGElementInstance",
	"Screen",
	"SharedWorker",
	"TextTrack",
	"TextTrackCue",
	"TextTrackList",
	"WebSocket",
	"WebSocketWorker",
	"Worker",
	"XMLHttpRequest",
	"XMLHttpRequestEventTarget",
	"XMLHttpRequestUpload"
];
var INTEGRATION_NAME$3 = "BrowserApiErrors";
var _browserApiErrorsIntegration = ((options$1 = {}) => {
	const _options = {
		XMLHttpRequest: true,
		eventTarget: true,
		requestAnimationFrame: true,
		setInterval: true,
		setTimeout: true,
		unregisterOriginalCallbacks: false,
		...options$1
	};
	return {
		name: INTEGRATION_NAME$3,
		setupOnce() {
			if (_options.setTimeout) fill(WINDOW, "setTimeout", _wrapTimeFunction);
			if (_options.setInterval) fill(WINDOW, "setInterval", _wrapTimeFunction);
			if (_options.requestAnimationFrame) fill(WINDOW, "requestAnimationFrame", _wrapRAF);
			if (_options.XMLHttpRequest && "XMLHttpRequest" in WINDOW) fill(XMLHttpRequest.prototype, "send", _wrapXHR);
			const eventTargetOption = _options.eventTarget;
			if (eventTargetOption) (Array.isArray(eventTargetOption) ? eventTargetOption : DEFAULT_EVENT_TARGET).forEach((target) => _wrapEventTarget(target, _options));
		}
	};
});
var browserApiErrorsIntegration = defineIntegration(_browserApiErrorsIntegration);
function _wrapTimeFunction(original) {
	return function(...args) {
		const originalCallback = args[0];
		args[0] = wrap(originalCallback, { mechanism: {
			handled: false,
			type: `auto.browser.browserapierrors.${getFunctionName(original)}`
		} });
		return original.apply(this, args);
	};
}
function _wrapRAF(original) {
	return function(callback) {
		return original.apply(this, [wrap(callback, { mechanism: {
			data: { handler: getFunctionName(original) },
			handled: false,
			type: "auto.browser.browserapierrors.requestAnimationFrame"
		} })]);
	};
}
function _wrapXHR(originalSend) {
	return function(...args) {
		const xhr = this;
		[
			"onload",
			"onerror",
			"onprogress",
			"onreadystatechange"
		].forEach((prop) => {
			if (prop in xhr && typeof xhr[prop] === "function") fill(xhr, prop, function(original) {
				const wrapOptions = { mechanism: {
					data: { handler: getFunctionName(original) },
					handled: false,
					type: `auto.browser.browserapierrors.xhr.${prop}`
				} };
				const originalFunction = getOriginalFunction(original);
				if (originalFunction) wrapOptions.mechanism.data.handler = getFunctionName(originalFunction);
				return wrap(original, wrapOptions);
			});
		});
		return originalSend.apply(this, args);
	};
}
function _wrapEventTarget(target, integrationOptions) {
	const proto$1 = WINDOW[target]?.prototype;
	if (!proto$1?.hasOwnProperty?.("addEventListener")) return;
	fill(proto$1, "addEventListener", function(original) {
		return function(eventName, fn, options$1) {
			try {
				if (isEventListenerObject(fn)) fn.handleEvent = wrap(fn.handleEvent, { mechanism: {
					data: {
						handler: getFunctionName(fn),
						target
					},
					handled: false,
					type: "auto.browser.browserapierrors.handleEvent"
				} });
			} catch {}
			if (integrationOptions.unregisterOriginalCallbacks) unregisterOriginalCallback(this, eventName, fn);
			return original.apply(this, [
				eventName,
				wrap(fn, { mechanism: {
					data: {
						handler: getFunctionName(fn),
						target
					},
					handled: false,
					type: "auto.browser.browserapierrors.addEventListener"
				} }),
				options$1
			]);
		};
	});
	fill(proto$1, "removeEventListener", function(originalRemoveEventListener) {
		return function(eventName, fn, options$1) {
			try {
				const originalEventHandler = fn.__sentry_wrapped__;
				if (originalEventHandler) originalRemoveEventListener.call(this, eventName, originalEventHandler, options$1);
			} catch {}
			return originalRemoveEventListener.call(this, eventName, fn, options$1);
		};
	});
}
function isEventListenerObject(obj) {
	return typeof obj.handleEvent === "function";
}
function unregisterOriginalCallback(target, eventName, fn) {
	if (target && typeof target === "object" && "removeEventListener" in target && typeof target.removeEventListener === "function") target.removeEventListener(eventName, fn);
}
var browserSessionIntegration = defineIntegration(() => {
	return {
		name: "BrowserSession",
		setupOnce() {
			if (typeof WINDOW.document === "undefined") {
				DEBUG_BUILD$1 && debug.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");
				return;
			}
			startSession({ ignoreDuration: true });
			captureSession();
			addHistoryInstrumentationHandler(({ from, to }) => {
				if (from !== void 0 && from !== to) {
					startSession({ ignoreDuration: true });
					captureSession();
				}
			});
		}
	};
});
var INTEGRATION_NAME$2 = "GlobalHandlers";
var _globalHandlersIntegration = ((options$1 = {}) => {
	const _options = {
		onerror: true,
		onunhandledrejection: true,
		...options$1
	};
	return {
		name: INTEGRATION_NAME$2,
		setupOnce() {
			Error.stackTraceLimit = 50;
		},
		setup(client) {
			if (_options.onerror) {
				_installGlobalOnErrorHandler(client);
				globalHandlerLog("onerror");
			}
			if (_options.onunhandledrejection) {
				_installGlobalOnUnhandledRejectionHandler(client);
				globalHandlerLog("onunhandledrejection");
			}
		}
	};
});
var globalHandlersIntegration = defineIntegration(_globalHandlersIntegration);
function _installGlobalOnErrorHandler(client) {
	addGlobalErrorInstrumentationHandler((data) => {
		const { stackParser, attachStacktrace } = getOptions();
		if (getClient() !== client || shouldIgnoreOnError()) return;
		const { msg, url, line, column: column$1, error: error$2 } = data;
		const event = _enhanceEventWithInitialFrame(eventFromUnknownInput(stackParser, error$2 || msg, void 0, attachStacktrace, false), url, line, column$1);
		event.level = "error";
		captureEvent(event, {
			originalException: error$2,
			mechanism: {
				handled: false,
				type: "auto.browser.global_handlers.onerror"
			}
		});
	});
}
function _installGlobalOnUnhandledRejectionHandler(client) {
	addGlobalUnhandledRejectionInstrumentationHandler((e) => {
		const { stackParser, attachStacktrace } = getOptions();
		if (getClient() !== client || shouldIgnoreOnError()) return;
		const error$2 = _getUnhandledRejectionError(e);
		const event = isPrimitive(error$2) ? _eventFromRejectionWithPrimitive(error$2) : eventFromUnknownInput(stackParser, error$2, void 0, attachStacktrace, true);
		event.level = "error";
		captureEvent(event, {
			originalException: error$2,
			mechanism: {
				handled: false,
				type: "auto.browser.global_handlers.onunhandledrejection"
			}
		});
	});
}
function _getUnhandledRejectionError(error$2) {
	if (isPrimitive(error$2)) return error$2;
	try {
		if ("reason" in error$2) return error$2.reason;
		if ("detail" in error$2 && "reason" in error$2.detail) return error$2.detail.reason;
	} catch {}
	return error$2;
}
function _eventFromRejectionWithPrimitive(reason) {
	return { exception: { values: [{
		type: "UnhandledRejection",
		value: `Non-Error promise rejection captured with value: ${String(reason)}`
	}] } };
}
function _enhanceEventWithInitialFrame(event, url, line, column$1) {
	const e = event.exception = event.exception || {};
	const ev = e.values = e.values || [];
	const ev0 = ev[0] = ev[0] || {};
	const ev0s = ev0.stacktrace = ev0.stacktrace || {};
	const ev0sf = ev0s.frames = ev0s.frames || [];
	const colno = column$1;
	const lineno = line;
	const filename = getFilenameFromUrl(url) ?? getLocationHref();
	if (ev0sf.length === 0) ev0sf.push({
		colno,
		filename,
		function: "?",
		in_app: true,
		lineno
	});
	return event;
}
function globalHandlerLog(type) {
	DEBUG_BUILD$1 && debug.log(`Global Handler attached: ${type}`);
}
function getOptions() {
	return getClient()?.getOptions() || {
		stackParser: () => [],
		attachStacktrace: false
	};
}
function getFilenameFromUrl(url) {
	if (!isString(url) || url.length === 0) return;
	if (url.startsWith("data:")) return `<${stripDataUrlContent(url, false)}>`;
	return url;
}
var httpContextIntegration = defineIntegration(() => {
	return {
		name: "HttpContext",
		preprocessEvent(event) {
			if (!WINDOW.navigator && !WINDOW.location && !WINDOW.document) return;
			const reqData = getHttpRequestData();
			const headers = {
				...reqData.headers,
				...event.request?.headers
			};
			event.request = {
				...reqData,
				...event.request,
				headers
			};
		}
	};
});
var DEFAULT_KEY = "cause";
var DEFAULT_LIMIT = 5;
var INTEGRATION_NAME$1 = "LinkedErrors";
var _linkedErrorsIntegration = ((options$1 = {}) => {
	const limit = options$1.limit || DEFAULT_LIMIT;
	const key = options$1.key || DEFAULT_KEY;
	return {
		name: INTEGRATION_NAME$1,
		preprocessEvent(event, hint$1, client) {
			applyAggregateErrorsToEvent(exceptionFromError, client.getOptions().stackParser, key, limit, event, hint$1);
		}
	};
});
var linkedErrorsIntegration = defineIntegration(_linkedErrorsIntegration);
function checkAndWarnIfIsEmbeddedBrowserExtension() {
	if (_isEmbeddedBrowserExtension()) {
		if (DEBUG_BUILD$1) consoleSandbox(() => {
			console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/");
		});
		return true;
	}
	return false;
}
function _isEmbeddedBrowserExtension() {
	if (typeof WINDOW.window === "undefined") return false;
	const _window = WINDOW;
	if (_window.nw) return false;
	if (!(_window["chrome"] || _window["browser"])?.runtime?.id) return false;
	const href = getLocationHref();
	return !(WINDOW === WINDOW.top && [
		"chrome-extension",
		"moz-extension",
		"ms-browser-extension",
		"safari-web-extension"
	].some((protocol) => href.startsWith(`${protocol}://`)));
}
function getDefaultIntegrations(_options) {
	return [
		inboundFiltersIntegration(),
		functionToStringIntegration(),
		browserApiErrorsIntegration(),
		breadcrumbsIntegration(),
		globalHandlersIntegration(),
		linkedErrorsIntegration(),
		dedupeIntegration(),
		httpContextIntegration(),
		browserSessionIntegration()
	];
}
function init(options$1 = {}) {
	const shouldDisableBecauseIsBrowserExtenstion = !options$1.skipBrowserExtensionCheck && checkAndWarnIfIsEmbeddedBrowserExtension();
	let defaultIntegrations = options$1.defaultIntegrations == null ? getDefaultIntegrations() : options$1.defaultIntegrations;
	return initAndBind(BrowserClient, {
		...options$1,
		enabled: shouldDisableBecauseIsBrowserExtenstion ? false : options$1.enabled,
		stackParser: stackParserFromStackParserOptions(options$1.stackParser || defaultStackParser),
		integrations: getIntegrationsToSetup({
			integrations: options$1.integrations,
			defaultIntegrations
		}),
		transport: options$1.transport || makeFetchTransport
	});
}
var DEFAULT_HOOKS = ["activate", "mount"];
var DEBUG_BUILD = typeof __SENTRY_DEBUG__ === "undefined" || __SENTRY_DEBUG__;
var classifyRE = /(?:^|[-_])(\w)/g;
var classify = (str) => str.replace(classifyRE, (c$1) => c$1.toUpperCase()).replace(/[-_]/g, "");
var ROOT_COMPONENT_NAME = "<Root>";
var ANONYMOUS_COMPONENT_NAME = "<Anonymous>";
var repeat = (str, n) => {
	return str.repeat(n);
};
var formatComponentName = (vm, includeFile) => {
	if (!vm) return ANONYMOUS_COMPONENT_NAME;
	if (vm.$root === vm) return ROOT_COMPONENT_NAME;
	if (!vm.$options) return ANONYMOUS_COMPONENT_NAME;
	const options$1 = vm.$options;
	let name$3 = options$1.name || options$1._componentTag || options$1.__name;
	const file = options$1.__file;
	if (!name$3 && file) {
		const match = file.match(/([^/\\]+)\.vue$/);
		if (match) name$3 = match[1];
	}
	return (name$3 ? `<${classify(name$3)}>` : ANONYMOUS_COMPONENT_NAME) + (file && includeFile !== false ? ` at ${file}` : "");
};
var generateComponentTrace = (vm) => {
	if (vm && (vm._isVue || vm.__isVue) && vm.$parent) {
		const tree = [];
		let currentRecursiveSequence = 0;
		while (vm) {
			if (tree.length > 0) {
				const last = tree[tree.length - 1];
				if (last.constructor === vm.constructor) {
					currentRecursiveSequence++;
					vm = vm.$parent;
					continue;
				} else if (currentRecursiveSequence > 0) {
					tree[tree.length - 1] = [last, currentRecursiveSequence];
					currentRecursiveSequence = 0;
				}
			}
			tree.push(vm);
			vm = vm.$parent;
		}
		return `\n\nfound in\n\n${tree.map((vm$1, i$1) => `${(i$1 === 0 ? "---> " : repeat(" ", 5 + i$1 * 2)) + (Array.isArray(vm$1) ? `${formatComponentName(vm$1[0])}... (${vm$1[1]} recursive calls)` : formatComponentName(vm$1))}`).join("\n")}`;
	}
	return `\n\n(found in ${formatComponentName(vm)})`;
};
var attachErrorHandler = (app$2, options$1) => {
	const { errorHandler: originalErrorHandler } = app$2.config;
	app$2.config.errorHandler = (error$2, vm, lifecycleHook) => {
		const metadata = {
			componentName: formatComponentName(vm, false),
			lifecycleHook,
			trace: vm ? generateComponentTrace(vm) : ""
		};
		if (options$1?.attachProps !== false && vm) {
			if (vm.$options?.propsData) metadata.propsData = vm.$options.propsData;
			else if (vm.$props) metadata.propsData = vm.$props;
		}
		setTimeout(() => {
			captureException(error$2, {
				captureContext: { contexts: { vue: metadata } },
				mechanism: {
					handled: !!originalErrorHandler,
					type: "auto.function.vue.error_handler"
				}
			});
		});
		if (typeof originalErrorHandler === "function" && app$2.config.errorHandler) originalErrorHandler.call(app$2, error$2, vm, lifecycleHook);
		else throw error$2;
	};
};
var VUE_OP = "ui.vue";
var HOOKS = {
	activate: ["activated", "deactivated"],
	create: ["beforeCreate", "created"],
	unmount: ["beforeUnmount", "unmounted"],
	destroy: ["beforeDestroy", "destroyed"],
	mount: ["beforeMount", "mounted"],
	update: ["beforeUpdate", "updated"]
};
function maybeEndRootComponentSpan(vm, timestamp, timeout) {
	if (vm.$_sentryRootComponentSpanTimer) clearTimeout(vm.$_sentryRootComponentSpanTimer);
	vm.$_sentryRootComponentSpanTimer = setTimeout(() => {
		if (vm.$root?.$_sentryRootComponentSpan) {
			vm.$root.$_sentryRootComponentSpan.end(timestamp);
			vm.$root.$_sentryRootComponentSpan = void 0;
		}
	}, timeout);
}
function findTrackComponent(trackComponents, formattedName) {
	function extractComponentName(name$3) {
		return name$3.replace(/^<([^\s]*)>(?: at [^\s]*)?$/, "$1");
	}
	return trackComponents.some((compo) => {
		return extractComponentName(formattedName) === extractComponentName(compo);
	});
}
var createTracingMixins = (options$1 = {}) => {
	const hooks = (options$1.hooks || []).concat(DEFAULT_HOOKS).filter((value, index, self) => self.indexOf(value) === index);
	const mixins = {};
	const rootComponentSpanFinalTimeout = options$1.timeout || 2e3;
	for (const operation of hooks) {
		const internalHooks = HOOKS[operation];
		if (!internalHooks) {
			DEBUG_BUILD && debug.warn(`Unknown hook: ${operation}`);
			continue;
		}
		for (const internalHook of internalHooks) mixins[internalHook] = function() {
			const isRootComponent = this.$root === this;
			if (isRootComponent) {
				this.$_sentryRootComponentSpan = this.$_sentryRootComponentSpan || startInactiveSpan({
					name: "Application Render",
					op: `${VUE_OP}.render`,
					attributes: { ["sentry.origin"]: "auto.ui.vue" },
					onlyIfParent: true
				});
				maybeEndRootComponentSpan(this, timestampInSeconds(), rootComponentSpanFinalTimeout);
			}
			const componentName = formatComponentName(this, false);
			if (!(isRootComponent || (Array.isArray(options$1.trackComponents) ? findTrackComponent(options$1.trackComponents, componentName) : options$1.trackComponents))) {
				maybeEndRootComponentSpan(this, timestampInSeconds(), rootComponentSpanFinalTimeout);
				return;
			}
			this.$_sentryComponentSpans = this.$_sentryComponentSpans || {};
			const isBeforeHook = internalHook === internalHooks[0];
			const activeSpan = this.$root?.$_sentryRootComponentSpan || getActiveSpan();
			if (isBeforeHook) {
				if (activeSpan) {
					const oldSpan = this.$_sentryComponentSpans[operation];
					if (oldSpan) oldSpan.end();
					this.$_sentryComponentSpans[operation] = startInactiveSpan({
						name: `Vue ${componentName}`,
						op: `${VUE_OP}.${operation}`,
						attributes: { [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.vue" },
						onlyIfParent: true
					});
				}
			} else {
				const span = this.$_sentryComponentSpans[operation];
				if (!span) return;
				span.end();
				maybeEndRootComponentSpan(this, timestampInSeconds(), rootComponentSpanFinalTimeout);
			}
		};
	}
	return mixins;
};
var DEFAULT_CONFIG = {
	Vue: GLOBAL_OBJ.Vue,
	attachProps: true,
	attachErrorHandler: true,
	tracingOptions: {
		hooks: DEFAULT_HOOKS,
		timeout: 2e3,
		trackComponents: false
	}
};
var INTEGRATION_NAME = "Vue";
var vueIntegration = defineIntegration((integrationOptions = {}) => {
	return {
		name: INTEGRATION_NAME,
		setup(client) {
			const options$1 = {
				...DEFAULT_CONFIG,
				...client.getOptions(),
				...integrationOptions
			};
			if (!options$1.Vue && !options$1.app) {
				consoleSandbox(() => {
					console.warn("[@sentry/vue]: Misconfigured SDK. Vue specific errors will not be captured. Update your `Sentry.init` call with an appropriate config option: `app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).");
				});
				return;
			}
			if (options$1.app) (Array.isArray(options$1.app) ? options$1.app : [options$1.app]).forEach((app$2) => vueInit(app$2, options$1));
			else if (options$1.Vue) vueInit(options$1.Vue, options$1);
		}
	};
});
var vueInit = (app$2, options$1) => {
	if (DEBUG_BUILD) {
		if (app$2._instance?.isMounted === true) consoleSandbox(() => {
			console.warn("[@sentry/vue]: Misconfigured SDK. Vue app is already mounted. Make sure to call `app.mount()` after `Sentry.init()`.");
		});
	}
	if (options$1.attachErrorHandler) attachErrorHandler(app$2, options$1);
	if (hasSpansEnabled(options$1)) app$2.mixin(createTracingMixins(options$1.tracingOptions));
};
function init$1(options$1 = {}) {
	const opts = {
		defaultIntegrations: [...getDefaultIntegrations(options$1), vueIntegration()],
		...options$1
	};
	applySdkMetadata(opts, "vue");
	return init(opts);
}
var _hoisted_1$42 = { key: 0 };
var _hoisted_2$18 = { class: "mb-s" };
var _hoisted_3$11 = { class: "mb-s" };
var _hoisted_4$9 = { class: "action-buttons" };
var importCode = "import";
var ChatEmbedModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ChatEmbedModal",
	props: { modalBus: { default: () => createEventBus() } },
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const rootStore = useRootStore();
		const workflowsStore = useWorkflowsStore();
		const tabs$4 = ref([
			{
				label: "CDN Embed",
				value: "cdn"
			},
			{
				label: "Vue Embed",
				value: "vue"
			},
			{
				label: "React Embed",
				value: "react"
			},
			{
				label: "Other",
				value: "other"
			}
		]);
		const currentTab = ref("cdn");
		const webhookNode = computed(() => {
			for (const type of [CHAT_TRIGGER_NODE_TYPE$1, WEBHOOK_NODE_TYPE$1]) {
				const node = workflowsStore.workflow.nodes.find((node$1) => node$1.type === type);
				if (node) {
					if (type === "@n8n/n8n-nodes-langchain.chatTrigger" && !node.parameters.public) continue;
					return {
						type,
						node
					};
				}
			}
			return null;
		});
		const webhookUrl = computed(() => {
			const url = `${rootStore.webhookUrl}${webhookNode.value ? `/${webhookNode.value.node.webhookId}` : ""}`;
			return webhookNode.value?.type === "@n8n/n8n-nodes-langchain.chatTrigger" ? `${url}/chat` : url;
		});
		function indentLines(code, indent = "	") {
			return code.split("\n").map((line) => `${indent}${line}`).join("\n");
		}
		const commonCode = computed(() => ({
			import: `${importCode} '@n8n/chat/style.css';
${importCode} { createChat } from '@n8n/chat';`,
			createChat: `createChat({
	webhookUrl: '${webhookUrl.value}'
});`,
			install: "npm install @n8n/chat"
		}));
		const cdnCode = computed(() => `<link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
<script type="module">
${importCode} { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

${commonCode.value.createChat}
<\/script>`);
		const vueCode = computed(() => `<script lang="ts" setup>
${importCode} { onMounted } from 'vue';
${commonCode.value.import}

onMounted(() => {
${indentLines(commonCode.value.createChat)}
});
<\/script>`);
		const reactCode = computed(() => `${importCode} { useEffect } from 'react';
${commonCode.value.import}

export const App = () => {
	useEffect(() => {
${indentLines(commonCode.value.createChat, "		")}
	}, []);

	return (<div></div>);
};

<\/script>`);
		const otherCode = computed(() => `${commonCode.value.import}

${commonCode.value.createChat}`);
		function closeDialog() {
			props.modalBus.emit("close");
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				"max-width": "960px",
				title: unref(i18n$2).baseText("chatEmbed.title"),
				"event-bus": __props.modalBus,
				name: unref(CHAT_EMBED_MODAL_KEY),
				center: true
			}, {
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.container) }, [
					createVNode(unref(N8nTabs_default), {
						modelValue: currentTab.value,
						"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => currentTab.value = $event),
						options: tabs$4.value
					}, null, 8, ["modelValue", "options"]),
					currentTab.value !== "cdn" ? (openBlock(), createElementBlock("div", _hoisted_1$42, [createBaseVNode("div", _hoisted_2$18, [createVNode(unref(N8nText_default), null, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("chatEmbed.install")), 1)]),
						_: 1
					})]), createVNode(HtmlEditor_default, {
						"model-value": commonCode.value.install,
						"is-read-only": ""
					}, null, 8, ["model-value"])])) : createCommentVNode("", true),
					createBaseVNode("div", _hoisted_3$11, [createVNode(unref(N8nText_default), null, {
						default: withCtx(() => [createVNode(unref(I18nT), {
							keypath: `chatEmbed.paste.${currentTab.value}`,
							scope: "global"
						}, {
							code: withCtx(() => [createBaseVNode("code", null, toDisplayString(unref(i18n$2).baseText(`chatEmbed.paste.${currentTab.value}.file`)), 1)]),
							_: 1
						}, 8, ["keypath"])]),
						_: 1
					})]),
					currentTab.value === "cdn" ? (openBlock(), createBlock(HtmlEditor_default, {
						key: 1,
						"model-value": cdnCode.value,
						"is-read-only": ""
					}, null, 8, ["model-value"])) : createCommentVNode("", true),
					currentTab.value === "vue" ? (openBlock(), createBlock(HtmlEditor_default, {
						key: 2,
						"model-value": vueCode.value,
						"is-read-only": ""
					}, null, 8, ["model-value"])) : createCommentVNode("", true),
					currentTab.value === "react" ? (openBlock(), createBlock(JsEditor_default, {
						key: 3,
						"model-value": reactCode.value,
						"is-read-only": ""
					}, null, 8, ["model-value"])) : createCommentVNode("", true),
					currentTab.value === "other" ? (openBlock(), createBlock(JsEditor_default, {
						key: 4,
						"model-value": otherCode.value,
						"is-read-only": ""
					}, null, 8, ["model-value"])) : createCommentVNode("", true),
					createVNode(unref(N8nText_default), null, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("chatEmbed.packageInfo.description")) + " ", 1), createVNode(unref(N8nLink_default), {
							href: unref(i18n$2).baseText("chatEmbed.url"),
							"new-window": "",
							bold: ""
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("chatEmbed.packageInfo.link")), 1)]),
							_: 1
						}, 8, ["href"])]),
						_: 1
					}),
					createVNode(unref(N8nInfoTip_default), { class: "mt-s" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("chatEmbed.chatTriggerNode")), 1)]),
						_: 1
					})
				], 2)]),
				footer: withCtx(() => [createBaseVNode("div", _hoisted_4$9, [createVNode(unref(N8nButton_default), {
					float: "right",
					label: unref(i18n$2).baseText("chatEmbed.close"),
					onClick: closeDialog
				}, null, 8, ["label"])])]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var ChatEmbedModal_vue_vue_type_style_index_0_lang_module_default = { container: "_container_1mbqn_125" };
var ChatEmbedModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ChatEmbedModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ChatEmbedModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$41 = ["textContent"];
var CommunityPackageInstallModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CommunityPackageInstallModal",
	setup(__props) {
		const telemetry$1 = useTelemetry();
		const i18n$2 = useI18n();
		const { installNode, loading: loading$2 } = useInstallNode();
		const uiStore = useUIStore();
		const modalBus = createEventBus();
		const modalData = computed(() => uiStore.modalsById[COMMUNITY_PACKAGE_INSTALL_MODAL_KEY]?.data);
		const packageName = ref(modalData.value?.packageName ?? "");
		const userAgreed = ref(false);
		const checkboxWarning = ref(false);
		const infoTextErrorMessage = ref("");
		const { getQuickConnectOptionByPackageName } = useQuickConnect();
		const quickConnect = computed(() => getQuickConnectOptionByPackageName(packageName.value));
		const openNPMPage = () => {
			telemetry$1.track("user clicked cnr browse button", { source: "cnr install modal" });
			window.open(NPM_KEYWORD_SEARCH_URL, "_blank");
		};
		const onInstallClick = async () => {
			if (!userAgreed.value) checkboxWarning.value = true;
			else {
				infoTextErrorMessage.value = "";
				const result = await installNode({
					type: "unverified",
					packageName: packageName.value,
					nodeType: modalData.value?.nodeType,
					telemetry: {
						source: "cnr settings page",
						hasQuickConnect: quickConnect.value !== void 0
					}
				});
				if (result.error && "httpStatusCode" in result.error && result.error.httpStatusCode === 400) infoTextErrorMessage.value = result.error.message;
				if (result.success) modalBus.emit("close");
			}
		};
		const onCheckboxChecked = () => {
			checkboxWarning.value = false;
		};
		const onModalClose = () => {
			return !loading$2.value;
		};
		const onInputBlur = () => {
			packageName.value = packageName.value.replaceAll("npm i ", "").replaceAll("npm install ", "");
		};
		const onMoreInfoTopClick = () => {
			telemetry$1.track("user clicked cnr docs link", { source: "install package modal top" });
		};
		const onLearnMoreLinkClick = () => {
			telemetry$1.track("user clicked cnr docs link", { source: "install package modal bottom" });
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "540px",
				name: unref(COMMUNITY_PACKAGE_INSTALL_MODAL_KEY),
				title: unref(i18n$2).baseText("settings.communityNodes.installModal.title"),
				"event-bus": unref(modalBus),
				center: true,
				"before-close": onModalClose,
				"show-close": !unref(loading$2)
			}, {
				content: withCtx(() => [!modalData.value?.hideSuggestion ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass([_ctx.$style.descriptionContainer, "p-s"])
				}, [createBaseVNode("div", null, [
					createVNode(unref(N8nText_default), null, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.communityNodes.installModal.description")), 1)]),
						_: 1
					}),
					_cache[2] || (_cache[2] = createTextVNode(" " + toDisplayString(" ") + " ", -1)),
					createVNode(unref(N8nLink_default), {
						to: unref(COMMUNITY_NODES_INSTALLATION_DOCS_URL),
						onClick: onMoreInfoTopClick
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.moreInfo")), 1)]),
						_: 1
					}, 8, ["to"])
				]), createVNode(unref(N8nButton_default), {
					label: unref(i18n$2).baseText("settings.communityNodes.browseButton.label"),
					icon: "external-link",
					class: normalizeClass(_ctx.$style.browseButton),
					onClick: openNPMPage
				}, null, 8, ["label", "class"])], 2)) : createCommentVNode("", true), createBaseVNode("div", { class: normalizeClass([_ctx.$style.formContainer, "mt-m"]) }, [
					createVNode(unref(N8nInputLabel_default), {
						class: normalizeClass(_ctx.$style.labelTooltip),
						label: unref(i18n$2).baseText("settings.communityNodes.installModal.packageName.label"),
						"tooltip-text": unref(i18n$2).baseText("settings.communityNodes.installModal.packageName.tooltip", { interpolate: { npmURL: unref(NPM_KEYWORD_SEARCH_URL) } })
					}, {
						default: withCtx(() => [createVNode(unref(Input_default), {
							modelValue: packageName.value,
							"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => packageName.value = $event),
							name: "packageNameInput",
							type: "text",
							"data-test-id": "package-name-input",
							maxlength: 214,
							placeholder: unref(i18n$2).baseText("settings.communityNodes.installModal.packageName.placeholder"),
							required: true,
							disabled: unref(loading$2) || modalData.value?.disableInput,
							onBlur: onInputBlur
						}, null, 8, [
							"modelValue",
							"placeholder",
							"disabled"
						])]),
						_: 1
					}, 8, [
						"class",
						"label",
						"tooltip-text"
					]),
					createBaseVNode("div", { class: normalizeClass([_ctx.$style.infoText, "mt-4xs"]) }, [createBaseVNode("span", {
						size: "small",
						class: normalizeClass([_ctx.$style.infoText, infoTextErrorMessage.value ? _ctx.$style.error : ""]),
						textContent: toDisplayString(infoTextErrorMessage.value)
					}, null, 10, _hoisted_1$41)], 2),
					createVNode(unref(Checkbox_default), {
						modelValue: userAgreed.value,
						"onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => userAgreed.value = $event),
						class: normalizeClass([
							_ctx.$style.checkbox,
							checkboxWarning.value ? _ctx.$style.error : "",
							"mt-l"
						]),
						disabled: unref(loading$2),
						"data-test-id": "user-agreement-checkbox",
						onChange: onCheckboxChecked
					}, {
						label: withCtx(() => [
							createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.communityNodes.installModal.checkbox.label")), 1)]),
								_: 1
							}),
							_cache[3] || (_cache[3] = createBaseVNode("br", null, null, -1)),
							createVNode(unref(N8nLink_default), {
								to: unref(COMMUNITY_NODES_RISKS_DOCS_URL),
								onClick: onLearnMoreLinkClick
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.moreInfo")), 1)]),
								_: 1
							}, 8, ["to"])
						]),
						_: 1
					}, 8, [
						"modelValue",
						"class",
						"disabled"
					])
				], 2)]),
				footer: withCtx(() => [createVNode(unref(N8nButton_default), {
					loading: unref(loading$2),
					disabled: !userAgreed.value || packageName.value === "" || unref(loading$2),
					label: unref(loading$2) ? unref(i18n$2).baseText("settings.communityNodes.installModal.installButton.label.loading") : unref(i18n$2).baseText("settings.communityNodes.installModal.installButton.label"),
					size: "large",
					float: "right",
					"data-test-id": "install-community-package-button",
					onClick: onInstallClick
				}, null, 8, [
					"loading",
					"disabled",
					"label"
				])]),
				_: 1
			}, 8, [
				"name",
				"title",
				"event-bus",
				"show-close"
			]);
		};
	}
});
var CommunityPackageInstallModal_vue_vue_type_style_index_0_lang_module_default = {
	descriptionContainer: "_descriptionContainer_1v6t2_125",
	formContainer: "_formContainer_1v6t2_140",
	checkbox: "_checkbox_1v6t2_146",
	error: "_error_1v6t2_150"
};
var CommunityPackageInstallModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CommunityPackageInstallModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CommunityPackageInstallModal_vue_vue_type_style_index_0_lang_module_default }]]);
var import_semver = /* @__PURE__ */ __toESM(require_semver(), 1);
var _hoisted_1$40 = {
	key: 0,
	class: "status active"
};
var _hoisted_2$17 = {
	key: 1,
	class: "status inactive"
};
var NodesInWorkflowTable_default = /* @__PURE__ */ __plugin_vue_export_helper_default(/* @__PURE__ */ defineComponent({
	__name: "NodesInWorkflowTable",
	props: /* @__PURE__ */ mergeModels({ data: {} }, {
		"sortBy": {},
		"sortByModifiers": {}
	}),
	emits: ["update:sortBy"],
	setup(__props) {
		const props = __props;
		const sortBy = useModel(__props, "sortBy");
		const i18n$2 = useI18n();
		const projectsStore = useProjectsStore();
		const headers = ref([
			{
				title: "Workflow",
				key: "name",
				width: 250
			},
			{
				title: "Owner",
				key: "homeProject.name",
				width: 100
			},
			{
				title: "Status",
				key: "active",
				width: 30
			}
		]);
		const sortedItems = computed(() => {
			if (!sortBy?.value?.length) return props.data;
			const [{ id, desc }] = sortBy.value;
			return [...props.data].sort((a, b) => {
				if (!a[id] || !b[id]) return 0;
				if (a[id] < b[id]) return desc ? 1 : -1;
				if (a[id] > b[id]) return desc ? -1 : 1;
				return 0;
			});
		});
		const getWorkflowLink = (workflowId) => ({
			name: VIEWS.WORKFLOW,
			params: { name: workflowId }
		});
		return (_ctx, _cache) => {
			const _component_RouterLink = resolveComponent("RouterLink");
			return openBlock(), createElementBlock("div", null, [sortedItems.value?.length ? (openBlock(), createBlock(unref(N8nDataTableServer_default), {
				key: 0,
				"sort-by": sortBy.value,
				"onUpdate:sortBy": _cache[0] || (_cache[0] = ($event) => sortBy.value = $event),
				headers: headers.value,
				items: sortedItems.value,
				"items-length": sortedItems.value.length,
				"page-sizes": [sortedItems.value.length + 1]
			}, {
				[`item.name`]: withCtx(({ item: item$2 }) => [createVNode(_component_RouterLink, {
					to: getWorkflowLink(item$2.id),
					target: "_blank"
				}, {
					default: withCtx(() => [createVNode(unref(N8nText_default), {
						class: "ellipsis",
						style: { "color": "var(--color--text)" }
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(item$2.name), 1)]),
						_: 2
					}, 1024)]),
					_: 2
				}, 1032, ["to"])]),
				[`item.homeProject.name`]: withCtx(({ item: item$2 }) => [createBaseVNode("div", null, [createVNode(ProjectCardBadge_default, {
					class: "cardBadge",
					resource: item$2,
					"resource-type": unref(ResourceType).Workflow,
					"resource-type-label": unref(i18n$2).baseText("generic.workflow").toLowerCase(),
					"personal-project": unref(projectsStore).personalProject,
					"show-badge-border": false
				}, null, 8, [
					"resource",
					"resource-type",
					"resource-type-label",
					"personal-project"
				])])]),
				[`item.active`]: withCtx(({ item: item$2 }) => [item$2.active ? (openBlock(), createElementBlock("span", _hoisted_1$40, "Active")) : (openBlock(), createElementBlock("span", _hoisted_2$17, "Inactive"))]),
				_: 2
			}, 1032, [
				"sort-by",
				"headers",
				"items",
				"items-length",
				"page-sizes"
			])) : createCommentVNode("", true)]);
		};
	}
}), [["__scopeId", "data-v-c38bafc6"]]);
var CommunityPackageManageConfirmModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CommunityPackageManageConfirmModal",
	props: {
		modalName: {},
		activePackageName: {},
		mode: {}
	},
	setup(__props) {
		const props = __props;
		const communityNodesStore = useCommunityNodesStore();
		const nodeTypesStore = useNodeTypesStore();
		const settingsStore = useSettingsStore();
		const workflowsListStore = useWorkflowsListStore();
		const modalBus = createEventBus();
		const toast = useToast();
		const i18n$2 = useI18n();
		const telemetry$1 = useTelemetry();
		const loading$2 = ref(false);
		const workflowsWithPackageNodes = ref([]);
		const isUsingVerifiedAndUnverifiedPackages = settingsStore.isCommunityNodesFeatureEnabled && settingsStore.isUnverifiedPackagesEnabled;
		const isUsingVerifiedPackagesOnly = settingsStore.isCommunityNodesFeatureEnabled && !settingsStore.isUnverifiedPackagesEnabled;
		const communityStorePackage = computed(() => communityNodesStore.installedPackages[props.activePackageName]);
		const updateVersion = computed(() => {
			return settingsStore.isUnverifiedPackagesEnabled ? communityStorePackage.value.updateAvailable : nodeTypeStorePackage.value?.npmVersion;
		});
		const nodeTypeStorePackage = ref();
		const isLatestPackageVerified = ref(true);
		const packageVersion = ref(communityStorePackage.value.updateAvailable ?? "");
		const includedNodes = computed(() => {
			return communityStorePackage.value.installedNodes.map((node) => node.name).join(", ");
		});
		const getModalContent = computed(() => {
			if (props.mode === COMMUNITY_PACKAGE_MANAGE_ACTIONS.UNINSTALL) return {
				title: i18n$2.baseText("settings.communityNodes.confirmModal.uninstall.title"),
				message: i18n$2.baseText("settings.communityNodes.confirmModal.includedNodes", { interpolate: { nodes: includedNodes.value } }),
				description: workflowsWithPackageNodes.value.length ? i18n$2.baseText("settings.communityNodes.confirmModal.uninstall.description") : i18n$2.baseText("settings.communityNodes.confirmModal.noWorkflowsUsingNodes"),
				buttonLabel: i18n$2.baseText("settings.communityNodes.confirmModal.uninstall.buttonLabel"),
				buttonLoadingLabel: i18n$2.baseText("settings.communityNodes.confirmModal.uninstall.buttonLoadingLabel")
			};
			return {
				title: i18n$2.baseText("settings.communityNodes.confirmModal.update.title"),
				message: i18n$2.baseText("settings.communityNodes.confirmModal.includedNodes", { interpolate: { nodes: includedNodes.value } }),
				description: workflowsWithPackageNodes.value.length ? i18n$2.baseText("settings.communityNodes.confirmModal.update.description") : i18n$2.baseText("settings.communityNodes.confirmModal.noWorkflowsUsingNodes"),
				warning: i18n$2.baseText("settings.communityNodes.confirmModal.update.warning"),
				buttonLabel: i18n$2.baseText("settings.communityNodes.confirmModal.update.buttonLabel"),
				buttonLoadingLabel: i18n$2.baseText("settings.communityNodes.confirmModal.update.buttonLoadingLabel")
			};
		});
		const onModalClose = () => {
			return !loading$2.value;
		};
		const onConfirmButtonClick = async () => {
			if (props.mode === COMMUNITY_PACKAGE_MANAGE_ACTIONS.UNINSTALL) await onUninstall();
			else if (props.mode === COMMUNITY_PACKAGE_MANAGE_ACTIONS.UPDATE) await onUpdate();
		};
		const onUninstall = async () => {
			try {
				telemetry$1.track("user started cnr package deletion", {
					package_name: communityStorePackage.value.packageName,
					package_node_names: communityStorePackage.value.installedNodes.map((node) => node.name),
					package_version: communityStorePackage.value.installedVersion,
					package_author: communityStorePackage.value.authorName,
					package_author_email: communityStorePackage.value.authorEmail
				});
				loading$2.value = true;
				await communityNodesStore.uninstallPackage(props.activePackageName);
				await Promise.all([useNodeTypesStore().getNodeTypes(), useNodeTypesStore().fetchCommunityNodePreviews()]);
				toast.showMessage({
					title: i18n$2.baseText("settings.communityNodes.messages.uninstall.success.title"),
					type: "success"
				});
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("settings.communityNodes.messages.uninstall.error"));
			} finally {
				loading$2.value = false;
				modalBus.emit("close");
			}
		};
		const onUpdate = async () => {
			try {
				telemetry$1.track("user started cnr package update", {
					package_name: communityStorePackage.value.packageName,
					package_node_names: communityStorePackage.value.installedNodes.map((node) => node.name),
					package_version_current: communityStorePackage.value.installedVersion,
					package_version_new: communityStorePackage.value.updateAvailable,
					package_author: communityStorePackage.value.authorName,
					package_author_email: communityStorePackage.value.authorEmail
				});
				loading$2.value = true;
				if (settingsStore.isUnverifiedPackagesEnabled) await communityNodesStore.updatePackage(props.activePackageName);
				else if (settingsStore.isCommunityNodesFeatureEnabled) await communityNodesStore.updatePackage(props.activePackageName, updateVersion.value, nodeTypeStorePackage.value?.checksum);
				else throw new Error("Community nodes feature is not correctly enabled.");
				await useNodeTypesStore().getNodeTypes();
				toast.showMessage({
					title: i18n$2.baseText("settings.communityNodes.messages.update.success.title"),
					message: i18n$2.baseText("settings.communityNodes.messages.update.success.message", { interpolate: {
						packageName: props.activePackageName,
						version: updateVersion.value ?? ""
					} }),
					type: "success"
				});
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("settings.communityNodes.messages.update.error.title"));
			} finally {
				loading$2.value = false;
				modalBus.emit("close");
			}
		};
		async function fetchPackageInfo(packageName) {
			await nodeTypesStore.loadNodeTypesIfNotLoaded();
			const nodeType = nodeTypesStore.visibleNodeTypes.find((nodeType$1) => nodeType$1.name.includes(packageName));
			if (nodeType) nodeTypeStorePackage.value = await nodeTypesStore.getCommunityNodeAttributes(nodeType?.name) ?? void 0;
		}
		function setIsVerifiedLatestPackage() {
			if (isUsingVerifiedAndUnverifiedPackages && nodeTypeStorePackage.value?.npmVersion && communityStorePackage.value.updateAvailable) isLatestPackageVerified.value = import_semver.default.eq(nodeTypeStorePackage.value.npmVersion, communityStorePackage.value.updateAvailable);
		}
		function setPackageVersion() {
			if (isUsingVerifiedPackagesOnly) packageVersion.value = nodeTypeStorePackage.value?.npmVersion ?? packageVersion.value;
		}
		const onClick = async () => {
			useUIStore().closeModal(COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY);
		};
		onMounted(async () => {
			if (props.activePackageName) await fetchPackageInfo(props.activePackageName);
			if (communityStorePackage.value?.installedNodes.length) {
				const nodeTypes = communityStorePackage.value.installedNodes.map((node) => node.type);
				workflowsWithPackageNodes.value = (await workflowsListStore.fetchWorkflowsWithNodesIncluded(nodeTypes))?.data ?? [];
			}
			setIsVerifiedLatestPackage();
			setPackageVersion();
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "640px",
				name: unref(COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY),
				title: getModalContent.value.title,
				"event-bus": unref(modalBus),
				center: true,
				"show-close": !loading$2.value,
				"before-close": onModalClose
			}, {
				content: withCtx(() => [
					createVNode(unref(N8nText_default), {
						color: "text-dark",
						bold: true
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(getModalContent.value.message), 1)]),
						_: 1
					}),
					!isLatestPackageVerified.value && getModalContent.value.warning ? (openBlock(), createBlock(unref(N8nNotice_default), {
						key: 0,
						"data-test-id": "communityPackageManageConfirmModal-warning",
						content: getModalContent.value.warning
					}, null, 8, ["content"])) : createCommentVNode("", true),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.descriptionContainer) }, [createVNode(unref(N8nText_default), {
						size: "medium",
						color: "text-base"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(getModalContent.value.description), 1)]),
						_: 1
					})], 2),
					workflowsWithPackageNodes.value?.length ? (openBlock(), createBlock(NodesInWorkflowTable_default, {
						key: 1,
						data: workflowsWithPackageNodes.value
					}, null, 8, ["data"])) : createCommentVNode("", true)
				]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footerContainer) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					label: unref(i18n$2).baseText("settings.communityNodes.confirmModal.cancel"),
					size: "large",
					"data-test-id": "close-button",
					onClick
				}, null, 8, ["label"]), createVNode(unref(N8nButton_default), {
					loading: loading$2.value,
					disabled: loading$2.value,
					label: loading$2.value ? getModalContent.value.buttonLoadingLabel : getModalContent.value.buttonLabel,
					size: "large",
					onClick: onConfirmButtonClick
				}, null, 8, [
					"loading",
					"disabled",
					"label"
				])], 2)]),
				_: 1
			}, 8, [
				"name",
				"title",
				"event-bus",
				"show-close"
			]);
		};
	}
});
var CommunityPackageManageConfirmModal_vue_vue_type_style_index_0_lang_module_default = {
	descriptionContainer: "_descriptionContainer_jy4l8_125",
	footerContainer: "_footerContainer_jy4l8_131",
	descriptionIcon: "_descriptionIcon_jy4l8_137",
	descriptionText: "_descriptionText_jy4l8_142"
};
var CommunityPackageManageConfirmModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CommunityPackageManageConfirmModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CommunityPackageManageConfirmModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$39 = ["href"];
var CommunityPlusEnrollmentModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CommunityPlusEnrollmentModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const toast = useToast();
		const usageStore = useUsageStore();
		const telemetry$1 = useTelemetry();
		const usersStore = useUsersStore();
		const isLoading = ref(false);
		const valid = ref(false);
		const email = ref(usersStore.currentUser?.email ?? "");
		const validationRules = ref([{ name: "email" }]);
		const validators = ref({ email: { validate: (value) => {
			if (typeof value !== "string") return false;
			if (!VALID_EMAIL_REGEX.test(value)) return {
				message: "settings.users.invalidEmailError",
				options: { interpolate: { email: value } }
			};
			return false;
		} } });
		const modalBus = createEventBus();
		const closeModal = () => {
			telemetry$1.track("User skipped community plus");
			modalBus.emit("close");
			props.data?.closeCallback?.();
		};
		const confirm = async () => {
			if (!valid.value || isLoading.value) return;
			isLoading.value = true;
			try {
				const { title: title$7, text: text$2 } = await usageStore.registerCommunityEdition(email.value);
				closeModal();
				toast.showMessage({
					title: title$7 ?? i18n$2.baseText("communityPlusModal.success.title"),
					message: text$2 ?? i18n$2.baseText("communityPlusModal.success.message", { interpolate: { email: email.value } }),
					type: "success",
					duration: 0
				});
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("communityPlusModal.error.title"));
			} finally {
				isLoading.value = false;
			}
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "500px",
				name: props.modalName,
				"event-bus": unref(modalBus),
				"show-close": false,
				"close-on-click-modal": false,
				"close-on-press-escape": false
			}, {
				content: withCtx(() => [createBaseVNode("div", null, [
					createVNode(unref(N8nText_default), {
						tag: "h1",
						align: "center",
						size: "xlarge",
						class: "mb-m"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(__props.data?.customHeading ?? unref(i18n$2).baseText("communityPlusModal.title")), 1)]),
						_: 1
					}),
					createVNode(unref(N8nText_default), { tag: "p" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("communityPlusModal.description")), 1)]),
						_: 1
					}),
					createBaseVNode("ul", { class: normalizeClass(_ctx.$style.features) }, [
						createBaseVNode("li", null, [_cache[2] || (_cache[2] = createBaseVNode("i", null, "", -1)), createVNode(unref(N8nText_default), null, {
							default: withCtx(() => [createBaseVNode("strong", null, toDisplayString(unref(i18n$2).baseText("communityPlusModal.features.debugging.title")), 1), createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("communityPlusModal.features.debugging.description")), 1)]),
							_: 1
						})]),
						createBaseVNode("li", null, [_cache[3] || (_cache[3] = createBaseVNode("i", null, "", -1)), createVNode(unref(N8nText_default), null, {
							default: withCtx(() => [createBaseVNode("strong", null, toDisplayString(unref(i18n$2).baseText("communityPlusModal.features.execution.title")), 1), createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("communityPlusModal.features.execution.description")), 1)]),
							_: 1
						})]),
						createBaseVNode("li", null, [_cache[4] || (_cache[4] = createBaseVNode("i", null, " ", -1)), createVNode(unref(N8nText_default), null, {
							default: withCtx(() => [createBaseVNode("strong", null, toDisplayString(unref(i18n$2).baseText("communityPlusModal.features.folders.title")), 1), createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("communityPlusModal.features.folders.description")), 1)]),
							_: 1
						})])
					], 2),
					createVNode(unref(N8nFormInput_default), {
						id: "email",
						modelValue: email.value,
						"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => email.value = $event),
						label: unref(i18n$2).baseText("communityPlusModal.input.email.label"),
						type: "email",
						name: "email",
						"label-size": "small",
						"tag-size": "small",
						required: "",
						"show-required-asterisk": true,
						"validate-on-blur": false,
						"validation-rules": validationRules.value,
						validators: validators.value,
						onValidate: _cache[1] || (_cache[1] = ($event) => valid.value = $event),
						onKeyup: withKeys(confirm, ["enter"])
					}, null, 8, [
						"modelValue",
						"label",
						"validation-rules",
						"validators"
					])
				])]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.notice) }, [createVNode(unref(N8nText_default), {
					size: "xsmall",
					tag: "span"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("communityPlusModal.notice")) + " ", 1), createBaseVNode("a", {
						href: unref(COMMUNITY_PLUS_DOCS_URL),
						target: "_blank"
					}, toDisplayString(unref(i18n$2).baseText("generic.moreInfo")), 9, _hoisted_1$39)]),
					_: 1
				})], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.buttons) }, [createVNode(unref(N8nButton_default), {
					variant: "ghost",
					class: normalizeClass(_ctx.$style.skip),
					disabled: isLoading.value,
					onClick: closeModal
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("communityPlusModal.button.skip")), 1)]),
					_: 1
				}, 8, ["class", "disabled"]), createVNode(unref(N8nButton_default), {
					disabled: !valid.value || isLoading.value,
					variant: "solid",
					onClick: confirm
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("communityPlusModal.button.confirm")), 1)]),
					_: 1
				}, 8, ["disabled"])], 2)]),
				_: 1
			}, 8, ["name", "event-bus"]);
		};
	}
});
var CommunityPlusEnrollmentModal_vue_vue_type_style_index_0_lang_module_default = {
	notice: "_notice_vkgua_125",
	features: "_features_vkgua_129",
	buttons: "_buttons_vkgua_148"
};
var CommunityPlusEnrollmentModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CommunityPlusEnrollmentModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CommunityPlusEnrollmentModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$38 = {
	key: 0,
	"data-test-id": "node-auth-type-selector"
};
var AuthTypeSelector_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "AuthTypeSelector",
	props: { credentialType: {} },
	emits: ["authTypeChanged"],
	setup(__props, { expose: __expose, emit: __emit }) {
		const emit = __emit;
		const nodeTypesStore = useNodeTypesStore();
		const ndvStore = useNDVStore();
		const i18n$2 = useI18n();
		const props = __props;
		const selected$2 = ref("");
		const authRelatedFieldsValues = ref({});
		onMounted(() => {
			if (activeNodeType.value?.credentials) {
				const credentialsForType = activeNodeType.value.credentials.find((cred) => cred.name === props.credentialType.name) || null;
				selected$2.value = getAuthTypeForNodeCredential(activeNodeType.value, credentialsForType)?.value || "";
			}
			authRelatedFields.value.forEach((field) => {
				authRelatedFieldsValues.value = {
					...authRelatedFieldsValues.value,
					[field.name]: field.default
				};
			});
		});
		const activeNodeType = computed(() => {
			const activeNode = ndvStore.activeNode;
			if (activeNode) return nodeTypesStore.getNodeType(activeNode.type, activeNode.typeVersion);
			return null;
		});
		const authOptions = computed(() => {
			return getNodeAuthOptions(activeNodeType.value, ndvStore.activeNode?.typeVersion);
		});
		const filteredNodeAuthOptions = computed(() => {
			return authOptions.value.filter((option) => shouldShowAuthOption(option));
		});
		const authRelatedFields = computed(() => {
			const nodeAuthFields = getNodeAuthFields(activeNodeType.value);
			return activeNodeType.value?.properties.filter((prop) => isAuthRelatedParameter(nodeAuthFields, prop)) || [];
		});
		function shouldShowAuthOption(option) {
			if (authRelatedFields.value.length === 0) return true;
			let shouldDisplay = false;
			Object.keys(authRelatedFieldsValues.value).forEach((fieldName) => {
				if (option.displayOptions?.show) {
					if (option.displayOptions.show[fieldName]?.includes(authRelatedFieldsValues.value[fieldName])) {
						shouldDisplay = true;
						return;
					}
				}
			});
			return shouldDisplay;
		}
		function onAuthTypeChange(newType) {
			emit("authTypeChanged", typeof newType === "string" ? newType : String(newType));
		}
		function valueChanged(data) {
			authRelatedFieldsValues.value = {
				...authRelatedFieldsValues.value,
				[data.name]: data.value
			};
		}
		__expose({ onAuthTypeChange });
		return (_ctx, _cache) => {
			return filteredNodeAuthOptions.value.length > 0 ? (openBlock(), createElementBlock("div", _hoisted_1$38, [
				(openBlock(true), createElementBlock(Fragment, null, renderList(authRelatedFields.value, (parameter) => {
					return openBlock(), createElementBlock("div", {
						key: parameter.name,
						class: "mb-l"
					}, [createVNode(ParameterInputFull_default, {
						parameter,
						value: authRelatedFieldsValues.value[parameter.name] || parameter.default,
						path: parameter.name,
						"display-options": false,
						onUpdate: valueChanged
					}, null, 8, [
						"parameter",
						"value",
						"path"
					])]);
				}), 128)),
				createBaseVNode("div", null, [createVNode(unref(N8nInputLabel_default), {
					label: unref(i18n$2).baseText("credentialEdit.credentialConfig.authTypeSelectorLabel"),
					"tooltip-text": unref(i18n$2).baseText("credentialEdit.credentialConfig.authTypeSelectorTooltip"),
					required: true
				}, null, 8, ["label", "tooltip-text"])]),
				(openBlock(true), createElementBlock(Fragment, null, renderList(filteredNodeAuthOptions.value, (prop) => {
					return openBlock(), createBlock(unref(ElRadio), {
						key: prop.value,
						modelValue: selected$2.value,
						"onUpdate:modelValue": [_cache[0] || (_cache[0] = ($event) => selected$2.value = $event), onAuthTypeChange],
						label: prop.value,
						class: normalizeClass(_ctx.$style.authRadioButton),
						border: ""
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(prop.name), 1)]),
						_: 2
					}, 1032, [
						"modelValue",
						"label",
						"class"
					]);
				}), 128))
			])) : createCommentVNode("", true);
		};
	}
});
var AuthTypeSelector_vue_vue_type_style_index_0_lang_module_default = { authRadioButton: "_authRadioButton_11kxo_125" };
var AuthTypeSelector_default = /* @__PURE__ */ __plugin_vue_export_helper_default(AuthTypeSelector_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": AuthTypeSelector_vue_vue_type_style_index_0_lang_module_default }]]);
var Banner_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "Banner",
	props: {
		theme: {},
		message: {},
		buttonLabel: { default: "" },
		buttonLoadingLabel: { default: "" },
		buttonTitle: { default: "" },
		details: { default: "" },
		buttonLoading: {
			type: Boolean,
			default: false
		}
	},
	emits: ["click"],
	setup(__props, { emit: __emit }) {
		const emit = __emit;
		const expanded = ref(false);
		const expand = () => {
			expanded.value = true;
		};
		const onClick = () => {
			expanded.value = false;
			emit("click");
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(ElTag), {
				type: __props.theme,
				"disable-transitions": true,
				class: normalizeClass(_ctx.$style.container)
			}, {
				default: withCtx(() => [
					createVNode(unref(N8nIcon_default), {
						icon: __props.theme === "success" ? "circle-check" : "triangle-alert",
						class: normalizeClass(__props.theme === "success" ? _ctx.$style.icon : _ctx.$style.dangerIcon)
					}, null, 8, ["icon", "class"]),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.banner) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.content) }, [createBaseVNode("div", null, [createBaseVNode("span", { class: normalizeClass(__props.theme === "success" ? _ctx.$style.message : _ctx.$style.dangerMessage) }, toDisplayString(__props.message) + "\xA0 ", 3), __props.details && !expanded.value ? (openBlock(), createBlock(unref(N8nLink_default), {
						key: 0,
						bold: true,
						size: "small",
						onClick: expand
					}, {
						default: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style.moreDetails) }, "More details", 2)]),
						_: 1
					})) : createCommentVNode("", true)])], 2), _ctx.$slots.button ? renderSlot(_ctx.$slots, "button", { key: 0 }) : __props.buttonLabel ? (openBlock(), createBlock(unref(N8nButton_default), {
						key: 1,
						variant: "outline",
						label: __props.buttonLoading && __props.buttonLoadingLabel ? __props.buttonLoadingLabel : __props.buttonLabel,
						title: __props.buttonTitle,
						loading: __props.buttonLoading,
						size: "small",
						onClick: withModifiers(onClick, ["stop"])
					}, null, 8, [
						"label",
						"title",
						"loading"
					])) : createCommentVNode("", true)], 2),
					expanded.value ? (openBlock(), createElementBlock("div", {
						key: 0,
						class: normalizeClass(_ctx.$style.details)
					}, toDisplayString(__props.details), 3)) : createCommentVNode("", true)
				]),
				_: 3
			}, 8, ["type", "class"]);
		};
	}
});
var Banner_vue_vue_type_style_index_0_lang_module_default = {
	icon: "_icon_co75j_125",
	dangerIcon: "_dangerIcon_co75j_133 _icon_co75j_125",
	container: "_container_co75j_138",
	message: "_message_co75j_145",
	dangerMessage: "_dangerMessage_co75j_152 _message_co75j_145",
	banner: "_banner_co75j_157",
	content: "_content_co75j_162",
	details: "_details_co75j_169 _message_co75j_145",
	moreDetails: "_moreDetails_co75j_176"
};
var Banner_default = /* @__PURE__ */ __plugin_vue_export_helper_default(Banner_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": Banner_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$37 = {
	key: 0,
	class: "fixed-collection-wrapper",
	"data-test-id": "fixed-collection-wrapper"
};
var ParameterInputExpanded_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ParameterInputExpanded",
	props: {
		parameter: {},
		value: { type: [
			String,
			Number,
			Boolean,
			null,
			Object,
			Array
		] },
		nodeValues: { default: () => ({}) },
		showValidationWarnings: { type: Boolean },
		documentationUrl: { default: void 0 },
		eventSource: { default: void 0 },
		label: { default: () => ({ size: "small" }) }
	},
	emits: ["update"],
	setup(__props, { emit: __emit }) {
		const LazyFixedCollectionParameter = defineAsyncComponent(async () => await __vitePreload(() => import("./FixedCollectionParameter-DjZT94-B.js"), __vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71])));
		const props = __props;
		const emit = __emit;
		const focused = ref(false);
		const blurredEver = ref(false);
		const menuExpanded = ref(false);
		const eventBus = ref(createEventBus());
		const uiStore = useUIStore();
		const workflowsStore = useWorkflowsStore();
		const i18n$2 = useI18n();
		const telemetry$1 = useTelemetry();
		const { activeCredentialType } = storeToRefs(uiStore);
		const isFixedCollectionType = computed(() => {
			return props.parameter.type === "fixedCollection";
		});
		const hiddenIssuesInputs = computed(() => {
			if (!isFixedCollectionType.value) return [];
			if (!props.parameter.options?.length) return [];
			const names = [];
			for (const option of props.parameter.options) if (isINodePropertyCollection(option)) names.push(...option.values.map((value) => value.name));
			return names;
		});
		const fixedCollectionValues = computed(() => {
			if (!isFixedCollectionType.value || !props.value) return {};
			return props.value;
		});
		const showRequiredErrors = computed(() => {
			if (!props.parameter.required) return false;
			if (blurredEver.value || props.showValidationWarnings) {
				if (props.parameter.type === "string") return !props.value;
				if (props.parameter.type === "number") {
					if (typeof props.value === "string" && props.value.startsWith("=")) return false;
					return typeof props.value !== "number";
				}
			}
			return false;
		});
		const hint$1 = computed(() => {
			if (isValueExpression$1.value) return null;
			return i18n$2.credText(activeCredentialType.value).hint(props.parameter);
		});
		const isValueExpression$1 = computed(() => {
			return isValueExpression(props.parameter, props.value);
		});
		function onFocus() {
			focused.value = true;
		}
		function onBlur() {
			blurredEver.value = true;
			focused.value = false;
		}
		function onMenuExpanded(expanded) {
			menuExpanded.value = expanded;
		}
		function optionSelected(command) {
			eventBus.value.emit("optionSelected", command);
		}
		function valueChanged(parameterData) {
			let name$3 = parameterData.name;
			if (!isFixedCollectionType.value) name$3 = name$3.split(".").pop() ?? name$3;
			emit("update", {
				name: name$3,
				value: parameterData.value
			});
		}
		function onDocumentationUrlClick() {
			telemetry$1.track("User clicked credential modal docs link", {
				docs_link: props.documentationUrl,
				source: "field",
				workflow_id: workflowsStore.workflowId
			});
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", null, [createVNode(unref(N8nInputLabel_default), {
				label: unref(i18n$2).credText(unref(activeCredentialType)).inputLabelDisplayName(__props.parameter),
				"tooltip-text": unref(i18n$2).credText(unref(activeCredentialType)).inputLabelDescription(__props.parameter),
				required: __props.parameter.required,
				"show-tooltip": focused.value,
				"show-options": menuExpanded.value,
				"data-test-id": __props.parameter.name,
				size: __props.label.size
			}, {
				options: withCtx(() => [createVNode(ParameterOptions_default, {
					parameter: __props.parameter,
					value: __props.value,
					"is-read-only": false,
					"show-options": !isFixedCollectionType.value,
					"show-expression-selector": !isFixedCollectionType.value,
					"is-value-expression": isValueExpression$1.value,
					"onUpdate:modelValue": optionSelected,
					onMenuExpanded
				}, null, 8, [
					"parameter",
					"value",
					"show-options",
					"show-expression-selector",
					"is-value-expression"
				])]),
				default: withCtx(() => [!isFixedCollectionType.value ? (openBlock(), createBlock(ParameterInputWrapper_default, {
					key: 0,
					ref: "param",
					"input-size": "large",
					parameter: __props.parameter,
					"model-value": __props.value,
					path: __props.parameter.name,
					"hide-issues": true,
					"documentation-url": __props.documentationUrl,
					"error-highlight": showRequiredErrors.value,
					"is-for-credential": true,
					"event-source": __props.eventSource,
					hint: !showRequiredErrors.value && hint$1.value ? hint$1.value : "",
					"event-bus": eventBus.value,
					onFocus,
					onBlur,
					onTextInput: valueChanged,
					onUpdate: valueChanged
				}, null, 8, [
					"parameter",
					"model-value",
					"path",
					"documentation-url",
					"error-highlight",
					"event-source",
					"hint",
					"event-bus"
				])) : createCommentVNode("", true), showRequiredErrors.value ? (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.errors)
				}, [createVNode(unref(N8nText_default), {
					color: "danger",
					size: "small"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("parameterInputExpanded.thisFieldIsRequired")) + " ", 1), __props.documentationUrl ? (openBlock(), createBlock(unref(N8nLink_default), {
						key: 0,
						to: __props.documentationUrl,
						size: "small",
						underline: true,
						onClick: onDocumentationUrlClick
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("parameterInputExpanded.openDocs")), 1)]),
						_: 1
					}, 8, ["to"])) : createCommentVNode("", true)]),
					_: 1
				})], 2)) : createCommentVNode("", true)]),
				_: 1
			}, 8, [
				"label",
				"tooltip-text",
				"required",
				"show-tooltip",
				"show-options",
				"data-test-id",
				"size"
			]), isFixedCollectionType.value ? (openBlock(), createElementBlock("div", _hoisted_1$37, [createVNode(unref(LazyFixedCollectionParameter), {
				parameter: __props.parameter,
				values: fixedCollectionValues.value,
				"node-values": __props.nodeValues,
				path: __props.parameter.name,
				"hidden-issues-inputs": hiddenIssuesInputs.value,
				onValueChanged: valueChanged
			}, null, 8, [
				"parameter",
				"values",
				"node-values",
				"path",
				"hidden-issues-inputs"
			])])) : createCommentVNode("", true)]);
		};
	}
});
var ParameterInputExpanded_vue_vue_type_style_index_0_lang_module_default = {
	errors: "_errors_jmusx_125",
	hint: "_hint_jmusx_129"
};
var ParameterInputExpanded_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ParameterInputExpanded_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ParameterInputExpanded_vue_vue_type_style_index_0_lang_module_default }]]);
var CredentialInputs_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CredentialInputs",
	props: {
		credentialProperties: {},
		credentialData: {},
		documentationUrl: {},
		showValidationWarnings: { type: Boolean }
	},
	emits: ["update"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const credentialDataValues = computed(() => props.credentialData);
		const emit = __emit;
		function valueChanged(parameterData) {
			emit("update", parameterData);
		}
		return (_ctx, _cache) => {
			return __props.credentialProperties.length ? (openBlock(), createElementBlock("div", {
				key: 0,
				class: normalizeClass(_ctx.$style.container),
				onKeydown: _cache[1] || (_cache[1] = withModifiers(() => {}, ["stop"]))
			}, [(openBlock(true), createElementBlock(Fragment, null, renderList(__props.credentialProperties, (parameter) => {
				return openBlock(), createElementBlock("form", {
					key: parameter.name,
					autocomplete: "off",
					"data-test-id": "credential-connection-parameter",
					onSubmit: _cache[0] || (_cache[0] = withModifiers(() => {}, ["prevent"]))
				}, [parameter.type === "notice" ? (openBlock(), createBlock(unref(N8nNotice_default), {
					key: 0,
					content: parameter.displayName
				}, null, 8, ["content"])) : (openBlock(), createBlock(ParameterInputExpanded_default, {
					key: 1,
					parameter,
					value: credentialDataValues.value[parameter.name],
					"node-values": credentialDataValues.value,
					"documentation-url": __props.documentationUrl,
					"show-validation-warnings": __props.showValidationWarnings,
					label: { size: "medium" },
					"event-source": "credentials",
					onUpdate: valueChanged
				}, null, 8, [
					"parameter",
					"value",
					"node-values",
					"documentation-url",
					"show-validation-warnings"
				]))], 32);
			}), 128))], 34)) : createCommentVNode("", true);
		};
	}
});
var CredentialInputs_vue_vue_type_style_index_0_lang_module_default = { container: "_container_55ujx_125" };
var CredentialInputs_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CredentialInputs_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CredentialInputs_vue_vue_type_style_index_0_lang_module_default }]]);
var OauthButton_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "OauthButton",
	props: { isGoogleOAuthType: { type: Boolean } },
	setup(__props) {
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { class: normalizeClass(_ctx.$style.container) }, [__props.isGoogleOAuthType ? (openBlock(), createBlock(GoogleAuthButton_default, { key: 0 })) : (openBlock(), createBlock(unref(N8nButton_default), {
				key: 1,
				label: unref(i18n$2).baseText("credentialEdit.oAuthButton.connectMyAccount"),
				size: "large"
			}, null, 8, ["label"]))], 2);
		};
	}
});
var OauthButton_vue_vue_type_style_index_0_lang_module_default = { container: "_container_8ywgs_125" };
var OauthButton_default = /* @__PURE__ */ __plugin_vue_export_helper_default(OauthButton_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": OauthButton_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$36 = { key: 1 };
var _hoisted_2$16 = { class: "ml-4xs" };
var _hoisted_3$10 = ["textContent"];
var CredentialConfig_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CredentialConfig",
	props: {
		mode: {},
		credentialType: {},
		credentialProperties: {},
		credentialData: {},
		credentialId: { default: "" },
		credentialPermissions: { default: () => ({}) },
		parentTypes: { default: () => [] },
		showValidationWarning: {
			type: Boolean,
			default: false
		},
		authError: { default: "" },
		testedSuccessfully: { type: Boolean },
		isOAuthType: { type: Boolean },
		allOAuth2BasePropertiesOverridden: { type: Boolean },
		isOAuthConnected: { type: Boolean },
		isRetesting: { type: Boolean },
		requiredPropertiesFilled: { type: Boolean },
		showAuthTypeSelector: { type: Boolean },
		isManaged: { type: Boolean },
		isDynamicCredentialsEnabled: { type: Boolean },
		isResolvable: { type: Boolean },
		isNewCredential: { type: Boolean }
	},
	emits: [
		"update",
		"authTypeChanged",
		"scrollToTop",
		"retest",
		"oauth",
		"update:isResolvable"
	],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const credentialsStore = useCredentialsStore();
		const ndvStore = useNDVStore();
		const rootStore = useRootStore();
		const uiStore = useUIStore();
		const workflowsStore = useWorkflowsStore();
		const assistantStore = useAssistantStore();
		const chatPanelStore = useChatPanelStore();
		const i18n$2 = useI18n();
		const telemetry$1 = useTelemetry();
		onBeforeMount(async () => {
			uiStore.activeCredentialType = props.credentialType.name;
			if (rootStore.defaultLocale === "en") return;
			const key = `n8n-nodes-base.credentials.${props.credentialType.name}`;
			if (i18n$2.exists(key)) return;
			const credTranslation = await credentialsStore.getCredentialTranslation(props.credentialType.name);
			if (!credTranslation) return;
			addCredentialTranslation({ [props.credentialType.name]: credTranslation }, rootStore.defaultLocale);
		});
		const appName = computed(() => {
			if (!props.credentialType) return "";
			return getAppNameFromCredType(props.credentialType.displayName) || i18n$2.baseText("credentialEdit.credentialConfig.theServiceYouReConnectingTo");
		});
		const credentialTypeName = computed(() => props.credentialType?.name);
		const credentialOwnerName = computed(() => credentialsStore.getCredentialOwnerNameById(`${props.credentialId}`));
		const documentationUrl = computed(() => {
			const type = props.credentialType;
			const activeNode = ndvStore.activeNode;
			const isCommunityNode = activeNode ? isCommunityPackageName(activeNode.type) : false;
			const docUrl = type?.documentationUrl;
			if (!docUrl) return "";
			let url;
			if (docUrl.startsWith("https://") || docUrl.startsWith("http://")) {
				url = new URL(docUrl);
				if (url.hostname !== "docs.n8n.io") return docUrl;
			} else if (isCommunityNode) return "";
			else url = new URL(`${BUILTIN_CREDENTIALS_DOCS_URL}${docUrl}/`);
			if (url.hostname === "docs.n8n.io") {
				url.searchParams.set("utm_source", "n8n_app");
				url.searchParams.set("utm_medium", "credential_settings");
				url.searchParams.set("utm_campaign", "create_new_credentials_modal");
			}
			return url.href;
		});
		const isGoogleOAuthType = computed(() => credentialTypeName.value === "googleOAuth2Api" || props.parentTypes.includes("googleOAuth2Api"));
		const oAuthCallbackUrl = computed(() => {
			const oauthType = credentialTypeName.value === "oAuth2Api" || props.parentTypes.includes("oAuth2Api") ? "oauth2" : "oauth1";
			return rootStore.OAuthCallbackUrls[oauthType];
		});
		const showOAuthSuccessBanner = computed(() => {
			return props.isOAuthType && props.requiredPropertiesFilled && props.isOAuthConnected && !props.authError;
		});
		const isMissingCredentials = computed(() => props.credentialType === null);
		const isNewCredential = computed(() => props.mode === "new" && !props.credentialId);
		const isAskAssistantAvailable = computed(() => documentationUrl.value && documentationUrl.value.includes("docs.n8n.io") && props.credentialProperties.length && props.credentialPermissions.update && !(props.isOAuthType && props.requiredPropertiesFilled) && assistantStore.isAssistantEnabled);
		const assistantAlreadyAsked = computed(() => {
			return assistantStore.isCredTypeActive(props.credentialType);
		});
		function onDataChange(event) {
			emit("update", event);
		}
		function onDocumentationUrlClick() {
			telemetry$1.track("User clicked credential modal docs link", {
				docs_link: documentationUrl.value,
				credential_type: credentialTypeName.value,
				source: "modal",
				workflow_id: workflowsStore.workflowId
			});
		}
		function onAuthTypeChange(newType) {
			emit("authTypeChanged", newType);
		}
		async function onAskAssistantClick() {
			if (!assistantStore.isSessionEnded) {
				uiStore.openModalWithData({
					name: NEW_ASSISTANT_SESSION_MODAL,
					data: { context: { credHelp: { credType: props.credentialType } } }
				});
				return;
			}
			await chatPanelStore.openWithCredHelp(props.credentialType);
		}
		watch(showOAuthSuccessBanner, (newValue, oldValue) => {
			if (newValue && !oldValue) emit("scrollToTop");
		});
		return (_ctx, _cache) => {
			return __props.isManaged ? (openBlock(), createBlock(unref(N8nCallout_default), {
				key: 0,
				theme: "warning",
				icon: "triangle-alert"
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("freeAi.credits.credentials.edit")), 1)]),
				_: 1
			})) : (openBlock(), createElementBlock("div", _hoisted_1$36, [createBaseVNode("div", {
				class: normalizeClass(_ctx.$style.config),
				"data-test-id": "node-credentials-config-container"
			}, [
				createVNode(FreeAiCreditsCallout_default, { "credential-type-name": __props.credentialType?.name }, null, 8, ["credential-type-name"]),
				documentationUrl.value && __props.credentialProperties.length ? (openBlock(), createBlock(unref(N8nNotice_default), {
					key: 0,
					theme: "warning"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialConfig.needHelpFillingOutTheseFields")) + " ", 1), createBaseVNode("span", _hoisted_2$16, [createVNode(unref(N8nLink_default), {
						to: documentationUrl.value,
						size: "small",
						bold: "",
						onClick: onDocumentationUrlClick
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialConfig.openDocs")), 1)]),
						_: 1
					}, 8, ["to"])])]),
					_: 1
				})) : createCommentVNode("", true),
				withDirectives(createVNode(Banner_default, {
					theme: "danger",
					message: unref(i18n$2).baseText(`credentialEdit.credentialConfig.pleaseCheckTheErrorsBelow${__props.credentialPermissions.update ? "" : ".sharee"}`, { interpolate: { owner: credentialOwnerName.value } })
				}, null, 8, ["message"]), [[vShow, __props.showValidationWarning]]),
				__props.authError && !__props.showValidationWarning ? (openBlock(), createBlock(Banner_default, {
					key: 1,
					theme: "danger",
					message: unref(i18n$2).baseText(`credentialEdit.credentialConfig.couldntConnectWithTheseSettings${__props.credentialPermissions.update ? "" : ".sharee"}`, { interpolate: { owner: credentialOwnerName.value } }),
					details: __props.authError,
					"button-label": unref(i18n$2).baseText("credentialEdit.credentialConfig.retry"),
					"button-loading-label": "Retrying",
					"button-title": unref(i18n$2).baseText("credentialEdit.credentialConfig.retryCredentialTest"),
					"button-loading": __props.isRetesting,
					onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("retest"))
				}, null, 8, [
					"message",
					"details",
					"button-label",
					"button-title",
					"button-loading"
				])) : createCommentVNode("", true),
				withDirectives(createVNode(Banner_default, {
					theme: "success",
					message: unref(i18n$2).baseText("credentialEdit.credentialConfig.accountConnected"),
					"button-label": unref(i18n$2).baseText("credentialEdit.credentialConfig.reconnect"),
					"button-title": unref(i18n$2).baseText("credentialEdit.credentialConfig.reconnectOAuth2Credential"),
					"data-test-id": "oauth-connect-success-banner",
					onClick: _cache[2] || (_cache[2] = ($event) => _ctx.$emit("oauth"))
				}, createSlots({ _: 2 }, [isGoogleOAuthType.value ? {
					name: "button",
					fn: withCtx(() => [createBaseVNode("p", {
						class: normalizeClass(_ctx.$style.googleReconnectLabel),
						textContent: toDisplayString(`${unref(i18n$2).baseText("credentialEdit.credentialConfig.reconnect")}:`)
					}, null, 10, _hoisted_3$10), createVNode(GoogleAuthButton_default, { onClick: _cache[1] || (_cache[1] = ($event) => _ctx.$emit("oauth")) })]),
					key: "0"
				} : void 0]), 1032, [
					"message",
					"button-label",
					"button-title"
				]), [[vShow, showOAuthSuccessBanner.value && !__props.showValidationWarning]]),
				withDirectives(createVNode(Banner_default, {
					theme: "success",
					message: unref(i18n$2).baseText("credentialEdit.credentialConfig.connectionTestedSuccessfully"),
					"button-label": unref(i18n$2).baseText("credentialEdit.credentialConfig.retry"),
					"button-loading-label": unref(i18n$2).baseText("credentialEdit.credentialConfig.retrying"),
					"button-title": unref(i18n$2).baseText("credentialEdit.credentialConfig.retryCredentialTest"),
					"button-loading": __props.isRetesting,
					"data-test-id": "credentials-config-container-test-success",
					onClick: _cache[3] || (_cache[3] = ($event) => _ctx.$emit("retest"))
				}, null, 8, [
					"message",
					"button-label",
					"button-loading-label",
					"button-title",
					"button-loading"
				]), [[vShow, __props.testedSuccessfully && !__props.showValidationWarning]]),
				__props.isDynamicCredentialsEnabled && __props.isOAuthType && (__props.credentialPermissions.create && isNewCredential.value || __props.credentialPermissions.update) ? (openBlock(), createElementBlock("div", {
					key: 2,
					class: normalizeClass(_ctx.$style.dynamicCredentials),
					"data-test-id": "dynamic-credentials-section"
				}, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.dynamicCredentialsRow) }, [
					createVNode(unref(ElSwitch), {
						"model-value": __props.isResolvable,
						"data-test-id": "dynamic-credentials-toggle",
						"onUpdate:modelValue": _cache[4] || (_cache[4] = (val) => _ctx.$emit("update:isResolvable", Boolean(val)))
					}, null, 8, ["model-value"]),
					createVNode(unref(N8nText_default), { size: "small" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialConfig.dynamicCredentials.title")), 1)]),
						_: 1
					}),
					createVNode(unref(N8nTooltip_default), { placement: "top" }, {
						content: withCtx(() => [createBaseVNode("div", null, toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialConfig.dynamicCredentials.infoTip")), 1)]),
						default: withCtx(() => [createVNode(unref(N8nIcon_default), {
							icon: "circle-help",
							size: "small",
							color: "text-light"
						})]),
						_: 1
					})
				], 2)], 2)) : createCommentVNode("", true),
				__props.credentialPermissions.create && isNewCredential.value || __props.credentialPermissions.update ? (openBlock(), createElementBlock(Fragment, { key: 3 }, [
					__props.showAuthTypeSelector && isNewCredential.value ? (openBlock(), createBlock(AuthTypeSelector_default, {
						key: 0,
						"credential-type": __props.credentialType,
						onAuthTypeChanged: onAuthTypeChange
					}, null, 8, ["credential-type"])) : createCommentVNode("", true),
					isAskAssistantAvailable.value ? (openBlock(), createElementBlock("div", {
						key: 1,
						class: normalizeClass(_ctx.$style.askAssistantButton),
						"data-test-id": "credential-edit-ask-assistant-button"
					}, [createVNode(unref(InlineAskAssistantButton_default), {
						asked: assistantAlreadyAsked.value,
						onClick: onAskAssistantClick
					}, null, 8, ["asked"]), _cache[6] || (_cache[6] = createBaseVNode("span", null, "for setup instructions", -1))], 2)) : createCommentVNode("", true),
					__props.isOAuthType && !__props.allOAuth2BasePropertiesOverridden ? (openBlock(), createBlock(CopyInput_default, {
						key: 2,
						label: unref(i18n$2).baseText("credentialEdit.credentialConfig.oAuthRedirectUrl"),
						value: oAuthCallbackUrl.value,
						"copy-button-text": unref(i18n$2).baseText("credentialEdit.credentialConfig.clickToCopy"),
						hint: unref(i18n$2).baseText("credentialEdit.credentialConfig.subtitle", { interpolate: { appName: appName.value } }),
						"toast-title": unref(i18n$2).baseText("credentialEdit.credentialConfig.redirectUrlCopiedToClipboard"),
						"redact-value": true
					}, null, 8, [
						"label",
						"value",
						"copy-button-text",
						"hint",
						"toast-title"
					])) : createCommentVNode("", true)
				], 64)) : (openBlock(), createBlock(EnterpriseEdition_ee_default, {
					key: 4,
					features: [unref(EnterpriseEditionFeature).Sharing]
				}, {
					default: withCtx(() => [createBaseVNode("div", null, [createVNode(unref(N8nInfoTip_default), { bold: false }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialEdit.info.sharee", { interpolate: { credentialOwnerName: credentialOwnerName.value } })), 1)]),
						_: 1
					})])]),
					_: 1
				}, 8, ["features"])),
				__props.credentialType && (__props.credentialPermissions.create && isNewCredential.value || __props.credentialPermissions.update) ? (openBlock(), createBlock(CredentialInputs_default, {
					key: 5,
					"credential-data": __props.credentialData,
					"credential-properties": __props.credentialProperties,
					"documentation-url": documentationUrl.value,
					"show-validation-warnings": __props.showValidationWarning,
					onUpdate: onDataChange
				}, null, 8, [
					"credential-data",
					"credential-properties",
					"documentation-url",
					"show-validation-warnings"
				])) : createCommentVNode("", true),
				__props.isOAuthType && __props.requiredPropertiesFilled && !__props.isOAuthConnected && (__props.credentialPermissions.create && isNewCredential.value || __props.credentialPermissions.update) ? (openBlock(), createBlock(OauthButton_default, {
					key: 6,
					"is-google-o-auth-type": isGoogleOAuthType.value,
					"data-test-id": "oauth-connect-button",
					onClick: _cache[5] || (_cache[5] = ($event) => _ctx.$emit("oauth"))
				}, null, 8, ["is-google-o-auth-type"])) : createCommentVNode("", true),
				isMissingCredentials.value ? (openBlock(), createBlock(unref(N8nText_default), {
					key: 7,
					color: "text-base",
					size: "medium"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialConfig.missingCredentialType")), 1)]),
					_: 1
				})) : createCommentVNode("", true),
				createVNode(EnterpriseEdition_ee_default, { features: [unref(EnterpriseEditionFeature).ExternalSecrets] }, {
					fallback: withCtx(() => [createVNode(unref(N8nInfoTip_default), { class: "mt-s" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialConfig.externalSecrets")) + " ", 1), createVNode(unref(N8nLink_default), {
							bold: "",
							to: unref(i18n$2).baseText("settings.externalSecrets.docs"),
							size: "small"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialConfig.externalSecrets.moreInfo")), 1)]),
							_: 1
						}, 8, ["to"])]),
						_: 1
					})]),
					_: 1
				}, 8, ["features"])
			], 2)]));
		};
	}
});
var CredentialConfig_vue_vue_type_style_index_0_lang_module_default = {
	config: "_config_1hbof_125",
	googleReconnectLabel: "_googleReconnectLabel_1hbof_133",
	askAssistantButton: "_askAssistantButton_1hbof_137",
	dynamicCredentials: "_dynamicCredentials_1hbof_146",
	dynamicCredentialsRow: "_dynamicCredentialsRow_1hbof_155",
	dynamicCredentialsNotice: "_dynamicCredentialsNotice_1hbof_161"
};
var CredentialConfig_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CredentialConfig_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CredentialConfig_vue_vue_type_style_index_0_lang_module_default }]]);
var CredentialInfo_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CredentialInfo",
	props: { currentCredential: {} },
	setup(__props) {
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { class: normalizeClass(_ctx.$style.container) }, [
				__props.currentCredential ? (openBlock(), createBlock(unref(ElRow), { key: 0 }, {
					default: withCtx(() => [createVNode(unref(ElCol), {
						span: 8,
						class: normalizeClass(_ctx.$style.label)
					}, {
						default: withCtx(() => [createVNode(unref(N8nText_default), {
							compact: true,
							bold: true
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialInfo.created")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"]), createVNode(unref(ElCol), {
						span: 16,
						class: normalizeClass(_ctx.$style.valueLabel)
					}, {
						default: withCtx(() => [createVNode(unref(N8nText_default), { compact: true }, {
							default: withCtx(() => [createVNode(TimeAgo_default, {
								date: __props.currentCredential.createdAt,
								capitalize: true
							}, null, 8, ["date"])]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"])]),
					_: 1
				})) : createCommentVNode("", true),
				__props.currentCredential ? (openBlock(), createBlock(unref(ElRow), { key: 1 }, {
					default: withCtx(() => [createVNode(unref(ElCol), {
						span: 8,
						class: normalizeClass(_ctx.$style.label)
					}, {
						default: withCtx(() => [createVNode(unref(N8nText_default), {
							compact: true,
							bold: true
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialInfo.lastModified")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"]), createVNode(unref(ElCol), {
						span: 16,
						class: normalizeClass(_ctx.$style.valueLabel)
					}, {
						default: withCtx(() => [createVNode(unref(N8nText_default), { compact: true }, {
							default: withCtx(() => [createVNode(TimeAgo_default, {
								date: __props.currentCredential.updatedAt,
								capitalize: true
							}, null, 8, ["date"])]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"])]),
					_: 1
				})) : createCommentVNode("", true),
				__props.currentCredential ? (openBlock(), createBlock(unref(ElRow), { key: 2 }, {
					default: withCtx(() => [createVNode(unref(ElCol), {
						span: 8,
						class: normalizeClass(_ctx.$style.label)
					}, {
						default: withCtx(() => [createVNode(unref(N8nText_default), {
							compact: true,
							bold: true
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialInfo.id")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"]), createVNode(unref(ElCol), {
						span: 16,
						class: normalizeClass(_ctx.$style.valueLabel)
					}, {
						default: withCtx(() => [createVNode(unref(N8nText_default), { compact: true }, {
							default: withCtx(() => [createTextVNode(toDisplayString(__props.currentCredential.id), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"])]),
					_: 1
				})) : createCommentVNode("", true)
			], 2);
		};
	}
});
var CredentialInfo_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_11e3x_125",
	label: "_label_11e3x_129",
	accessLabel: "_accessLabel_11e3x_134 _label_11e3x_129",
	valueLabel: "_valueLabel_11e3x_139"
};
var CredentialInfo_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CredentialInfo_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CredentialInfo_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$35 = { key: 0 };
var _hoisted_2$15 = { key: 1 };
var CredentialSharing_ee_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CredentialSharing.ee",
	props: {
		credentialId: {},
		credentialData: {},
		credentialPermissions: {},
		credential: { default: null },
		modalBus: {},
		isSharedGlobally: {
			type: Boolean,
			default: false
		}
	},
	emits: ["update:modelValue", "update:shareWithAllUsers"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const usersStore = useUsersStore();
		const uiStore = useUIStore();
		const settingsStore = useSettingsStore();
		const projectsStore = useProjectsStore();
		const rolesStore = useRolesStore();
		const pageRedirectionHelper = usePageRedirectionHelper();
		const sharedWithProjects = ref([...props.credential?.sharedWithProjects ?? []]);
		const isSharingEnabled = computed(() => settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.Sharing]);
		const credentialOwnerName = computed(() => {
			const { name: name$3, email } = splitName(props.credential?.homeProject?.name ?? "");
			return name$3 ?? email ?? "";
		});
		const credentialDataHomeProject = computed(() => {
			const credentialContainsProjectSharingData = (data) => {
				return "homeProject" in data;
			};
			return props.credentialData && credentialContainsProjectSharingData(props.credentialData) ? props.credentialData.homeProject : void 0;
		});
		const projects = computed(() => {
			return projectsStore.projects.filter((project) => project.id !== props.credential?.homeProject?.id && project.id !== credentialDataHomeProject.value?.id);
		});
		const homeProject = computed(() => props.credential?.homeProject ?? credentialDataHomeProject.value);
		const isHomeTeamProject = computed(() => homeProject.value?.type === ProjectTypes.Team);
		const isPersonalSpaceRestricted = computed(() => homeProject.value?.type === ProjectTypes.Personal && homeProject.value?.id === projectsStore.personalProject?.id && !props.credentialPermissions.share);
		const credentialRoleTranslations = computed(() => {
			return { "credential:user": i18n$2.baseText("credentialEdit.credentialSharing.role.user") };
		});
		const credentialRoles = computed(() => {
			return rolesStore.processedCredentialRoles.map(({ slug, scopes, licensed, description: description$8, systemRole, roleType }) => ({
				slug,
				displayName: credentialRoleTranslations.value[slug],
				scopes,
				licensed,
				description: description$8,
				systemRole,
				roleType
			}));
		});
		const sharingSelectPlaceholder = computed(() => projectsStore.teamProjects.length ? i18n$2.baseText("projects.sharing.select.placeholder.project") : i18n$2.baseText("projects.sharing.select.placeholder.user"));
		const canShareGlobally = computed(() => {
			return getResourcePermissions(usersStore.currentUser?.globalScopes).credential?.shareGlobally ?? false;
		});
		watch(sharedWithProjects, (changedSharedWithProjects) => {
			emit("update:modelValue", changedSharedWithProjects);
		}, { deep: true });
		onMounted(async () => {
			await projectsStore.getAllProjects();
		});
		function goToUpgrade() {
			pageRedirectionHelper.goToUpgrade("credential_sharing", "upgrade-credentials-sharing");
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { class: normalizeClass(_ctx.$style.container) }, [!isSharingEnabled.value ? (openBlock(), createElementBlock("div", _hoisted_1$35, [createVNode(unref(N8nActionBox_default), {
				heading: unref(i18n$2).baseText(unref(uiStore).contextBasedTranslationKeys.credentials.sharing.unavailable.title),
				description: unref(i18n$2).baseText(unref(uiStore).contextBasedTranslationKeys.credentials.sharing.unavailable.description),
				"button-text": unref(i18n$2).baseText(unref(uiStore).contextBasedTranslationKeys.credentials.sharing.unavailable.button),
				"onClick:button": goToUpgrade
			}, null, 8, [
				"heading",
				"description",
				"button-text"
			])])) : (openBlock(), createElementBlock("div", _hoisted_2$15, [__props.credentialPermissions.share || isPersonalSpaceRestricted.value ? (openBlock(), createBlock(unref(N8nInfoTip_default), {
				key: 0,
				bold: false,
				class: "mb-s"
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialSharing.info.owner")), 1)]),
				_: 1
			})) : isHomeTeamProject.value ? (openBlock(), createBlock(unref(N8nInfoTip_default), {
				key: 1,
				bold: false,
				class: "mb-s"
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialSharing.info.sharee.team")), 1)]),
				_: 1
			})) : (openBlock(), createBlock(unref(N8nInfoTip_default), {
				key: 2,
				bold: false,
				class: "mb-s"
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialSharing.info.sharee.personal", { interpolate: { credentialOwnerName: credentialOwnerName.value } })), 1)]),
				_: 1
			})), createVNode(ProjectSharing_default, {
				modelValue: sharedWithProjects.value,
				"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => sharedWithProjects.value = $event),
				projects: projects.value,
				roles: credentialRoles.value,
				"home-project": homeProject.value,
				readonly: !__props.credentialPermissions.share,
				static: !__props.credentialPermissions.share,
				"disabled-tooltip": isPersonalSpaceRestricted.value ? unref(i18n$2).baseText("credentialEdit.credentialSharing.info.personalSpaceRestricted") : void 0,
				placeholder: sharingSelectPlaceholder.value,
				"can-share-globally": canShareGlobally.value,
				"is-shared-globally": __props.isSharedGlobally,
				"onUpdate:shareWithAllUsers": _cache[1] || (_cache[1] = ($event) => emit("update:shareWithAllUsers", $event))
			}, null, 8, [
				"modelValue",
				"projects",
				"roles",
				"home-project",
				"readonly",
				"static",
				"disabled-tooltip",
				"placeholder",
				"can-share-globally",
				"is-shared-globally"
			])]))], 2);
		};
	}
});
var CredentialSharing_ee_vue_vue_type_style_index_0_lang_module_default = { container: "_container_1f7z1_125" };
var CredentialSharing_ee_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CredentialSharing_ee_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CredentialSharing_ee_vue_vue_type_style_index_0_lang_module_default }]]);
var SaveButton_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "SaveButton",
	props: {
		saved: { type: Boolean },
		isSaving: {
			type: Boolean,
			default: false
		},
		disabled: {
			type: Boolean,
			default: false
		},
		variant: { default: "solid" },
		withShortcut: {
			type: Boolean,
			default: false
		},
		shortcutTooltip: {},
		savingLabel: {}
	},
	emits: ["click"],
	setup(__props, { emit: __emit }) {
		const emit = __emit;
		const props = __props;
		const i18n$2 = useI18n();
		const saveButtonLabel = computed(() => {
			return props.isSaving ? props.savingLabel ?? i18n$2.baseText("saveButton.saving") : i18n$2.baseText("saveButton.save");
		});
		const shortcutTooltipLabel = computed(() => {
			return props.shortcutTooltip ?? i18n$2.baseText("saveButton.save");
		});
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("span", {
				class: normalizeClass(_ctx.$style.container),
				"data-test-id": "save-button"
			}, [__props.saved ? (openBlock(), createElementBlock("span", {
				key: 0,
				class: normalizeClass(_ctx.$style.saved),
				onClick: _cache[0] || (_cache[0] = withModifiers(() => {}, ["prevent", "stop"]))
			}, toDisplayString(unref(i18n$2).baseText("saveButton.saved")), 3)) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [__props.withShortcut ? (openBlock(), createBlock(KeyboardShortcutTooltip_default, {
				key: 0,
				label: shortcutTooltipLabel.value,
				shortcut: {
					keys: ["s"],
					metaKey: true
				},
				placement: "bottom"
			}, {
				default: withCtx(() => [createVNode(unref(N8nButton_default), {
					label: saveButtonLabel.value,
					loading: __props.isSaving,
					disabled: __props.disabled,
					class: normalizeClass(_ctx.$style.button),
					variant: __props.variant,
					onClick: _cache[1] || (_cache[1] = ($event) => emit("click"))
				}, null, 8, [
					"label",
					"loading",
					"disabled",
					"class",
					"variant"
				])]),
				_: 1
			}, 8, ["label"])) : (openBlock(), createBlock(unref(N8nButton_default), {
				key: 1,
				label: saveButtonLabel.value,
				loading: __props.isSaving,
				disabled: __props.disabled,
				class: normalizeClass(_ctx.$style.button),
				variant: __props.variant,
				onClick: _cache[2] || (_cache[2] = ($event) => emit("click"))
			}, null, 8, [
				"label",
				"loading",
				"disabled",
				"class",
				"variant"
			]))], 64))], 2);
		};
	}
});
var SaveButton_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_1f4xz_125",
	button: "_button_1f4xz_132",
	saved: "_saved_1f4xz_136"
};
var SaveButton_default = /* @__PURE__ */ __plugin_vue_export_helper_default(SaveButton_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": SaveButton_vue_vue_type_style_index_0_lang_module_default }]]);
var import_get$1 = /* @__PURE__ */ __toESM(require_get(), 1);
var CredentialEdit_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CredentialEdit",
	props: {
		modalName: {},
		activeId: { default: void 0 },
		mode: { default: "new" }
	},
	setup(__props) {
		const props = __props;
		const credentialsStore = useCredentialsStore();
		const ndvStore = useNDVStore();
		const settingsStore = useSettingsStore();
		const uiStore = useUIStore();
		const workflowsStore = useWorkflowsStore();
		const workflowState = injectWorkflowState();
		const nodeTypesStore = useNodeTypesStore();
		const projectsStore = useProjectsStore();
		const nodeHelpers = useNodeHelpers();
		const externalHooks = useExternalHooks();
		const toast = useToast();
		const message$2 = useMessage();
		const i18n$2 = useI18n();
		const telemetry$1 = useTelemetry();
		const router = useRouter();
		const rootStore = useRootStore();
		const { isEnabled: isDynamicCredentialsEnabled } = useDynamicCredentials();
		const activeTab = ref("connection");
		const authError = ref("");
		const credentialId = ref("");
		const credentialName = ref("");
		const selectedCredential = ref("");
		const credentialData = ref({});
		const currentCredential = ref(null);
		const modalBus = ref(createEventBus());
		const isDeleting = ref(false);
		const isSaving = ref(false);
		const isTesting = ref(false);
		const hasUnsavedChanges = ref(false);
		const isSaved = ref(false);
		const loading$2 = ref(false);
		const showValidationWarning = ref(false);
		const testedSuccessfully = ref(false);
		const isRetesting = ref(false);
		const hasUserSpecifiedName = ref(false);
		const isSharedWithChanged = ref(false);
		const requiredCredentials = ref(false);
		const contentRef = ref();
		const isSharedGlobally = ref(false);
		const isResolvable = ref(false);
		const activeNodeType = computed(() => {
			const activeNode = ndvStore.activeNode;
			if (activeNode) return nodeTypesStore.getNodeType(activeNode.type, activeNode.typeVersion);
			return null;
		});
		const selectedCredentialType = computed(() => {
			if (props.mode !== "new") return null;
			if (selectedCredential.value !== "") return credentialsStore.getCredentialTypeByName(selectedCredential.value) ?? null;
			else if (requiredCredentials.value) {
				const nodeAuthOptions = getNodeAuthOptions(activeNodeType.value);
				if (nodeAuthOptions.length > 0 && activeNodeType.value?.credentials) return getNodeCredentialForSelectedAuthType(activeNodeType.value, nodeAuthOptions[0].value);
				else return activeNodeType.value?.credentials ? activeNodeType.value.credentials[0] : null;
			}
			return null;
		});
		const credentialType = computed(() => {
			if (!credentialTypeName.value) return null;
			const type = credentialsStore.getCredentialTypeByName(credentialTypeName.value);
			if (!type) return null;
			return {
				...type,
				properties: getCredentialProperties(credentialTypeName.value)
			};
		});
		const credentialTypeName = computed(() => {
			if (props.mode === "edit") {
				if (currentCredential.value) return currentCredential.value.type;
				return null;
			}
			if (selectedCredentialType.value) return selectedCredentialType.value.name;
			return `${props.activeId}`;
		});
		const isEditingManagedCredential = computed(() => {
			if (!props.activeId) return false;
			return credentialsStore.getCredentialById(props.activeId)?.isManaged ?? false;
		});
		const isCredentialTestable = computed(() => {
			if (isOAuthType.value || !requiredPropertiesFilled.value) return false;
			if (credentialProperties.value.some((prop) => {
				const value = credentialData.value[prop.name];
				return typeof value === "string" && isExpression(value) && !isTestableExpression(value);
			})) return false;
			return !!nodesWithAccess.value.filter((node) => {
				if (node.credentials) return !!node.credentials.filter((credential) => {
					return credential.name === credentialTypeName.value && credential.testedBy;
				}).length;
				return false;
			}).length || !!credentialType.value && !!credentialType.value.test;
		});
		const nodesWithAccess = computed(() => {
			if (credentialTypeName.value) return credentialsStore.getNodesWithAccess(credentialTypeName.value);
			return [];
		});
		const parentTypes = computed(() => {
			if (credentialTypeName.value) return getParentTypes(credentialTypeName.value);
			return [];
		});
		const isOAuthType = computed(() => {
			return !!credentialTypeName.value && ((credentialTypeName.value === "oAuth2Api" || parentTypes.value.includes("oAuth2Api")) && (credentialData.value.grantType === "authorizationCode" || credentialData.value.grantType === "pkce") || credentialTypeName.value === "oAuth1Api" || parentTypes.value.includes("oAuth1Api"));
		});
		const allOAuth2BasePropertiesOverridden = computed(() => {
			if (credentialType.value?.__overwrittenProperties) return credentialType.value.__overwrittenProperties.includes("clientId") && credentialType.value.__overwrittenProperties.includes("clientSecret");
			return false;
		});
		const isOAuthConnected = computed(() => isOAuthType.value && !!credentialData.value.oauthTokenData);
		const credentialProperties = computed(() => {
			const type = credentialType.value;
			if (!type) return [];
			const properties = type.properties.filter((propertyData) => {
				if (!displayCredentialParameter(propertyData)) return false;
				return !type.__overwrittenProperties?.includes(propertyData.name);
			});
			if (properties.every((p) => p.type === "notice")) return [];
			return properties;
		});
		const requiredPropertiesFilled = computed(() => {
			for (const property of credentialProperties.value) {
				if (property.required !== true) continue;
				const credentialProperty = credentialData.value[property.name];
				if (property.type === "string" && !credentialProperty) return false;
				if (property.type === "number") {
					const containsExpression = typeof credentialProperty === "string" && credentialProperty.startsWith("=");
					if (typeof credentialProperty !== "number" && !containsExpression) return false;
				}
			}
			return true;
		});
		const credentialPermissions = computed(() => {
			return getResourcePermissions(currentCredential.value?.scopes ?? homeProject.value?.scopes).credential;
		});
		const sidebarItems = computed(() => {
			return [
				{
					id: "connection",
					label: i18n$2.baseText("credentialEdit.credentialEdit.connection"),
					position: "top"
				},
				{
					id: "sharing",
					label: i18n$2.baseText("credentialEdit.credentialEdit.sharing"),
					position: "top"
				},
				{
					id: "details",
					label: i18n$2.baseText("credentialEdit.credentialEdit.details"),
					position: "top"
				}
			];
		});
		const defaultCredentialTypeName = computed(() => {
			let defaultName = credentialTypeName.value;
			if (!defaultName || defaultName === "null") {
				if (activeNodeType.value?.credentials && activeNodeType.value.credentials.length > 0) defaultName = activeNodeType.value.credentials[0].name;
			}
			return defaultName ?? "";
		});
		const showSaveButton = computed(() => {
			return (props.mode === "new" || hasUnsavedChanges.value || isSaved.value) && (credentialPermissions.value.create ?? credentialPermissions.value.update);
		});
		const showSharingContent = computed(() => activeTab.value === "sharing" && !!credentialType.value);
		const homeProject = computed(() => {
			const { currentProject, personalProject } = projectsStore;
			return currentProject ?? personalProject;
		});
		const isNewCredential = computed(() => props.mode === "new" && !credentialId.value);
		onMounted(async () => {
			requiredCredentials.value = isCredentialModalState(uiStore.modalsById["editCredential"]) && uiStore.modalsById["editCredential"].showAuthSelector === true;
			if (props.mode === "new" && credentialTypeName.value) {
				credentialName.value = await credentialsStore.getNewCredentialName({ credentialTypeName: defaultCredentialTypeName.value });
				credentialData.value = {
					...credentialData.value,
					...homeProject.value ? { homeProject: homeProject.value } : {}
				};
			} else await loadCurrentCredential();
			if (credentialType.value) {
				for (const property of credentialType.value.properties) if (!credentialData.value.hasOwnProperty(property.name) && !credentialType.value.__overwrittenProperties?.includes(property.name)) credentialData.value = {
					...credentialData.value,
					[property.name]: property.default
				};
			}
			await externalHooks.run("credentialsEdit.credentialModalOpened", {
				credentialType: credentialTypeName.value,
				isEditingCredential: props.mode === "edit",
				activeNode: ndvStore.activeNode
			});
			setTimeout(async () => {
				if (credentialId.value) if (!requiredPropertiesFilled.value && credentialPermissions.value.update) showValidationWarning.value = true;
				else await retestCredential();
			}, 0);
			loading$2.value = false;
		});
		async function beforeClose() {
			let keepEditing = false;
			if (hasUnsavedChanges.value) {
				const displayName = credentialType.value ? credentialType.value.displayName : "";
				keepEditing = await message$2.confirm(i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.message", { interpolate: { credentialDisplayName: displayName } }), i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.headline"), {
					cancelButtonText: i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.cancelButtonText"),
					confirmButtonText: i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.confirmButtonText")
				}) === MODAL_CONFIRM;
			} else if (credentialPermissions.value.update && isOAuthType.value && !isOAuthConnected.value) keepEditing = await message$2.confirm(i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.message"), i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.headline"), {
				cancelButtonText: i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.cancelButtonText"),
				confirmButtonText: i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.confirmButtonText")
			}) === MODAL_CONFIRM;
			if (!keepEditing) {
				uiStore.activeCredentialType = null;
				return true;
			} else if (!requiredPropertiesFilled.value) {
				showValidationWarning.value = true;
				scrollToTop();
			} else if (isOAuthType.value) scrollToBottom();
			return false;
		}
		function displayCredentialParameter(parameter) {
			if (parameter.type === "hidden") return false;
			if (parameter.displayOptions?.hideOnCloud && settingsStore.isCloudDeployment) return false;
			if (parameter.displayOptions === void 0) return true;
			return nodeHelpers.displayParameter(credentialData.value, parameter, "", null);
		}
		function getCredentialProperties(name$3) {
			const credentialTypeData = credentialsStore.getCredentialTypeByName(name$3);
			if (!credentialTypeData) return [];
			if (credentialTypeData.extends === void 0) return credentialTypeData.properties;
			const combineProperties = [];
			for (const credentialsTypeName of credentialTypeData.extends) mergeNodeProperties(combineProperties, getCredentialProperties(credentialsTypeName));
			mergeNodeProperties(combineProperties, credentialTypeData.properties);
			return combineProperties;
		}
		function removePropertiesWithEmptyStrings(data) {
			const copy = structuredClone(data);
			Object.entries(copy).forEach(([key, value]) => {
				if (value === "") delete copy[key];
			});
			return copy;
		}
		async function loadCurrentCredential() {
			credentialId.value = props.activeId ?? "";
			try {
				const currentCredentials = await credentialsStore.getCredentialData({ id: credentialId.value });
				if (!currentCredentials) throw new Error(i18n$2.baseText("credentialEdit.credentialEdit.couldNotFindCredentialWithId") + ":" + credentialId.value);
				currentCredential.value = currentCredentials;
				credentialData.value = removePropertiesWithEmptyStrings(currentCredentials.data || {});
				if (currentCredentials.sharedWithProjects) credentialData.value = {
					...credentialData.value,
					sharedWithProjects: currentCredentials.sharedWithProjects
				};
				if (currentCredentials.homeProject) credentialData.value = {
					...credentialData.value,
					homeProject: currentCredentials.homeProject
				};
				credentialName.value = currentCredentials.name;
				isSharedGlobally.value = "isGlobal" in currentCredentials && typeof currentCredentials.isGlobal === "boolean" ? currentCredentials.isGlobal : false;
				isResolvable.value = "isResolvable" in currentCredentials && typeof currentCredentials.isResolvable === "boolean" ? currentCredentials.isResolvable : false;
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("credentialEdit.credentialEdit.showError.loadCredential.title"));
				closeDialog();
				return;
			}
		}
		function onTabSelect(tab$4) {
			activeTab.value = tab$4;
			const credType = credentialType.value ? credentialType.value.name : "";
			const activeNode = ndvStore.activeNode;
			telemetry$1.track("User viewed credential tab", {
				credential_type: credType,
				node_type: activeNode ? activeNode.type : null,
				tab: tab$4,
				workflow_id: workflowsStore.workflowId,
				credential_id: credentialId.value,
				sharing_enabled: EnterpriseEditionFeature.Sharing
			});
		}
		function onChangeSharedWith(sharedWithProjects) {
			credentialData.value = {
				...credentialData.value,
				sharedWithProjects
			};
			isSharedWithChanged.value = true;
			hasUnsavedChanges.value = true;
		}
		function onShareWithAllUsersUpdate(shareWithAllUsers) {
			isSharedGlobally.value = shareWithAllUsers;
			hasUnsavedChanges.value = true;
		}
		function onResolvableChange(value) {
			isResolvable.value = value;
			hasUnsavedChanges.value = true;
		}
		function onDataChange({ name: name$3, value }) {
			if ((0, import_get$1.default)(credentialData.value, name$3) === value) return;
			hasUnsavedChanges.value = true;
			const { oauthTokenData, ...credData } = credentialData.value;
			credentialData.value = deepCopy(credData);
			setParameterValue(credentialData.value, name$3, value);
		}
		function closeDialog() {
			modalBus.value.emit("close");
		}
		function getParentTypes(name$3) {
			const type = credentialsStore.getCredentialTypeByName(name$3);
			if (type?.extends === void 0) return [];
			const types = [];
			for (const typeName of type.extends) {
				types.push(typeName);
				types.push.apply(types, getParentTypes(typeName));
			}
			return types;
		}
		function onNameEdit(text$2) {
			hasUnsavedChanges.value = true;
			hasUserSpecifiedName.value = true;
			credentialName.value = text$2;
		}
		function scrollToTop() {
			setTimeout(() => {
				if (contentRef.value) contentRef.value.scrollTop = 0;
			}, 0);
		}
		function scrollToBottom() {
			setTimeout(() => {
				if (contentRef.value) contentRef.value.scrollTop = contentRef.value.scrollHeight;
			}, 0);
		}
		async function retestCredential() {
			if (isEditingManagedCredential.value) return;
			if (!isCredentialTestable.value || !credentialTypeName.value) {
				authError.value = "";
				testedSuccessfully.value = false;
				return;
			}
			const { ownedBy, sharedWithProjects, ...otherCredData } = credentialData.value;
			const details$1 = {
				id: credentialId.value,
				name: credentialName.value,
				type: credentialTypeName.value,
				data: otherCredData
			};
			isRetesting.value = true;
			await testCredential(details$1);
			isRetesting.value = false;
		}
		async function testCredential(credentialDetails) {
			const result = await credentialsStore.testCredential(credentialDetails);
			if (result.status === "Error") {
				authError.value = result.message;
				testedSuccessfully.value = false;
			} else {
				authError.value = "";
				testedSuccessfully.value = true;
			}
			scrollToTop();
		}
		function usesExternalSecrets(data) {
			return Object.entries(data).some(([, value]) => typeof value !== "object" && /=.*\{\{[^}]*\$secrets\.[^}]+}}.*/.test(`${value}`));
		}
		async function saveCredential() {
			if (!requiredPropertiesFilled.value) {
				showValidationWarning.value = true;
				scrollToTop();
				return null;
			} else showValidationWarning.value = false;
			isSaving.value = true;
			assert(credentialType.value);
			const data = getNodeParameters(credentialType.value.properties, credentialData.value, false, false, null, null);
			assert(credentialTypeName.value);
			const credentialDetails = {
				id: credentialId.value,
				name: credentialName.value,
				type: credentialTypeName.value,
				data,
				isGlobal: isSharedGlobally.value,
				isResolvable: isResolvable.value
			};
			if (settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.Sharing] && credentialData.value.sharedWithProjects) credentialDetails.sharedWithProjects = credentialData.value.sharedWithProjects;
			if (credentialData.value.homeProject) credentialDetails.homeProject = credentialData.value.homeProject;
			let credential = null;
			const isNewCredential$1 = props.mode === "new" && !credentialId.value;
			if (isNewCredential$1) credential = await createCredential(credentialDetails, projectsStore.currentProject);
			else {
				if (settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.Sharing]) credentialDetails.sharedWithProjects = credentialData.value.sharedWithProjects;
				credential = await updateCredential(credentialDetails);
			}
			isSaving.value = false;
			if (credential) {
				credentialId.value = credential.id;
				currentCredential.value = credential;
				if (isCredentialTestable.value) {
					isTesting.value = true;
					credentialDetails.data = credentialData.value;
					credentialDetails.id = credentialId.value;
					await testCredential(credentialDetails);
					isTesting.value = false;
				} else {
					authError.value = "";
					testedSuccessfully.value = false;
				}
				const trackProperties = {
					credential_type: credentialDetails.type,
					workflow_id: workflowsStore.workflowId,
					credential_id: credential.id,
					is_complete: !!requiredPropertiesFilled.value,
					is_new: isNewCredential$1,
					uses_external_secrets: usesExternalSecrets(credentialDetails.data ?? {})
				};
				if (isOAuthType.value) trackProperties.is_valid = !!isOAuthConnected.value;
				else if (isCredentialTestable.value) trackProperties.is_valid = !!testedSuccessfully.value;
				if (ndvStore.activeNode) trackProperties.node_type = ndvStore.activeNode.type;
				if (authError.value && authError.value !== "") trackProperties.authError = authError.value;
				if (!isOAuthType.value) {
					telemetry$1.track("User saved credentials", trackProperties);
					handleDynamicNotification(!!trackProperties.is_valid);
				}
				await externalHooks.run("credentialEdit.saveCredential", trackProperties);
			}
			return credential;
		}
		async function handleDynamicNotification(isValid) {
			if (!isValid || !settingsStore.isCloudDeployment) return;
			try {
				const response = await sendUserEvent(rootStore.restApiContext, {
					eventType: "credential-saved",
					metadata: { credential_type: credentialTypeName.value }
				});
				if (response.title && response.message) setTimeout(async () => {
					try {
						await message$2.confirm(response.message, response.title, {
							confirmButtonText: i18n$2.baseText("generic.keepBuilding"),
							cancelButtonText: "",
							showCancelButton: false,
							closeOnClickModal: true,
							closeOnPressEscape: true
						});
					} catch (error$2) {}
				}, 15e3);
			} catch (error$2) {}
		}
		const createToastMessagingForNewCredentials = (project) => {
			let toastTitle = i18n$2.baseText("credentials.create.personal.toast.title");
			let toastText = "";
			if (projectsStore.currentProject && projectsStore.currentProject.id !== projectsStore.personalProject?.id) {
				toastTitle = i18n$2.baseText("credentials.create.project.toast.title", { interpolate: { projectName: project?.name ?? "" } });
				toastText = i18n$2.baseText("credentials.create.project.toast.text", { interpolate: { projectName: project?.name ?? "" } });
			}
			return {
				title: toastTitle,
				message: toastText
			};
		};
		async function createCredential(credentialDetails, project) {
			let credential;
			try {
				credential = await credentialsStore.createNewCredential(credentialDetails, project?.id, router.currentRoute.value.query.uiContext?.toString());
				const { uiContext, ...rest } = router.currentRoute.value.query;
				router.replace({ query: rest });
				hasUnsavedChanges.value = false;
				const { title: title$7, message: message$3 } = createToastMessagingForNewCredentials(project);
				toast.showMessage({
					title: title$7,
					message: message$3,
					type: "success"
				});
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("credentialEdit.credentialEdit.showError.createCredential.title"));
				return null;
			}
			await externalHooks.run("credential.saved", {
				credential_type: credentialDetails.type,
				credential_id: credential.id,
				is_new: true
			});
			telemetry$1.track("User created credentials", {
				credential_type: credentialDetails.type,
				credential_id: credential.id,
				workflow_id: workflowsStore.workflowId
			});
			return credential;
		}
		async function updateCredential(credentialDetails) {
			let credential = null;
			try {
				if (credentialPermissions.value.update) credential = await credentialsStore.updateCredential({
					id: credentialId.value,
					data: credentialDetails
				});
				if (credentialPermissions.value.share && isSharedWithChanged.value && credentialDetails.sharedWithProjects) {
					credential = await credentialsStore.setCredentialSharedWith({
						credentialId: credentialDetails.id,
						sharedWithProjects: credentialDetails.sharedWithProjects
					});
					isSharedWithChanged.value = false;
				}
				hasUnsavedChanges.value = false;
				isSaved.value = true;
				if (credential) await externalHooks.run("credential.saved", {
					credential_type: credentialDetails.type,
					credential_id: credential.id,
					is_new: false
				});
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("credentialEdit.credentialEdit.showError.updateCredential.title"));
				return null;
			}
			nodeHelpers.updateNodesCredentialsIssues();
			return credential;
		}
		async function deleteCredential() {
			if (!currentCredential.value) return;
			const savedCredentialName = currentCredential.value.name;
			if (await message$2.confirm(i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.message", { interpolate: { savedCredentialName } }), i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.headline"), { confirmButtonText: i18n$2.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.confirmButtonText") }) !== "confirm") return;
			try {
				isDeleting.value = true;
				await credentialsStore.deleteCredential({ id: credentialId.value });
				hasUnsavedChanges.value = false;
				isSaved.value = true;
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("credentialEdit.credentialEdit.showError.deleteCredential.title"));
				isDeleting.value = false;
				return;
			}
			isDeleting.value = false;
			nodeHelpers.updateNodesCredentialsIssues();
			credentialData.value = {};
			toast.showMessage({
				title: i18n$2.baseText("credentialEdit.credentialEdit.showMessage.title"),
				type: "success"
			});
			closeDialog();
		}
		async function oAuthCredentialAuthorize() {
			let url;
			const credential = await saveCredential();
			if (!credential) return;
			const types = parentTypes.value;
			try {
				const { sharedWithProjects, ...sanitizedCredData } = credentialData.value;
				const credData = {
					id: credential.id,
					...sanitizedCredData
				};
				if (credentialTypeName.value === "oAuth2Api" || types.includes("oAuth2Api")) {
					if (isValidCredentialResponse(credData)) url = await credentialsStore.oAuth2Authorize(credData);
				} else if (credentialTypeName.value === "oAuth1Api" || types.includes("oAuth1Api")) {
					if (isValidCredentialResponse(credData)) url = await credentialsStore.oAuth1Authorize(credData);
				}
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("credentialEdit.credentialEdit.showError.generateAuthorizationUrl.title"), i18n$2.baseText("credentialEdit.credentialEdit.showError.generateAuthorizationUrl.message"));
				return;
			}
			if (url === void 0 || url === "") {
				toast.showError(new Error(i18n$2.baseText("credentialEdit.credentialEdit.showError.invalidOAuthUrl.message")), i18n$2.baseText("credentialEdit.credentialEdit.showError.invalidOAuthUrl.title"));
				return;
			}
			const allowedOAuthUrlProtocols = ["http:", "https:"];
			try {
				const parsedUrl = new URL(url);
				if (!allowedOAuthUrlProtocols.includes(parsedUrl.protocol)) {
					toast.showError(new Error(i18n$2.baseText("credentialEdit.credentialEdit.showError.invalidOAuthUrl.message")), i18n$2.baseText("credentialEdit.credentialEdit.showError.invalidOAuthUrl.title"));
					return;
				}
			} catch {
				toast.showError(new Error(i18n$2.baseText("credentialEdit.credentialEdit.showError.invalidOAuthUrl.message")), i18n$2.baseText("credentialEdit.credentialEdit.showError.invalidOAuthUrl.title"));
				return;
			}
			const oauthPopup = window.open(url, "OAuth Authorization", "scrollbars=no,resizable=yes,status=no,titlebar=noe,location=no,toolbar=no,menubar=no,width=500,height=700");
			credentialData.value = {
				...credentialData.value,
				oauthTokenData: null
			};
			const oauthChannel = new BroadcastChannel("oauth-callback");
			const receiveMessage = (event) => {
				const successfullyConnected = event.data === "success";
				const trackProperties = {
					credential_type: credentialTypeName.value,
					workflow_id: workflowsStore.workflowId || null,
					credential_id: credentialId.value,
					is_complete: !!requiredPropertiesFilled.value,
					is_new: props.mode === "new" && !credentialId.value,
					is_valid: successfullyConnected,
					uses_external_secrets: usesExternalSecrets(credentialData.value)
				};
				if (ndvStore.activeNode) trackProperties.node_type = ndvStore.activeNode.type;
				telemetry$1.track("User saved credentials", trackProperties);
				handleDynamicNotification(successfullyConnected);
				if (successfullyConnected) {
					oauthChannel.removeEventListener("message", receiveMessage);
					credentialData.value = {
						...credentialData.value,
						oauthTokenData: {}
					};
					if (oauthPopup) oauthPopup.close();
				}
			};
			oauthChannel.addEventListener("message", receiveMessage);
		}
		async function onAuthTypeChanged(type) {
			if (!activeNodeType.value?.credentials) return;
			const credentialsForType = getNodeCredentialForSelectedAuthType(activeNodeType.value, type);
			if (credentialsForType) {
				selectedCredential.value = credentialsForType.name;
				uiStore.activeCredentialType = credentialsForType.name;
				resetCredentialData();
				updateNodeAuthType(workflowState, ndvStore.activeNode, type);
				if (hasUnsavedChanges.value && !hasUserSpecifiedName.value) credentialName.value = await credentialsStore.getNewCredentialName({ credentialTypeName: defaultCredentialTypeName.value });
			}
		}
		function resetCredentialData() {
			if (!credentialType.value) return;
			for (const property of credentialType.value.properties) if (!credentialType.value.__overwrittenProperties?.includes(property.name)) credentialData.value = {
				...credentialData.value,
				[property.name]: property.default
			};
			const { currentProject, personalProject } = projectsStore;
			const scopes = currentProject?.scopes ?? personalProject?.scopes ?? [];
			const homeProject$1 = currentProject ?? personalProject ?? {};
			credentialData.value = {
				...credentialData.value,
				scopes,
				homeProject: homeProject$1
			};
		}
		const credNameRef = useTemplateRef("credNameRef");
		const { width } = useElementSize(credNameRef);
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: __props.modalName,
				"custom-class": _ctx.$style.credentialModal,
				"event-bus": modalBus.value,
				loading: loading$2.value,
				"before-close": beforeClose,
				width: "70%",
				height: "80%"
			}, {
				header: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.header) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.credInfo) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.credIcon) }, [createVNode(CredentialIcon_default, { "credential-type-name": defaultCredentialTypeName.value }, null, 8, ["credential-type-name"])], 2), createBaseVNode("div", {
					ref_key: "credNameRef",
					ref: credNameRef,
					class: normalizeClass(_ctx.$style.credName)
				}, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.credNameRow) }, [credentialName.value ? (openBlock(), createBlock(unref(N8nInlineTextEdit_default), {
					key: 0,
					"data-test-id": "credential-name",
					"model-value": credentialName.value,
					"max-width": unref(width) - 10,
					readonly: !(credentialPermissions.value.create && props.mode === "new" || credentialPermissions.value.update) || !credentialType.value || isEditingManagedCredential.value,
					"onUpdate:modelValue": onNameEdit
				}, null, 8, [
					"model-value",
					"max-width",
					"readonly"
				])) : createCommentVNode("", true), isResolvable.value ? (openBlock(), createBlock(unref(N8nTag_default), {
					key: 1,
					text: unref(i18n$2).baseText("credentialEdit.credentialEdit.dynamic"),
					clickable: false,
					class: normalizeClass(_ctx.$style.dynamicTag),
					"data-test-id": "credential-dynamic-tag"
				}, {
					tag: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style.dynamicTagContent) }, [createVNode(unref(N8nIcon_default), {
						icon: "key-round",
						size: "xsmall"
					}), createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("credentialEdit.credentialEdit.dynamic")), 1)], 2)]),
					_: 1
				}, 8, ["text", "class"])) : createCommentVNode("", true)], 2), credentialType.value ? (openBlock(), createBlock(unref(N8nText_default), {
					key: 0,
					size: "small",
					tag: "p",
					color: "text-light"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(credentialType.value.displayName), 1)]),
					_: 1
				})) : createCommentVNode("", true)], 2)], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.credActions) }, [currentCredential.value && credentialPermissions.value.delete ? (openBlock(), createBlock(unref(N8nIconButton_default), {
					key: 0,
					variant: "subtle",
					title: unref(i18n$2).baseText("credentialEdit.credentialEdit.delete"),
					icon: "trash-2",
					disabled: isSaving.value,
					loading: isDeleting.value,
					"data-test-id": "credential-delete-button",
					onClick: deleteCredential
				}, null, 8, [
					"title",
					"disabled",
					"loading"
				])) : createCommentVNode("", true), showSaveButton.value ? (openBlock(), createBlock(SaveButton_default, {
					key: 1,
					saved: !hasUnsavedChanges.value && !isTesting.value && !!credentialId.value,
					"is-saving": isSaving.value || isTesting.value,
					"saving-label": isTesting.value ? unref(i18n$2).baseText("credentialEdit.credentialEdit.testing") : unref(i18n$2).baseText("credentialEdit.credentialEdit.saving"),
					"data-test-id": "credential-save-button",
					onClick: saveCredential
				}, null, 8, [
					"saved",
					"is-saving",
					"saving-label"
				])) : createCommentVNode("", true)], 2)], 2)]),
				content: withCtx(() => [createBaseVNode("div", {
					class: normalizeClass(_ctx.$style.container),
					"data-test-id": "credential-edit-dialog"
				}, [!isEditingManagedCredential.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.sidebar)
				}, [(openBlock(true), createElementBlock(Fragment, null, renderList(sidebarItems.value, (item$2) => {
					return openBlock(), createBlock(unref(N8nMenuItem_default), {
						key: item$2.id,
						item: item$2,
						active: activeTab.value === item$2.id,
						onClick: () => onTabSelect(item$2.id)
					}, null, 8, [
						"item",
						"active",
						"onClick"
					]);
				}), 128))], 2)) : createCommentVNode("", true), activeTab.value === "connection" && credentialType.value ? (openBlock(), createElementBlock("div", {
					key: 1,
					ref_key: "contentRef",
					ref: contentRef,
					class: normalizeClass(_ctx.$style.mainContent)
				}, [createVNode(CredentialConfig_default, {
					"credential-type": credentialType.value,
					"credential-properties": credentialProperties.value,
					"credential-data": credentialData.value,
					"credential-id": credentialId.value,
					"is-managed": isEditingManagedCredential.value,
					"show-validation-warning": showValidationWarning.value,
					"auth-error": authError.value,
					"tested-successfully": testedSuccessfully.value,
					"is-o-auth-type": isOAuthType.value,
					"is-o-auth-connected": isOAuthConnected.value,
					"is-retesting": isRetesting.value,
					"parent-types": parentTypes.value,
					"required-properties-filled": requiredPropertiesFilled.value,
					"credential-permissions": credentialPermissions.value,
					"all-o-auth2-base-properties-overridden": allOAuth2BasePropertiesOverridden.value,
					mode: __props.mode,
					"selected-credential": selectedCredential.value,
					"show-auth-type-selector": requiredCredentials.value,
					"is-dynamic-credentials-enabled": unref(isDynamicCredentialsEnabled),
					"is-resolvable": isResolvable.value,
					"is-new-credential": isNewCredential.value,
					onUpdate: onDataChange,
					onOauth: oAuthCredentialAuthorize,
					onRetest: retestCredential,
					onScrollToTop: scrollToTop,
					onAuthTypeChanged,
					"onUpdate:isResolvable": onResolvableChange
				}, null, 8, [
					"credential-type",
					"credential-properties",
					"credential-data",
					"credential-id",
					"is-managed",
					"show-validation-warning",
					"auth-error",
					"tested-successfully",
					"is-o-auth-type",
					"is-o-auth-connected",
					"is-retesting",
					"parent-types",
					"required-properties-filled",
					"credential-permissions",
					"all-o-auth2-base-properties-overridden",
					"mode",
					"selected-credential",
					"show-auth-type-selector",
					"is-dynamic-credentials-enabled",
					"is-resolvable",
					"is-new-credential"
				])], 2)) : showSharingContent.value ? (openBlock(), createElementBlock("div", {
					key: 2,
					class: normalizeClass(_ctx.$style.mainContent)
				}, [createVNode(CredentialSharing_ee_default, {
					credential: currentCredential.value,
					"credential-data": credentialData.value,
					"credential-id": credentialId.value,
					"credential-permissions": credentialPermissions.value,
					"is-shared-globally": isSharedGlobally.value,
					"modal-bus": modalBus.value,
					"onUpdate:modelValue": onChangeSharedWith,
					"onUpdate:shareWithAllUsers": onShareWithAllUsersUpdate
				}, null, 8, [
					"credential",
					"credential-data",
					"credential-id",
					"credential-permissions",
					"is-shared-globally",
					"modal-bus"
				])], 2)) : activeTab.value === "details" && credentialType.value ? (openBlock(), createElementBlock("div", {
					key: 3,
					class: normalizeClass(_ctx.$style.mainContent)
				}, [createVNode(CredentialInfo_default, { "current-credential": currentCredential.value }, null, 8, ["current-credential"])], 2)) : createCommentVNode("", true)], 2)]),
				_: 1
			}, 8, [
				"name",
				"custom-class",
				"event-bus",
				"loading"
			]);
		};
	}
});
var CredentialEdit_vue_vue_type_style_index_0_lang_module_default = {
	credentialModal: "_credentialModal_p2tw3_125",
	mainContent: "_mainContent_p2tw3_139",
	credName: "_credName_p2tw3_145",
	credNameRow: "_credNameRow_p2tw3_152",
	dynamicTagContent: "_dynamicTagContent_p2tw3_159",
	sidebar: "_sidebar_p2tw3_165",
	header: "_header_p2tw3_175",
	container: "_container_p2tw3_179",
	credInfo: "_credInfo_p2tw3_184",
	credActions: "_credActions_p2tw3_192",
	credIcon: "_credIcon_p2tw3_203"
};
var CredentialEdit_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CredentialEdit_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CredentialEdit_vue_vue_type_style_index_0_lang_module_default }]]);
var CredentialsSelectModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CredentialsSelectModal",
	setup(__props) {
		const externalHooks = useExternalHooks();
		const telemetry$1 = useTelemetry();
		const i18n$2 = useI18n();
		const modalBus = ref(createEventBus());
		const selected$2 = ref("");
		const loading$2 = ref(true);
		const selectRef = ref();
		const credentialsStore = useCredentialsStore();
		const uiStore = useUIStore();
		const workflowsStore = useWorkflowsStore();
		onMounted(async () => {
			try {
				await credentialsStore.fetchCredentialTypes(false);
			} catch (e) {}
			loading$2.value = false;
			setTimeout(() => {
				if (selectRef.value) selectRef.value.focus();
			}, 0);
		});
		function onSelect(type) {
			selected$2.value = type;
		}
		function openCredentialType() {
			modalBus.value.emit("close");
			uiStore.openNewCredential(selected$2.value);
			const telemetryPayload = {
				credential_type: selected$2.value,
				source: "primary_menu",
				new_credential: true,
				workflow_id: workflowsStore.workflowId
			};
			telemetry$1.track("User opened Credential modal", telemetryPayload);
			externalHooks.run("credentialsSelectModal.openCredentialType", telemetryPayload);
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(CREDENTIAL_SELECT_MODAL_KEY),
				"event-bus": modalBus.value,
				width: "50%",
				center: true,
				loading: loading$2.value,
				"max-width": "460px",
				"min-height": "250px"
			}, {
				header: withCtx(() => [createBaseVNode("h2", { class: normalizeClass(_ctx.$style.title) }, toDisplayString(unref(i18n$2).baseText("credentialSelectModal.addNewCredential")), 3)]),
				content: withCtx(() => [createBaseVNode("div", null, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.subtitle) }, toDisplayString(unref(i18n$2).baseText("credentialSelectModal.selectAnAppOrServiceToConnectTo")), 3), createVNode(unref(N8nSelect_default), {
					ref_key: "selectRef",
					ref: selectRef,
					filterable: "",
					"default-first-option": "",
					placeholder: unref(i18n$2).baseText("credentialSelectModal.searchForApp"),
					size: "xlarge",
					"model-value": selected$2.value,
					"data-test-id": "new-credential-type-select",
					"onUpdate:modelValue": onSelect
				}, {
					prefix: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "search" })]),
					default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(credentialsStore).allCredentialTypes, (credential) => {
						return openBlock(), createBlock(unref(N8nOption_default), {
							key: credential.name,
							value: credential.name,
							label: credential.displayName,
							filterable: "",
							"data-test-id": "new-credential-type-select-option"
						}, null, 8, ["value", "label"]);
					}), 128))]),
					_: 1
				}, 8, ["placeholder", "model-value"])])]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					label: unref(i18n$2).baseText("credentialSelectModal.continue"),
					float: "right",
					size: "large",
					disabled: !selected$2.value,
					"data-test-id": "new-credential-type-button",
					onClick: openCredentialType
				}, null, 8, ["label", "disabled"])], 2)]),
				_: 1
			}, 8, [
				"name",
				"event-bus",
				"loading"
			]);
		};
	}
});
var CredentialsSelectModal_vue_vue_type_style_index_0_lang_module_default = {
	title: "_title_1qwik_125",
	subtitle: "_subtitle_1qwik_130"
};
var CredentialsSelectModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CredentialsSelectModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CredentialsSelectModal_vue_vue_type_style_index_0_lang_module_default }]]);
var DebugPaywallModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "DebugPaywallModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "500px",
				title: props.data.title,
				name: props.modalName
			}, {
				content: withCtx(() => [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [
						createTextVNode(toDisplayString(unref(i18n$2).baseText("executionsList.debug.paywall.content")) + " ", 1),
						_cache[0] || (_cache[0] = createBaseVNode("br", null, null, -1)),
						_cache[1] || (_cache[1] = createBaseVNode("br", null, null, -1)),
						createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("executionsList.debug.paywall.subContent")) + " ", 1),
						createVNode(unref(N8nLink_default), {
							to: unref(i18n$2).baseText("executionsList.debug.paywall.link.url"),
							"new-window": ""
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("executionsList.debug.paywall.link.text")), 1)]),
							_: 1
						}, 8, ["to"])
					]),
					_: 1
				})]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), { onClick: props.data.footerButtonAction }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.seePlans")), 1)]),
					_: 1
				}, 8, ["onClick"])], 2)]),
				_: 1
			}, 8, ["title", "name"]);
		};
	}
});
var DebugPaywallModal_vue_vue_type_style_index_0_lang_module_default = { footer: "_footer_zandy_125" };
var DebugPaywallModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(DebugPaywallModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": DebugPaywallModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$34 = ["title", "data-resourceid"];
var maxPathLength = 4;
var separator$2 = "/";
var MoveToFolderDropdown_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "MoveToFolderDropdown",
	props: {
		selectedLocation: { default: null },
		selectedProjectId: {},
		currentProjectId: { default: void 0 },
		currentFolderId: { default: void 0 },
		parentFolderId: { default: void 0 }
	},
	emits: ["location:selected"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const foldersStore = useFoldersStore();
		const availableLocations = ref([]);
		const selectedLocationId = computed({
			get: () => props.selectedLocation?.id ?? null,
			set: (id) => {
				const location = availableLocations.value.find((f) => f.id === id);
				if (!location) return;
				emit("location:selected", location);
			}
		});
		const loading$2 = ref(false);
		const initialLoading = ref(true);
		const fetchAvailableLocations = async (query) => {
			loading$2.value = true;
			const folders = await foldersStore.fetchFoldersAvailableForMove(props.selectedProjectId, props.currentFolderId, { name: query ?? void 0 });
			if (!props.parentFolderId) availableLocations.value = folders;
			else availableLocations.value = folders.filter((folder) => folder.id !== props.parentFolderId);
			const rootFolderName = i18n$2.baseText("folders.move.project.root.name");
			const isQueryMatchesRoot = !query || rootFolderName.toLowerCase().includes(query?.toLowerCase());
			const projectRoot = {
				id: props.selectedProjectId,
				name: rootFolderName,
				resource: "project",
				createdAt: "",
				updatedAt: "",
				workflowCount: 0,
				subFolderCount: 0,
				path: []
			};
			if (isQueryMatchesRoot) availableLocations.value.unshift(projectRoot);
			if (!query && !props.selectedLocation) emit("location:selected", projectRoot);
			loading$2.value = false;
			initialLoading.value = false;
		};
		watch(() => [
			props.selectedProjectId,
			props.currentFolderId,
			props.parentFolderId
		], () => {
			availableLocations.value = [];
			initialLoading.value = true;
			fetchAvailableLocations();
		}, { immediate: true });
		const isTopLevelFolder = (location, index) => {
			return index === location.path.length - 1 || index >= 3;
		};
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				class: normalizeClass(_ctx.$style["move-folder-dropdown"]),
				"data-test-id": "move-to-folder-dropdown"
			}, [initialLoading.value ? (openBlock(), createBlock(unref(N8nLoading_default), {
				key: 0,
				rows: 1,
				class: normalizeClass(_ctx.$style["loading-skeleton"])
			}, null, 8, ["class"])) : (openBlock(), createBlock(unref(N8nSelect_default), {
				key: 1,
				ref: "moveFolderDropdown",
				modelValue: selectedLocationId.value,
				"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => selectedLocationId.value = $event),
				filterable: true,
				remote: true,
				"remote-method": fetchAvailableLocations,
				loading: loading$2.value,
				placeholder: unref(i18n$2).baseText("folders.move.modal.folder.placeholder"),
				"no-data-text": unref(i18n$2).baseText("folders.move.modal.folder.noData.label"),
				"option-label": "name",
				"option-value": "id"
			}, {
				prefix: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "search" })]),
				default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(availableLocations.value, (location) => {
					return openBlock(), createBlock(unref(N8nOption_default), {
						key: location.id,
						value: location.id,
						label: location.name,
						"data-test-id": "move-to-folder-option"
					}, {
						default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["folder-select-item"]) }, [createBaseVNode("ul", { class: normalizeClass(_ctx.$style.list) }, [location.resource === "project" ? (openBlock(), createElementBlock("li", {
							key: 0,
							class: normalizeClass(_ctx.$style.current)
						}, [createVNode(unref(N8nText_default), null, {
							default: withCtx(() => [createTextVNode(toDisplayString(location.name), 1)]),
							_: 2
						}, 1024)], 2)) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
							location.path.length > maxPathLength ? (openBlock(), createElementBlock("li", {
								key: 0,
								class: normalizeClass(_ctx.$style.item)
							}, [createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [..._cache[1] || (_cache[1] = [createTextVNode("...", -1)])]),
								_: 1
							})], 2)) : createCommentVNode("", true),
							location.path.length > 0 ? (openBlock(), createElementBlock("li", {
								key: 1,
								class: normalizeClass(_ctx.$style.separator)
							}, [createVNode(unref(N8nText_default), null, {
								default: withCtx(() => [createTextVNode(toDisplayString(separator$2))]),
								_: 1
							})], 2)) : createCommentVNode("", true),
							(openBlock(true), createElementBlock(Fragment, null, renderList(location.path.slice(-maxPathLength), (fragment, index) => {
								return openBlock(), createElementBlock(Fragment, { key: `${location.id}-${index}` }, [createBaseVNode("li", {
									class: normalizeClass({
										[_ctx.$style.item]: true,
										[_ctx.$style.current]: isTopLevelFolder(location, index)
									}),
									title: fragment,
									"data-resourceid": fragment,
									"data-test-id": "breadcrumbs-item",
									"data-target": "folder-breadcrumb-item"
								}, [createVNode(unref(N8nText_default), null, {
									default: withCtx(() => [createTextVNode(toDisplayString(fragment), 1)]),
									_: 2
								}, 1024)], 10, _hoisted_1$34), !isTopLevelFolder(location, index) ? (openBlock(), createElementBlock("li", {
									key: 0,
									class: normalizeClass(_ctx.$style.separator)
								}, [createVNode(unref(N8nText_default), null, {
									default: withCtx(() => [createTextVNode(toDisplayString(separator$2))]),
									_: 1
								})], 2)) : createCommentVNode("", true)], 64);
							}), 128))
						], 64))], 2)], 2)]),
						_: 2
					}, 1032, ["value", "label"]);
				}), 128))]),
				_: 1
			}, 8, [
				"modelValue",
				"loading",
				"placeholder",
				"no-data-text"
			]))], 2);
		};
	}
});
const list$1 = "_list_7gob5_151";
const item$1 = "_item_7gob5_157";
const current = "_current_7gob5_172";
const separator$1 = "_separator_7gob5_176";
var MoveToFolderDropdown_vue_vue_type_style_index_0_lang_module_default = {
	"move-folder-dropdown": "_move-folder-dropdown_7gob5_125",
	"loading-skeleton": "_loading-skeleton_7gob5_130",
	"folder-select-item": "_folder-select-item_7gob5_139",
	list: list$1,
	item: item$1,
	current,
	separator: separator$1
};
var MoveToFolderDropdown_default = /* @__PURE__ */ __plugin_vue_export_helper_default(MoveToFolderDropdown_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": MoveToFolderDropdown_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$33 = { key: 0 };
var DeleteFolderModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "DeleteFolderModal",
	props: {
		modalName: {},
		activeId: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const modalBus = createEventBus();
		const { showMessage, showError } = useToast();
		const i18n$2 = useI18n();
		const route = useRoute();
		const foldersStore = useFoldersStore();
		const projectsStore = useProjectsStore();
		const loading$2 = ref(false);
		const operation = ref("");
		const deleteConfirmText = ref("");
		const selectedFolder = ref(null);
		const folderToDelete = computed(() => {
			if (!props.activeId) return null;
			return foldersStore.breadcrumbsCache[props.activeId];
		});
		const isPending = computed(() => {
			return selectedFolder.value ? !selectedFolder.value.name : false;
		});
		const title$7 = computed(() => {
			const folderName = folderToDelete.value?.name ?? "";
			return i18n$2.baseText("folders.delete.confirm.title", { interpolate: { folderName } });
		});
		const enabled = computed(() => {
			if (isPending.value) return true;
			if (operation.value === "delete" && deleteConfirmText.value === i18n$2.baseText("folders.delete.typeToConfirm", { interpolate: { folderName: folderToDelete.value?.name ?? "" } })) return true;
			if (operation.value === "transfer" && selectedFolder.value) return true;
			return false;
		});
		const currentProjectName = computed(() => {
			const currentProject = projectsStore.currentProject;
			if (currentProject?.type === ProjectTypes.Personal) return i18n$2.baseText("projects.menu.personal");
			return currentProject?.name;
		});
		const folderContentWarningMessage = computed(() => {
			const folderCount = props.data.content.subFolderCount ?? 0;
			const workflowCount = props.data.content.workflowCount ?? 0;
			let folderText = "";
			let workflowText = "";
			if (folderCount > 0) folderText = i18n$2.baseText("folder.count", { interpolate: { count: folderCount } });
			if (workflowCount > 0) workflowText = i18n$2.baseText("workflow.count", { interpolate: { count: workflowCount } });
			if (folderCount > 0 && workflowCount > 0) folderText += ` ${i18n$2.baseText("folder.and.workflow.separator")} `;
			return i18n$2.baseText("folder.delete.modal.confirmation", { interpolate: {
				folders: folderText,
				workflows: workflowText
			} });
		});
		async function onSubmit() {
			if (!enabled.value) return;
			try {
				loading$2.value = true;
				const newParentId = selectedFolder.value?.resource === "project" ? "0" : selectedFolder.value?.id ?? void 0;
				await foldersStore.deleteFolder(route.params.projectId, props.activeId, newParentId);
				let message$2 = "";
				if (selectedFolder.value) message$2 = i18n$2.baseText("folders.transfer.confirm.message", { interpolate: { folderName: selectedFolder.value.name ?? "" } });
				showMessage({
					type: "success",
					title: i18n$2.baseText("folders.delete.success.message"),
					message: message$2
				});
				props.data.workflowListEventBus.emit("folder-deleted", {
					folderId: props.activeId,
					workflowCount: props.data.content.workflowCount,
					folderCount: props.data.content.subFolderCount
				});
				modalBus.emit("close");
			} catch (error$2) {
				showError(error$2, i18n$2.baseText("folders.delete.error.message"));
			} finally {
				loading$2.value = false;
			}
		}
		const onFolderSelected = (payload) => {
			selectedFolder.value = payload;
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: __props.modalName,
				title: title$7.value,
				center: true,
				width: "600",
				"event-bus": unref(modalBus),
				onEnter: onSubmit
			}, {
				content: withCtx(() => [createBaseVNode("div", null, [isPending.value ? (openBlock(), createElementBlock("div", _hoisted_1$33, [createVNode(unref(N8nText_default), { color: "text-base" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("folders.delete.confirm.message")), 1)]),
					_: 1
				})])) : (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.content)
				}, [
					createBaseVNode("div", null, [createVNode(unref(N8nText_default), { color: "text-base" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(folderContentWarningMessage.value), 1)]),
						_: 1
					})]),
					createVNode(unref(ElRadio), {
						modelValue: operation.value,
						"onUpdate:modelValue": [_cache[0] || (_cache[0] = ($event) => operation.value = $event), _cache[1] || (_cache[1] = ($event) => operation.value = "transfer")],
						"data-test-id": "transfer-content-radio",
						label: "transfer"
					}, {
						default: withCtx(() => [currentProjectName.value ? (openBlock(), createBlock(unref(N8nText_default), { key: 0 }, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("folders.transfer.action", { interpolate: { projectName: currentProjectName.value } })), 1)]),
							_: 1
						})) : (openBlock(), createBlock(unref(N8nText_default), {
							key: 1,
							color: "text-dark"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("folders.transfer.action.noProject")), 1)]),
							_: 1
						}))]),
						_: 1
					}, 8, ["modelValue"]),
					operation.value === "transfer" ? (openBlock(), createElementBlock("div", {
						key: 0,
						class: normalizeClass(_ctx.$style.optionInput)
					}, [createVNode(unref(N8nText_default), { color: "text-dark" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("folders.transfer.selectFolder")), 1)]),
						_: 1
					}), unref(projectsStore).currentProject ? (openBlock(), createBlock(MoveToFolderDropdown_default, {
						key: 0,
						"selected-location": selectedFolder.value,
						"selected-project-id": unref(projectsStore).currentProject?.id,
						"current-project-id": unref(projectsStore).currentProject?.id,
						"current-folder-id": props.activeId,
						"parent-folder-id": folderToDelete.value?.parentFolder,
						"onLocation:selected": onFolderSelected
					}, null, 8, [
						"selected-location",
						"selected-project-id",
						"current-project-id",
						"current-folder-id",
						"parent-folder-id"
					])) : createCommentVNode("", true)], 2)) : createCommentVNode("", true),
					createVNode(unref(ElRadio), {
						modelValue: operation.value,
						"onUpdate:modelValue": [_cache[2] || (_cache[2] = ($event) => operation.value = $event), _cache[3] || (_cache[3] = ($event) => operation.value = "delete")],
						"data-test-id": "delete-content-radio",
						label: "delete"
					}, {
						default: withCtx(() => [createVNode(unref(N8nText_default), { color: "text-dark" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("folders.delete.action")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["modelValue"]),
					operation.value === "delete" ? (openBlock(), createElementBlock("div", {
						key: 1,
						class: normalizeClass(_ctx.$style.optionInput),
						"data-test-id": "delete-data-input"
					}, [createVNode(unref(N8nInputLabel_default), { label: unref(i18n$2).baseText("folders.delete.confirmation.message", { interpolate: { folderName: folderToDelete.value?.name ?? "" } }) }, {
						default: withCtx(() => [createVNode(unref(Input_default), {
							modelValue: deleteConfirmText.value,
							"onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => deleteConfirmText.value = $event),
							"data-test-id": "delete-data-input",
							placeholder: unref(i18n$2).baseText("folders.delete.typeToConfirm", { interpolate: { folderName: folderToDelete.value?.name ?? "" } })
						}, null, 8, ["modelValue", "placeholder"])]),
						_: 1
					}, 8, ["label"])], 2)) : createCommentVNode("", true)
				], 2))])]),
				footer: withCtx(() => [createVNode(unref(N8nButton_default), {
					loading: loading$2.value,
					disabled: !enabled.value,
					label: unref(i18n$2).baseText("generic.delete"),
					float: "right",
					"data-test-id": "confirm-delete-folder-button",
					onClick: onSubmit
				}, null, 8, [
					"loading",
					"disabled",
					"label"
				])]),
				_: 1
			}, 8, [
				"name",
				"title",
				"event-bus"
			]);
		};
	}
});
var DeleteFolderModal_vue_vue_type_style_index_0_lang_module_default = {
	content: "_content_1d66r_125",
	innerContent: "_innerContent_1d66r_132",
	optionInput: "_optionInput_1d66r_136",
	"folder-select-item": "_folder-select-item_1d66r_140"
};
var DeleteFolderModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(DeleteFolderModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": DeleteFolderModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$32 = { key: 1 };
var ProjectMoveResourceModalCredentialsList_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ProjectMoveResourceModalCredentialsList",
	props: {
		credentials: { default: () => [] },
		currentProjectId: { default: "" }
	},
	setup(__props) {
		const props = __props;
		const isCredentialReadable = (credential) => "scopes" in credential ? getResourcePermissions(credential.scopes).credential.read : false;
		const getCredentialRouterLocation = (credential) => {
			const isSharedWithCurrentProject = credential.sharedWithProjects?.find((p) => p.id === props.currentProjectId);
			const params = { credentialId: credential.id };
			if (isSharedWithCurrentProject ?? credential.homeProject?.id) params.projectId = isSharedWithCurrentProject ? props.currentProjectId : credential.homeProject?.id;
			return {
				name: isSharedWithCurrentProject ? VIEWS.PROJECTS_CREDENTIALS : VIEWS.CREDENTIALS,
				params
			};
		};
		return (_ctx, _cache) => {
			const _component_RouterLink = resolveComponent("RouterLink");
			return openBlock(), createElementBlock("ul", { class: normalizeClass(_ctx.$style.credentialsList) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(props.credentials, (credential) => {
				return openBlock(), createElementBlock("li", { key: credential.id }, [isCredentialReadable(credential) ? (openBlock(), createBlock(_component_RouterLink, {
					key: 0,
					target: "_blank",
					to: getCredentialRouterLocation(credential)
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(credential.name), 1)]),
					_: 2
				}, 1032, ["to"])) : (openBlock(), createElementBlock("span", _hoisted_1$32, toDisplayString(credential.name), 1))]);
			}), 128))], 2);
		};
	}
});
var ProjectMoveResourceModalCredentialsList_vue_vue_type_style_index_0_lang_module_default = { credentialsList: "_credentialsList_3zpk8_125" };
var ProjectMoveResourceModalCredentialsList_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ProjectMoveResourceModalCredentialsList_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ProjectMoveResourceModalCredentialsList_vue_vue_type_style_index_0_lang_module_default }]]);
var MoveToFolderModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "MoveToFolderModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const modalBus = createEventBus();
		const foldersStore = useFoldersStore();
		const projectsStore = useProjectsStore();
		const uiStore = useUIStore();
		const credentialsStore = useCredentialsStore();
		const workflowsListStore = useWorkflowsListStore();
		const workflowsStore = useWorkflowsStore();
		const toast = useToast();
		const selectedFolder = ref(null);
		const selectedProject = ref(projectsStore.currentProject);
		const loading$2 = ref(false);
		const isPersonalProject = computed(() => {
			return selectedProject.value?.type === ProjectTypes.Personal;
		});
		const isOwnPersonalProject = computed(() => {
			return selectedProject.value?.type === ProjectTypes.Personal && selectedProject.value?.id === projectsStore.personalProject?.id;
		});
		const isTransferringOwnership = computed(() => {
			return selectedProject.value && selectedProject.value?.id !== projectsStore.currentProject?.id;
		});
		const workflowCount = ref(0);
		const subFolderCount = ref(0);
		const shareUsedCredentials = ref(false);
		const usedCredentials = ref([]);
		const allCredentials = ref([]);
		const shareableCredentials = computed(() => allCredentials.value.filter((credential) => isTransferringOwnership.value && getResourcePermissions(credential.scopes).credential.share && usedCredentials.value.find((uc) => uc.id === credential.id)));
		const unShareableCredentials = computed(() => usedCredentials.value.reduce((acc, uc) => {
			const credential = credentialsStore.getCredentialById(uc.id);
			const credentialPermissions = getResourcePermissions(credential?.scopes).credential;
			if (!credentialPermissions.share) if (credentialPermissions.read) acc.push(credential);
			else acc.push(uc);
			return acc;
		}, []));
		const availableProjects = computed(() => sortByProperty("name", projectsStore.availableProjects.filter((p) => !p.scopes || getResourcePermissions(p.scopes)[props.data.resourceType].create)));
		const resourceTypeLabel = computed(() => {
			return i18n$2.baseText(`generic.${props.data.resourceType}`).toLowerCase();
		});
		const title$7 = computed(() => {
			return i18n$2.baseText("folders.move.modal.title", { interpolate: {
				folderName: props.data.resource.name,
				resourceTypeLabel: resourceTypeLabel.value
			} });
		});
		const currentFolder = computed(() => {
			if (props.data.resourceType === "workflow") return;
			return {
				id: props.data.resource.id,
				name: props.data.resource.name
			};
		});
		const fetchCurrentFolderContents = async () => {
			if (!currentFolder.value || !projectsStore.currentProject) return;
			const { totalWorkflows, totalSubFolders } = await foldersStore.fetchFolderContent(projectsStore.currentProject.id, currentFolder.value.id);
			workflowCount.value = totalWorkflows;
			subFolderCount.value = totalSubFolders;
		};
		watch(() => [selectedProject.value], () => {
			selectedFolder.value = null;
		});
		watch(() => [currentFolder.value, selectedProject.value], () => {
			fetchCurrentFolderContents();
		}, { immediate: true });
		const onFolderSelected = (payload) => {
			selectedFolder.value = payload;
		};
		const getPersonalProjectLabel = (projectName) => {
			const { name: name$3 } = splitName(projectName ?? "");
			const personalSpaceText = i18n$2.baseText("projects.sharing.personalSpace");
			return name$3 ? `${name$3} (${personalSpaceText})` : personalSpaceText;
		};
		const targetProjectName = computed(() => {
			if (selectedProject.value?.type === ProjectTypes.Personal) return getPersonalProjectLabel(selectedProject.value?.name);
			return getTruncatedProjectName(selectedProject.value?.name);
		});
		const onSubmit = async () => {
			if (!selectedProject.value || loading$2.value) return;
			const newParent = selectedFolder.value ? {
				id: selectedFolder.value.id,
				name: selectedFolder.value.name,
				type: selectedFolder.value.resource
			} : {
				id: selectedProject.value.id,
				name: targetProjectName.value,
				type: "project"
			};
			loading$2.value = true;
			try {
				if (props.data.resourceType === "folder") if (selectedProject.value.id !== projectsStore.currentProject?.id) {
					const destinationParentFolderId = selectedFolder.value && selectedFolder.value.id !== selectedProject.value.id ? selectedFolder.value.id : void 0;
					const shareCredentials = shareUsedCredentials.value ? shareableCredentials.value.map((c$1) => c$1.id) : void 0;
					await foldersStore.moveFolderToProject(projectsStore.currentProject?.id ?? "", props.data.resource.id, selectedProject.value.id, destinationParentFolderId, shareCredentials);
					props.data.workflowListEventBus.emit("folder-transferred", {
						source: {
							projectId: projectsStore.currentProject?.id,
							folder: {
								id: props.data.resource.id,
								name: props.data.resource.name
							}
						},
						destination: {
							projectId: selectedProject.value.id,
							parentFolder: {
								id: destinationParentFolderId,
								name: selectedFolder.value && selectedFolder.value.id !== selectedProject.value.id ? selectedFolder.value.name : targetProjectName.value
							},
							canAccess: isFolderSelectable.value
						}
					});
				} else {
					const newParentId = newParent.type === "folder" ? newParent.id : "0";
					await foldersStore.moveFolder(projectsStore.currentProject?.id ?? "", props.data.resource.id, newParentId);
					props.data.workflowListEventBus.emit("folder-moved", {
						newParent,
						folder: {
							id: props.data.resource.id,
							name: props.data.resource.name
						},
						options: { skipApiCall: true }
					});
				}
				else if (isTransferringOwnership.value) {
					const destinationParentFolderId = selectedFolder.value && selectedFolder.value.id !== selectedProject.value.id ? selectedFolder.value.id : void 0;
					const shareCredentials = shareUsedCredentials.value ? shareableCredentials.value.map((c$1) => c$1.id) : void 0;
					await projectsStore.moveResourceToProject("workflow", props.data.resource.id, selectedProject.value.id, destinationParentFolderId, shareCredentials);
					props.data.workflowListEventBus.emit("workflow-transferred", {
						source: {
							projectId: projectsStore.currentProject?.id,
							workflow: {
								id: props.data.resource.id,
								name: props.data.resource.name
							}
						},
						destination: {
							projectId: selectedProject.value.id,
							parentFolder: {
								id: destinationParentFolderId,
								name: selectedFolder.value && selectedFolder.value.id !== selectedProject.value.id ? selectedFolder.value.name : targetProjectName.value
							},
							canAccess: isFolderSelectable.value
						}
					});
				} else {
					const newParentFolderId = newParent.type === "folder" ? newParent.id : "0";
					await workflowsStore.updateWorkflow(props.data.resource.id, { parentFolderId: newParentFolderId });
					props.data.workflowListEventBus.emit("workflow-moved", {
						newParent,
						workflow: {
							id: props.data.resource.id,
							name: props.data.resource.name,
							oldParentId: props.data.resource.parentFolderId
						},
						options: { skipApiCall: true }
					});
				}
				uiStore.closeModal(MOVE_FOLDER_MODAL_KEY);
			} catch (error$2) {
				const errorTitleKey = props.data.resourceType === "folder" ? "folders.move.error.title" : "folders.move.workflow.error.title";
				toast.showError(error$2, i18n$2.baseText(errorTitleKey));
			} finally {
				loading$2.value = false;
			}
		};
		const descriptionMessage = computed(() => {
			let folderText = "";
			let workflowText = "";
			if (subFolderCount.value > 0) folderText = i18n$2.baseText("folders.move.modal.folder.count", { interpolate: { count: subFolderCount.value } });
			if (workflowCount.value > 0) workflowText = i18n$2.baseText("folders.move.modal.workflow.count", { interpolate: { count: workflowCount.value } });
			if (subFolderCount.value > 0 && workflowCount.value > 0) folderText += ` ${i18n$2.baseText("folder.and.workflow.separator")} `;
			return i18n$2.baseText("folders.move.modal.description", { interpolate: {
				folders: folderText ? ` ${folderText}` : "",
				workflows: workflowText ? ` ${workflowText}` : ""
			} });
		});
		const isResourceWorkflow = computed(() => props.data.resourceType === ResourceType.Workflow);
		const isFolderSelectable = computed(() => {
			return isOwnPersonalProject.value || !isPersonalProject.value;
		});
		const currentResourceProjectId = computed(() => {
			return projectsStore.currentProject?.id ?? props.data.resource.homeProjectId;
		});
		onMounted(async () => {
			if (!projectsStore.isTeamProjectFeatureEnabled) selectedProject.value = projectsStore.personalProject;
			if (isResourceWorkflow.value) {
				const [workflow, credentials] = await Promise.all([workflowsListStore.fetchWorkflow(props.data.resource.id), credentialsStore.fetchAllCredentials()]);
				usedCredentials.value = workflow?.usedCredentials ?? [];
				allCredentials.value = credentials;
			} else if (projectsStore.currentProject?.id && currentFolder.value?.id) {
				const [used, credentials] = await Promise.all([await foldersStore.fetchFolderUsedCredentials(projectsStore.currentProject.id, currentFolder.value.id), credentialsStore.fetchAllCredentials()]);
				usedCredentials.value = used;
				allCredentials.value = credentials;
			}
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: __props.modalName,
				title: title$7.value,
				width: "500",
				class: normalizeClass(_ctx.$style.container),
				"event-bus": unref(modalBus)
			}, {
				content: withCtx(() => [
					props.data.resourceType === "folder" && (workflowCount.value > 0 || subFolderCount.value > 0) ? (openBlock(), createElementBlock("p", {
						key: 0,
						class: normalizeClass(_ctx.$style.description),
						"data-test-id": "move-modal-description"
					}, toDisplayString(descriptionMessage.value), 3)) : createCommentVNode("", true),
					createVNode(EnterpriseEdition_ee_default, {
						features: [unref(EnterpriseEditionFeature).Sharing],
						class: normalizeClass(_ctx.$style.content)
					}, {
						default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.block) }, [createVNode(unref(N8nText_default), { color: "text-dark" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("folders.move.modal.project.label")), 1)]),
							_: 1
						}), createVNode(ProjectSharing_default, {
							modelValue: selectedProject.value,
							"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => selectedProject.value = $event),
							class: "pt-2xs",
							projects: availableProjects.value,
							placeholder: unref(i18n$2).baseText("folders.move.modal.project.placeholder")
						}, null, 8, [
							"modelValue",
							"projects",
							"placeholder"
						])], 2), isTransferringOwnership.value ? (openBlock(), createElementBlock("div", {
							key: 0,
							class: normalizeClass(_ctx.$style.block)
						}, [createVNode(unref(N8nText_default), null, {
							default: withCtx(() => [createVNode(unref(I18nT), {
								keypath: "projects.move.resource.modal.message.sharingNote",
								scope: "global"
							}, {
								note: withCtx(() => [createBaseVNode("strong", null, toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.message.note")), 1)]),
								resourceTypeLabel: withCtx(() => [createTextVNode(toDisplayString(resourceTypeLabel.value), 1)]),
								_: 1
							}), props.data.resource.sharedWithProjects?.length ?? false ? (openBlock(), createElementBlock("div", {
								key: 0,
								class: normalizeClass(_ctx.$style.textBlock)
							}, toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.message.sharingInfo", {
								adjustToNumber: props.data.resource.sharedWithProjects?.length,
								interpolate: { count: props.data.resource.sharedWithProjects?.length ?? 0 }
							})), 3)) : createCommentVNode("", true)]),
							_: 1
						})], 2)) : createCommentVNode("", true)]),
						_: 1
					}, 8, ["features", "class"]),
					selectedProject.value && isFolderSelectable.value ? (openBlock(), createElementBlock("div", {
						key: 1,
						class: normalizeClass(_ctx.$style.block)
					}, [createVNode(unref(N8nText_default), { color: "text-dark" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("folders.move.modal.folder.label")), 1)]),
						_: 1
					}), createVNode(MoveToFolderDropdown_default, {
						"selected-location": selectedFolder.value,
						"selected-project-id": selectedProject.value.id,
						"current-project-id": currentResourceProjectId.value,
						"current-folder-id": currentFolder.value?.id,
						"parent-folder-id": props.data.resource.parentFolderId,
						"exclude-only-parent": props.data.resourceType === "workflow",
						"onLocation:selected": onFolderSelected
					}, null, 8, [
						"selected-location",
						"selected-project-id",
						"current-project-id",
						"current-folder-id",
						"parent-folder-id",
						"exclude-only-parent"
					])], 2)) : createCommentVNode("", true),
					shareableCredentials.value.length ? (openBlock(), createBlock(unref(Checkbox_default), {
						key: 2,
						modelValue: shareUsedCredentials.value,
						"onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => shareUsedCredentials.value = $event),
						class: normalizeClass(_ctx.$style.textBlock),
						"data-test-id": "move-modal-share-credentials-checkbox"
					}, {
						label: withCtx(() => [createVNode(unref(I18nT), {
							keypath: __props.data.resourceType === "workflow" ? "folders.move.modal.message.usedCredentials.workflow" : "folders.move.modal.message.usedCredentials.folder",
							scope: "global"
						}, {
							usedCredentials: withCtx(() => [createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createVNode(ProjectMoveResourceModalCredentialsList_default, {
									"current-project-id": unref(projectsStore).currentProjectId,
									credentials: shareableCredentials.value
								}, null, 8, ["current-project-id", "credentials"])]),
								default: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style.tooltipText) }, toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.message.usedCredentials.number", {
									adjustToNumber: shareableCredentials.value.length,
									interpolate: { count: shareableCredentials.value.length }
								})), 3)]),
								_: 1
							})]),
							_: 1
						}, 8, ["keypath"])]),
						_: 1
					}, 8, ["modelValue", "class"])) : createCommentVNode("", true),
					shareableCredentials.value.length && !shareUsedCredentials.value ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 3,
						class: normalizeClass(_ctx.$style.credentialsCallout),
						theme: "warning",
						"data-test-id": "move-modal-used-credentials-warning"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("folders.move.modal.message.usedCredentials.warning")), 1)]),
						_: 1
					}, 8, ["class"])) : createCommentVNode("", true),
					unShareableCredentials.value.length ? (openBlock(), createElementBlock("div", {
						key: 4,
						class: normalizeClass(_ctx.$style.textBlock)
					}, [createVNode(unref(I18nT), {
						keypath: "projects.move.resource.modal.message.unAccessibleCredentials.note",
						scope: "global"
					}, {
						credentials: withCtx(() => [createVNode(unref(N8nTooltip_default), { placement: "top" }, {
							content: withCtx(() => [createVNode(ProjectMoveResourceModalCredentialsList_default, {
								"current-project-id": unref(projectsStore).currentProjectId,
								credentials: unShareableCredentials.value
							}, null, 8, ["current-project-id", "credentials"])]),
							default: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style.tooltipText) }, toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.message.unAccessibleCredentials")), 3)]),
							_: 1
						})]),
						_: 1
					})], 2)) : createCommentVNode("", true)
				]),
				footer: withCtx(({ close }) => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					label: unref(i18n$2).baseText("generic.cancel"),
					disabled: loading$2.value,
					float: "right",
					"data-test-id": "cancel-move-folder-button",
					onClick: close
				}, null, 8, [
					"label",
					"disabled",
					"onClick"
				]), createVNode(unref(N8nButton_default), {
					disabled: !selectedFolder.value && isFolderSelectable.value || loading$2.value,
					loading: loading$2.value,
					label: unref(i18n$2).baseText("folders.move.modal.confirm", { interpolate: { resourceTypeLabel: resourceTypeLabel.value } }),
					float: "right",
					"data-test-id": "confirm-move-folder-button",
					onClick: onSubmit
				}, null, 8, [
					"disabled",
					"loading",
					"label"
				])], 2)]),
				_: 1
			}, 8, [
				"name",
				"title",
				"class",
				"event-bus"
			]);
		};
	}
});
var MoveToFolderModal_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_1nh1g_125",
	description: "_description_1nh1g_129",
	block: "_block_1nh1g_134",
	footer: "_footer_1nh1g_138",
	tooltipText: "_tooltipText_1nh1g_144",
	credentialsCallout: "_credentialsCallout_1nh1g_148"
};
var MoveToFolderModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(MoveToFolderModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": MoveToFolderModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$31 = { key: 0 };
var DeleteUserModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "DeleteUserModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const modalBus = createEventBus();
		const loading$2 = ref(false);
		const operation = ref("");
		const deleteConfirmText = ref("");
		const selectedProject = ref(null);
		const i18n$2 = useI18n();
		const usersStore = useUsersStore();
		const projectsStore = useProjectsStore();
		const userToDelete = computed(() => {
			if (!props.data?.userId) return null;
			return usersStore.usersList.state.items.find((user$1) => user$1.id === props.data.userId);
		});
		const isPending = computed(() => !userToDelete.value?.firstName);
		const title$7 = computed(() => {
			const user$1 = userToDelete.value?.firstName && userToDelete.value.lastName ? `${userToDelete.value.firstName} ${userToDelete.value.lastName}` : userToDelete.value?.email ?? "";
			return i18n$2.baseText("settings.users.deleteUser", { interpolate: { user: user$1 } });
		});
		const enabled = computed(() => {
			if (isPending.value) return true;
			if (operation.value === "delete" && deleteConfirmText.value === i18n$2.baseText("settings.users.deleteConfirmationText")) return true;
			return !!(operation.value === "transfer" && selectedProject.value);
		});
		const projects = computed(() => {
			return projectsStore.projects.filter((project) => project.name !== `${userToDelete.value?.firstName} ${userToDelete.value?.lastName} <${userToDelete.value?.email}>`);
		});
		onBeforeMount(async () => {
			await projectsStore.getAllProjects();
		});
		const { showMessage, showError } = useToast();
		async function onSubmit() {
			if (!enabled.value) return;
			try {
				loading$2.value = true;
				const params = { id: props.data.userId };
				if (operation.value === "transfer" && selectedProject.value) params.transferId = selectedProject.value.id;
				await usersStore.deleteUser(params);
				let message$2 = "";
				if (params.transferId) {
					const transferProject = projects.value.find((project) => project.id === params.transferId);
					if (transferProject) message$2 = i18n$2.baseText("settings.users.transferredToUser", { interpolate: { projectName: transferProject.name ?? "" } });
				}
				showMessage({
					type: "success",
					title: i18n$2.baseText("settings.users.userDeleted"),
					message: message$2
				});
				await props.data.afterDelete?.();
				modalBus.emit("close");
			} catch (error$2) {
				showError(error$2, i18n$2.baseText("settings.users.userDeletedError"));
			} finally {
				loading$2.value = false;
			}
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: __props.modalName,
				title: title$7.value,
				center: true,
				width: "520",
				"event-bus": unref(modalBus),
				onEnter: onSubmit
			}, {
				content: withCtx(() => [createBaseVNode("div", null, [isPending.value ? (openBlock(), createElementBlock("div", _hoisted_1$31, [createVNode(unref(N8nText_default), { color: "text-base" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.users.confirmUserDeletion")), 1)]),
					_: 1
				})])) : (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.content)
				}, [
					createBaseVNode("div", null, [createVNode(unref(N8nText_default), { color: "text-base" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.users.confirmDataHandlingAfterDeletion")), 1)]),
						_: 1
					})]),
					createVNode(unref(ElRadio), {
						modelValue: operation.value,
						"onUpdate:modelValue": [_cache[0] || (_cache[0] = ($event) => operation.value = $event), _cache[1] || (_cache[1] = ($event) => operation.value = "transfer")],
						label: "transfer"
					}, {
						default: withCtx(() => [createVNode(unref(N8nText_default), { color: "text-dark" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.users.transferWorkflowsAndCredentials")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["modelValue"]),
					operation.value === "transfer" ? (openBlock(), createElementBlock("div", {
						key: 0,
						class: normalizeClass(_ctx.$style.optionInput)
					}, [createVNode(unref(N8nText_default), { color: "text-dark" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.users.transferWorkflowsAndCredentials.user")), 1)]),
						_: 1
					}), createVNode(ProjectSharing_default, {
						modelValue: selectedProject.value,
						"onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => selectedProject.value = $event),
						class: "pt-2xs",
						projects: projects.value,
						placeholder: unref(i18n$2).baseText("settings.users.transferWorkflowsAndCredentials.placeholder")
					}, null, 8, [
						"modelValue",
						"projects",
						"placeholder"
					])], 2)) : createCommentVNode("", true),
					createVNode(unref(ElRadio), {
						modelValue: operation.value,
						"onUpdate:modelValue": [_cache[3] || (_cache[3] = ($event) => operation.value = $event), _cache[4] || (_cache[4] = ($event) => operation.value = "delete")],
						label: "delete"
					}, {
						default: withCtx(() => [createVNode(unref(N8nText_default), { color: "text-dark" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.users.deleteWorkflowsAndCredentials")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["modelValue"]),
					operation.value === "delete" ? (openBlock(), createElementBlock("div", {
						key: 1,
						class: normalizeClass(_ctx.$style.optionInput),
						"data-test-id": "delete-data-input"
					}, [createVNode(unref(N8nInputLabel_default), { label: unref(i18n$2).baseText("settings.users.deleteConfirmationMessage") }, {
						default: withCtx(() => [createVNode(unref(Input_default), {
							modelValue: deleteConfirmText.value,
							"onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => deleteConfirmText.value = $event),
							placeholder: unref(i18n$2).baseText("settings.users.deleteConfirmationText")
						}, null, 8, ["modelValue", "placeholder"])]),
						_: 1
					}, 8, ["label"])], 2)) : createCommentVNode("", true)
				], 2))])]),
				footer: withCtx(() => [createVNode(unref(N8nButton_default), {
					loading: loading$2.value,
					disabled: !enabled.value,
					label: unref(i18n$2).baseText("settings.users.delete"),
					float: "right",
					"data-test-id": "confirm-delete-user-button",
					onClick: onSubmit
				}, null, 8, [
					"loading",
					"disabled",
					"label"
				])]),
				_: 1
			}, 8, [
				"name",
				"title",
				"event-bus"
			]);
		};
	}
});
var DeleteUserModal_vue_vue_type_style_index_0_lang_module_default = {
	content: "_content_18nve_125",
	innerContent: "_innerContent_18nve_132",
	optionInput: "_optionInput_18nve_136"
};
var DeleteUserModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(DeleteUserModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": DeleteUserModal_vue_vue_type_style_index_0_lang_module_default }]]);
var DuplicateWorkflowDialog_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "DuplicateWorkflowDialog",
	props: {
		modalName: {},
		isActive: { type: Boolean },
		data: {}
	},
	setup(__props) {
		const props = __props;
		const workflowSaving = useWorkflowSaving({ router: useRouter() });
		const workflowHelpers = useWorkflowHelpers();
		const { showMessage, showError } = useToast();
		const i18n$2 = useI18n();
		const telemetry$1 = useTelemetry();
		const credentialsStore = useCredentialsStore();
		const settingsStore = useSettingsStore();
		const workflowsStore = useWorkflowsStore();
		const workflowsListStore = useWorkflowsListStore();
		const name$3 = ref("");
		const currentTagIds = ref(props.data.tags);
		const isSaving = ref(false);
		const prevTagIds = ref(currentTagIds.value);
		const modalBus = createEventBus();
		const dropdownBus = createEventBus();
		const nameInputRef = ref();
		const focusOnSelect = () => {
			dropdownBus.emit("focus");
		};
		const focusOnNameInput = () => {
			if (nameInputRef.value?.focus) nameInputRef.value.focus();
		};
		const onTagsBlur = () => {
			prevTagIds.value = currentTagIds.value;
		};
		const onTagsEsc = () => {
			currentTagIds.value = prevTagIds.value;
		};
		const closeDialog = () => {
			modalBus.emit("close");
		};
		const save = async () => {
			const workflowName = name$3.value.trim();
			if (!workflowName) {
				showMessage({
					title: i18n$2.baseText("duplicateWorkflowDialog.errors.missingName.title"),
					message: i18n$2.baseText("duplicateWorkflowDialog.errors.missingName.message"),
					type: "error"
				});
				return;
			}
			const parentFolderId = props.data.parentFolderId;
			const currentWorkflowId = props.data.id;
			isSaving.value = true;
			try {
				let workflowToUpdate;
				if (workflowsStore.isWorkflowSaved[props.data.id]) {
					const { createdAt, updatedAt, usedCredentials, id, homeProject, sharedWithProjects, activeVersionId, activeVersion, active: active$1, ...workflow } = await workflowsListStore.fetchWorkflow(props.data.id);
					workflowToUpdate = workflow;
					workflowHelpers.removeForeignCredentialsFromWorkflow(workflowToUpdate, credentialsStore.allCredentials);
				}
				if (await workflowSaving.saveAsNewWorkflow({
					name: workflowName,
					data: workflowToUpdate,
					tags: currentTagIds.value,
					resetWebhookUrls: true,
					openInNewWindow: true,
					resetNodeIds: true,
					requestNewId: true,
					parentFolderId
				})) {
					closeDialog();
					telemetry$1.track("User duplicated workflow", {
						old_workflow_id: currentWorkflowId,
						workflow_id: props.data.id,
						sharing_role: workflowHelpers.getWorkflowProjectRole(props.data.id)
					});
					props.data.externalEventBus?.emit("workflow-duplicated", { id: props.data.id });
				}
			} catch (error$2) {
				if (error$2.httpStatusCode === 403) {
					error$2.message = i18n$2.baseText("duplicateWorkflowDialog.errors.forbidden.message");
					showError(error$2, i18n$2.baseText("duplicateWorkflowDialog.errors.forbidden.title"));
				} else showError(error$2, i18n$2.baseText("duplicateWorkflowDialog.errors.generic.title"));
			} finally {
				isSaving.value = false;
			}
		};
		watch(() => props.isActive, (active$1) => {
			if (active$1) focusOnSelect();
		});
		onMounted(async () => {
			name$3.value = await workflowsStore.getDuplicateCurrentWorkflowName(props.data.name);
			await nextTick();
			focusOnNameInput();
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: __props.modalName,
				"event-bus": unref(modalBus),
				title: unref(i18n$2).baseText("duplicateWorkflowDialog.duplicateWorkflow"),
				center: true,
				width: "420px",
				onEnter: save
			}, {
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.content) }, [createVNode(unref(Input_default), {
					ref_key: "nameInputRef",
					ref: nameInputRef,
					modelValue: name$3.value,
					"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => name$3.value = $event),
					placeholder: unref(i18n$2).baseText("duplicateWorkflowDialog.enterWorkflowName"),
					maxlength: unref(128)
				}, null, 8, [
					"modelValue",
					"placeholder",
					"maxlength"
				]), unref(settingsStore).areTagsEnabled ? (openBlock(), createBlock(WorkflowTagsDropdown_default, {
					key: 0,
					ref: "dropdown",
					modelValue: currentTagIds.value,
					"onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => currentTagIds.value = $event),
					"create-enabled": true,
					"event-bus": unref(dropdownBus),
					placeholder: unref(i18n$2).baseText("duplicateWorkflowDialog.chooseOrCreateATag"),
					onBlur: onTagsBlur,
					onEsc: onTagsEsc
				}, null, 8, [
					"modelValue",
					"event-bus",
					"placeholder"
				])) : createCommentVNode("", true)], 2)]),
				footer: withCtx(({ close }) => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					disabled: isSaving.value,
					label: unref(i18n$2).baseText("duplicateWorkflowDialog.cancel"),
					onClick: close
				}, null, 8, [
					"disabled",
					"label",
					"onClick"
				]), createVNode(unref(N8nButton_default), {
					loading: isSaving.value,
					label: unref(i18n$2).baseText("duplicateWorkflowDialog.save"),
					onClick: save
				}, null, 8, ["loading", "label"])], 2)]),
				_: 1
			}, 8, [
				"name",
				"event-bus",
				"title"
			]);
		};
	}
});
var DuplicateWorkflowDialog_vue_vue_type_style_index_0_lang_module_default = {
	content: "_content_uugk4_125",
	footer: "_footer_uugk4_129"
};
var DuplicateWorkflowDialog_default = /* @__PURE__ */ __plugin_vue_export_helper_default(DuplicateWorkflowDialog_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": DuplicateWorkflowDialog_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$30 = {
	key: 0,
	class: "mb-l"
};
var _hoisted_2$14 = { key: 0 };
var ExternalSecretsProviderModal_ee_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ExternalSecretsProviderModal.ee",
	props: { data: {} },
	setup(__props) {
		const props = __props;
		const defaultProviderData = { infisical: { siteURL: "https://app.infisical.com" } };
		const externalSecretsStore = useExternalSecretsStore();
		const toast = useToast();
		const i18n$2 = useI18n();
		const { confirm } = useMessage();
		const saving = ref(false);
		const eventBus = createEventBus();
		const labelSize = { size: "medium" };
		const provider = computed(() => externalSecretsStore.providers.find((p) => p.name === props.data.name));
		const providerData = ref({});
		const { connectionState, initialConnectionState, normalizedProviderData, shouldDisplayProperty, setConnectionState, testConnection } = useExternalSecretsProvider(provider, providerData);
		const providerDataUpdated = computed(() => {
			return Object.keys(providerData.value).find((key) => {
				return providerData.value[key] !== provider.value?.data?.[key];
			});
		});
		const canSave = computed(() => provider.value?.properties?.filter((property) => property.required && shouldDisplayProperty(property)).every((property) => {
			return !!providerData.value[property.name];
		}) && providerDataUpdated.value);
		onMounted(async () => {
			try {
				const fetchedProvider = await externalSecretsStore.getProvider(props.data.name);
				providerData.value = {
					...defaultProviderData[props.data.name] || {},
					...fetchedProvider.data
				};
				setConnectionState(fetchedProvider.state);
				if (fetchedProvider.connected) initialConnectionState.value = fetchedProvider.state;
				else if (Object.keys(fetchedProvider.data ?? {}).length) await testConnection();
				if (fetchedProvider.state === "connected") externalSecretsStore.reloadProvider(props.data.name);
			} catch (error$2) {
				toast.showError(error$2, "Error");
			}
		});
		function onValueChange(updateInformation) {
			providerData.value = {
				...providerData.value,
				[updateInformation.name]: updateInformation.value
			};
		}
		async function save() {
			if (!provider.value) return;
			try {
				saving.value = true;
				await externalSecretsStore.updateProvider(provider.value.name, { data: normalizedProviderData.value });
				setConnectionState(provider.value.state);
			} catch (error$2) {
				toast.showError(error$2, "Error");
			}
			await testConnection();
			if (initialConnectionState.value === "initializing" && connectionState.value === "tested") setTimeout(() => {
				eventBus.emit("connect", true);
			}, 100);
			saving.value = false;
		}
		async function onBeforeClose() {
			if (providerDataUpdated.value) return await confirm(i18n$2.baseText("settings.externalSecrets.provider.closeWithoutSaving.description", { interpolate: { provider: provider.value?.displayName ?? "" } }), {
				title: i18n$2.baseText("settings.externalSecrets.provider.closeWithoutSaving.title"),
				confirmButtonText: i18n$2.baseText("settings.externalSecrets.provider.closeWithoutSaving.confirm"),
				cancelButtonText: i18n$2.baseText("settings.externalSecrets.provider.closeWithoutSaving.cancel")
			}) !== MODAL_CONFIRM;
			return true;
		}
		async function onConnectionStateChange() {
			await testConnection();
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				id: "external-secrets-provider-modal",
				width: "812px",
				title: provider.value?.displayName,
				"event-bus": __props.data.eventBus,
				name: unref(EXTERNAL_SECRETS_PROVIDER_MODAL_KEY),
				"before-close": onBeforeClose
			}, {
				header: withCtx(() => [provider.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.header)
				}, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.providerTitle) }, [createVNode(ExternalSecretsProviderImage_ee_default, {
					provider: provider.value,
					class: "mr-xs"
				}, null, 8, ["provider"]), createBaseVNode("span", null, toDisplayString(provider.value.displayName), 1)], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.providerActions) }, [createVNode(ExternalSecretsProviderConnectionSwitch_ee_default, {
					class: "mr-s",
					disabled: (unref(connectionState) === "initializing" || unref(connectionState) === "error") && !provider.value.connected,
					"event-bus": unref(eventBus),
					provider: provider.value,
					onChange: onConnectionStateChange
				}, null, 8, [
					"disabled",
					"event-bus",
					"provider"
				]), createVNode(unref(N8nButton_default), {
					variant: "solid",
					loading: saving.value,
					disabled: !canSave.value && !saving.value,
					onClick: save
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText(`settings.externalSecrets.provider.buttons.${saving.value ? "saving" : "save"}`)), 1)]),
					_: 1
				}, 8, ["loading", "disabled"])], 2)], 2)) : createCommentVNode("", true)]),
				content: withCtx(() => [provider.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.container)
				}, [
					_cache[2] || (_cache[2] = createBaseVNode("hr", { class: "mb-l" }, null, -1)),
					unref(connectionState) !== "initializing" ? (openBlock(), createElementBlock("div", _hoisted_1$30, [unref(connectionState) === "connected" || unref(connectionState) === "tested" ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 0,
						theme: "success"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText(`settings.externalSecrets.provider.testConnection.success${provider.value.connected ? ".connected" : ""}`, { interpolate: {
							count: `${unref(externalSecretsStore).secrets[provider.value.name]?.length}`,
							provider: provider.value.displayName
						} })) + " ", 1), provider.value.connected ? (openBlock(), createElementBlock("span", _hoisted_2$14, [
							_cache[1] || (_cache[1] = createBaseVNode("br", null, null, -1)),
							createVNode(unref(I18nT), {
								keypath: "settings.externalSecrets.provider.testConnection.success.connected.usage",
								scope: "global"
							}, {
								code: withCtx(() => [createBaseVNode("code", null, toDisplayString(`\{\{ \$secrets\.${provider.value.name}\.secret_name \}\}`), 1)]),
								_: 1
							}),
							createVNode(unref(N8nLink_default), {
								href: unref(i18n$2).baseText("settings.externalSecrets.docs.use"),
								size: "small"
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.externalSecrets.provider.testConnection.success.connected.docs")), 1)]),
								_: 1
							}, 8, ["href"])
						])) : createCommentVNode("", true)]),
						_: 1
					})) : unref(connectionState) === "error" ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 1,
						theme: "danger"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText(`settings.externalSecrets.provider.testConnection.error${provider.value.connected ? ".connected" : ""}`, { interpolate: { provider: provider.value.displayName } })), 1)]),
						_: 1
					})) : createCommentVNode("", true)])) : createCommentVNode("", true),
					(openBlock(true), createElementBlock(Fragment, null, renderList(provider.value.properties, (property) => {
						return withDirectives((openBlock(), createElementBlock("form", {
							key: property.name,
							autocomplete: "off",
							"data-test-id": "external-secrets-provider-properties-form",
							onSubmit: _cache[0] || (_cache[0] = withModifiers(() => {}, ["prevent"]))
						}, [property.type === "notice" ? (openBlock(), createBlock(unref(N8nNotice_default), {
							key: 0,
							content: property.displayName
						}, null, 8, ["content"])) : (openBlock(), createBlock(ParameterInputExpanded_default, {
							key: 1,
							class: "mb-l",
							parameter: property,
							value: providerData.value[property.name],
							label: labelSize,
							"event-source": "external-secrets-provider",
							onUpdate: onValueChange
						}, null, 8, ["parameter", "value"]))], 32)), [[vShow, unref(shouldDisplayProperty)(property)]]);
					}), 128))
				], 2)) : createCommentVNode("", true)]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var ExternalSecretsProviderModal_ee_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_1b79w_125",
	header: "_header_1b79w_129",
	providerTitle: "_providerTitle_1b79w_137",
	providerActions: "_providerActions_1b79w_149",
	footer: "_footer_1b79w_156"
};
var ExternalSecretsProviderModal_ee_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ExternalSecretsProviderModal_ee_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ExternalSecretsProviderModal_ee_vue_vue_type_style_index_0_lang_module_default }]]);
function useSecretsProviderConnection() {
	const rootStore = useRootStore();
	const connectionState = ref("initializing");
	const isLoading = ref(false);
	const isTesting = ref(false);
	async function testConnection(providerKey) {
		isTesting.value = true;
		try {
			const { testState } = await testSecretProviderConnection(rootStore.restApiContext, providerKey);
			connectionState.value = testState === "tested" ? "connected" : testState;
			return connectionState.value;
		} catch {
			connectionState.value = "error";
			return "error";
		} finally {
			isTesting.value = false;
		}
	}
	async function getConnection(providerKey) {
		isLoading.value = true;
		try {
			return await getSecretProviderConnectionByKey(rootStore.restApiContext, providerKey);
		} finally {
			isLoading.value = false;
		}
	}
	async function createConnection(connectionData) {
		return await createSecretProviderConnection(rootStore.restApiContext, {
			...connectionData,
			isGlobal: true
		});
	}
	async function updateConnection(providerKey, connectionData) {
		return await updateSecretProviderConnection(rootStore.restApiContext, providerKey, connectionData);
	}
	return {
		connectionState,
		isLoading,
		isTesting,
		getConnection,
		createConnection,
		updateConnection,
		testConnection
	};
}
var CONNECTION_NAME_REGEX = /^[a-z0-9]+(?:-[a-z0-9]+)*$/;
function isValidConnectionName(name$3) {
	return CONNECTION_NAME_REGEX.test(name$3);
}
function useConnectionModal(options$1) {
	const { providerTypes } = options$1;
	const rbacStore = useRBACStore();
	const toast = useToast();
	const projectsStore = useProjectsStore();
	const providerKey = ref(options$1.providerKey?.value);
	const providerSecretsCount = ref(0);
	const connectionName = ref("");
	const originalConnectionName = ref("");
	const connectionNameBlurred = ref(false);
	const selectedProviderType = ref(void 0);
	const connectionSettings = ref({});
	const originalSettings = ref({});
	const isSaving = ref(false);
	const didSave = ref(false);
	const connection = useSecretsProviderConnection();
	function shouldDisplayProperty(property) {
		let visible = true;
		if (property.displayOptions?.show) visible = visible && Object.entries(property.displayOptions.show).every(([key, value]) => {
			return value?.includes(connectionSettings.value[key]);
		});
		if (property.displayOptions?.hide) visible = visible && !Object.entries(property.displayOptions.hide).every(([key, value]) => {
			return value?.includes(connectionSettings.value[key]);
		});
		return visible;
	}
	const projectIds = ref([]);
	const isSharedGlobally = ref(true);
	const originalProjectIds = ref([]);
	const originalIsSharedGlobally = ref(true);
	const connectionProjects = ref([]);
	watch(connectionProjects, async (projects) => {
		if (projects.length === 0) return;
		const projectId = projects[0].id;
		if (!projectsStore.projects.find((p) => p.id === projectId)) await projectsStore.fetchProject(projectId);
	}, { immediate: true });
	const sharedWithProjects = computed(() => {
		if (projectIds.value.length === 0) return [];
		return projectsStore.projects.filter((p) => projectIds.value.includes(p.id));
	});
	const hasProjectScope = (projectId, scope) => {
		return projectsStore.myProjects.find((p) => p.id === projectId)?.scopes?.includes(scope) ?? false;
	};
	const canCreateProjectScoped = computed(() => {
		if (!options$1.projectId) return false;
		return hasProjectScope(options$1.projectId, "externalSecretsProvider:create");
	});
	const canUpdateProjectScoped = computed(() => {
		if (originalProjectIds.value.length === 0) return false;
		return originalProjectIds.value.every((id) => hasProjectScope(id, "externalSecretsProvider:update"));
	});
	const canCreate = computed(() => rbacStore.hasScope("externalSecretsProvider:create") || canCreateProjectScoped.value);
	const canUpdate = computed(() => {
		return rbacStore.hasScope("externalSecretsProvider:update") || canUpdateProjectScoped.value;
	});
	const canDelete = computed(() => {
		return rbacStore.hasScope("externalSecretsProvider:delete");
	});
	const canShareGlobally = computed(() => {
		return rbacStore.hasScope("externalSecretsProvider:update");
	});
	const isEditMode = computed(() => !!providerKey.value);
	const providerTypeOptions = computed(() => providerTypes.value.map((type) => ({
		label: type.displayName,
		value: type.type
	})));
	const settingsUpdated = computed(() => {
		return Object.keys(connectionSettings.value).some((key) => {
			return connectionSettings.value[key] !== originalSettings.value[key];
		});
	});
	const scopeUpdated = computed(() => isSharedGlobally.value !== originalIsSharedGlobally.value || JSON.stringify(projectIds.value) !== JSON.stringify(originalProjectIds.value));
	const hasUnsavedChanges = computed(() => connectionName.value !== originalConnectionName.value || settingsUpdated.value || scopeUpdated.value);
	const requiredFieldsFilled = computed(() => {
		if (!selectedProviderType.value) return true;
		return selectedProviderType.value.properties?.filter((property) => property.required && shouldDisplayProperty(property)).every((property) => {
			const value = connectionSettings.value[property.name];
			return value !== void 0 && value !== null && value !== "";
		}) ?? true;
	});
	const normalizedConnectionSettings = computed(() => {
		return Object.entries(connectionSettings.value).reduce((acc, [key, value]) => {
			const property = selectedProviderType.value?.properties?.find((p) => p.name === key);
			if (property && shouldDisplayProperty(property)) acc[key] = value;
			return acc;
		}, {});
	});
	const isNameTaken = computed(() => {
		const name$3 = connectionName.value.trim();
		return (options$1.existingProviderNames?.value ?? []).includes(name$3) && (!isEditMode.value || name$3 !== originalConnectionName.value);
	});
	const isValidName = computed(() => {
		const name$3 = connectionName.value.trim();
		return name$3.length > 0 && isValidConnectionName(name$3) && !isNameTaken.value;
	});
	const connectionNameError = computed(() => {
		const name$3 = connectionName.value.trim();
		if (name$3.length === 0) return i18n$1.baseText("settings.secretsProviderConnections.modal.validation.connectionName.required");
		if (!isValidConnectionName(name$3)) return i18n$1.baseText("settings.secretsProviderConnections.modal.validation.connectionName.format");
		if (isNameTaken.value) return i18n$1.baseText("settings.secretsProviderConnections.modal.connectionName.unique");
		return null;
	});
	const canSave = computed(() => {
		if (!isValidName.value) return false;
		if (!selectedProviderType.value) return false;
		if (!(isEditMode.value ? canUpdate.value : canCreate.value)) return false;
		return requiredFieldsFilled.value && (projectIds.value.length > 0 || isSharedGlobally.value) && (settingsUpdated.value || scopeUpdated.value || !isEditMode.value);
	});
	const expressionExample$1 = computed(() => {
		if (!originalConnectionName.value) return "";
		return `{{ $secrets.${originalConnectionName.value}.secret_name }}`;
	});
	function initializeSettings(providerType) {
		const initialSettings = {};
		providerType.properties?.forEach((property) => {
			if (property.default !== void 0 && property.default !== "") initialSettings[property.name] = property.default;
		});
		connectionSettings.value = initialSettings;
	}
	function updateSettings(name$3, value) {
		connectionSettings.value = {
			...connectionSettings.value,
			[name$3]: value
		};
	}
	function hyphenateConnectionName(name$3) {
		return name$3.trim().replace(/\s+/g, "-").replace(/([a-z])([A-Z])/g, "$1-$2").replace(/([A-Z])([A-Z][a-z])/g, "$1-$2").toLowerCase();
	}
	function selectProviderType(providerTypeKey) {
		const provider = providerTypes.value.find((type) => type.type === providerTypeKey);
		if (!provider) return;
		selectedProviderType.value = provider;
		initializeSettings(provider);
	}
	async function testAndShowFeedback(key) {
		await connection.testConnection(key);
		if (connection.connectionState.value === "connected") toast.showMessage({
			title: i18n$1.baseText("settings.secretsProviderConnections.modal.testConnection.success.title"),
			message: i18n$1.baseText("settings.secretsProviderConnections.modal.testConnection.success.description", { interpolate: { providerName: connectionName.value } }),
			type: "success"
		});
		else toast.showError(new Error(i18n$1.baseText("generic.error")), i18n$1.baseText("generic.error"), i18n$1.baseText("settings.secretsProviderConnections.modal.testConnection.error.serviceDisabled"));
	}
	async function loadConnection() {
		if (!providerKey.value) return;
		try {
			const { name: name$3, type, settings, projects } = await connection.getConnection(providerKey.value);
			connectionName.value = name$3;
			originalConnectionName.value = name$3;
			connectionNameBlurred.value = true;
			connectionSettings.value = { ...settings };
			originalSettings.value = { ...settings };
			connectionProjects.value = projects ?? [];
			projectIds.value = (projects ?? []).map((p) => p.id);
			isSharedGlobally.value = projectIds.value.length === 0;
			originalProjectIds.value = [...projectIds.value];
			originalIsSharedGlobally.value = isSharedGlobally.value;
			selectedProviderType.value = providerTypes.value.find((providerType) => providerType.type === type);
			await connection.testConnection(providerKey.value);
		} catch (error$2) {
			toast.showError(error$2, i18n$1.baseText("generic.error"), error$2?.response?.data?.data.error);
		}
	}
	async function createNewConnection() {
		if (!selectedProviderType.value) return false;
		const scopeProjectIds = isSharedGlobally.value ? [] : projectIds.value.slice(0, 1);
		const connectionData = {
			providerKey: connectionName.value.trim(),
			type: selectedProviderType.value.type,
			settings: normalizedConnectionSettings.value,
			projectIds: scopeProjectIds
		};
		const { secretsCount } = await connection.createConnection(connectionData);
		providerKey.value = connectionName.value.trim();
		providerSecretsCount.value = secretsCount;
		originalSettings.value = { ...connectionSettings.value };
		originalConnectionName.value = connectionName.value.trim();
		originalProjectIds.value = [...projectIds.value];
		originalIsSharedGlobally.value = isSharedGlobally.value;
		if (providerKey.value) await testAndShowFeedback(providerKey.value);
		return true;
	}
	async function updateExistingConnection() {
		if (!providerKey.value || !selectedProviderType.value) return false;
		const scopeProjectIds = isSharedGlobally.value ? [] : projectIds.value.slice(0, 1);
		const updateData = {
			isGlobal: isSharedGlobally.value,
			settings: normalizedConnectionSettings.value,
			projectIds: scopeProjectIds
		};
		const hasSettingsChanges = settingsUpdated.value;
		const { secretsCount, projects } = await connection.updateConnection(providerKey.value, updateData);
		providerSecretsCount.value = secretsCount;
		originalSettings.value = { ...connectionSettings.value };
		originalConnectionName.value = connectionName.value.trim();
		originalProjectIds.value = [...projectIds.value];
		isSharedGlobally.value = projects.length === 0;
		originalIsSharedGlobally.value = projects.length === 0;
		if (hasSettingsChanges && providerKey.value) await testAndShowFeedback(providerKey.value);
		return true;
	}
	function setScopeState(newProjectIds, newIsSharedGlobally) {
		projectIds.value = newProjectIds.slice(0, 1);
		isSharedGlobally.value = newIsSharedGlobally;
	}
	function initializeProjectScope() {
		if (!providerKey.value && options$1.projectId) {
			const project = projectsStore.myProjects.find((p) => p.id === options$1.projectId);
			projectIds.value = [options$1.projectId];
			isSharedGlobally.value = false;
			originalProjectIds.value = [options$1.projectId];
			originalIsSharedGlobally.value = false;
			if (project?.name) connectionProjects.value = [{
				id: project.id,
				name: project.name
			}];
		}
	}
	initializeProjectScope();
	async function saveConnection() {
		if (!selectedProviderType.value || !canSave.value) return false;
		if (!(isEditMode.value ? canUpdate.value : canCreate.value)) {
			toast.showError(new Error(i18n$1.baseText("generic.missing.permissions")), i18n$1.baseText("generic.error"), i18n$1.baseText("generic.missing.permissions"));
			return false;
		}
		isSaving.value = true;
		try {
			const success = isEditMode.value ? await updateExistingConnection() : await createNewConnection();
			if (success) didSave.value = true;
			return success;
		} catch (error$2) {
			toast.showError(error$2, i18n$1.baseText("generic.error"), error$2?.response?.data?.data.error);
			return false;
		} finally {
			isSaving.value = false;
		}
	}
	return {
		providerSecretsCount,
		providerKey,
		connectionName,
		connectionNameBlurred,
		originalConnectionName,
		selectedProviderType,
		connectionSettings,
		isSaving,
		didSave,
		connection,
		projectIds,
		isSharedGlobally,
		connectionProjects,
		sharedWithProjects,
		canUpdate,
		canDelete,
		canShareGlobally,
		setScopeState,
		isEditMode,
		providerTypeOptions,
		hasUnsavedChanges,
		canSave,
		expressionExample: expressionExample$1,
		isValidName,
		connectionNameError,
		scopeUpdated,
		updateSettings,
		selectProviderType,
		hyphenateConnectionName,
		loadConnection,
		saveConnection,
		shouldDisplayProperty
	};
}
var _hoisted_1$29 = { key: 0 };
var _hoisted_2$13 = { key: 1 };
var _hoisted_3$9 = { class: "mb-l" };
var _hoisted_4$8 = { class: "mb-l" };
var SecretsProviderConnectionModal_ee_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "SecretsProviderConnectionModal.ee",
	props: {
		modalName: {},
		data: { default: () => ({ activeTab: "connection" }) }
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const { confirm } = useMessage();
		const eventBus = createEventBus();
		const projectsStore = useProjectsStore();
		const uiStore = useUIStore();
		const LABEL_SIZE = { size: "medium" };
		const ACTIVE_TAB = ref(props.data?.activeTab ?? "connection");
		const providerTypes = computed(() => props.data.providerTypes ?? []);
		const modal$1 = useConnectionModal({
			providerTypes,
			providerKey: computed(() => props.data.providerKey ?? ""),
			existingProviderNames: computed(() => props.data.existingProviderNames ?? []),
			projectId: computed(() => props.data.projectId).value
		});
		const sidebarItems = computed(() => {
			return [{
				id: "connection",
				label: i18n$2.baseText("settings.secretsProviderConnections.modal.items.connection"),
				position: "top"
			}, {
				id: "sharing",
				label: i18n$2.baseText("settings.secretsProviderConnections.modal.items.scope"),
				position: "top"
			}];
		});
		const scopeProjects = computed(() => modal$1.canShareGlobally.value ? projectsStore.teamProjects.filter((p) => !modal$1.projectIds.value.includes(p.id)) : []);
		function handleScopeUpdate(value) {
			const project = Array.isArray(value) ? value.at(-1) : value;
			modal$1.setScopeState(project ? [project.id] : [], false);
		}
		function handleShareGlobally(value) {
			modal$1.setScopeState([], value);
		}
		function handleConnectionNameUpdate(value) {
			modal$1.connectionName.value = value;
			modal$1.connectionNameBlurred.value = false;
		}
		function handleConnectionNameBlur() {
			modal$1.connectionName.value = modal$1.hyphenateConnectionName(modal$1.connectionName.value);
			modal$1.connectionNameBlurred.value = true;
		}
		function handleProviderTypeChange(providerType) {
			modal$1.selectProviderType(providerType);
		}
		function handleSettingChange(update) {
			modal$1.updateSettings(update.name, update.value);
		}
		async function handleSave() {
			await modal$1.saveConnection();
		}
		function handleDelete() {
			if (!modal$1.providerKey.value) return;
			uiStore.openModalWithData({
				name: DELETE_SECRETS_PROVIDER_MODAL_KEY,
				data: {
					providerKey: modal$1.providerKey.value,
					providerName: modal$1.connectionName.value,
					secretsCount: modal$1.providerSecretsCount.value ?? 0,
					onConfirm: () => {
						props.data.onClose?.();
						eventBus.emit("close");
					}
				}
			});
		}
		async function handleBeforeClose() {
			if (modal$1.hasUnsavedChanges.value) {
				if (await confirm(i18n$2.baseText("settings.secretsProviderConnections.modal.unsavedChanges.text"), {
					title: i18n$2.baseText("settings.secretsProviderConnections.modal.unsavedChanges.title"),
					confirmButtonText: i18n$2.baseText("generic.keepEditing"),
					cancelButtonText: i18n$2.baseText("generic.close")
				}) === "confirm") return false;
			}
			props.data.onClose?.();
			return true;
		}
		onMounted(async () => {
			if (providerTypes.value.length === 0) return;
			if (modal$1.isEditMode.value) await Promise.all([modal$1.loadConnection()]);
		});
		const nameRef = useTemplateRef("nameRef");
		const { width } = useElementSize(nameRef);
		return (_ctx, _cache) => {
			return providerTypes.value.length ? (openBlock(), createBlock(Modal_default, {
				key: 0,
				id: `${unref(SECRETS_PROVIDER_CONNECTION_MODAL_KEY)}-modal`,
				"custom-class": _ctx.$style.secretsProviderConnectionModal,
				"event-bus": unref(eventBus),
				name: unref(SECRETS_PROVIDER_CONNECTION_MODAL_KEY),
				"before-close": handleBeforeClose,
				width: "70%",
				height: "80%"
			}, {
				header: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.header) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.info) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.icon) }, [unref(modal$1).selectedProviderType.value ? (openBlock(), createBlock(SecretsProviderImage_ee_default, {
					key: 0,
					provider: unref(modal$1).selectedProviderType.value,
					class: normalizeClass(_ctx.$style.headerIcon)
				}, null, 8, ["provider", "class"])) : (openBlock(), createBlock(unref(N8nIcon_default), {
					key: 1,
					icon: "vault",
					width: "24",
					height: "24"
				}))], 2), createBaseVNode("div", {
					ref_key: "nameRef",
					ref: nameRef,
					class: normalizeClass(_ctx.$style.name)
				}, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.nameRow) }, [createVNode(unref(N8nText_default), { size: "large" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(modal$1).selectedProviderType.value?.displayName ?? unref(i18n$2).baseText("settings.secretsProviderConnections.modal.providerType.placeholder")), 1)]),
					_: 1
				})], 2)], 2)], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.actions) }, [createVNode(unref(N8nTooltip_default), { placement: "left" }, {
					content: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.delete")), 1)]),
					default: withCtx(() => [unref(modal$1).isEditMode.value && unref(modal$1).canDelete.value ? (openBlock(), createBlock(unref(N8nIconButton_default), {
						key: 0,
						title: unref(i18n$2).baseText("generic.delete"),
						icon: "trash-2",
						variant: "ghost",
						disabled: unref(modal$1).isSaving.value,
						"data-test-id": "secrets-provider-delete-button",
						onClick: handleDelete
					}, null, 8, ["title", "disabled"])) : createCommentVNode("", true)]),
					_: 1
				}), createVNode(SaveButton_default, {
					saved: !unref(modal$1).hasUnsavedChanges.value && unref(modal$1).isEditMode.value,
					"is-saving": unref(modal$1).isSaving.value,
					disabled: !unref(modal$1).canSave.value,
					"saving-label": unref(i18n$2).baseText("settings.secretsProviderConnections.modal.saving"),
					"data-test-id": "secrets-provider-connection-save-button",
					onClick: handleSave
				}, null, 8, [
					"saved",
					"is-saving",
					"disabled",
					"saving-label"
				])], 2)], 2)]),
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.container) }, [createBaseVNode("nav", { class: normalizeClass(_ctx.$style.sidebar) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(sidebarItems.value, (item$2) => {
					return openBlock(), createBlock(unref(N8nMenuItem_default), {
						key: item$2.id,
						item: item$2,
						active: ACTIVE_TAB.value === item$2.id,
						"data-test-id": `sidebar-item-${item$2.id}`,
						onClick: ($event) => ACTIVE_TAB.value = item$2.id
					}, null, 8, [
						"item",
						"active",
						"data-test-id",
						"onClick"
					]);
				}), 128))], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.contentArea) }, [unref(modal$1).connection.isLoading.value ? (openBlock(), createElementBlock("div", _hoisted_1$29, [createVNode(unref(N8nLoading_default), {
					variant: "p",
					rows: 4
				})])) : (openBlock(), createElementBlock("div", _hoisted_2$13, [ACTIVE_TAB.value === "connection" ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.mainContent)
				}, [createBaseVNode("div", null, [
					unref(modal$1).connection.connectionState.value === "connected" ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 0,
						theme: "success",
						class: "mb-l",
						"data-test-id": "connection-success-callout"
					}, {
						default: withCtx(() => [createBaseVNode("div", null, [
							createBaseVNode("p", null, toDisplayString(unref(i18n$2).baseText("settings.secretsProviderConnections.modal.testConnection.success.serviceEnabled", { interpolate: {
								count: unref(modal$1).providerSecretsCount.value,
								providerName: unref(modal$1).connectionName.value
							} })), 1),
							createBaseVNode("p", null, toDisplayString(unref(i18n$2).baseText("settings.secretsProviderConnections.modal.testConnection.success.reference")), 1),
							createBaseVNode("code", { class: normalizeClass(_ctx.$style.expressionExample) }, toDisplayString(unref(modal$1).expressionExample.value), 3)
						])]),
						_: 1
					})) : unref(modal$1).connection.connectionState.value === "error" ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 1,
						theme: "danger",
						class: "mb-l",
						"data-test-id": "connection-error-callout"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.secretsProviderConnections.modal.testConnection.error", { interpolate: { providerName: unref(modal$1).connectionName.value } })), 1)]),
						_: 1
					})) : createCommentVNode("", true),
					createBaseVNode("div", _hoisted_3$9, [
						createVNode(unref(N8nInputLabel_default), { label: unref(i18n$2).baseText("settings.secretsProviderConnections.modal.connectionName") }, null, 8, ["label"]),
						createVNode(unref(Input_default), {
							"data-test-id": "provider-name",
							"model-value": unref(modal$1).connectionName.value,
							"max-width": unref(width) - 10,
							readonly: unref(modal$1).isEditMode.value,
							disabled: unref(modal$1).isEditMode.value,
							"aria-required": "true",
							placeholder: "vault-project-x-y-z",
							"onUpdate:modelValue": handleConnectionNameUpdate,
							onBlur: handleConnectionNameBlur
						}, null, 8, [
							"model-value",
							"max-width",
							"readonly",
							"disabled"
						]),
						unref(modal$1).connectionNameError.value && unref(modal$1).connectionNameBlurred.value && !unref(modal$1).isEditMode.value ? (openBlock(), createBlock(unref(N8nText_default), {
							key: 0,
							size: "small",
							color: "danger",
							class: normalizeClass(_ctx.$style.headerHint)
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(modal$1).connectionNameError.value), 1)]),
							_: 1
						}, 8, ["class"])) : !unref(modal$1).isEditMode.value ? (openBlock(), createBlock(unref(N8nText_default), {
							key: 1,
							size: "small",
							color: "text-light",
							class: normalizeClass(_ctx.$style.headerHint)
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.secretsProviderConnections.modal.connectionName.hint")), 1)]),
							_: 1
						}, 8, ["class"])) : createCommentVNode("", true)
					]),
					createBaseVNode("div", _hoisted_4$8, [createVNode(unref(N8nInputLabel_default), { label: unref(i18n$2).baseText("settings.secretsProviderConnections.modal.providerType") }, null, 8, ["label"]), createVNode(unref(N8nSelect_default), {
						"data-test-id": "provider-type-select",
						"model-value": unref(modal$1).selectedProviderType.value?.type,
						disabled: unref(modal$1).isEditMode.value,
						"onUpdate:modelValue": handleProviderTypeChange
					}, {
						default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(modal$1).providerTypeOptions.value, (option) => {
							return openBlock(), createBlock(unref(N8nOption_default), {
								key: option.value,
								label: option.label,
								value: option.value
							}, null, 8, ["label", "value"]);
						}), 128))]),
						_: 1
					}, 8, ["model-value", "disabled"])]),
					(openBlock(true), createElementBlock(Fragment, null, renderList(unref(modal$1).selectedProviderType.value?.properties, (property) => {
						return withDirectives((openBlock(), createElementBlock("form", {
							key: property.name,
							autocomplete: "off",
							onSubmit: _cache[0] || (_cache[0] = withModifiers(() => {}, ["prevent"]))
						}, [property.type === "notice" ? (openBlock(), createBlock(unref(N8nNotice_default), {
							key: 0,
							content: property.displayName
						}, null, 8, ["content"])) : (openBlock(), createBlock(ParameterInputExpanded_default, {
							key: 1,
							class: "mb-l",
							parameter: property,
							value: unref(modal$1).connectionSettings.value[property.name],
							label: LABEL_SIZE,
							"event-source": "secrets-provider-connection",
							onUpdate: handleSettingChange
						}, null, 8, ["parameter", "value"]))], 32)), [[vShow, unref(modal$1).shouldDisplayProperty(property)]]);
					}), 128))
				])], 2)) : createCommentVNode("", true), ACTIVE_TAB.value === "sharing" && unref(modal$1).isEditMode ? (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.mainContent)
				}, [createBaseVNode("div", null, [createVNode(unref(N8nInfoTip_default), {
					bold: false,
					class: "mb-s"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.secretsProviderConnections.modal.scope.info")), 1)]),
					_: 1
				}), createVNode(ProjectSharing_default, {
					"model-value": unref(modal$1).sharedWithProjects.value,
					projects: scopeProjects.value,
					readonly: !unref(modal$1).canUpdate.value,
					static: !unref(modal$1).canUpdate.value,
					placeholder: unref(i18n$2).baseText("settings.secretsProviderConnections.modal.scope.placeholder.project"),
					"all-users-label": unref(i18n$2).baseText("settings.secretsProviderConnections.modal.scope.global"),
					"empty-options-text": unref(i18n$2).baseText("settings.secretsProviderConnections.modal.scope.emptyOptionsText"),
					"can-share-globally": unref(modal$1).canShareGlobally.value,
					"is-shared-globally": unref(modal$1).isSharedGlobally.value,
					"onUpdate:shareWithAllUsers": handleShareGlobally,
					"onUpdate:modelValue": handleScopeUpdate
				}, null, 8, [
					"model-value",
					"projects",
					"readonly",
					"static",
					"placeholder",
					"all-users-label",
					"empty-options-text",
					"can-share-globally",
					"is-shared-globally"
				])])], 2)) : createCommentVNode("", true)]))], 2)], 2)]),
				_: 1
			}, 8, [
				"id",
				"custom-class",
				"event-bus",
				"name"
			])) : createCommentVNode("", true);
		};
	}
});
var SecretsProviderConnectionModal_ee_vue_vue_type_style_index_0_lang_module_default = {
	secretsProviderConnectionModal: "_secretsProviderConnectionModal_1mosk_125",
	mainContent: "_mainContent_1mosk_140",
	icon: "_icon_1mosk_146",
	name: "_name_1mosk_154",
	nameRow: "_nameRow_1mosk_161",
	headerHint: "_headerHint_1mosk_168",
	modalLayout: "_modalLayout_1mosk_173",
	sidebar: "_sidebar_1mosk_179",
	header: "_header_1mosk_168",
	container: "_container_1mosk_193",
	info: "_info_1mosk_198",
	actions: "_actions_1mosk_206",
	contentArea: "_contentArea_1mosk_217",
	expressionExample: "_expressionExample_1mosk_223"
};
var SecretsProviderConnectionModal_ee_default = /* @__PURE__ */ __plugin_vue_export_helper_default(SecretsProviderConnectionModal_ee_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": SecretsProviderConnectionModal_ee_vue_vue_type_style_index_0_lang_module_default }]]);
var DeleteSecretsProviderModal_ee_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "DeleteSecretsProviderModal.ee",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const toast = useToast();
		const rootStore = useRootStore();
		const uiStore = useUIStore();
		const modalBus = createEventBus();
		const confirmationText = ref("");
		const isDeleting = ref(false);
		const credentialsCount = ref(0);
		const isLoadingCredentials = ref(true);
		const shouldShowConfirmation = computed(() => credentialsCount.value > 0);
		const deleteEnabled = computed(() => !shouldShowConfirmation.value || confirmationText.value === props.data.providerName);
		const credentialsPageUrl = computed(() => ({
			name: VIEWS.CREDENTIALS,
			query: { externalSecretsStore: props.data.providerKey }
		}));
		const secretsLabel = computed(() => {
			const count = props.data.secretsCount;
			if (count === 1) return i18n$2.baseText("settings.secretsProviderConnections.delete.description.oneSecret");
			return i18n$2.baseText("settings.secretsProviderConnections.delete.description.secrets", { interpolate: { count: count.toString() } });
		});
		const credentialsLabel = computed(() => {
			const count = credentialsCount.value;
			if (count === 1) return i18n$2.baseText("settings.secretsProviderConnections.delete.impact.oneCredential");
			return i18n$2.baseText("settings.secretsProviderConnections.delete.impact.credentials", { interpolate: { count: count.toString() } });
		});
		onMounted(async () => {
			isLoadingCredentials.value = true;
			try {
				credentialsCount.value = (await getAllCredentials(rootStore.restApiContext, {
					includeGlobal: true,
					externalSecretsStore: props.data.providerKey
				})).length;
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("error"));
			} finally {
				isLoadingCredentials.value = false;
			}
		});
		async function onConfirmDelete() {
			isDeleting.value = true;
			try {
				await deleteSecretProviderConnection(rootStore.restApiContext, props.data.providerKey);
				toast.showMessage({
					title: i18n$2.baseText("settings.secretsProviderConnections.delete.success", { interpolate: { name: props.data.providerName } }),
					type: "success"
				});
				if (props.data.onConfirm) await props.data.onConfirm();
				uiStore.closeModal(props.modalName);
				uiStore.closeModal(SECRETS_PROVIDER_CONNECTION_MODAL_KEY);
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("settings.secretsProviderConnections.delete.error"));
			} finally {
				isDeleting.value = false;
			}
		}
		function onCancel() {
			uiStore.closeModal(props.modalName);
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: __props.modalName,
				title: unref(i18n$2).baseText("settings.secretsProviderConnections.delete.title", { interpolate: { name: __props.data.providerName } }),
				"event-bus": unref(modalBus),
				width: "540px"
			}, {
				content: withCtx(() => [shouldShowConfirmation.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.content)
				}, [
					createVNode(unref(N8nText_default), {
						size: "medium",
						color: "text-base"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.secretsProviderConnections.delete.description", { interpolate: {
							name: __props.data.providerName,
							secretsCount: secretsLabel.value
						} })), 1)]),
						_: 1
					}),
					!isLoadingCredentials.value ? (openBlock(), createElementBlock("div", {
						key: 0,
						class: normalizeClass(_ctx.$style.impact)
					}, [createVNode(unref(N8nText_default), {
						size: "medium",
						color: "text-base",
						bold: ""
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.secretsProviderConnections.delete.impact.title")), 1)]),
						_: 1
					}), createBaseVNode("ul", null, [createBaseVNode("li", null, [createVNode(unref(N8nText_default), {
						size: "medium",
						color: "text-base"
					}, {
						default: withCtx(() => [createVNode(unref(N8nLink_default), {
							"data-test-id": "credentials-link",
							to: credentialsPageUrl.value,
							target: "_blank"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(credentialsLabel.value), 1)]),
							_: 1
						}, 8, ["to"]), createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("settings.secretsProviderConnections.delete.impact.description")), 1)]),
						_: 1
					})])])], 2)) : createCommentVNode("", true),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.confirmation) }, [createVNode(unref(N8nInputLabel_default), {
						label: unref(i18n$2).baseText("settings.secretsProviderConnections.delete.confirmationLabel", { interpolate: { name: __props.data.providerName } }),
						size: "small"
					}, {
						default: withCtx(() => [createVNode(unref(Input_default), {
							modelValue: confirmationText.value,
							"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => confirmationText.value = $event),
							placeholder: __props.data.providerName,
							"data-test-id": "delete-confirmation-input"
						}, null, 8, ["modelValue", "placeholder"])]),
						_: 1
					}, 8, ["label"])], 2)
				], 2)) : (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.content)
				}, [createVNode(unref(N8nText_default), {
					size: "medium",
					color: "text-base"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.secretsProviderConnections.delete.description.noImpact")), 1)]),
					_: 1
				})], 2))]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					type: "secondary",
					onClick: onCancel
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.cancel")), 1)]),
					_: 1
				}), createVNode(unref(N8nButton_default), {
					type: "danger",
					disabled: !deleteEnabled.value,
					loading: isDeleting.value,
					"data-test-id": "confirm-delete-button",
					onClick: onConfirmDelete
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.delete")), 1)]),
					_: 1
				}, 8, ["disabled", "loading"])], 2)]),
				_: 1
			}, 8, [
				"name",
				"title",
				"event-bus"
			]);
		};
	}
});
var DeleteSecretsProviderModal_ee_vue_vue_type_style_index_0_lang_module_default = {
	content: "_content_z2i0v_125",
	impact: "_impact_z2i0v_131",
	confirmation: "_confirmation_z2i0v_137",
	footer: "_footer_z2i0v_141"
};
var DeleteSecretsProviderModal_ee_default = /* @__PURE__ */ __plugin_vue_export_helper_default(DeleteSecretsProviderModal_ee_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": DeleteSecretsProviderModal_ee_vue_vue_type_style_index_0_lang_module_default }]]);
function useToolParameters({ node }) {
	const parameters = ref([]);
	const workflowsStore = useWorkflowsStore();
	const projectsStore = useProjectsStore();
	const nodeTypesStore = useNodeTypesStore();
	const agentRequestStore = useAgentRequestStore();
	const selectedToolMap = reactive({});
	const error$2 = ref(void 0);
	const nodeRunData = computed(() => {
		if (!node.value) return void 0;
		const lastRunData = workflowsStore.getWorkflowExecution?.data?.resultData.runData[node.value?.name];
		if (!lastRunData) return void 0;
		return lastRunData[0];
	});
	const mapTypes = {
		["string"]: {
			inputType: "text",
			defaultValue: ""
		},
		["boolean"]: {
			inputType: "checkbox",
			defaultValue: true
		},
		["number"]: {
			inputType: "number",
			defaultValue: 0
		},
		["json"]: {
			inputType: "text",
			defaultValue: ""
		}
	};
	const getToolName = (toolNode) => {
		return (typeof toolNode === "string" ? toolNode : toolNode.name).replaceAll(" ", "_");
	};
	const getToolNamePrefix = (toolNode) => {
		return `node_${getToolName(toolNode)}_`;
	};
	const getToolNameOptionName = (toolNode) => {
		return `tool_${getToolName(toolNode)}_option`;
	};
	function checkImplicitInput(toolNode) {
		const aiSubcategories = nodeTypesStore.getNodeType(toolNode.type, toolNode.typeVersion)?.codex?.subcategories?.AI;
		const isVectorStoreToolNode = aiSubcategories?.includes("Vector Stores") && aiSubcategories?.includes("Tools");
		const mode$2 = toolNode.parameters.mode;
		return isVectorStoreToolNode && mode$2 === "retrieve-as-tool" || TOOL_NODE_TYPES_NEED_INPUT.includes(toolNode.type);
	}
	const getMCPTools = async (newNode) => {
		const result = [];
		const tools = await nodeTypesStore.getNodeParameterOptions({
			nodeTypeAndVersion: {
				name: newNode.type,
				version: newNode.typeVersion
			},
			path: "parameters.includedTools",
			methodName: "getTools",
			currentNodeParameters: newNode.parameters,
			credentials: newNode.credentials,
			projectId: projectsStore.currentProjectId,
			workflowId: workflowsStore.workflowId
		});
		const toolOptions = tools?.map((tool) => ({
			label: tool.name,
			value: String(tool.value),
			disabled: false
		}));
		result.push({
			name: getToolNameOptionName(newNode),
			initialValue: "",
			properties: {
				label: "Tool name",
				type: "select",
				options: toolOptions,
				required: true
			},
			metadata: {
				nodeName: newNode.name,
				type: "selector"
			}
		});
		const newSelectedTool = selectedToolMap[newNode.name];
		if (newSelectedTool) {
			const schema = (tools?.find((tool) => String(tool.value) === newSelectedTool))?.inputSchema;
			if (schema?.properties) for (const [propertyName, value] of Object.entries(schema.properties)) {
				const type = typeof value === "object" && "type" in value && typeof value.type === "string" ? value.type : "text";
				result.push({
					name: `${getToolNamePrefix(newSelectedTool)}query.${propertyName}`,
					initialValue: "",
					properties: {
						label: propertyName,
						type: mapTypes[type].inputType,
						required: true
					},
					metadata: {
						nodeName: newSelectedTool,
						type: "query",
						propertyName
					}
				});
			}
		}
		return result;
	};
	const getToolParameters = async (newNode, omitFallbackField = false) => {
		const result = [];
		if (!newNode) return { parameters: result };
		if (isHitlToolType(newNode.type)) return { parameters: await getHitlToolParameters(newNode) };
		if (newNode.type === "@n8n/n8n-nodes-langchain.mcpClientTool") return { parameters: await getMCPTools(newNode) };
		return { parameters: getRegularToolParameters(newNode, omitFallbackField) };
	};
	const getHitlToolParameters = async (newNode) => {
		const result = [];
		const connectedTools = workflowsStore.workflowObject.getParentNodes(newNode.name, "ALL_NON_MAIN", 1).map((nodeName$3) => workflowsStore.getNodeByName(nodeName$3)).filter((tool) => !!tool);
		const ignoredFields = ["tool", "toolParameters"];
		const regularParameters = getRegularToolParameters(newNode, true).filter((parameter) => !ignoredFields.includes(parameter.name.replace(/^query\./, ""))).map((parameter) => ({
			...parameter,
			name: `${getToolName(newNode)}_${parameter.name}`
		}));
		result.push(...regularParameters);
		const toolOptions = connectedTools.map((tool) => ({
			label: tool.name,
			value: tool.name,
			disabled: false
		}));
		result.push({
			name: getToolNameOptionName(newNode),
			initialValue: "",
			properties: {
				label: "Tool name",
				type: "select",
				options: toolOptions,
				required: true
			},
			metadata: {
				nodeName: newNode.name,
				type: "selector"
			}
		});
		const newSelectedTool = selectedToolMap[newNode.name];
		if (newSelectedTool) {
			const selectedTool = connectedTools.find((tool) => tool.name === newSelectedTool);
			if (selectedTool) {
				const selectedToolParameters = await getToolParameters(selectedTool, true);
				result.push(...selectedToolParameters.parameters.map((param) => ({
					...param,
					name: `${getToolNamePrefix(selectedTool)}${param.name}`
				})));
			}
		}
		return result;
	};
	const getRegularToolParameters = (toolNode, omitFallbackField = false) => {
		const result = [];
		const params = toolNode.parameters;
		const collectedArgs = [];
		traverseNodeParameters(params, collectedArgs);
		const inputOverrides = nodeRunData.value?.inputOverride?.[NodeConnectionTypes.AiTool]?.[0]?.[0].json;
		const inputQuery = inputOverrides?.query;
		collectedArgs.forEach((value) => {
			const type = value.type ?? "string";
			const initialValue = inputQuery?.[value.key] ? inputQuery[value.key] : agentRequestStore.getQueryValue(workflowsStore.workflowId, toolNode.id, toolNode.name, value.key) ?? mapTypes[type]?.defaultValue;
			result.push({
				name: "query." + value.key,
				initialValue,
				properties: {
					label: value.key,
					type: mapTypes[value.type ?? "string"].inputType,
					required: true
				},
				metadata: {
					nodeName: toolNode.name,
					type: "query",
					propertyName: value.key
				}
			});
		});
		const hasImplicitInput = checkImplicitInput(toolNode);
		if (result.length === 0 && !omitFallbackField || hasImplicitInput) {
			const key = hasImplicitInput ? "input" : "query";
			const queryValue = inputOverrides?.[key] ?? agentRequestStore.getQueryValue(workflowsStore.workflowId, toolNode.id, toolNode.name, key) ?? "";
			result.unshift({
				name: hasImplicitInput ? "query.input" : "query",
				initialValue: queryValue ?? "",
				properties: {
					label: "Query",
					type: "text",
					required: true
				},
				metadata: {
					nodeName: toolNode.name,
					type: "query",
					propertyName: hasImplicitInput ? "input" : "query",
					implicitInput: hasImplicitInput
				}
			});
		}
		return result;
	};
	const updateSelectedTool = (nodeName$3, value) => {
		selectedToolMap[nodeName$3] = value;
	};
	watch([node, selectedToolMap], async ([newNode]) => {
		error$2.value = void 0;
		try {
			parameters.value = (await getToolParameters(newNode)).parameters;
		} catch (e) {
			error$2.value = e instanceof Error ? e : /* @__PURE__ */ new Error("Unknown error occurred");
			return;
		}
	}, { immediate: true });
	return {
		getToolName,
		parameters,
		error: error$2,
		updateSelectedTool
	};
}
var FromAiParametersModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "FromAiParametersModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const inputs = ref();
		const i18n$2 = useI18n();
		const telemetry$1 = useTelemetry();
		const ndvStore = useNDVStore();
		const modalBus = createEventBus();
		const workflowsStore = useWorkflowsStore();
		const { runWorkflow } = useRunWorkflow({ router: useRouter() });
		const agentRequestStore = useAgentRequestStore();
		const node = computed(() => props.data.nodeName ? workflowsStore.getNodeByName(props.data.nodeName) : void 0);
		const parentNode = computed(() => {
			if (!node.value) return void 0;
			const parentNodes = workflowsStore.workflowObject.getChildNodes(node.value.name, "ALL", 1);
			if (parentNodes.length === 0) return void 0;
			return workflowsStore.getNodeByName(parentNodes[0])?.name;
		});
		const { getToolName, parameters, error: error$2, updateSelectedTool } = useToolParameters({ node });
		const onClose = () => {
			modalBus.emit("close");
		};
		const onExecute = async () => {
			if (!node.value) return;
			const nodeName$3 = node.value.name;
			const inputValues = Object.values(inputs.value?.getValuesWithMetadata() ?? {});
			agentRequestStore.clearAgentRequests(workflowsStore.workflowId, node.value.id);
			const selectedToolName = inputValues.findLast((value) => value.metadata?.type === "selector")?.value;
			const agentRequest = {
				query: {},
				toolName: selectedToolName ? getToolName(selectedToolName) : getToolName(nodeName$3)
			};
			for (const input$1 of inputValues) {
				if (input$1.metadata?.type !== "query") continue;
				const inputNode = getToolName(input$1.metadata.nodeName);
				const queryKey = input$1.metadata.propertyName;
				const queryValue = input$1.value;
				if (input$1.metadata.implicitInput) agentRequest.query[inputNode] = queryValue;
				else {
					agentRequest.query[inputNode] ??= {};
					agentRequest.query[inputNode][queryKey] = queryValue;
				}
			}
			agentRequestStore.setAgentRequestForNode(workflowsStore.workflowId, node.value.id, agentRequest);
			const telemetryPayload = {
				node_type: node.value.type,
				workflow_id: workflowsStore.workflowId,
				source: "from-ai-parameters-modal",
				push_ref: ndvStore.pushRef
			};
			telemetry$1.track("User clicked execute node button in modal", telemetryPayload);
			await runWorkflow({ destinationNode: {
				nodeName: node.value.name,
				mode: "inclusive"
			} });
			onClose();
		};
		const onUpdate = (change) => {
			const metadata = change.metadata;
			if (metadata?.type !== "selector") return;
			if (typeof change.value === "string") updateSelectedTool(metadata.nodeName, change.value);
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				"max-width": "540px",
				title: unref(i18n$2).baseText("fromAiParametersModal.title", { interpolate: { nodeName: node.value?.name || "" } }),
				"event-bus": unref(modalBus),
				name: unref(FROM_AI_PARAMETERS_MODAL_KEY),
				center: true,
				"close-on-click-modal": false
			}, createSlots({ _: 2 }, [unref(error$2) ? {
				name: "content",
				fn: withCtx(() => [unref(error$2) ? (openBlock(), createBlock(unref(N8nCallout_default), {
					key: 0,
					theme: "danger"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(error$2).message), 1)]),
					_: 1
				})) : createCommentVNode("", true)]),
				key: "0"
			} : {
				name: "content",
				fn: withCtx(() => [createVNode(unref(ElCol), null, {
					default: withCtx(() => [createVNode(unref(ElRow), { class: normalizeClass(_ctx.$style.row) }, {
						default: withCtx(() => [createVNode(unref(N8nText_default), { "data-testid": "from-ai-parameters-modal-description" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("fromAiParametersModal.description", { interpolate: { parentNodeName: parentNode.value || "" } })), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"])]),
					_: 1
				}), createVNode(unref(ElCol), null, {
					default: withCtx(() => [createVNode(unref(ElRow), { class: normalizeClass(_ctx.$style.row) }, {
						default: withCtx(() => [unref(parameters).length ? (openBlock(), createBlock(unref(N8nFormInputs_default), {
							key: 0,
							ref_key: "inputs",
							ref: inputs,
							inputs: unref(parameters),
							"column-view": true,
							"data-test-id": "from-ai-parameters-modal-inputs",
							onSubmit: onExecute,
							onUpdate
						}, null, 8, ["inputs"])) : createCommentVNode("", true)]),
						_: 1
					}, 8, ["class"])]),
					_: 1
				})]),
				key: "1"
			}, !unref(error$2) ? {
				name: "footer",
				fn: withCtx(() => [createVNode(unref(N8nButton_default), {
					"data-test-id": "execute-workflow-button",
					icon: "flask-conical",
					label: unref(i18n$2).baseText("fromAiParametersModal.execute"),
					float: "right",
					onClick: onExecute
				}, null, 8, ["label"])]),
				key: "2"
			} : void 0]), 1032, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var FromAiParametersModal_vue_vue_type_style_index_0_lang_module_default = { row: "_row_19gz0_125" };
var FromAiParametersModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(FromAiParametersModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": FromAiParametersModal_vue_vue_type_style_index_0_lang_module_default }]]);
var ImportCurlModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ImportCurlModal",
	setup(__props) {
		const telemetry$1 = useTelemetry();
		const i18n$2 = useI18n();
		const uiStore = useUIStore();
		const ndvStore = useNDVStore();
		const curlCommand = ref("");
		const modalBus = createEventBus();
		const inputRef = ref(null);
		onMounted(() => {
			const curlCommands = uiStore.modalsById[IMPORT_CURL_MODAL_KEY].data?.curlCommands;
			const nodeId = ndvStore.activeNode?.id ?? "";
			curlCommand.value = curlCommands?.[nodeId] ?? "";
			setTimeout(() => {
				inputRef.value?.focus();
			});
		});
		function onInput(value) {
			curlCommand.value = value;
		}
		function onFocus() {
			inputRef.value?.select();
		}
		function closeDialog() {
			modalBus.emit("close");
		}
		function onImportSuccess() {
			sendTelemetry();
			closeDialog();
		}
		function onImportFailure(data) {
			sendTelemetry({
				success: false,
				...data
			});
		}
		function onAfterImport() {
			const nodeId = ndvStore.activeNode?.id;
			const curlCommands = uiStore.modalsById["importCurl"].data?.curlCommands ?? {};
			curlCommands[nodeId] = curlCommand.value;
			uiStore.setModalData({
				name: IMPORT_CURL_MODAL_KEY,
				data: { curlCommands }
			});
		}
		function sendTelemetry(data = {
			success: true,
			invalidProtocol: false,
			protocol: ""
		}) {
			telemetry$1.track("User imported curl command", {
				success: data.success,
				invalidProtocol: data.invalidProtocol,
				protocol: data.protocol
			});
		}
		async function onImport() {
			const { useImportCurlCommand } = await __vitePreload(async () => {
				const { useImportCurlCommand: useImportCurlCommand$1 } = await import("./useImportCurlCommand-DzyBtMnf.js");
				return { useImportCurlCommand: useImportCurlCommand$1 };
			}, __vite__mapDeps([72,2,1,3,4,5,6,7,8,9,11,12,13,14,15,16]));
			const { importCurlCommand } = useImportCurlCommand({
				onImportSuccess,
				onImportFailure,
				onAfterImport
			});
			importCurlCommand(curlCommand);
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "700px",
				title: unref(i18n$2).baseText("importCurlModal.title"),
				"event-bus": unref(modalBus),
				name: unref(IMPORT_CURL_MODAL_KEY),
				center: true
			}, {
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.container) }, [createVNode(unref(N8nInputLabel_default), {
					label: unref(i18n$2).baseText("importCurlModal.input.label"),
					color: "text-dark"
				}, {
					default: withCtx(() => [createVNode(unref(Input_default), {
						ref_key: "inputRef",
						ref: inputRef,
						"model-value": curlCommand.value,
						type: "textarea",
						rows: 5,
						"data-test-id": "import-curl-modal-input",
						placeholder: unref(i18n$2).baseText("importCurlModal.input.placeholder"),
						"onUpdate:modelValue": onInput,
						onFocus
					}, null, 8, ["model-value", "placeholder"])]),
					_: 1
				}, 8, ["label"])], 2)]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.modalFooter) }, [createVNode(unref(N8nNotice_default), {
					class: normalizeClass(_ctx.$style.notice),
					content: unref(i18n$2).baseText("ImportCurlModal.notice.content")
				}, null, 8, ["class", "content"]), createBaseVNode("div", null, [createVNode(unref(N8nButton_default), {
					float: "right",
					label: unref(i18n$2).baseText("importCurlModal.button.label"),
					"data-test-id": "import-curl-modal-button",
					onClick: onImport
				}, null, 8, ["label"])])], 2)]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var ImportCurlModal_vue_vue_type_style_index_0_lang_module_default = {
	modalFooter: "_modalFooter_b99k5_125",
	notice: "_notice_b99k5_131",
	container: "_container_b99k5_135"
};
var ImportCurlModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ImportCurlModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ImportCurlModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$28 = {
	key: 0,
	class: "loading-message"
};
var _hoisted_2$12 = {
	key: 1,
	class: "error-message"
};
var _hoisted_3$8 = {
	key: 2,
	class: "content-wrapper"
};
var _hoisted_4$7 = {
	key: 0,
	controls: "",
	autoplay: ""
};
var _hoisted_5$4 = ["src", "type"];
var _hoisted_6$3 = {
	key: 1,
	controls: "",
	autoplay: ""
};
var _hoisted_7$2 = ["src", "type"];
var _hoisted_8$1 = ["src", "alt"];
var _hoisted_9$1 = {
	key: 6,
	class: "text-content"
};
var _hoisted_10$1 = ["src"];
var _hoisted_11$1 = {
	key: 8,
	class: "error-message"
};
var BinaryDataViewModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(/* @__PURE__ */ defineComponent({
	__name: "BinaryDataViewModal",
	props: { data: {} },
	setup(__props) {
		const i18n$2 = useI18n();
		const workflowsStore = useWorkflowsStore();
		const props = __props;
		const isLoading = ref(true);
		const embedSource = ref("");
		const error$2 = ref(false);
		const displayData = ref("");
		let currentBlobUrl = null;
		const binaryData = computed(() => {
			const { id, mimeType, fileName } = props.data.binaryData;
			let fileType = props.data.binaryData.fileType;
			if (mimeType) {
				if (mimeType.startsWith("image/")) fileType = "image";
				else if (mimeType.startsWith("audio/")) fileType = "audio";
				else if (mimeType.startsWith("video/")) fileType = "video";
				else if (mimeType === "application/pdf") fileType = "pdf";
				else if (mimeType === "application/json" || mimeType === "text/json") fileType = "json";
				else if (mimeType === "text/html") fileType = "html";
				else if (mimeType === "text/markdown" || mimeType.includes("markdown")) fileType = "markdown";
				else if (mimeType === "text/plain") fileType = "text";
				else if (fileType === void 0) fileType = "other";
			}
			return {
				id,
				mimeType,
				fileName,
				fileType: fileType || "other"
			};
		});
		function revokeBlobUrl() {
			if (currentBlobUrl) {
				URL.revokeObjectURL(currentBlobUrl);
				currentBlobUrl = null;
			}
		}
		async function loadBinaryData() {
			isLoading.value = true;
			error$2.value = false;
			revokeBlobUrl();
			embedSource.value = "";
			displayData.value = "";
			const { id, fileName, fileType, mimeType } = binaryData.value;
			try {
				const action$1 = [
					"html",
					"pdf",
					"text"
				].includes(fileType) ? "download" : "view";
				const binaryUrl = workflowsStore.getBinaryUrl(id, action$1, fileName || "", mimeType || "");
				switch (fileType) {
					case "json":
						displayData.value = await (await fetch(binaryUrl, { credentials: "include" })).json();
						break;
					case "html":
					case "markdown":
					case "text":
						displayData.value = await (await fetch(binaryUrl, { credentials: "include" })).text();
						break;
					case "pdf": {
						const blob = await (await fetch(binaryUrl, { credentials: "include" })).blob();
						currentBlobUrl = URL.createObjectURL(blob);
						embedSource.value = currentBlobUrl;
						break;
					}
					default: embedSource.value = binaryUrl;
				}
			} catch (e) {
				console.error(e.message);
				error$2.value = true;
			}
			isLoading.value = false;
		}
		watch(() => props.data.binaryData, () => {
			loadBinaryData().catch(() => {});
		}, { immediate: true });
		onBeforeUnmount(() => {
			revokeBlobUrl();
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "60%",
				height: "90%",
				title: "File Preview",
				name: unref(BINARY_DATA_VIEW_MODAL_KEY),
				center: true
			}, {
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(["binary-data-modal-content", binaryData.value.fileType]) }, [isLoading.value ? (openBlock(), createElementBlock("div", _hoisted_1$28, "Loading binary data...")) : error$2.value ? (openBlock(), createElementBlock("div", _hoisted_2$12, "Error loading binary data")) : (openBlock(), createElementBlock("div", _hoisted_3$8, [binaryData.value.fileType === "video" ? (openBlock(), createElementBlock("video", _hoisted_4$7, [createBaseVNode("source", {
					src: embedSource.value,
					type: binaryData.value.mimeType
				}, null, 8, _hoisted_5$4), createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("binaryDataDisplay.yourBrowserDoesNotSupport")), 1)])) : binaryData.value.fileType === "audio" ? (openBlock(), createElementBlock("audio", _hoisted_6$3, [createBaseVNode("source", {
					src: embedSource.value,
					type: binaryData.value.mimeType
				}, null, 8, _hoisted_7$2), createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("binaryDataDisplay.yourBrowserDoesNotSupport")), 1)])) : binaryData.value.fileType === "image" ? (openBlock(), createElementBlock("img", {
					key: 2,
					src: embedSource.value,
					alt: binaryData.value.fileName || "Image preview"
				}, null, 8, _hoisted_8$1)) : binaryData.value.fileType === "json" ? (openBlock(), createBlock(unref(P), {
					key: 3,
					data: displayData.value,
					deep: 3,
					"show-length": true
				}, null, 8, ["data"])) : binaryData.value.fileType === "html" ? (openBlock(), createBlock(RunDataHtml_default, {
					key: 4,
					"input-html": displayData.value
				}, null, 8, ["input-html"])) : binaryData.value.fileType === "markdown" ? (openBlock(), createBlock(RunDataMarkdown_default, {
					key: 5,
					"input-markdown": displayData.value
				}, null, 8, ["input-markdown"])) : binaryData.value.fileType === "text" ? (openBlock(), createElementBlock("pre", _hoisted_9$1, "						" + toDisplayString(displayData.value) + "\n					", 1)) : binaryData.value.fileType === "pdf" ? (openBlock(), createElementBlock("embed", {
					key: 7,
					src: embedSource.value,
					class: "binary-data",
					type: "application/pdf"
				}, null, 8, _hoisted_10$1)) : (openBlock(), createElementBlock("div", _hoisted_11$1, "Preview not available for this file type"))]))], 2)]),
				_: 1
			}, 8, ["name"]);
		};
	}
}), [["__scopeId", "data-v-c6e05d49"]]);
var ImportWorkflowUrlModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ImportWorkflowUrlModal",
	setup(__props) {
		const i18n$2 = useI18n();
		const uiStore = useUIStore();
		const url = ref("");
		const inputRef = ref(null);
		const isValid = computed(() => {
			return url.value ? VALID_WORKFLOW_IMPORT_URL_REGEX.test(url.value) : true;
		});
		const closeModal = () => {
			uiStore.closeModal(IMPORT_WORKFLOW_URL_MODAL_KEY);
		};
		const confirm = () => {
			nodeViewEventBus.emit("importWorkflowUrl", { url: url.value });
			closeModal();
		};
		const focusInput = async () => {
			if (inputRef.value) inputRef.value.focus();
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(IMPORT_WORKFLOW_URL_MODAL_KEY),
				title: unref(i18n$2).baseText("mainSidebar.prompt.importWorkflowFromUrl"),
				"show-close": true,
				center: true,
				width: "420px",
				onOpened: focusInput
			}, {
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.noScrollbar) }, [createVNode(unref(Input_default), {
					ref_key: "inputRef",
					ref: inputRef,
					modelValue: url.value,
					"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => url.value = $event),
					placeholder: unref(i18n$2).baseText("mainSidebar.prompt.workflowUrl"),
					state: isValid.value ? "default" : "error",
					"data-test-id": "workflow-url-import-input",
					onKeyup: withKeys(confirm, ["enter"])
				}, null, 8, [
					"modelValue",
					"placeholder",
					"state"
				]), createBaseVNode("p", {
					class: normalizeClass(_ctx.$style["error-text"]),
					style: normalizeStyle({ visibility: isValid.value ? "hidden" : "visible" })
				}, toDisplayString(unref(i18n$2).baseText("mainSidebar.prompt.invalidUrl")), 7)], 2)]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					variant: "solid",
					float: "right",
					disabled: !url.value || !isValid.value,
					"data-test-id": "confirm-workflow-import-url-button",
					onClick: confirm
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("mainSidebar.prompt.import")), 1)]),
					_: 1
				}, 8, ["disabled"]), createVNode(unref(N8nButton_default), {
					variant: "subtle",
					float: "right",
					"data-test-id": "cancel-workflow-import-url-button",
					onClick: closeModal
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("mainSidebar.prompt.cancel")), 1)]),
					_: 1
				})], 2)]),
				_: 1
			}, 8, ["name", "title"]);
		};
	}
});
const footer$10 = "_footer_15or2_133";
const noScrollbar = "_noScrollbar_15or2_139";
var ImportWorkflowUrlModal_vue_vue_type_style_index_0_lang_module_default = {
	"error-text": "_error-text_15or2_125",
	footer: footer$10,
	noScrollbar
};
var ImportWorkflowUrlModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ImportWorkflowUrlModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ImportWorkflowUrlModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$27 = { key: 1 };
var InviteUsersModal_default = /* @__PURE__ */ defineComponent({
	__name: "InviteUsersModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const NAME_EMAIL_FORMAT_REGEX = /^.* <(.*)>$/;
		const usersStore = useUsersStore();
		const settingsStore = useSettingsStore();
		const postHog = usePostHog();
		const clipboard = useClipboard();
		const { showMessage, showError } = useToast();
		const i18n$2 = useI18n();
		const { goToUpgrade } = usePageRedirectionHelper();
		const formBus = createFormEventBus();
		const modalBus = createEventBus();
		const config$1 = ref();
		const emails = ref("");
		const role = ref(props.data.initialRole ?? ROLE.Member);
		const showInviteUrls = ref(null);
		const loading$2 = ref(false);
		const emailsCount = computed(() => {
			return emails.value.split(",").filter((email) => !!email.trim()).length;
		});
		const buttonLabel = computed(() => {
			if (emailsCount.value > 1) return i18n$2.baseText(`settings.users.inviteXUser${settingsStore.isSmtpSetup ? "" : ".inviteUrl"}`, { interpolate: { count: emailsCount.value.toString() } });
			return i18n$2.baseText(`settings.users.inviteUser${settingsStore.isSmtpSetup ? "" : ".inviteUrl"}`);
		});
		const enabledButton = computed(() => {
			return emailsCount.value >= 1;
		});
		const isAdvancedPermissionsEnabled = computed(() => {
			return settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.AdvancedPermissions];
		});
		const isChatHubEnabled = computed(() => {
			return settingsStore.isChatFeatureEnabled;
		});
		const isChatUsersEnabled = computed(() => {
			return isChatHubEnabled.value && settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.AdvancedPermissions];
		});
		const isTamperProofInviteLinksEnabled = computed(() => postHog.isVariantEnabled(TAMPER_PROOF_INVITE_LINKS.name, TAMPER_PROOF_INVITE_LINKS.variant));
		const invitedUsers = computed(() => {
			if (!showInviteUrls.value) return [];
			return showInviteUrls.value.map((invite) => ({
				...invite.user,
				isPendingUser: true
			}));
		});
		const validateEmails = (value) => {
			if (typeof value !== "string") return false;
			const emails$1 = value.split(",");
			for (let i$1 = 0; i$1 < emails$1.length; i$1++) {
				const email = emails$1[i$1];
				const parsed = getEmail(email);
				if (!!parsed.trim() && !VALID_EMAIL_REGEX.test(String(parsed).trim().toLowerCase())) return {
					messageKey: "settings.users.invalidEmailError",
					options: { interpolate: { email: parsed } }
				};
			}
			return false;
		};
		function isInvitableRoleName(val) {
			return typeof val === "string" && [
				ROLE.Member,
				ROLE.Admin,
				ROLE.ChatUser
			].includes(val);
		}
		function onInput(e) {
			if (e.name === "emails" && typeof e.value === "string") emails.value = e.value;
			if (e.name === "role" && isInvitableRoleName(e.value)) role.value = e.value;
		}
		async function onSubmit() {
			try {
				loading$2.value = true;
				const emailList = emails.value.split(",").map((email) => ({
					email: getEmail(email),
					role: role.value
				})).filter((invite) => !!invite.email);
				if (emailList.length === 0) throw new Error(i18n$2.baseText("settings.users.noUsersToInvite"));
				const invited = await usersStore.inviteUsers(emailList);
				const erroredInvites = invited.filter((invite) => invite.error);
				const successfulEmailInvites = invited.filter((invite) => !invite.error && invite.user.emailSent);
				const successfulUrlInvites = invited.filter((invite) => !invite.error && !invite.user.emailSent);
				if (successfulEmailInvites.length) showMessage({
					type: "success",
					title: i18n$2.baseText(successfulEmailInvites.length > 1 ? "settings.users.usersInvited" : "settings.users.userInvited"),
					message: i18n$2.baseText("settings.users.emailInvitesSent", { interpolate: { emails: successfulEmailInvites.map(({ user: user$1 }) => user$1.email).join(", ") } })
				});
				if (successfulUrlInvites.length) {
					if (successfulUrlInvites.length === 1) if (isTamperProofInviteLinksEnabled.value) try {
						const url = await usersStore.generateInviteLink({ id: successfulUrlInvites[0].user.id });
						clipboard.copy(url.link);
					} catch (error$2) {
						showError(error$2, i18n$2.baseText("settings.users.inviteLinkError"));
					}
					else clipboard.copy(successfulUrlInvites[0].user.inviteAcceptUrl);
					showMessage({
						type: "success",
						title: i18n$2.baseText(successfulUrlInvites.length > 1 ? "settings.users.multipleInviteUrlsCreated" : "settings.users.inviteUrlCreated"),
						message: i18n$2.baseText(successfulUrlInvites.length > 1 ? "settings.users.multipleInviteUrlsCreated.message" : "settings.users.inviteUrlCreated.message", { interpolate: { emails: successfulUrlInvites.map(({ user: user$1 }) => user$1.email).join(", ") } })
					});
				}
				if (erroredInvites.length) setTimeout(() => {
					showMessage({
						type: "error",
						title: i18n$2.baseText("settings.users.usersEmailedError"),
						message: i18n$2.baseText("settings.users.emailInvitesSentError", { interpolate: { emails: erroredInvites.map(({ error: error$2 }) => error$2).join(", ") } })
					});
				}, 0);
				if (successfulUrlInvites.length > 1) showInviteUrls.value = successfulUrlInvites;
				else modalBus.emit("close");
				await props.data.afterInvite?.();
			} catch (error$2) {
				showError(error$2, i18n$2.baseText("settings.users.usersInvitedError"));
			}
			loading$2.value = false;
		}
		function showCopyInviteLinkToast(successfulUrlInvites) {
			showMessage({
				type: "success",
				title: i18n$2.baseText(successfulUrlInvites.length > 1 ? "settings.users.multipleInviteUrlsCreated" : "settings.users.inviteUrlCreated"),
				message: i18n$2.baseText(successfulUrlInvites.length > 1 ? "settings.users.multipleInviteUrlsCreated.message" : "settings.users.inviteUrlCreated.message", { interpolate: { emails: successfulUrlInvites.map(({ user: user$1 }) => user$1.email).join(", ") } })
			});
		}
		function onSubmitClick() {
			formBus.emit("submit");
		}
		async function onCopyInviteLink(user$1) {
			if (!showInviteUrls.value) return;
			if (isTamperProofInviteLinksEnabled.value) try {
				const url = await usersStore.generateInviteLink({ id: user$1.id });
				clipboard.copy(url.link);
				showCopyInviteLinkToast([]);
			} catch (error$2) {
				showError(error$2, i18n$2.baseText("settings.users.inviteLinkError"));
			}
			else if (user$1.inviteAcceptUrl) {
				clipboard.copy(user$1.inviteAcceptUrl);
				showCopyInviteLinkToast([]);
			}
		}
		function goToUpgradeAdvancedPermissions() {
			goToUpgrade("advanced-permissions", "upgrade-advanced-permissions");
		}
		function getEmail(email) {
			let parsed = email.trim();
			if (NAME_EMAIL_FORMAT_REGEX.test(parsed)) {
				const matches = parsed.match(NAME_EMAIL_FORMAT_REGEX);
				if (matches && matches.length === 2) parsed = matches[1];
			}
			return parsed;
		}
		onMounted(() => {
			config$1.value = [{
				name: "emails",
				properties: {
					label: i18n$2.baseText("settings.users.newEmailsToInvite"),
					required: true,
					validationRules: [{ name: "VALID_EMAILS" }],
					validators: { VALID_EMAILS: { validate: validateEmails } },
					placeholder: "name1@email.com, name2@email.com, ...",
					capitalize: true,
					focusInitially: true
				}
			}, {
				name: "role",
				initialValue: props.data.initialRole ?? ROLE.Member,
				properties: {
					label: i18n$2.baseText("auth.role"),
					required: true,
					type: "select",
					options: [
						{
							value: ROLE.Member,
							label: i18n$2.baseText("auth.roles.member")
						},
						...isChatHubEnabled.value ? [{
							value: ROLE.ChatUser,
							label: i18n$2.baseText("auth.roles.chatUser"),
							disabled: !isChatUsersEnabled.value
						}] : [],
						{
							value: ROLE.Admin,
							label: i18n$2.baseText("auth.roles.admin"),
							disabled: !isAdvancedPermissionsEnabled.value
						}
					],
					capitalize: true
				}
			}];
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(INVITE_USER_MODAL_KEY),
				title: unref(i18n$2).baseText(showInviteUrls.value ? "settings.users.copyInviteUrls" : "settings.users.inviteNewUsers"),
				center: true,
				width: "460px",
				"event-bus": unref(modalBus),
				onEnter: onSubmit
			}, createSlots({
				content: withCtx(() => [!isAdvancedPermissionsEnabled.value ? (openBlock(), createBlock(unref(N8nNotice_default), { key: 0 }, {
					default: withCtx(() => [createVNode(unref(I18nT), {
						keypath: "settings.users.advancedPermissions.warning",
						scope: "global"
					}, {
						link: withCtx(() => [createVNode(unref(N8nLink_default), {
							size: "small",
							onClick: goToUpgradeAdvancedPermissions
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.upgrade")), 1)]),
							_: 1
						})]),
						_: 1
					})]),
					_: 1
				})) : createCommentVNode("", true), showInviteUrls.value ? (openBlock(), createElementBlock("div", _hoisted_1$27, [createVNode(unref(N8nUsersList_default), { users: invitedUsers.value }, {
					actions: withCtx(({ user: user$1 }) => [isTamperProofInviteLinksEnabled.value ? (openBlock(), createBlock(unref(N8nTooltip_default), { key: 0 }, {
						content: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.users.actions.generateInviteLink")), 1)]),
						default: withCtx(() => [createVNode(unref(N8nIconButton_default), {
							variant: "subtle",
							icon: "link",
							"data-test-id": "generate-invite-link-button",
							onClick: ($event) => onCopyInviteLink(user$1)
						}, null, 8, ["onClick"])]),
						_: 2
					}, 1024)) : user$1.inviteAcceptUrl ? (openBlock(), createBlock(unref(N8nTooltip_default), { key: 1 }, {
						content: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.users.inviteLink.copy")), 1)]),
						default: withCtx(() => [createVNode(unref(N8nIconButton_default), {
							variant: "subtle",
							icon: "link",
							"data-test-id": "copy-invite-link-button",
							"data-invite-link": user$1.inviteAcceptUrl,
							onClick: ($event) => onCopyInviteLink(user$1)
						}, null, 8, ["data-invite-link", "onClick"])]),
						_: 2
					}, 1024)) : createCommentVNode("", true)]),
					_: 1
				}, 8, ["users"])])) : config$1.value ? (openBlock(), createBlock(unref(N8nFormInputs_default), {
					key: 2,
					inputs: config$1.value,
					"event-bus": unref(formBus),
					"column-view": true,
					onUpdate: onInput,
					onSubmit
				}, null, 8, ["inputs", "event-bus"])) : createCommentVNode("", true)]),
				_: 2
			}, [!showInviteUrls.value ? {
				name: "footer",
				fn: withCtx(() => [createVNode(unref(N8nButton_default), {
					loading: loading$2.value,
					disabled: !enabledButton.value,
					label: buttonLabel.value,
					float: "right",
					onClick: onSubmitClick
				}, null, 8, [
					"loading",
					"disabled",
					"label"
				])]),
				key: "0"
			} : void 0]), 1032, [
				"name",
				"title",
				"event-bus"
			]);
		};
	}
});
var __assign = function() {
	__assign = Object.assign || function __assign$1(t) {
		for (var s, i$1 = 1, n = arguments.length; i$1 < n; i$1++) {
			s = arguments[i$1];
			for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
		}
		return t;
	};
	return __assign.apply(this, arguments);
};
var mode$1 = {
	MODE_NUMBER: 1,
	MODE_ALPHA_NUM: 2,
	MODE_8BIT_BYTE: 4,
	MODE_KANJI: 8
};
var mode = mode$1;
function QR8bitByte(data) {
	this.mode = mode.MODE_8BIT_BYTE;
	this.data = data;
}
QR8bitByte.prototype = {
	getLength: function(buffer) {
		return this.data.length;
	},
	write: function(buffer) {
		for (var i$1 = 0; i$1 < this.data.length; i$1++) buffer.put(this.data.charCodeAt(i$1), 8);
	}
};
var _8BitByte = QR8bitByte;
var ErrorCorrectLevel = {
	L: 1,
	M: 0,
	Q: 3,
	H: 2
};
var ECL = ErrorCorrectLevel;
function QRRSBlock(totalCount, dataCount) {
	this.totalCount = totalCount;
	this.dataCount = dataCount;
}
QRRSBlock.RS_BLOCK_TABLE = [
	[
		1,
		26,
		19
	],
	[
		1,
		26,
		16
	],
	[
		1,
		26,
		13
	],
	[
		1,
		26,
		9
	],
	[
		1,
		44,
		34
	],
	[
		1,
		44,
		28
	],
	[
		1,
		44,
		22
	],
	[
		1,
		44,
		16
	],
	[
		1,
		70,
		55
	],
	[
		1,
		70,
		44
	],
	[
		2,
		35,
		17
	],
	[
		2,
		35,
		13
	],
	[
		1,
		100,
		80
	],
	[
		2,
		50,
		32
	],
	[
		2,
		50,
		24
	],
	[
		4,
		25,
		9
	],
	[
		1,
		134,
		108
	],
	[
		2,
		67,
		43
	],
	[
		2,
		33,
		15,
		2,
		34,
		16
	],
	[
		2,
		33,
		11,
		2,
		34,
		12
	],
	[
		2,
		86,
		68
	],
	[
		4,
		43,
		27
	],
	[
		4,
		43,
		19
	],
	[
		4,
		43,
		15
	],
	[
		2,
		98,
		78
	],
	[
		4,
		49,
		31
	],
	[
		2,
		32,
		14,
		4,
		33,
		15
	],
	[
		4,
		39,
		13,
		1,
		40,
		14
	],
	[
		2,
		121,
		97
	],
	[
		2,
		60,
		38,
		2,
		61,
		39
	],
	[
		4,
		40,
		18,
		2,
		41,
		19
	],
	[
		4,
		40,
		14,
		2,
		41,
		15
	],
	[
		2,
		146,
		116
	],
	[
		3,
		58,
		36,
		2,
		59,
		37
	],
	[
		4,
		36,
		16,
		4,
		37,
		17
	],
	[
		4,
		36,
		12,
		4,
		37,
		13
	],
	[
		2,
		86,
		68,
		2,
		87,
		69
	],
	[
		4,
		69,
		43,
		1,
		70,
		44
	],
	[
		6,
		43,
		19,
		2,
		44,
		20
	],
	[
		6,
		43,
		15,
		2,
		44,
		16
	],
	[
		4,
		101,
		81
	],
	[
		1,
		80,
		50,
		4,
		81,
		51
	],
	[
		4,
		50,
		22,
		4,
		51,
		23
	],
	[
		3,
		36,
		12,
		8,
		37,
		13
	],
	[
		2,
		116,
		92,
		2,
		117,
		93
	],
	[
		6,
		58,
		36,
		2,
		59,
		37
	],
	[
		4,
		46,
		20,
		6,
		47,
		21
	],
	[
		7,
		42,
		14,
		4,
		43,
		15
	],
	[
		4,
		133,
		107
	],
	[
		8,
		59,
		37,
		1,
		60,
		38
	],
	[
		8,
		44,
		20,
		4,
		45,
		21
	],
	[
		12,
		33,
		11,
		4,
		34,
		12
	],
	[
		3,
		145,
		115,
		1,
		146,
		116
	],
	[
		4,
		64,
		40,
		5,
		65,
		41
	],
	[
		11,
		36,
		16,
		5,
		37,
		17
	],
	[
		11,
		36,
		12,
		5,
		37,
		13
	],
	[
		5,
		109,
		87,
		1,
		110,
		88
	],
	[
		5,
		65,
		41,
		5,
		66,
		42
	],
	[
		5,
		54,
		24,
		7,
		55,
		25
	],
	[
		11,
		36,
		12
	],
	[
		5,
		122,
		98,
		1,
		123,
		99
	],
	[
		7,
		73,
		45,
		3,
		74,
		46
	],
	[
		15,
		43,
		19,
		2,
		44,
		20
	],
	[
		3,
		45,
		15,
		13,
		46,
		16
	],
	[
		1,
		135,
		107,
		5,
		136,
		108
	],
	[
		10,
		74,
		46,
		1,
		75,
		47
	],
	[
		1,
		50,
		22,
		15,
		51,
		23
	],
	[
		2,
		42,
		14,
		17,
		43,
		15
	],
	[
		5,
		150,
		120,
		1,
		151,
		121
	],
	[
		9,
		69,
		43,
		4,
		70,
		44
	],
	[
		17,
		50,
		22,
		1,
		51,
		23
	],
	[
		2,
		42,
		14,
		19,
		43,
		15
	],
	[
		3,
		141,
		113,
		4,
		142,
		114
	],
	[
		3,
		70,
		44,
		11,
		71,
		45
	],
	[
		17,
		47,
		21,
		4,
		48,
		22
	],
	[
		9,
		39,
		13,
		16,
		40,
		14
	],
	[
		3,
		135,
		107,
		5,
		136,
		108
	],
	[
		3,
		67,
		41,
		13,
		68,
		42
	],
	[
		15,
		54,
		24,
		5,
		55,
		25
	],
	[
		15,
		43,
		15,
		10,
		44,
		16
	],
	[
		4,
		144,
		116,
		4,
		145,
		117
	],
	[
		17,
		68,
		42
	],
	[
		17,
		50,
		22,
		6,
		51,
		23
	],
	[
		19,
		46,
		16,
		6,
		47,
		17
	],
	[
		2,
		139,
		111,
		7,
		140,
		112
	],
	[
		17,
		74,
		46
	],
	[
		7,
		54,
		24,
		16,
		55,
		25
	],
	[
		34,
		37,
		13
	],
	[
		4,
		151,
		121,
		5,
		152,
		122
	],
	[
		4,
		75,
		47,
		14,
		76,
		48
	],
	[
		11,
		54,
		24,
		14,
		55,
		25
	],
	[
		16,
		45,
		15,
		14,
		46,
		16
	],
	[
		6,
		147,
		117,
		4,
		148,
		118
	],
	[
		6,
		73,
		45,
		14,
		74,
		46
	],
	[
		11,
		54,
		24,
		16,
		55,
		25
	],
	[
		30,
		46,
		16,
		2,
		47,
		17
	],
	[
		8,
		132,
		106,
		4,
		133,
		107
	],
	[
		8,
		75,
		47,
		13,
		76,
		48
	],
	[
		7,
		54,
		24,
		22,
		55,
		25
	],
	[
		22,
		45,
		15,
		13,
		46,
		16
	],
	[
		10,
		142,
		114,
		2,
		143,
		115
	],
	[
		19,
		74,
		46,
		4,
		75,
		47
	],
	[
		28,
		50,
		22,
		6,
		51,
		23
	],
	[
		33,
		46,
		16,
		4,
		47,
		17
	],
	[
		8,
		152,
		122,
		4,
		153,
		123
	],
	[
		22,
		73,
		45,
		3,
		74,
		46
	],
	[
		8,
		53,
		23,
		26,
		54,
		24
	],
	[
		12,
		45,
		15,
		28,
		46,
		16
	],
	[
		3,
		147,
		117,
		10,
		148,
		118
	],
	[
		3,
		73,
		45,
		23,
		74,
		46
	],
	[
		4,
		54,
		24,
		31,
		55,
		25
	],
	[
		11,
		45,
		15,
		31,
		46,
		16
	],
	[
		7,
		146,
		116,
		7,
		147,
		117
	],
	[
		21,
		73,
		45,
		7,
		74,
		46
	],
	[
		1,
		53,
		23,
		37,
		54,
		24
	],
	[
		19,
		45,
		15,
		26,
		46,
		16
	],
	[
		5,
		145,
		115,
		10,
		146,
		116
	],
	[
		19,
		75,
		47,
		10,
		76,
		48
	],
	[
		15,
		54,
		24,
		25,
		55,
		25
	],
	[
		23,
		45,
		15,
		25,
		46,
		16
	],
	[
		13,
		145,
		115,
		3,
		146,
		116
	],
	[
		2,
		74,
		46,
		29,
		75,
		47
	],
	[
		42,
		54,
		24,
		1,
		55,
		25
	],
	[
		23,
		45,
		15,
		28,
		46,
		16
	],
	[
		17,
		145,
		115
	],
	[
		10,
		74,
		46,
		23,
		75,
		47
	],
	[
		10,
		54,
		24,
		35,
		55,
		25
	],
	[
		19,
		45,
		15,
		35,
		46,
		16
	],
	[
		17,
		145,
		115,
		1,
		146,
		116
	],
	[
		14,
		74,
		46,
		21,
		75,
		47
	],
	[
		29,
		54,
		24,
		19,
		55,
		25
	],
	[
		11,
		45,
		15,
		46,
		46,
		16
	],
	[
		13,
		145,
		115,
		6,
		146,
		116
	],
	[
		14,
		74,
		46,
		23,
		75,
		47
	],
	[
		44,
		54,
		24,
		7,
		55,
		25
	],
	[
		59,
		46,
		16,
		1,
		47,
		17
	],
	[
		12,
		151,
		121,
		7,
		152,
		122
	],
	[
		12,
		75,
		47,
		26,
		76,
		48
	],
	[
		39,
		54,
		24,
		14,
		55,
		25
	],
	[
		22,
		45,
		15,
		41,
		46,
		16
	],
	[
		6,
		151,
		121,
		14,
		152,
		122
	],
	[
		6,
		75,
		47,
		34,
		76,
		48
	],
	[
		46,
		54,
		24,
		10,
		55,
		25
	],
	[
		2,
		45,
		15,
		64,
		46,
		16
	],
	[
		17,
		152,
		122,
		4,
		153,
		123
	],
	[
		29,
		74,
		46,
		14,
		75,
		47
	],
	[
		49,
		54,
		24,
		10,
		55,
		25
	],
	[
		24,
		45,
		15,
		46,
		46,
		16
	],
	[
		4,
		152,
		122,
		18,
		153,
		123
	],
	[
		13,
		74,
		46,
		32,
		75,
		47
	],
	[
		48,
		54,
		24,
		14,
		55,
		25
	],
	[
		42,
		45,
		15,
		32,
		46,
		16
	],
	[
		20,
		147,
		117,
		4,
		148,
		118
	],
	[
		40,
		75,
		47,
		7,
		76,
		48
	],
	[
		43,
		54,
		24,
		22,
		55,
		25
	],
	[
		10,
		45,
		15,
		67,
		46,
		16
	],
	[
		19,
		148,
		118,
		6,
		149,
		119
	],
	[
		18,
		75,
		47,
		31,
		76,
		48
	],
	[
		34,
		54,
		24,
		34,
		55,
		25
	],
	[
		20,
		45,
		15,
		61,
		46,
		16
	]
];
QRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {
	var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);
	if (rsBlock == void 0) throw new Error("bad rs block @ typeNumber:" + typeNumber + "/errorCorrectLevel:" + errorCorrectLevel);
	var length = rsBlock.length / 3;
	var list$2 = new Array();
	for (var i$1 = 0; i$1 < length; i$1++) {
		var count = rsBlock[i$1 * 3 + 0];
		var totalCount = rsBlock[i$1 * 3 + 1];
		var dataCount = rsBlock[i$1 * 3 + 2];
		for (var j = 0; j < count; j++) list$2.push(new QRRSBlock(totalCount, dataCount));
	}
	return list$2;
};
QRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {
	switch (errorCorrectLevel) {
		case ECL.L: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];
		case ECL.M: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];
		case ECL.Q: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];
		case ECL.H: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];
		default: return;
	}
};
var RSBlock$1 = QRRSBlock;
function QRBitBuffer() {
	this.buffer = new Array();
	this.length = 0;
}
QRBitBuffer.prototype = {
	get: function(index) {
		var bufIndex = Math.floor(index / 8);
		return (this.buffer[bufIndex] >>> 7 - index % 8 & 1) == 1;
	},
	put: function(num, length) {
		for (var i$1 = 0; i$1 < length; i$1++) this.putBit((num >>> length - i$1 - 1 & 1) == 1);
	},
	getLengthInBits: function() {
		return this.length;
	},
	putBit: function(bit) {
		var bufIndex = Math.floor(this.length / 8);
		if (this.buffer.length <= bufIndex) this.buffer.push(0);
		if (bit) this.buffer[bufIndex] |= 128 >>> this.length % 8;
		this.length++;
	}
};
var BitBuffer$1 = QRBitBuffer;
var QRMath = {
	glog: function(n) {
		if (n < 1) throw new Error("glog(" + n + ")");
		return QRMath.LOG_TABLE[n];
	},
	gexp: function(n) {
		while (n < 0) n += 255;
		while (n >= 256) n -= 255;
		return QRMath.EXP_TABLE[n];
	},
	EXP_TABLE: new Array(256),
	LOG_TABLE: new Array(256)
};
for (var i = 0; i < 8; i++) QRMath.EXP_TABLE[i] = 1 << i;
for (var i = 8; i < 256; i++) QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8];
for (var i = 0; i < 255; i++) QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;
var math$2 = QRMath;
var math$1 = math$2;
function QRPolynomial(num, shift) {
	if (num.length == void 0) throw new Error(num.length + "/" + shift);
	var offset = 0;
	while (offset < num.length && num[offset] == 0) offset++;
	this.num = new Array(num.length - offset + shift);
	for (var i$1 = 0; i$1 < num.length - offset; i$1++) this.num[i$1] = num[i$1 + offset];
}
QRPolynomial.prototype = {
	get: function(index) {
		return this.num[index];
	},
	getLength: function() {
		return this.num.length;
	},
	multiply: function(e) {
		var num = new Array(this.getLength() + e.getLength() - 1);
		for (var i$1 = 0; i$1 < this.getLength(); i$1++) for (var j = 0; j < e.getLength(); j++) num[i$1 + j] ^= math$1.gexp(math$1.glog(this.get(i$1)) + math$1.glog(e.get(j)));
		return new QRPolynomial(num, 0);
	},
	mod: function(e) {
		if (this.getLength() - e.getLength() < 0) return this;
		var ratio = math$1.glog(this.get(0)) - math$1.glog(e.get(0));
		var num = new Array(this.getLength());
		for (var i$1 = 0; i$1 < this.getLength(); i$1++) num[i$1] = this.get(i$1);
		for (var i$1 = 0; i$1 < e.getLength(); i$1++) num[i$1] ^= math$1.gexp(math$1.glog(e.get(i$1)) + ratio);
		return new QRPolynomial(num, 0).mod(e);
	}
};
var Polynomial$2 = QRPolynomial;
var Mode = mode$1;
var Polynomial$1 = Polynomial$2;
var math = math$2;
var QRMaskPattern = {
	PATTERN000: 0,
	PATTERN001: 1,
	PATTERN010: 2,
	PATTERN011: 3,
	PATTERN100: 4,
	PATTERN101: 5,
	PATTERN110: 6,
	PATTERN111: 7
};
var QRUtil = {
	PATTERN_POSITION_TABLE: [
		[],
		[6, 18],
		[6, 22],
		[6, 26],
		[6, 30],
		[6, 34],
		[
			6,
			22,
			38
		],
		[
			6,
			24,
			42
		],
		[
			6,
			26,
			46
		],
		[
			6,
			28,
			50
		],
		[
			6,
			30,
			54
		],
		[
			6,
			32,
			58
		],
		[
			6,
			34,
			62
		],
		[
			6,
			26,
			46,
			66
		],
		[
			6,
			26,
			48,
			70
		],
		[
			6,
			26,
			50,
			74
		],
		[
			6,
			30,
			54,
			78
		],
		[
			6,
			30,
			56,
			82
		],
		[
			6,
			30,
			58,
			86
		],
		[
			6,
			34,
			62,
			90
		],
		[
			6,
			28,
			50,
			72,
			94
		],
		[
			6,
			26,
			50,
			74,
			98
		],
		[
			6,
			30,
			54,
			78,
			102
		],
		[
			6,
			28,
			54,
			80,
			106
		],
		[
			6,
			32,
			58,
			84,
			110
		],
		[
			6,
			30,
			58,
			86,
			114
		],
		[
			6,
			34,
			62,
			90,
			118
		],
		[
			6,
			26,
			50,
			74,
			98,
			122
		],
		[
			6,
			30,
			54,
			78,
			102,
			126
		],
		[
			6,
			26,
			52,
			78,
			104,
			130
		],
		[
			6,
			30,
			56,
			82,
			108,
			134
		],
		[
			6,
			34,
			60,
			86,
			112,
			138
		],
		[
			6,
			30,
			58,
			86,
			114,
			142
		],
		[
			6,
			34,
			62,
			90,
			118,
			146
		],
		[
			6,
			30,
			54,
			78,
			102,
			126,
			150
		],
		[
			6,
			24,
			50,
			76,
			102,
			128,
			154
		],
		[
			6,
			28,
			54,
			80,
			106,
			132,
			158
		],
		[
			6,
			32,
			58,
			84,
			110,
			136,
			162
		],
		[
			6,
			26,
			54,
			82,
			110,
			138,
			166
		],
		[
			6,
			30,
			58,
			86,
			114,
			142,
			170
		]
	],
	G15: 1335,
	G18: 7973,
	G15_MASK: 21522,
	getBCHTypeInfo: function(data) {
		var d = data << 10;
		while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) d ^= QRUtil.G15 << QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15);
		return (data << 10 | d) ^ QRUtil.G15_MASK;
	},
	getBCHTypeNumber: function(data) {
		var d = data << 12;
		while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) d ^= QRUtil.G18 << QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18);
		return data << 12 | d;
	},
	getBCHDigit: function(data) {
		var digit = 0;
		while (data != 0) {
			digit++;
			data >>>= 1;
		}
		return digit;
	},
	getPatternPosition: function(typeNumber) {
		return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];
	},
	getMask: function(maskPattern, i$1, j) {
		switch (maskPattern) {
			case QRMaskPattern.PATTERN000: return (i$1 + j) % 2 == 0;
			case QRMaskPattern.PATTERN001: return i$1 % 2 == 0;
			case QRMaskPattern.PATTERN010: return j % 3 == 0;
			case QRMaskPattern.PATTERN011: return (i$1 + j) % 3 == 0;
			case QRMaskPattern.PATTERN100: return (Math.floor(i$1 / 2) + Math.floor(j / 3)) % 2 == 0;
			case QRMaskPattern.PATTERN101: return i$1 * j % 2 + i$1 * j % 3 == 0;
			case QRMaskPattern.PATTERN110: return (i$1 * j % 2 + i$1 * j % 3) % 2 == 0;
			case QRMaskPattern.PATTERN111: return (i$1 * j % 3 + (i$1 + j) % 2) % 2 == 0;
			default: throw new Error("bad maskPattern:" + maskPattern);
		}
	},
	getErrorCorrectPolynomial: function(errorCorrectLength) {
		var a = new Polynomial$1([1], 0);
		for (var i$1 = 0; i$1 < errorCorrectLength; i$1++) a = a.multiply(new Polynomial$1([1, math.gexp(i$1)], 0));
		return a;
	},
	getLengthInBits: function(mode$2, type) {
		if (1 <= type && type < 10) switch (mode$2) {
			case Mode.MODE_NUMBER: return 10;
			case Mode.MODE_ALPHA_NUM: return 9;
			case Mode.MODE_8BIT_BYTE: return 8;
			case Mode.MODE_KANJI: return 8;
			default: throw new Error("mode:" + mode$2);
		}
		else if (type < 27) switch (mode$2) {
			case Mode.MODE_NUMBER: return 12;
			case Mode.MODE_ALPHA_NUM: return 11;
			case Mode.MODE_8BIT_BYTE: return 16;
			case Mode.MODE_KANJI: return 10;
			default: throw new Error("mode:" + mode$2);
		}
		else if (type < 41) switch (mode$2) {
			case Mode.MODE_NUMBER: return 14;
			case Mode.MODE_ALPHA_NUM: return 13;
			case Mode.MODE_8BIT_BYTE: return 16;
			case Mode.MODE_KANJI: return 12;
			default: throw new Error("mode:" + mode$2);
		}
		else throw new Error("type:" + type);
	},
	getLostPoint: function(qrCode) {
		var moduleCount = qrCode.getModuleCount();
		var lostPoint = 0;
		for (var row$3 = 0; row$3 < moduleCount; row$3++) for (var col = 0; col < moduleCount; col++) {
			var sameCount = 0;
			var dark = qrCode.isDark(row$3, col);
			for (var r = -1; r <= 1; r++) {
				if (row$3 + r < 0 || moduleCount <= row$3 + r) continue;
				for (var c$1 = -1; c$1 <= 1; c$1++) {
					if (col + c$1 < 0 || moduleCount <= col + c$1) continue;
					if (r == 0 && c$1 == 0) continue;
					if (dark == qrCode.isDark(row$3 + r, col + c$1)) sameCount++;
				}
			}
			if (sameCount > 5) lostPoint += 3 + sameCount - 5;
		}
		for (var row$3 = 0; row$3 < moduleCount - 1; row$3++) for (var col = 0; col < moduleCount - 1; col++) {
			var count = 0;
			if (qrCode.isDark(row$3, col)) count++;
			if (qrCode.isDark(row$3 + 1, col)) count++;
			if (qrCode.isDark(row$3, col + 1)) count++;
			if (qrCode.isDark(row$3 + 1, col + 1)) count++;
			if (count == 0 || count == 4) lostPoint += 3;
		}
		for (var row$3 = 0; row$3 < moduleCount; row$3++) for (var col = 0; col < moduleCount - 6; col++) if (qrCode.isDark(row$3, col) && !qrCode.isDark(row$3, col + 1) && qrCode.isDark(row$3, col + 2) && qrCode.isDark(row$3, col + 3) && qrCode.isDark(row$3, col + 4) && !qrCode.isDark(row$3, col + 5) && qrCode.isDark(row$3, col + 6)) lostPoint += 40;
		for (var col = 0; col < moduleCount; col++) for (var row$3 = 0; row$3 < moduleCount - 6; row$3++) if (qrCode.isDark(row$3, col) && !qrCode.isDark(row$3 + 1, col) && qrCode.isDark(row$3 + 2, col) && qrCode.isDark(row$3 + 3, col) && qrCode.isDark(row$3 + 4, col) && !qrCode.isDark(row$3 + 5, col) && qrCode.isDark(row$3 + 6, col)) lostPoint += 40;
		var darkCount = 0;
		for (var col = 0; col < moduleCount; col++) for (var row$3 = 0; row$3 < moduleCount; row$3++) if (qrCode.isDark(row$3, col)) darkCount++;
		var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;
		lostPoint += ratio * 10;
		return lostPoint;
	}
};
var util$1 = QRUtil;
var BitByte = _8BitByte;
var RSBlock = RSBlock$1;
var BitBuffer = BitBuffer$1;
var util = util$1;
var Polynomial = Polynomial$2;
function QRCode$1(typeNumber, errorCorrectLevel) {
	this.typeNumber = typeNumber;
	this.errorCorrectLevel = errorCorrectLevel;
	this.modules = null;
	this.moduleCount = 0;
	this.dataCache = null;
	this.dataList = [];
}
var proto = QRCode$1.prototype;
proto.addData = function(data) {
	var newData = new BitByte(data);
	this.dataList.push(newData);
	this.dataCache = null;
};
proto.isDark = function(row$3, col) {
	if (row$3 < 0 || this.moduleCount <= row$3 || col < 0 || this.moduleCount <= col) throw new Error(row$3 + "," + col);
	return this.modules[row$3][col];
};
proto.getModuleCount = function() {
	return this.moduleCount;
};
proto.make = function() {
	if (this.typeNumber < 1) {
		var typeNumber = 1;
		for (typeNumber = 1; typeNumber < 40; typeNumber++) {
			var rsBlocks = RSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);
			var buffer = new BitBuffer();
			var totalDataCount = 0;
			for (var i$1 = 0; i$1 < rsBlocks.length; i$1++) totalDataCount += rsBlocks[i$1].dataCount;
			for (var i$1 = 0; i$1 < this.dataList.length; i$1++) {
				var data = this.dataList[i$1];
				buffer.put(data.mode, 4);
				buffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber));
				data.write(buffer);
			}
			if (buffer.getLengthInBits() <= totalDataCount * 8) break;
		}
		this.typeNumber = typeNumber;
	}
	this.makeImpl(false, this.getBestMaskPattern());
};
proto.makeImpl = function(test, maskPattern) {
	this.moduleCount = this.typeNumber * 4 + 17;
	this.modules = new Array(this.moduleCount);
	for (var row$3 = 0; row$3 < this.moduleCount; row$3++) {
		this.modules[row$3] = new Array(this.moduleCount);
		for (var col = 0; col < this.moduleCount; col++) this.modules[row$3][col] = null;
	}
	this.setupPositionProbePattern(0, 0);
	this.setupPositionProbePattern(this.moduleCount - 7, 0);
	this.setupPositionProbePattern(0, this.moduleCount - 7);
	this.setupPositionAdjustPattern();
	this.setupTimingPattern();
	this.setupTypeInfo(test, maskPattern);
	if (this.typeNumber >= 7) this.setupTypeNumber(test);
	if (this.dataCache == null) this.dataCache = QRCode$1.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);
	this.mapData(this.dataCache, maskPattern);
};
proto.setupPositionProbePattern = function(row$3, col) {
	for (var r = -1; r <= 7; r++) {
		if (row$3 + r <= -1 || this.moduleCount <= row$3 + r) continue;
		for (var c$1 = -1; c$1 <= 7; c$1++) {
			if (col + c$1 <= -1 || this.moduleCount <= col + c$1) continue;
			if (0 <= r && r <= 6 && (c$1 == 0 || c$1 == 6) || 0 <= c$1 && c$1 <= 6 && (r == 0 || r == 6) || 2 <= r && r <= 4 && 2 <= c$1 && c$1 <= 4) this.modules[row$3 + r][col + c$1] = true;
			else this.modules[row$3 + r][col + c$1] = false;
		}
	}
};
proto.getBestMaskPattern = function() {
	var minLostPoint = 0;
	var pattern = 0;
	for (var i$1 = 0; i$1 < 8; i$1++) {
		this.makeImpl(true, i$1);
		var lostPoint = util.getLostPoint(this);
		if (i$1 == 0 || minLostPoint > lostPoint) {
			minLostPoint = lostPoint;
			pattern = i$1;
		}
	}
	return pattern;
};
proto.createMovieClip = function(target_mc, instance_name, depth) {
	var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);
	var cs = 1;
	this.make();
	for (var row$3 = 0; row$3 < this.modules.length; row$3++) {
		var y = row$3 * cs;
		for (var col = 0; col < this.modules[row$3].length; col++) {
			var x = col * cs;
			if (this.modules[row$3][col]) {
				qr_mc.beginFill(0, 100);
				qr_mc.moveTo(x, y);
				qr_mc.lineTo(x + cs, y);
				qr_mc.lineTo(x + cs, y + cs);
				qr_mc.lineTo(x, y + cs);
				qr_mc.endFill();
			}
		}
	}
	return qr_mc;
};
proto.setupTimingPattern = function() {
	for (var r = 8; r < this.moduleCount - 8; r++) {
		if (this.modules[r][6] != null) continue;
		this.modules[r][6] = r % 2 == 0;
	}
	for (var c$1 = 8; c$1 < this.moduleCount - 8; c$1++) {
		if (this.modules[6][c$1] != null) continue;
		this.modules[6][c$1] = c$1 % 2 == 0;
	}
};
proto.setupPositionAdjustPattern = function() {
	var pos = util.getPatternPosition(this.typeNumber);
	for (var i$1 = 0; i$1 < pos.length; i$1++) for (var j = 0; j < pos.length; j++) {
		var row$3 = pos[i$1];
		var col = pos[j];
		if (this.modules[row$3][col] != null) continue;
		for (var r = -2; r <= 2; r++) for (var c$1 = -2; c$1 <= 2; c$1++) if (r == -2 || r == 2 || c$1 == -2 || c$1 == 2 || r == 0 && c$1 == 0) this.modules[row$3 + r][col + c$1] = true;
		else this.modules[row$3 + r][col + c$1] = false;
	}
};
proto.setupTypeNumber = function(test) {
	var bits = util.getBCHTypeNumber(this.typeNumber);
	for (var i$1 = 0; i$1 < 18; i$1++) {
		var mod = !test && (bits >> i$1 & 1) == 1;
		this.modules[Math.floor(i$1 / 3)][i$1 % 3 + this.moduleCount - 8 - 3] = mod;
	}
	for (var i$1 = 0; i$1 < 18; i$1++) {
		var mod = !test && (bits >> i$1 & 1) == 1;
		this.modules[i$1 % 3 + this.moduleCount - 8 - 3][Math.floor(i$1 / 3)] = mod;
	}
};
proto.setupTypeInfo = function(test, maskPattern) {
	var data = this.errorCorrectLevel << 3 | maskPattern;
	var bits = util.getBCHTypeInfo(data);
	for (var i$1 = 0; i$1 < 15; i$1++) {
		var mod = !test && (bits >> i$1 & 1) == 1;
		if (i$1 < 6) this.modules[i$1][8] = mod;
		else if (i$1 < 8) this.modules[i$1 + 1][8] = mod;
		else this.modules[this.moduleCount - 15 + i$1][8] = mod;
	}
	for (var i$1 = 0; i$1 < 15; i$1++) {
		var mod = !test && (bits >> i$1 & 1) == 1;
		if (i$1 < 8) this.modules[8][this.moduleCount - i$1 - 1] = mod;
		else if (i$1 < 9) this.modules[8][15 - i$1 - 1 + 1] = mod;
		else this.modules[8][15 - i$1 - 1] = mod;
	}
	this.modules[this.moduleCount - 8][8] = !test;
};
proto.mapData = function(data, maskPattern) {
	var inc = -1;
	var row$3 = this.moduleCount - 1;
	var bitIndex = 7;
	var byteIndex = 0;
	for (var col = this.moduleCount - 1; col > 0; col -= 2) {
		if (col == 6) col--;
		while (true) {
			for (var c$1 = 0; c$1 < 2; c$1++) if (this.modules[row$3][col - c$1] == null) {
				var dark = false;
				if (byteIndex < data.length) dark = (data[byteIndex] >>> bitIndex & 1) == 1;
				if (util.getMask(maskPattern, row$3, col - c$1)) dark = !dark;
				this.modules[row$3][col - c$1] = dark;
				bitIndex--;
				if (bitIndex == -1) {
					byteIndex++;
					bitIndex = 7;
				}
			}
			row$3 += inc;
			if (row$3 < 0 || this.moduleCount <= row$3) {
				row$3 -= inc;
				inc = -inc;
				break;
			}
		}
	}
};
QRCode$1.PAD0 = 236;
QRCode$1.PAD1 = 17;
QRCode$1.createData = function(typeNumber, errorCorrectLevel, dataList) {
	var rsBlocks = RSBlock.getRSBlocks(typeNumber, errorCorrectLevel);
	var buffer = new BitBuffer();
	for (var i$1 = 0; i$1 < dataList.length; i$1++) {
		var data = dataList[i$1];
		buffer.put(data.mode, 4);
		buffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber));
		data.write(buffer);
	}
	var totalDataCount = 0;
	for (var i$1 = 0; i$1 < rsBlocks.length; i$1++) totalDataCount += rsBlocks[i$1].dataCount;
	if (buffer.getLengthInBits() > totalDataCount * 8) throw new Error("code length overflow. (" + buffer.getLengthInBits() + ">" + totalDataCount * 8 + ")");
	if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) buffer.put(0, 4);
	while (buffer.getLengthInBits() % 8 != 0) buffer.putBit(false);
	while (true) {
		if (buffer.getLengthInBits() >= totalDataCount * 8) break;
		buffer.put(QRCode$1.PAD0, 8);
		if (buffer.getLengthInBits() >= totalDataCount * 8) break;
		buffer.put(QRCode$1.PAD1, 8);
	}
	return QRCode$1.createBytes(buffer, rsBlocks);
};
QRCode$1.createBytes = function(buffer, rsBlocks) {
	var offset = 0;
	var maxDcCount = 0;
	var maxEcCount = 0;
	var dcdata = new Array(rsBlocks.length);
	var ecdata = new Array(rsBlocks.length);
	for (var r = 0; r < rsBlocks.length; r++) {
		var dcCount = rsBlocks[r].dataCount;
		var ecCount = rsBlocks[r].totalCount - dcCount;
		maxDcCount = Math.max(maxDcCount, dcCount);
		maxEcCount = Math.max(maxEcCount, ecCount);
		dcdata[r] = new Array(dcCount);
		for (var i$1 = 0; i$1 < dcdata[r].length; i$1++) dcdata[r][i$1] = 255 & buffer.buffer[i$1 + offset];
		offset += dcCount;
		var rsPoly = util.getErrorCorrectPolynomial(ecCount);
		var modPoly = new Polynomial(dcdata[r], rsPoly.getLength() - 1).mod(rsPoly);
		ecdata[r] = new Array(rsPoly.getLength() - 1);
		for (var i$1 = 0; i$1 < ecdata[r].length; i$1++) {
			var modIndex = i$1 + modPoly.getLength() - ecdata[r].length;
			ecdata[r][i$1] = modIndex >= 0 ? modPoly.get(modIndex) : 0;
		}
	}
	var totalCodeCount = 0;
	for (var i$1 = 0; i$1 < rsBlocks.length; i$1++) totalCodeCount += rsBlocks[i$1].totalCount;
	var data = new Array(totalCodeCount);
	var index = 0;
	for (var i$1 = 0; i$1 < maxDcCount; i$1++) for (var r = 0; r < rsBlocks.length; r++) if (i$1 < dcdata[r].length) data[index++] = dcdata[r][i$1];
	for (var i$1 = 0; i$1 < maxEcCount; i$1++) for (var r = 0; r < rsBlocks.length; r++) if (i$1 < ecdata[r].length) data[index++] = ecdata[r][i$1];
	return data;
};
var QRCode_1 = QRCode$1;
var defaultErrorCorrectLevel = "H";
var SUPPORTS_PATH2D = (function() {
	try {
		new Path2D().addPath(new Path2D());
	} catch (e) {
		return false;
	}
	return true;
})();
function QRCode(data, level) {
	var errorCorrectLevel = ErrorCorrectLevel[level];
	var qrcode = new QRCode_1(-1, errorCorrectLevel);
	qrcode.addData(toUTF8String(data));
	qrcode.make();
	return qrcode;
}
function validErrorCorrectLevel(level) {
	return level in ErrorCorrectLevel;
}
function toUTF8String(str) {
	var utf8Str = "";
	for (var i$1 = 0; i$1 < str.length; i$1++) {
		var charCode = str.charCodeAt(i$1);
		if (charCode < 128) utf8Str += String.fromCharCode(charCode);
		else if (charCode < 2048) {
			utf8Str += String.fromCharCode(192 | charCode >> 6);
			utf8Str += String.fromCharCode(128 | charCode & 63);
		} else if (charCode < 55296 || charCode >= 57344) {
			utf8Str += String.fromCharCode(224 | charCode >> 12);
			utf8Str += String.fromCharCode(128 | charCode >> 6 & 63);
			utf8Str += String.fromCharCode(128 | charCode & 63);
		} else {
			i$1++;
			charCode = 65536 + ((charCode & 1023) << 10 | str.charCodeAt(i$1) & 1023);
			utf8Str += String.fromCharCode(240 | charCode >> 18);
			utf8Str += String.fromCharCode(128 | charCode >> 12 & 63);
			utf8Str += String.fromCharCode(128 | charCode >> 6 & 63);
			utf8Str += String.fromCharCode(128 | charCode & 63);
		}
	}
	return utf8Str;
}
function generatePath(modules, margin) {
	if (margin === void 0) margin = 0;
	var ops$1 = [];
	modules.forEach(function(row$3, y) {
		var start = null;
		row$3.forEach(function(cell, x) {
			if (!cell && start !== null) {
				ops$1.push("M".concat(start + margin, " ").concat(y + margin, "h").concat(x - start, "v1H").concat(start + margin, "z"));
				start = null;
				return;
			}
			if (x === row$3.length - 1) {
				if (!cell) return;
				if (start === null) ops$1.push("M".concat(x + margin, ",").concat(y + margin, " h1v1H").concat(x + margin, "z"));
				else ops$1.push("M".concat(start + margin, ",").concat(y + margin, " h").concat(x + 1 - start, "v1H").concat(start + margin, "z"));
				return;
			}
			if (cell && start === null) start = x;
		});
	});
	return ops$1.join("");
}
var QRCodeProps = {
	value: {
		type: String,
		required: true,
		"default": ""
	},
	size: {
		type: Number,
		"default": 100
	},
	level: {
		type: String,
		"default": defaultErrorCorrectLevel,
		validator: function(l) {
			return validErrorCorrectLevel(l);
		}
	},
	background: {
		type: String,
		"default": "#fff"
	},
	foreground: {
		type: String,
		"default": "#000"
	},
	margin: {
		type: Number,
		required: false,
		"default": 0
	}
};
var QRCodeVueProps = __assign(__assign({}, QRCodeProps), { renderAs: {
	type: String,
	required: false,
	"default": "canvas",
	validator: function(as) {
		return ["canvas", "svg"].indexOf(as) > -1;
	}
} });
var QRCodeSvg = defineComponent({
	name: "QRCodeSvg",
	props: QRCodeProps,
	setup: function(props) {
		var numCells = ref(0);
		var fgPath = ref("");
		var generate = function() {
			var value = props.value, level = props.level, margin = props.margin;
			var cells = QRCode(value, level).modules;
			numCells.value = cells.length + margin * 2;
			fgPath.value = generatePath(cells, margin);
		};
		generate();
		onUpdated(generate);
		return function() {
			return h("svg", {
				width: props.size,
				height: props.size,
				"shape-rendering": "crispEdges",
				xmlns: "http://www.w3.org/2000/svg",
				viewBox: "0 0 ".concat(numCells.value, " ").concat(numCells.value)
			}, [h("path", {
				fill: props.background,
				d: "M0,0 h".concat(numCells.value, "v").concat(numCells.value, "H0z")
			}), h("path", {
				fill: props.foreground,
				d: fgPath.value
			})]);
		};
	}
});
var QRCodeCanvas = defineComponent({
	name: "QRCodeCanvas",
	props: QRCodeProps,
	setup: function(props) {
		var canvasEl = ref(null);
		var generate = function() {
			var value = props.value, level = props.level, size = props.size, margin = props.margin, background = props.background, foreground = props.foreground;
			var cells = QRCode(value, level).modules;
			var numCells = cells.length + margin * 2;
			var canvas = canvasEl.value;
			if (!canvas) return;
			var ctx = canvas.getContext("2d");
			if (!ctx) return;
			var devicePixelRatio = window.devicePixelRatio || 1;
			var scale = size / numCells * devicePixelRatio;
			canvas.height = canvas.width = size * devicePixelRatio;
			ctx.scale(scale, scale);
			ctx.fillStyle = background;
			ctx.fillRect(0, 0, numCells, numCells);
			ctx.fillStyle = foreground;
			if (SUPPORTS_PATH2D) ctx.fill(new Path2D(generatePath(cells, margin)));
			else cells.forEach(function(row$3, rdx) {
				row$3.forEach(function(cell, cdx) {
					if (cell) ctx.fillRect(cdx + margin, rdx + margin, 1, 1);
				});
			});
		};
		onMounted(generate);
		onUpdated(generate);
		return function() {
			return h("canvas", {
				ref: canvasEl,
				style: {
					width: "".concat(props.size, "px"),
					height: "".concat(props.size, "px")
				}
			});
		};
	}
});
var QrcodeVue = defineComponent({
	name: "Qrcode",
	render: function() {
		var _a = this.$props, renderAs = _a.renderAs, value = _a.value, _size = _a.size, _margin = _a.margin, _level = _a.level, background = _a.background, foreground = _a.foreground;
		var size = _size >>> 0;
		var margin = _margin >>> 0;
		var level = validErrorCorrectLevel(_level) ? _level : defaultErrorCorrectLevel;
		return h(renderAs === "svg" ? QRCodeSvg : QRCodeCanvas, {
			value,
			size,
			margin,
			level,
			background,
			foreground
		});
	},
	props: QRCodeVueProps
});
var _hoisted_1$26 = ["textContent"];
var _hoisted_2$11 = { key: 0 };
var _hoisted_3$7 = { key: 1 };
var MfaSetupModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "MfaSetupModal",
	setup(__props) {
		const MFA_SETUP_MODAL_KEY_NAME = ref(MFA_SETUP_MODAL_KEY);
		const modalBus = ref(mfaEventBus);
		const secret$1 = ref("");
		const qrCode = ref("");
		const readyToSubmit = ref(false);
		const formBus = ref(mfaEventBus);
		const showRecoveryCodes = ref(false);
		const recoveryCodes = ref([]);
		const recoveryCodesDownloaded = ref(false);
		const authenticatorCode = ref("");
		const infoTextErrorMessage = ref("");
		const loadingQrCode = ref(true);
		const clipboard = useClipboard();
		const userStore = useUsersStore();
		const settingsStore = useSettingsStore();
		const i18n$2 = useI18n();
		const toast = useToast();
		const closeDialog = () => {
			modalBus.value.emit("close");
		};
		const onInput = (value) => {
			if (value.length !== 6) {
				infoTextErrorMessage.value = "";
				return;
			}
			userStore.verifyMfaCode({ mfaCode: value }).then(() => {
				showRecoveryCodes.value = true;
				authenticatorCode.value = value;
			}).catch(() => {
				infoTextErrorMessage.value = i18n$2.baseText("mfa.setup.invalidCode");
			});
		};
		const onCopySecretToClipboard = () => {
			clipboard.copy(secret$1.value);
			toast.showToast({
				title: i18n$2.baseText("mfa.setup.step1.toast.copyToClipboard.title"),
				message: i18n$2.baseText("mfa.setup.step1.toast.copyToClipboard.message"),
				type: "success"
			});
		};
		const onSaveClick = () => {
			formBus.value.emit("submit");
		};
		const onDownloadClick = () => {
			const filename = "n8n-recovery-codes.txt";
			const temporalElement = document.createElement("a");
			temporalElement.setAttribute("href", "data:text/plain;charset=utf-8," + encodeURIComponent(recoveryCodes.value.join("\n")));
			temporalElement.setAttribute("download", filename);
			temporalElement.style.display = "none";
			document.body.appendChild(temporalElement);
			temporalElement.click();
			document.body.removeChild(temporalElement);
			recoveryCodesDownloaded.value = true;
		};
		const onSetupClick = async () => {
			try {
				await userStore.enableMfa({ mfaCode: authenticatorCode.value });
				closeDialog();
				toast.showMessage({
					type: "success",
					title: i18n$2.baseText("mfa.setup.step2.toast.setupFinished.message")
				});
				if (settingsStore.isMFAEnforced) {
					await userStore.logout();
					await router_default.push({ name: VIEWS.SIGNIN });
				}
			} catch (e) {
				if (e.errorCode === 997) {
					toast.showMessage({
						type: "error",
						title: i18n$2.baseText("mfa.setup.step2.toast.tokenExpired.error.message")
					});
					return;
				}
				toast.showMessage({
					type: "error",
					title: i18n$2.baseText("mfa.setup.step2.toast.setupFinished.error.message")
				});
			}
		};
		const getMfaQR = async () => {
			try {
				const response = await userStore.fetchMfaQR();
				qrCode.value = response.qrCode;
				secret$1.value = response.secret;
				recoveryCodes.value = response.recoveryCodes;
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("settings.api.view.error"));
			} finally {
				loadingQrCode.value = false;
			}
		};
		onMounted(async () => {
			await getMfaQR();
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "460px",
				height: "80%",
				"max-height": "640px",
				title: !showRecoveryCodes.value ? unref(i18n$2).baseText("mfa.setup.step1.title") : unref(i18n$2).baseText("mfa.setup.step2.title"),
				"event-bus": modalBus.value,
				name: MFA_SETUP_MODAL_KEY_NAME.value,
				center: true,
				loading: loadingQrCode.value
			}, {
				content: withCtx(() => [!showRecoveryCodes.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass([_ctx.$style.container, _ctx.$style.modalContent])
				}, [
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.textContainer) }, [createVNode(unref(N8nText_default), {
						size: "large",
						color: "text-dark",
						bold: true
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("mfa.setup.step1.instruction1.title")), 1)]),
						_: 1
					})], 2),
					createBaseVNode("div", null, [createVNode(unref(N8nText_default), {
						size: "medium",
						bold: false
					}, {
						default: withCtx(() => [createVNode(unref(I18nT), {
							keypath: "mfa.setup.step1.instruction1.subtitle",
							tag: "span",
							scope: "global"
						}, {
							part1: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("mfa.setup.step1.instruction1.subtitle.part1")), 1)]),
							part2: withCtx(() => [createBaseVNode("a", {
								class: normalizeClass(_ctx.$style.secret),
								"data-test-id": "mfa-secret-button",
								onClick: onCopySecretToClipboard
							}, toDisplayString(unref(i18n$2).baseText("mfa.setup.step1.instruction1.subtitle.part2")), 3)]),
							_: 1
						})]),
						_: 1
					})]),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.qrContainer) }, [createVNode(QrcodeVue, {
						value: qrCode.value,
						size: 150,
						level: "H"
					}, null, 8, ["value"])], 2),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.textContainer) }, [createVNode(unref(N8nText_default), {
						size: "large",
						color: "text-dark",
						bold: true
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("mfa.setup.step1.instruction2.title")), 1)]),
						_: 1
					})], 2),
					createBaseVNode("div", { class: normalizeClass([_ctx.$style.form, infoTextErrorMessage.value ? _ctx.$style.error : ""]) }, [createVNode(unref(N8nInputLabel_default), {
						size: "medium",
						bold: false,
						class: normalizeClass(_ctx.$style.labelTooltip),
						label: unref(i18n$2).baseText("mfa.setup.step1.input.label")
					}, {
						default: withCtx(() => [createVNode(unref(Input_default), {
							modelValue: authenticatorCode.value,
							"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => authenticatorCode.value = $event),
							type: "text",
							maxlength: 6,
							placeholder: unref(i18n$2).baseText("mfa.code.input.placeholder"),
							required: true,
							"data-test-id": "mfa-token-input",
							onInput
						}, null, 8, ["modelValue", "placeholder"])]),
						_: 1
					}, 8, ["class", "label"]), createBaseVNode("div", { class: normalizeClass([_ctx.$style.infoText, "mt-4xs"]) }, [createBaseVNode("span", {
						size: "small",
						textContent: toDisplayString(infoTextErrorMessage.value)
					}, null, 8, _hoisted_1$26)], 2)], 2)
				], 2)) : (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.container)
				}, [
					createBaseVNode("div", null, [createVNode(unref(N8nText_default), {
						size: "medium",
						bold: false
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("mfa.setup.step2.description")), 1)]),
						_: 1
					})]),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.recoveryCodesContainer) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(recoveryCodes.value, (recoveryCode) => {
						return openBlock(), createElementBlock("div", { key: recoveryCode }, [createVNode(unref(N8nText_default), { size: "medium" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(recoveryCode), 1)]),
							_: 2
						}, 1024)]);
					}), 128))], 2),
					createVNode(unref(N8nInfoTip_default), {
						bold: false,
						class: normalizeClass(_ctx.$style["edit-mode-footer-infotip"])
					}, {
						default: withCtx(() => [createVNode(unref(I18nT), {
							keypath: "mfa.setup.step2.infobox.description",
							tag: "span",
							scope: "global"
						}, {
							part1: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("mfa.setup.step2.infobox.description.part1")), 1)]),
							part2: withCtx(() => [createVNode(unref(N8nText_default), {
								size: "small",
								bold: true,
								class: normalizeClass(_ctx.$style.loseAccessText)
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("mfa.setup.step2.infobox.description.part2")), 1)]),
								_: 1
							}, 8, ["class"])]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"]),
					createBaseVNode("div", null, [createVNode(unref(N8nButton_default), {
						variant: "solid",
						icon: "hard-drive-download",
						float: "right",
						label: unref(i18n$2).baseText("mfa.setup.step2.button.download"),
						"data-test-id": "mfa-recovery-codes-button",
						onClick: onDownloadClick
					}, null, 8, ["label"])])
				], 2))]),
				footer: withCtx(() => [showRecoveryCodes.value ? (openBlock(), createElementBlock("div", _hoisted_2$11, [createBaseVNode("div", null, [createVNode(unref(N8nButton_default), {
					float: "right",
					disabled: !recoveryCodesDownloaded.value,
					label: unref(i18n$2).baseText("mfa.setup.step2.button.save"),
					size: "large",
					"data-test-id": "mfa-save-button",
					onClick: onSetupClick
				}, null, 8, ["disabled", "label"])])])) : (openBlock(), createElementBlock("div", _hoisted_3$7, [createBaseVNode("div", null, [createVNode(unref(N8nButton_default), {
					float: "right",
					label: unref(i18n$2).baseText("mfa.setup.step1.button.continue"),
					size: "large",
					disabled: !readyToSubmit.value,
					onClick: onSaveClick
				}, null, 8, ["label", "disabled"])])]))]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name",
				"loading"
			]);
		};
	}
});
var MfaSetupModal_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_13wpk_125",
	textContainer: "_textContainer_13wpk_139",
	formContainer: "_formContainer_13wpk_145",
	qrContainer: "_qrContainer_13wpk_149",
	headerContainer: "_headerContainer_13wpk_156",
	recoveryCodesContainer: "_recoveryCodesContainer_13wpk_160",
	form: "_form_13wpk_145",
	secret: "_secret_13wpk_194",
	loseAccessText: "_loseAccessText_13wpk_199",
	error: "_error_13wpk_203",
	modalFooter: "_modalFooter_13wpk_212",
	notice: "_notice_13wpk_218"
};
var MfaSetupModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(MfaSetupModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": MfaSetupModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$25 = { key: 0 };
var ModalRoot_default = /* @__PURE__ */ defineComponent({
	__name: "ModalRoot",
	props: {
		name: {},
		keepAlive: { type: Boolean }
	},
	setup(__props) {
		const uiStore = useUIStore();
		return (_ctx, _cache) => {
			return unref(uiStore).modalsById[__props.name].open || __props.keepAlive ? (openBlock(), createElementBlock("div", _hoisted_1$25, [renderSlot(_ctx.$slots, "default", {
				modalName: __props.name,
				active: unref(uiStore).isModalActiveById[__props.name],
				open: unref(uiStore).modalsById[__props.name].open,
				activeId: unref(uiStore).modalsById[__props.name].activeId,
				mode: unref(uiStore).modalsById[__props.name].mode,
				data: unref(uiStore).modalsById[__props.name].data
			})])) : createCommentVNode("", true);
		};
	}
});
var ModalDrawer_default = /* @__PURE__ */ defineComponent({
	__name: "ModalDrawer",
	props: {
		name: {},
		beforeClose: {},
		eventBus: {},
		direction: {},
		modal: {
			type: Boolean,
			default: true
		},
		width: {},
		wrapperClosable: {
			type: Boolean,
			default: true
		},
		closeOnClickModal: {
			type: Boolean,
			default: false
		},
		showClose: {
			type: Boolean,
			default: true
		},
		zIndex: {}
	},
	emits: ["enter"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const uiStore = useUIStore();
		const handleEnter = () => {
			if (uiStore.isModalActiveById[props.name]) emit("enter");
		};
		const onWindowKeydown = (event) => {
			if (!uiStore.isModalActiveById[props.name]) return;
			if (event && event.keyCode === 13) handleEnter();
		};
		const close = async () => {
			if (props.beforeClose) {
				if (await props.beforeClose() === false) return;
			}
			uiStore.closeModal(props.name);
		};
		onMounted(() => {
			window.addEventListener("keydown", onWindowKeydown);
			props.eventBus?.on("close", close);
			const activeElement = document.activeElement;
			if (activeElement) activeElement.blur();
		});
		onBeforeUnmount(() => {
			props.eventBus?.off("close", close);
			window.removeEventListener("keydown", onWindowKeydown);
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(ElDrawer), {
				direction: __props.direction,
				"model-value": unref(uiStore).modalsById[__props.name]?.open ?? false,
				size: __props.width,
				"before-close": close,
				modal: __props.modal,
				"wrapper-closable": __props.wrapperClosable,
				"close-on-click-modal": __props.closeOnClickModal,
				"z-index": __props.zIndex,
				"show-close": __props.showClose
			}, {
				header: withCtx(() => [renderSlot(_ctx.$slots, "header")]),
				default: withCtx(() => [createBaseVNode("span", { onKeydown: _cache[0] || (_cache[0] = withModifiers(() => {}, ["stop"])) }, [renderSlot(_ctx.$slots, "content")], 32)]),
				_: 3
			}, 8, [
				"direction",
				"model-value",
				"size",
				"modal",
				"wrapper-closable",
				"close-on-click-modal",
				"z-index",
				"show-close"
			]);
		};
	}
});
var NpsSurvey_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "NpsSurvey",
	props: { isActive: { type: Boolean } },
	setup(__props) {
		const props = __props;
		const rootStore = useRootStore();
		const i18n$2 = useI18n();
		const toast = useToast();
		const telemetry$1 = useTelemetry();
		const { APP_Z_INDEXES } = useStyles();
		const DEFAULT_TITLE = i18n$2.baseText("prompts.npsSurvey.recommendationQuestion");
		const GREAT_FEEDBACK_TITLE = i18n$2.baseText("prompts.npsSurvey.greatFeedbackTitle");
		const DEFAULT_FEEDBACK_TITLE = i18n$2.baseText("prompts.npsSurvey.defaultFeedbackTitle");
		const FEEDBACK_QUESTION_TITLE = i18n$2.baseText("prompts.npsSurvey.feedbackQuestionTitle");
		const VERY_LIKELY_OPTION = i18n$2.baseText("prompts.npsSurvey.veryLikely");
		const NOT_LIKELY_OPTION = i18n$2.baseText("prompts.npsSurvey.notLikely");
		const SEND = i18n$2.baseText("prompts.npsSurvey.send");
		const form$4 = ref({
			value: "",
			feedback: ""
		});
		const showButtons = ref(true);
		const showFeedback = ref(false);
		const modalBus = createEventBus();
		const modalTitle = computed(() => {
			if (showFeedback.value) return FEEDBACK_QUESTION_TITLE;
			if (form$4?.value?.value !== "") if (Number(form$4.value.value) > 7) return GREAT_FEEDBACK_TITLE;
			else return DEFAULT_FEEDBACK_TITLE;
			return DEFAULT_TITLE;
		});
		async function closeDialog() {
			if (form$4.value.value === "") {
				telemetry$1.track("User responded value survey score", {
					instance_id: rootStore.instanceId,
					nps: ""
				});
				await useNpsSurveyStore().ignoreNpsSurvey();
			}
			if (form$4.value.value !== "" && form$4.value.feedback.trim() === "") telemetry$1.track("User responded value survey feedback", {
				instance_id: rootStore.instanceId,
				feedback: "",
				nps: form$4.value.value
			});
		}
		async function selectSurveyValue(value) {
			form$4.value.value = value;
			showButtons.value = false;
			showFeedback.value = true;
			telemetry$1.track("User responded value survey score", {
				instance_id: rootStore.instanceId,
				nps: form$4.value.value
			});
			await useNpsSurveyStore().respondNpsSurvey();
		}
		function onFeedbackInput(value) {
			form$4.value.feedback = value;
		}
		async function send() {
			if (form$4.value.feedback.trim() !== "") {
				telemetry$1.track("User responded value survey feedback", {
					instance_id: rootStore.instanceId,
					nps: form$4.value.value,
					feedback: form$4.value.feedback
				});
				toast.showMessage({
					title: i18n$2.baseText("prompts.npsSurvey.thanks"),
					message: Number(form$4.value.value) >= 8 ? i18n$2.baseText("prompts.npsSurvey.reviewUs") : "",
					type: "success",
					duration: 15e3
				});
				setTimeout(() => {
					form$4.value.value = "";
					form$4.value.feedback = "";
					showButtons.value = true;
					showFeedback.value = false;
				}, 1e3);
				modalBus.emit("close");
			}
		}
		watch(() => props.isActive, (isActive) => {
			if (isActive) telemetry$1.track("User shown value survey", { instance_id: rootStore.instanceId });
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(ModalDrawer_default, {
				name: unref(NPS_SURVEY_MODAL_KEY),
				"event-bus": unref(modalBus),
				"before-close": closeDialog,
				modal: true,
				"wrapper-closable": false,
				direction: "btt",
				width: "auto",
				class: normalizeClass(["nps-survey", _ctx.$style.npsSurvey]),
				"close-on-click-modal": false,
				"z-index": unref(APP_Z_INDEXES).NPS_SURVEY_MODAL,
				"data-test-id": "nps-survey-modal"
			}, {
				header: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.title) }, [createVNode(unref(N8nHeading_default), {
					tag: "h2",
					size: "medium",
					color: "text-xlight"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(modalTitle.value), 1)]),
					_: 1
				})], 2)]),
				content: withCtx(() => [createBaseVNode("section", { class: normalizeClass(_ctx.$style.content) }, [showButtons.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.wrapper)
				}, [createBaseVNode("div", {
					class: normalizeClass(_ctx.$style.buttons),
					"data-test-id": "nps-survey-ratings"
				}, [(openBlock(), createElementBlock(Fragment, null, renderList(11, (value) => {
					return createBaseVNode("div", {
						key: value - 1,
						class: normalizeClass(_ctx.$style.container)
					}, [createVNode(unref(N8nButton_default), {
						variant: "subtle",
						iconOnly: "",
						label: (value - 1).toString(),
						onClick: ($event) => selectSurveyValue((value - 1).toString())
					}, null, 8, ["label", "onClick"])], 2);
				}), 64))], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.text) }, [createVNode(unref(N8nText_default), {
					size: "small",
					color: "text-xlight"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(NOT_LIKELY_OPTION)), 1)]),
					_: 1
				}), createVNode(unref(N8nText_default), {
					size: "small",
					color: "text-xlight"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(VERY_LIKELY_OPTION)), 1)]),
					_: 1
				})], 2)], 2)) : showFeedback.value ? (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.feedback)
				}, [createBaseVNode("div", {
					class: normalizeClass(_ctx.$style.input),
					"data-test-id": "nps-survey-feedback"
				}, [createVNode(unref(Input_default), {
					modelValue: form$4.value.feedback,
					"onUpdate:modelValue": [_cache[0] || (_cache[0] = ($event) => form$4.value.feedback = $event), onFeedbackInput],
					type: "textarea",
					rows: 2,
					class: normalizeClass(_ctx.$style.feedbackInput)
				}, null, 8, ["modelValue", "class"])], 2), createBaseVNode("div", {
					class: normalizeClass(_ctx.$style.button),
					"data-test-id": "nps-survey-feedback-button"
				}, [createVNode(unref(N8nButton_default), {
					label: unref(SEND),
					float: "right",
					disabled: !form$4.value.feedback.trim(),
					onClick: send
				}, null, 8, ["label", "disabled"])], 2)], 2)) : createCommentVNode("", true)], 2)]),
				_: 1
			}, 8, [
				"name",
				"event-bus",
				"class",
				"z-index"
			]);
		};
	}
});
var NpsSurvey_vue_vue_type_style_index_0_lang_module_default = {
	title: "_title_1ov97_125",
	content: "_content_1ov97_139",
	wrapper: "_wrapper_1ov97_150",
	text: "_text_1ov97_154",
	buttons: "_buttons_1ov97_158",
	container: "_container_1ov97_162",
	input: "_input_1ov97_183",
	button: "_button_1ov97_158",
	feedback: "_feedback_1ov97_192",
	feedbackInput: "_feedbackInput_1ov97_200",
	npsSurvey: "_npsSurvey_1ov97_211"
};
var NpsSurvey_default = /* @__PURE__ */ __plugin_vue_export_helper_default(NpsSurvey_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": NpsSurvey_vue_vue_type_style_index_0_lang_module_default }]]);
var SURVEY_VERSION = "v4";
var PersonalizationModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "PersonalizationModal",
	setup(__props) {
		const externalHooks = useExternalHooks();
		const modalBus = createEventBus();
		const formBus = createFormEventBus();
		const { showError } = useToast();
		const i18n$2 = useI18n();
		const rootStore = useRootStore();
		const usersStore = useUsersStore();
		const posthogStore = usePostHog();
		const route = useRoute();
		const router = useRouter();
		const uiStore = useUIStore();
		const formValues = ref({});
		const isSaving = ref(false);
		const userPermissions = computed(() => getResourcePermissions(usersStore.currentUser?.globalScopes));
		const survey = computed(() => [
			{
				name: COMPANY_TYPE_KEY,
				properties: {
					label: i18n$2.baseText("personalizationModal.whatBestDescribesYourCompany"),
					type: "select",
					placeholder: i18n$2.baseText("personalizationModal.select"),
					options: [
						{
							label: i18n$2.baseText("personalizationModal.saas"),
							value: SAAS_COMPANY_TYPE
						},
						{
							label: i18n$2.baseText("personalizationModal.eCommerce"),
							value: ECOMMERCE_COMPANY_TYPE
						},
						{
							label: i18n$2.baseText("personalizationModal.digitalAgencyOrConsultant"),
							value: DIGITAL_AGENCY_COMPANY_TYPE
						},
						{
							label: i18n$2.baseText("personalizationModal.systemsIntegrator"),
							value: SYSTEMS_INTEGRATOR_COMPANY_TYPE
						},
						{
							value: EDUCATION_TYPE,
							label: i18n$2.baseText("personalizationModal.education")
						},
						{
							label: i18n$2.baseText("personalizationModal.other"),
							value: OTHER_COMPANY_TYPE
						},
						{
							label: i18n$2.baseText("personalizationModal.imNotUsingN8nForWork"),
							value: PERSONAL_COMPANY_TYPE
						}
					]
				}
			},
			{
				name: COMPANY_INDUSTRY_EXTENDED_KEY,
				properties: {
					type: "multi-select",
					label: i18n$2.baseText("personalizationModal.whichIndustriesIsYourCompanyIn"),
					placeholder: i18n$2.baseText("personalizationModal.select"),
					options: [
						{
							value: FINANCE_INSURANCE_INDUSTRY,
							label: i18n$2.baseText("personalizationModal.financeOrInsurance")
						},
						{
							value: GOVERNMENT_INDUSTRY,
							label: i18n$2.baseText("personalizationModal.government")
						},
						{
							value: HEALTHCARE_INDUSTRY,
							label: i18n$2.baseText("personalizationModal.healthcare")
						},
						{
							value: IT_INDUSTRY,
							label: i18n$2.baseText("personalizationModal.it")
						},
						{
							value: LEGAL_INDUSTRY,
							label: i18n$2.baseText("personalizationModal.legal")
						},
						{
							value: "msp",
							label: i18n$2.baseText("personalizationModal.managedServiceProvider")
						},
						{
							value: MARKETING_INDUSTRY,
							label: i18n$2.baseText("personalizationModal.marketing")
						},
						{
							value: MEDIA_INDUSTRY,
							label: i18n$2.baseText("personalizationModal.media")
						},
						{
							value: MANUFACTURING_INDUSTRY,
							label: i18n$2.baseText("personalizationModal.manufacturing")
						},
						{
							value: PHYSICAL_RETAIL_OR_SERVICES,
							label: i18n$2.baseText("personalizationModal.physicalRetailOrServices")
						},
						{
							value: REAL_ESTATE_OR_CONSTRUCTION,
							label: i18n$2.baseText("personalizationModal.realEstateOrConstruction")
						},
						{
							value: SECURITY_INDUSTRY,
							label: i18n$2.baseText("personalizationModal.security")
						},
						{
							value: TELECOMS_INDUSTRY,
							label: i18n$2.baseText("personalizationModal.telecoms")
						},
						{
							value: OTHER_INDUSTRY_OPTION,
							label: i18n$2.baseText("personalizationModal.otherPleaseSpecify")
						}
					]
				},
				shouldDisplay(values) {
					return values[COMPANY_TYPE_KEY] === OTHER_COMPANY_TYPE;
				}
			},
			{
				name: OTHER_COMPANY_INDUSTRY_EXTENDED_KEY,
				properties: { placeholder: i18n$2.baseText("personalizationModal.specifyYourCompanysIndustry") },
				shouldDisplay(values) {
					const companyType = values[COMPANY_TYPE_KEY];
					const companyIndustry = values[COMPANY_INDUSTRY_EXTENDED_KEY];
					return companyType === "other" && !!companyIndustry && companyIndustry.includes("other");
				}
			},
			{
				name: ROLE_KEY,
				properties: {
					type: "select",
					label: i18n$2.baseText("personalizationModal.whichRoleBestDescribesYou"),
					placeholder: i18n$2.baseText("personalizationModal.select"),
					options: [
						{
							value: ROLE_BUSINESS_OWNER,
							label: i18n$2.baseText("personalizationModal.businessOwner")
						},
						{
							value: ROLE_CUSTOMER_SUPPORT,
							label: i18n$2.baseText("personalizationModal.customerSupport")
						},
						{
							value: ROLE_DATA_SCIENCE,
							label: i18n$2.baseText("personalizationModal.dataScience")
						},
						{
							value: ROLE_DEVOPS,
							label: i18n$2.baseText("personalizationModal.devops")
						},
						{
							value: "it",
							label: i18n$2.baseText("personalizationModal.it")
						},
						{
							value: ROLE_ENGINEERING,
							label: i18n$2.baseText("personalizationModal.engineering")
						},
						{
							value: ROLE_SALES_AND_MARKETING,
							label: i18n$2.baseText("personalizationModal.salesAndMarketing")
						},
						{
							value: ROLE_SECURITY,
							label: i18n$2.baseText("personalizationModal.security")
						},
						{
							value: ROLE_OTHER,
							label: i18n$2.baseText("personalizationModal.otherPleaseSpecify")
						}
					]
				},
				shouldDisplay(values) {
					return values[COMPANY_TYPE_KEY] !== PERSONAL_COMPANY_TYPE;
				}
			},
			{
				name: ROLE_OTHER_KEY,
				properties: { placeholder: i18n$2.baseText("personalizationModal.specifyYourRole") },
				shouldDisplay(values) {
					const companyType = values[COMPANY_TYPE_KEY];
					const role = values[ROLE_KEY];
					return companyType !== "personal" && role === "other";
				}
			},
			{
				name: DEVOPS_AUTOMATION_GOAL_KEY,
				properties: {
					type: "multi-select",
					label: i18n$2.baseText("personalizationModal.whatAreYouLookingToAutomate"),
					placeholder: i18n$2.baseText("personalizationModal.select"),
					options: [
						{
							value: DEVOPS_AUTOMATION_CI_CD_GOAL,
							label: i18n$2.baseText("personalizationModal.cicd")
						},
						{
							value: DEVOPS_AUTOMATION_CLOUD_INFRASTRUCTURE_ORCHESTRATION_GOAL,
							label: i18n$2.baseText("personalizationModal.cloudInfrastructureOrchestration")
						},
						{
							value: DEVOPS_AUTOMATION_DATA_SYNCING_GOAL,
							label: i18n$2.baseText("personalizationModal.dataSynching")
						},
						{
							value: DEVOPS_INCIDENT_RESPONSE_GOAL,
							label: i18n$2.baseText("personalizationModal.incidentResponse")
						},
						{
							value: DEVOPS_MONITORING_AND_ALERTING_GOAL,
							label: i18n$2.baseText("personalizationModal.monitoringAndAlerting")
						},
						{
							value: DEVOPS_REPORTING_GOAL,
							label: i18n$2.baseText("personalizationModal.reporting")
						},
						{
							value: DEVOPS_TICKETING_SYSTEMS_INTEGRATIONS_GOAL,
							label: i18n$2.baseText("personalizationModal.ticketingSystemsIntegrations")
						},
						{
							value: OTHER_AUTOMATION_GOAL,
							label: i18n$2.baseText("personalizationModal.other")
						}
					]
				},
				shouldDisplay(values) {
					const companyType = values[COMPANY_TYPE_KEY];
					const role = values[ROLE_KEY];
					return companyType !== "personal" && [
						"devops",
						"engineering",
						"it"
					].includes(role);
				}
			},
			{
				name: DEVOPS_AUTOMATION_GOAL_OTHER_KEY,
				properties: { placeholder: i18n$2.baseText("personalizationModal.specifyYourAutomationGoal") },
				shouldDisplay(values) {
					const companyType = values[COMPANY_TYPE_KEY];
					const goals = values[DEVOPS_AUTOMATION_GOAL_KEY];
					const role = values[ROLE_KEY];
					return companyType !== "personal" && [
						"devops",
						"engineering",
						"it"
					].includes(role) && !!goals && goals.includes("other");
				}
			},
			{
				name: MARKETING_AUTOMATION_GOAL_KEY,
				properties: {
					type: "multi-select",
					label: i18n$2.baseText("personalizationModal.specifySalesMarketingGoal"),
					placeholder: i18n$2.baseText("personalizationModal.select"),
					options: [
						{
							label: i18n$2.baseText("personalizationModal.leadGeneration"),
							value: MARKETING_AUTOMATION_LEAD_GENERATION_GOAL
						},
						{
							label: i18n$2.baseText("personalizationModal.customerCommunication"),
							value: MARKETING_AUTOMATION_CUSTOMER_COMMUNICATION
						},
						{
							label: i18n$2.baseText("personalizationModal.customerActions"),
							value: MARKETING_AUTOMATION_ACTIONS
						},
						{
							label: i18n$2.baseText("personalizationModal.adCampaign"),
							value: MARKETING_AUTOMATION_AD_CAMPAIGN
						},
						{
							label: i18n$2.baseText("personalizationModal.reporting"),
							value: MARKETING_AUTOMATION_REPORTING
						},
						{
							label: i18n$2.baseText("personalizationModal.dataSynching"),
							value: MARKETING_AUTOMATION_DATA_SYNCHING
						},
						{
							label: i18n$2.baseText("personalizationModal.other"),
							value: MARKETING_AUTOMATION_OTHER
						}
					]
				},
				shouldDisplay(values) {
					const companyType = values[COMPANY_TYPE_KEY];
					const role = values[ROLE_KEY];
					return companyType !== "personal" && role === "sales-and-marketing";
				}
			},
			{
				name: OTHER_MARKETING_AUTOMATION_GOAL_KEY,
				properties: { placeholder: i18n$2.baseText("personalizationModal.specifyOtherSalesAndMarketingGoal") },
				shouldDisplay(values) {
					const companyType = values[COMPANY_TYPE_KEY];
					const goals = values[MARKETING_AUTOMATION_GOAL_KEY];
					const role = values[ROLE_KEY];
					return companyType !== "personal" && role === "sales-and-marketing" && !!goals && goals.includes("other");
				}
			},
			{
				name: AUTOMATION_BENEFICIARY_KEY,
				properties: {
					type: "select",
					label: i18n$2.baseText("personalizationModal.specifyAutomationBeneficiary"),
					placeholder: i18n$2.baseText("personalizationModal.select"),
					options: [
						{
							label: i18n$2.baseText("personalizationModal.myself"),
							value: AUTOMATION_BENEFICIARY_SELF
						},
						{
							label: i18n$2.baseText("personalizationModal.myTeam"),
							value: AUTOMATION_BENEFICIARY_MY_TEAM
						},
						{
							label: i18n$2.baseText("personalizationModal.otherTeams"),
							value: AUTOMATION_BENEFICIARY_OTHER_TEAMS
						}
					]
				},
				shouldDisplay(values) {
					return values[COMPANY_TYPE_KEY] !== PERSONAL_COMPANY_TYPE;
				}
			},
			{
				name: COMPANY_SIZE_KEY,
				properties: {
					type: "select",
					label: i18n$2.baseText("personalizationModal.howBigIsYourCompany"),
					placeholder: i18n$2.baseText("personalizationModal.select"),
					options: [
						{
							label: i18n$2.baseText("personalizationModal.lessThan20People"),
							value: "<20"
						},
						{
							label: `20-99 ${i18n$2.baseText("personalizationModal.people")}`,
							value: COMPANY_SIZE_20_99
						},
						{
							label: `100-499 ${i18n$2.baseText("personalizationModal.people")}`,
							value: COMPANY_SIZE_100_499
						},
						{
							label: `500-999 ${i18n$2.baseText("personalizationModal.people")}`,
							value: COMPANY_SIZE_500_999
						},
						{
							label: `1000+ ${i18n$2.baseText("personalizationModal.people")}`,
							value: COMPANY_SIZE_1000_OR_MORE
						},
						{
							label: i18n$2.baseText("personalizationModal.imNotUsingN8nForWork"),
							value: COMPANY_SIZE_PERSONAL_USE
						}
					]
				},
				shouldDisplay(values) {
					return values[COMPANY_TYPE_KEY] !== PERSONAL_COMPANY_TYPE;
				}
			},
			{
				name: REPORTED_SOURCE_KEY,
				properties: {
					type: "select",
					label: i18n$2.baseText("personalizationModal.howDidYouHearAboutN8n"),
					placeholder: i18n$2.baseText("personalizationModal.select"),
					options: [
						{
							label: "Google",
							value: REPORTED_SOURCE_GOOGLE
						},
						{
							label: "Twitter",
							value: REPORTED_SOURCE_TWITTER
						},
						{
							label: "LinkedIn",
							value: REPORTED_SOURCE_LINKEDIN
						},
						{
							label: "YouTube",
							value: REPORTED_SOURCE_YOUTUBE
						},
						{
							label: "ChatGPT / LLM",
							value: "llm"
						},
						{
							label: i18n$2.baseText("personalizationModal.friendWordOfMouth"),
							value: REPORTED_SOURCE_FRIEND
						},
						{
							label: i18n$2.baseText("personalizationModal.podcast"),
							value: REPORTED_SOURCE_PODCAST
						},
						{
							label: i18n$2.baseText("personalizationModal.event"),
							value: REPORTED_SOURCE_EVENT
						},
						{
							label: i18n$2.baseText("personalizationModal.otherPleaseSpecify"),
							value: REPORTED_SOURCE_OTHER
						}
					]
				}
			},
			{
				name: REPORTED_SOURCE_OTHER_KEY,
				properties: { placeholder: i18n$2.baseText("personalizationModal.specifyReportedSource") },
				shouldDisplay(values) {
					return values[REPORTED_SOURCE_KEY] === REPORTED_SOURCE_OTHER;
				}
			}
		]);
		const onSave = () => {
			formBus.emit("submit");
		};
		const closeCallback = () => {
			if (route.name !== VIEWS.HOMEPAGE) router.replace({ name: VIEWS.HOMEPAGE });
		};
		const closeDialog = () => {
			modalBus.emit("close");
			if (userPermissions.value.community.register) uiStore.openModalWithData({
				name: COMMUNITY_PLUS_ENROLLMENT_MODAL,
				data: {
					closeCallback,
					customHeading: void 0
				}
			});
			else closeCallback();
		};
		const onSubmit = async (values) => {
			isSaving.value = true;
			try {
				const completedSurvey = {
					...values,
					version: SURVEY_VERSION,
					personalization_survey_submitted_at: (/* @__PURE__ */ new Date()).toISOString(),
					personalization_survey_n8n_version: rootStore.versionCli
				};
				await externalHooks.run("personalizationModal.onSubmit", completedSurvey);
				await usersStore.submitPersonalizationSurvey(completedSurvey);
				posthogStore.setMetadata(completedSurvey, "user");
			} catch (e) {
				showError(e, "Error while submitting results");
			} finally {
				isSaving.value = false;
				closeDialog();
			}
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(PERSONALIZATION_MODAL_KEY),
				title: unref(i18n$2).baseText("personalizationModal.customizeN8n"),
				subtitle: unref(i18n$2).baseText("personalizationModal.theseQuestionsHelpUs"),
				"center-title": true,
				"show-close": false,
				"event-bus": unref(modalBus),
				"close-on-click-modal": false,
				"close-on-press-escape": false,
				width: "460px",
				"data-test-id": "personalization-form",
				onEnter: onSave
			}, {
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.container) }, [createVNode(unref(N8nFormInputs_default), {
					modelValue: formValues.value,
					"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => formValues.value = $event),
					inputs: survey.value,
					"column-view": true,
					"event-bus": unref(formBus),
					teleported: true,
					"tag-size": "small",
					onSubmit
				}, null, 8, [
					"modelValue",
					"inputs",
					"event-bus"
				])], 2)]),
				footer: withCtx(() => [createBaseVNode("div", null, [createVNode(unref(N8nButton_default), {
					loading: isSaving.value,
					label: unref(i18n$2).baseText("personalizationModal.getStarted"),
					float: "right",
					onClick: onSave
				}, null, 8, ["loading", "label"])])]),
				_: 1
			}, 8, [
				"name",
				"title",
				"subtitle",
				"event-bus"
			]);
		};
	}
});
var PersonalizationModal_vue_vue_type_style_index_0_lang_module_default = { container: "_container_4s3tu_125" };
var PersonalizationModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(PersonalizationModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": PersonalizationModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$24 = { key: 0 };
var _hoisted_2$10 = { key: 1 };
var _hoisted_3$6 = { key: 2 };
var _hoisted_4$6 = {
	key: 1,
	class: "pt-s"
};
var _hoisted_5$3 = { href: "#" };
var ProjectMoveSuccessToastMessage_default = /* @__PURE__ */ defineComponent({
	__name: "ProjectMoveSuccessToastMessage",
	props: {
		routeName: {},
		resourceType: {},
		targetProject: {},
		isShareCredentialsChecked: { type: Boolean },
		areAllUsedCredentialsShareable: { type: Boolean }
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const isWorkflow = computed(() => props.resourceType === ResourceType.Workflow);
		const isTargetProjectTeam = computed(() => props.targetProject.type === ProjectTypes.Team);
		const targetProjectName = computed(() => {
			return getTruncatedProjectName(props.targetProject?.name);
		});
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", null, [isWorkflow.value ? (openBlock(), createBlock(unref(N8nText_default), {
				key: 0,
				tag: "p",
				class: "pt-xs"
			}, {
				default: withCtx(() => [props.isShareCredentialsChecked && props.areAllUsedCredentialsShareable ? (openBlock(), createElementBlock("span", _hoisted_1$24, toDisplayString(unref(i18n$2).baseText("projects.move.resource.success.message.workflow.withAllCredentials")), 1)) : props.isShareCredentialsChecked ? (openBlock(), createElementBlock("span", _hoisted_2$10, toDisplayString(unref(i18n$2).baseText("projects.move.resource.success.message.workflow.withSomeCredentials")), 1)) : (openBlock(), createElementBlock("span", _hoisted_3$6, toDisplayString(unref(i18n$2).baseText("projects.move.resource.success.message.workflow")), 1))]),
				_: 1
			})) : createCommentVNode("", true), isTargetProjectTeam.value ? (openBlock(), createElementBlock("p", _hoisted_4$6, [createBaseVNode("a", _hoisted_5$3, toDisplayString(unref(i18n$2).baseText("projects.move.resource.success.link", { interpolate: { targetProjectName: targetProjectName.value } })), 1)])) : createCommentVNode("", true)]);
		};
	}
});
var _hoisted_1$23 = { key: 0 };
var ProjectMoveResourceModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ProjectMoveResourceModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const uiStore = useUIStore();
		const toast = useToast();
		const router = useRouter();
		const projectsStore = useProjectsStore();
		const workflowsListStore = useWorkflowsListStore();
		const credentialsStore = useCredentialsStore();
		const telemetry$1 = useTelemetry();
		const filter = ref("");
		const projectId = ref(null);
		const shareUsedCredentials = ref(false);
		const usedCredentials = ref([]);
		const allCredentials = ref([]);
		const loading$2 = ref(false);
		const shareableCredentials = computed(() => allCredentials.value.filter((credential) => getResourcePermissions(credential.scopes).credential.share && usedCredentials.value.find((uc) => uc.id === credential.id)));
		const unShareableCredentials = computed(() => usedCredentials.value.reduce((acc, uc) => {
			const credential = credentialsStore.getCredentialById(uc.id);
			const credentialPermissions = getResourcePermissions(credential?.scopes).credential;
			if (!credentialPermissions.share) if (credentialPermissions.read) acc.push(credential);
			else acc.push(uc);
			return acc;
		}, []));
		const homeProjectName = computed(() => processProjectName(props.data.resource.homeProject?.name ?? "") ?? "");
		const availableProjects = computed(() => sortByProperty("name", projectsStore.availableProjects.filter((p) => p.id !== props.data.resource.homeProject?.id && (!p.scopes || getResourcePermissions(p.scopes)[props.data.resourceType].create))));
		const filteredProjects = computed(() => availableProjects.value.filter((p) => p.name?.toLowerCase().includes(filter.value.toLowerCase())));
		const selectedProject = computed(() => availableProjects.value.find((p) => p.id === projectId.value));
		const isResourceInTeamProject = computed(() => isHomeProjectTeam(props.data.resource));
		const isResourceWorkflow = computed(() => props.data.resourceType === ResourceType.Workflow);
		const targetProjectName = computed(() => {
			return getTruncatedProjectName(selectedProject.value?.name);
		});
		const resourceName = computed(() => truncate(props.data.resource.name, 25));
		const isPersonalSpaceRestricted = computed(() => props.data.resource.homeProject?.type === ProjectTypes.Personal && props.data.resource.homeProject?.id === projectsStore.personalProject?.id);
		const isTargetPersonalProject = computed(() => projectId.value === projectsStore.personalProject?.id);
		const isHomeProjectTeam = (resource) => resource.homeProject?.type === ProjectTypes.Team;
		const processProjectName = (projectName) => {
			const { name: name$3, email } = splitName(projectName);
			return name$3 ?? email;
		};
		const updateProject = (value) => {
			projectId.value = value;
		};
		const closeModal = () => {
			uiStore.closeModal(props.modalName);
		};
		const setFilter = (query) => {
			filter.value = query;
		};
		const moveResource = async () => {
			if (!selectedProject.value || loading$2.value) return;
			loading$2.value = true;
			try {
				await projectsStore.moveResourceToProject(props.data.resourceType, props.data.resource.id, selectedProject.value.id, void 0, shareUsedCredentials.value ? shareableCredentials.value.map((c$1) => c$1.id) : void 0);
				closeModal();
				telemetry$1.track(`User successfully moved ${props.data.resourceType}`, {
					[`${props.data.resourceType}_id`]: props.data.resource.id,
					project_from_type: projectsStore.currentProject?.type ?? projectsStore.personalProject?.type
				});
				toast.showToast({
					title: i18n$2.baseText("projects.move.resource.success.title", { interpolate: {
						resourceTypeLabel: props.data.resourceTypeLabel,
						resourceName: resourceName.value,
						targetProjectName: targetProjectName.value
					} }),
					message: h(ProjectMoveSuccessToastMessage_default, {
						routeName: isResourceWorkflow.value ? VIEWS.PROJECTS_WORKFLOWS : VIEWS.PROJECTS_CREDENTIALS,
						resourceType: props.data.resourceType,
						targetProject: selectedProject.value,
						isShareCredentialsChecked: shareUsedCredentials.value,
						areAllUsedCredentialsShareable: shareableCredentials.value.length === usedCredentials.value.length
					}),
					onClick: (event) => {
						if (event?.target instanceof HTMLAnchorElement && selectedProject.value) {
							event.preventDefault();
							router.push({
								name: isResourceWorkflow.value ? VIEWS.PROJECTS_WORKFLOWS : VIEWS.PROJECTS_CREDENTIALS,
								params: { projectId: selectedProject.value.id }
							});
						}
					},
					type: "success",
					duration: 8e3
				});
				if (props.data.eventBus) props.data.eventBus.emit("resource-moved", {
					resourceId: props.data.resource.id,
					resourceType: props.data.resourceType,
					targetProjectId: selectedProject.value.id
				});
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("projects.move.resource.error.title", { interpolate: {
					resourceTypeLabel: props.data.resourceTypeLabel,
					resourceName: resourceName.value
				} }));
			} finally {
				loading$2.value = false;
			}
		};
		onMounted(async () => {
			telemetry$1.track(`User clicked to move a ${props.data.resourceType}`, {
				[`${props.data.resourceType}_id`]: props.data.resource.id,
				project_from_type: projectsStore.currentProject?.type ?? projectsStore.personalProject?.type
			});
			await projectsStore.getAvailableProjects();
			if (isResourceWorkflow.value) {
				const [workflow, credentials] = await Promise.all([workflowsListStore.fetchWorkflow(props.data.resource.id), credentialsStore.fetchAllCredentials()]);
				usedCredentials.value = workflow?.usedCredentials ?? [];
				allCredentials.value = credentials ?? [];
			}
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "500px",
				name: props.modalName,
				"data-test-id": "project-move-resource-modal"
			}, {
				header: withCtx(() => [createVNode(unref(N8nHeading_default), {
					tag: "h2",
					size: "xlarge",
					class: "mb-m pr-s"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.title", { interpolate: { resourceTypeLabel: props.data.resourceTypeLabel } })), 1)]),
					_: 1
				}), createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [createVNode(unref(I18nT), {
						keypath: "projects.move.resource.modal.message",
						scope: "global"
					}, createSlots({
						resourceName: withCtx(() => [createBaseVNode("strong", null, toDisplayString(resourceName.value), 1)]),
						_: 2
					}, [isResourceInTeamProject.value ? {
						name: "inTeamProject",
						fn: withCtx(() => [createVNode(unref(I18nT), {
							keypath: "projects.move.resource.modal.message.team",
							scope: "global"
						}, {
							resourceHomeProjectName: withCtx(() => [createBaseVNode("strong", null, toDisplayString(homeProjectName.value), 1)]),
							_: 1
						})]),
						key: "0"
					} : {
						name: "inPersonalProject",
						fn: withCtx(() => [createVNode(unref(I18nT), {
							keypath: "projects.move.resource.modal.message.personal",
							scope: "global"
						}, {
							resourceHomeProjectName: withCtx(() => [createBaseVNode("strong", null, toDisplayString(homeProjectName.value), 1)]),
							_: 1
						})]),
						key: "1"
					}]), 1024)]),
					_: 1
				})]),
				content: withCtx(() => [availableProjects.value.length ? (openBlock(), createElementBlock("div", _hoisted_1$23, [createVNode(unref(N8nSelect_default), {
					class: "mr-2xs mb-xs",
					"model-value": projectId.value,
					filterable: true,
					"filter-method": setFilter,
					placeholder: unref(i18n$2).baseText("projects.move.resource.modal.selectPlaceholder"),
					"data-test-id": "project-move-resource-modal-select",
					"onUpdate:modelValue": updateProject
				}, {
					prefix: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "search" })]),
					default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(filteredProjects.value, (p) => {
						return openBlock(), createBlock(unref(N8nOption_default), {
							key: p.id,
							value: p.id,
							label: p.name ?? ""
						}, null, 8, ["value", "label"]);
					}), 128))]),
					_: 1
				}, 8, ["model-value", "placeholder"]), createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [
						createVNode(unref(I18nT), {
							keypath: "projects.move.resource.modal.message.sharingNote",
							scope: "global"
						}, {
							note: withCtx(() => [createBaseVNode("strong", null, toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.message.note")), 1)]),
							resourceTypeLabel: withCtx(() => [createTextVNode(toDisplayString(props.data.resourceTypeLabel), 1)]),
							_: 1
						}),
						props.data.resource.sharedWithProjects?.length ?? false ? (openBlock(), createElementBlock("span", {
							key: 0,
							class: normalizeClass(_ctx.$style.textBlock)
						}, toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.message.sharingInfo", {
							adjustToNumber: props.data.resource.sharedWithProjects?.length,
							interpolate: { count: props.data.resource.sharedWithProjects?.length ?? 0 }
						})), 3)) : createCommentVNode("", true),
						shareableCredentials.value.length && !isTargetPersonalProject.value ? (openBlock(), createBlock(unref(Checkbox_default), {
							key: 1,
							modelValue: shareUsedCredentials.value,
							"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => shareUsedCredentials.value = $event),
							class: normalizeClass(_ctx.$style.textBlock),
							"data-test-id": "project-move-resource-modal-checkbox-all"
						}, {
							label: withCtx(() => [createVNode(unref(I18nT), {
								keypath: "projects.move.resource.modal.message.usedCredentials",
								scope: "global"
							}, {
								usedCredentials: withCtx(() => [createVNode(unref(N8nTooltip_default), { placement: "top" }, {
									content: withCtx(() => [createVNode(ProjectMoveResourceModalCredentialsList_default, {
										"current-project-id": unref(projectsStore).currentProjectId,
										credentials: shareableCredentials.value
									}, null, 8, ["current-project-id", "credentials"])]),
									default: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style.tooltipText) }, toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.message.usedCredentials.number", {
										adjustToNumber: shareableCredentials.value.length,
										interpolate: { count: shareableCredentials.value.length }
									})), 3)]),
									_: 1
								})]),
								_: 1
							})]),
							_: 1
						}, 8, ["modelValue", "class"])) : createCommentVNode("", true),
						unShareableCredentials.value.length && !isTargetPersonalProject.value ? (openBlock(), createBlock(unref(N8nCallout_default), {
							key: 2,
							theme: "warning",
							class: normalizeClass(_ctx.$style.textBlock)
						}, {
							default: withCtx(() => [createVNode(unref(I18nT), {
								keypath: isPersonalSpaceRestricted.value ? "projects.move.resource.modal.message.unAccessibleCredentials.personalSpaceNote" : "projects.move.resource.modal.message.unAccessibleCredentials.note",
								scope: "global"
							}, {
								credentials: withCtx(() => [createVNode(unref(N8nTooltip_default), { placement: "top" }, {
									content: withCtx(() => [createVNode(ProjectMoveResourceModalCredentialsList_default, {
										"current-project-id": unref(projectsStore).currentProjectId,
										credentials: unShareableCredentials.value
									}, null, 8, ["current-project-id", "credentials"])]),
									default: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style.tooltipText) }, toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.message.unAccessibleCredentials.count", {
										adjustToNumber: unShareableCredentials.value.length,
										interpolate: { count: unShareableCredentials.value.length }
									})), 3)]),
									_: 1
								})]),
								_: 1
							}, 8, ["keypath"])]),
							_: 1
						}, 8, ["class"])) : createCommentVNode("", true)
					]),
					_: 1
				})])) : (openBlock(), createBlock(unref(N8nText_default), { key: 1 }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.message.noProjects", { interpolate: { resourceTypeLabel: props.data.resourceTypeLabel } })), 1)]),
					_: 1
				}))]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.buttons) }, [createVNode(unref(N8nButton_default), {
					variant: "ghost",
					class: "mr-2xs",
					disabled: loading$2.value,
					onClick: closeModal
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.cancel")), 1)]),
					_: 1
				}, 8, ["disabled"]), createVNode(unref(N8nButton_default), {
					variant: "solid",
					loading: loading$2.value,
					disabled: !projectId.value || loading$2.value,
					"data-test-id": "project-move-resource-modal-button",
					onClick: moveResource
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("projects.move.resource.modal.button", { interpolate: { resourceTypeLabel: props.data.resourceTypeLabel } })), 1)]),
					_: 1
				}, 8, ["loading", "disabled"])], 2)]),
				_: 1
			}, 8, ["name"]);
		};
	}
});
var ProjectMoveResourceModal_vue_vue_type_style_index_0_lang_module_default = {
	buttons: "_buttons_7tzrp_125",
	textBlock: "_textBlock_7tzrp_130",
	tooltipText: "_tooltipText_7tzrp_134"
};
var ProjectMoveResourceModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ProjectMoveResourceModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ProjectMoveResourceModal_vue_vue_type_style_index_0_lang_module_default }]]);
var import_unset = /* @__PURE__ */ __toESM(require_unset(), 1);
var import_set = /* @__PURE__ */ __toESM(require_set(), 1);
function destinationToFakeINodeUi(destination, fakeType = "n8n-nodes-base.stickyNote") {
	return {
		id: destination.id,
		name: destination.id,
		typeVersion: 1,
		type: fakeType,
		position: [0, 0],
		credentials: { ...destination.credentials },
		parameters: { ...destination }
	};
}
var EventSelection_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "EventSelection",
	props: {
		destinationId: { default: "defaultDestinationId" },
		readonly: {
			type: Boolean,
			default: false
		}
	},
	emits: ["input", "change"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const logStreamingStore = useLogStreamingStore();
		const anonymizeAuditMessages = computed(() => logStreamingStore.items[props.destinationId]?.destination.anonymizeAuditMessages);
		function onInput() {
			emit("input");
		}
		function onCheckboxChecked(eventName, checked) {
			logStreamingStore.setSelectedInGroup(props.destinationId, eventName, checked);
		}
		function anonymizeAuditMessagesChanged(value) {
			logStreamingStore.items[props.destinationId].destination.anonymizeAuditMessages = value;
			emit("change", {
				name: "anonymizeAuditMessages",
				node: props.destinationId,
				value
			});
		}
		function groupLabelName(t) {
			return i18n$2.baseText(`settings.log-streaming.eventGroup.${t}`) ?? t;
		}
		function groupLabelInfo(t) {
			const labelInfo = `settings.log-streaming.eventGroup.${t}.info`;
			const infoText = i18n$2.baseText(labelInfo);
			if (infoText === labelInfo || infoText === "") return;
			return infoText;
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", null, [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(logStreamingStore).items[__props.destinationId]?.eventGroups, (group) => {
				return openBlock(), createElementBlock("div", {
					key: group.name,
					shadow: "never"
				}, [
					createVNode(unref(Checkbox_default), {
						"model-value": group.selected,
						indeterminate: group.indeterminate,
						disabled: __props.readonly,
						"onUpdate:modelValue": (value) => {
							onInput();
							onCheckboxChecked(group.name, value);
						}
					}, {
						label: withCtx(() => [createBaseVNode("strong", null, toDisplayString(groupLabelName(group.name)), 1), groupLabelInfo(group.name) !== void 0 ? (openBlock(), createBlock(unref(N8nTooltip_default), {
							key: 0,
							placement: "top",
							"content-class": _ctx.$style.tooltipPopper,
							class: "ml-xs"
						}, {
							content: withCtx(() => [createTextVNode(toDisplayString(groupLabelInfo(group.name)), 1)]),
							default: withCtx(() => [createVNode(unref(N8nIcon_default), {
								icon: "circle-help",
								size: "small",
								class: "ml-4xs"
							})]),
							_: 2
						}, 1032, ["content-class"])) : createCommentVNode("", true)]),
						_: 2
					}, 1032, [
						"model-value",
						"indeterminate",
						"disabled",
						"onUpdate:modelValue"
					]),
					group.name === "n8n.audit" ? (openBlock(), createBlock(unref(Checkbox_default), {
						key: 0,
						"model-value": anonymizeAuditMessages.value,
						disabled: __props.readonly,
						"onUpdate:modelValue": _cache[0] || (_cache[0] = (value) => {
							onInput();
							anonymizeAuditMessagesChanged(value);
						})
					}, {
						label: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.log-streaming.tab.events.anonymize")) + " ", 1), createVNode(unref(N8nTooltip_default), {
							placement: "top",
							"content-class": _ctx.$style.tooltipPopper
						}, {
							content: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.log-streaming.tab.events.anonymize.info")), 1)]),
							default: withCtx(() => [createVNode(unref(N8nIcon_default), {
								icon: "circle-help",
								size: "small",
								class: "ml-4xs"
							})]),
							_: 1
						}, 8, ["content-class"])]),
						_: 1
					}, 8, ["model-value", "disabled"])) : createCommentVNode("", true),
					createBaseVNode("ul", { class: normalizeClass(_ctx.$style.eventList) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(group.children, (event) => {
						return openBlock(), createElementBlock("li", {
							key: event.name,
							class: normalizeClass(`${_ctx.$style.eventListItem}`)
						}, [createVNode(unref(Checkbox_default), {
							"model-value": event.selected || group.selected,
							indeterminate: event.indeterminate,
							disabled: __props.readonly,
							"onUpdate:modelValue": (value) => {
								onInput();
								onCheckboxChecked(event.name, value);
							}
						}, {
							label: withCtx(() => [createTextVNode(toDisplayString(event.label) + " ", 1), createVNode(unref(N8nTooltip_default), {
								placement: "top",
								"content-class": _ctx.$style.tooltipPopper
							}, {
								content: withCtx(() => [createTextVNode(toDisplayString(event.name), 1)]),
								_: 2
							}, 1032, ["content-class"])]),
							_: 2
						}, 1032, [
							"model-value",
							"indeterminate",
							"disabled",
							"onUpdate:modelValue"
						])], 2);
					}), 128))], 2)
				]);
			}), 128))]);
		};
	}
});
var EventSelection_vue_vue_type_style_index_0_lang_module_default = {
	eventListCard: "_eventListCard_194hy_125",
	eventList: "_eventList_194hy_125",
	eventListItem: "_eventListItem_194hy_137",
	eventListItemDisabled: "_eventListItemDisabled_194hy_145",
	listItem: "_listItem_194hy_152"
};
var EventSelection_default = /* @__PURE__ */ __plugin_vue_export_helper_default(EventSelection_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": EventSelection_vue_vue_type_style_index_0_lang_module_default }]]);
const circuitBreakerOptions = {
	displayName: "Circuit Breaker Options",
	name: "circuitBreaker",
	type: "collection",
	placeholder: "Add Circuit Breaker Option",
	description: "A circuit breaker protects services from cascading failures by monitoring request failures and temporarily blocking requests when failure rates are high. This gives failing services time to recover without being overwhelmed by traffic.",
	default: {},
	options: [{
		displayName: "Max Failures",
		name: "maxFailures",
		type: "number",
		typeOptions: { minValue: 1 },
		default: 5,
		description: "After this many errors within the failure window n8n stops sending requests to prevent overloading the external service thats not working properly."
	}, {
		displayName: "Failure Window",
		name: "failureWindow",
		type: "number",
		typeOptions: { minValue: 100 },
		default: LOGSTREAMING_CB_DEFAULT_FAILURE_WINDOW_MS,
		description: "Time window in milliseconds for counting failures (sliding window). Only failures within this window are counted toward the threshold. Older failures expire naturally."
	}]
};
const webhookModalDescription = [
	{
		displayName: "Method",
		name: "method",
		noDataExpression: true,
		type: "options",
		options: [
			{
				name: "GET",
				value: "GET"
			},
			{
				name: "POST",
				value: "POST"
			},
			{
				name: "PUT",
				value: "PUT"
			}
		],
		default: "POST",
		description: "The request method to use"
	},
	{
		displayName: "URL",
		name: "url",
		type: "string",
		noDataExpression: true,
		default: "",
		placeholder: "http://example.com/index.html",
		description: "The URL to make the request to"
	},
	{
		displayName: "Generic Auth Type (OAuth not supported yet)",
		name: "genericAuthType",
		type: "credentialsSelect",
		default: "",
		credentialTypes: ["has:genericAuth"],
		displayOptions: { show: { authentication: ["genericCredentialType"] } }
	},
	{
		displayName: "Add Query Parameters",
		name: "sendQuery",
		type: "boolean",
		default: false,
		noDataExpression: true,
		description: "Whether the request has query params or not"
	},
	{
		displayName: "Specify Query Parameters",
		name: "specifyQuery",
		type: "options",
		displayOptions: { show: { sendQuery: [true] } },
		options: [{
			name: "Using Fields Below",
			value: "keypair"
		}, {
			name: "Using JSON",
			value: "json"
		}],
		default: "keypair"
	},
	{
		displayName: "Add Query Parameters",
		name: "queryParameters",
		type: "fixedCollection",
		displayOptions: { show: {
			sendQuery: [true],
			specifyQuery: ["keypair"]
		} },
		typeOptions: { multipleValues: true },
		placeholder: "Add Parameter",
		default: { parameters: [{
			name: "",
			value: ""
		}] },
		options: [{
			name: "parameters",
			displayName: "Parameter",
			values: [{
				displayName: "Name",
				name: "name",
				type: "string",
				default: ""
			}, {
				displayName: "Value",
				name: "value",
				type: "string",
				default: ""
			}]
		}]
	},
	{
		displayName: "JSON",
		name: "jsonQuery",
		type: "json",
		displayOptions: { show: {
			sendQuery: [true],
			specifyQuery: ["json"]
		} },
		default: ""
	},
	{
		displayName: "Add Headers",
		name: "sendHeaders",
		type: "boolean",
		default: false,
		noDataExpression: true,
		description: "Whether the request has headers or not"
	},
	{
		displayName: "Specify Headers",
		name: "specifyHeaders",
		type: "options",
		displayOptions: { show: { sendHeaders: [true] } },
		options: [{
			name: "Using Fields Below",
			value: "keypair"
		}, {
			name: "Using JSON",
			value: "json"
		}],
		default: "keypair"
	},
	{
		displayName: "Header Parameters",
		name: "headerParameters",
		type: "fixedCollection",
		displayOptions: { show: {
			sendHeaders: [true],
			specifyHeaders: ["keypair"]
		} },
		typeOptions: { multipleValues: true },
		placeholder: "Add Parameter",
		default: { parameters: [{
			name: "",
			value: ""
		}] },
		options: [{
			name: "parameters",
			displayName: "Parameter",
			values: [{
				displayName: "Name",
				name: "name",
				type: "string",
				default: ""
			}, {
				displayName: "Value",
				name: "value",
				type: "string",
				default: ""
			}]
		}]
	},
	{
		displayName: "JSON",
		name: "jsonHeaders",
		type: "json",
		displayOptions: { show: {
			sendHeaders: [true],
			specifyHeaders: ["json"]
		} },
		default: ""
	},
	{
		displayName: "Options",
		name: "options",
		type: "collection",
		placeholder: "Add Option",
		default: {},
		options: [
			{
				displayName: "Ignore SSL Issues (Insecure)",
				name: "allowUnauthorizedCerts",
				type: "boolean",
				noDataExpression: true,
				default: false,
				description: "Whether to ignore SSL certificate validation"
			},
			{
				displayName: "Array Format in Query Parameters",
				name: "queryParameterArrays",
				type: "options",
				displayOptions: { show: { "/sendQuery": [true] } },
				options: [
					{
						name: "No Brackets",
						value: "repeat",
						description: "e.g. foo=bar&foo=qux"
					},
					{
						name: "Brackets Only",
						value: "brackets",
						description: "e.g. foo[]=bar&foo[]=qux"
					},
					{
						name: "Brackets with Indices",
						value: "indices",
						description: "e.g. foo[0]=bar&foo[1]=qux"
					}
				],
				default: "brackets"
			},
			{
				displayName: "Redirects",
				name: "redirect",
				placeholder: "Add Redirect",
				type: "fixedCollection",
				typeOptions: { multipleValues: false },
				default: { redirect: {} },
				options: [{
					displayName: "Redirect",
					name: "redirect",
					values: [{
						displayName: "Follow Redirects",
						name: "followRedirects",
						type: "boolean",
						default: false,
						noDataExpression: true,
						description: "Whether to follow all redirects"
					}, {
						displayName: "Max Redirects",
						name: "maxRedirects",
						type: "number",
						displayOptions: { show: { followRedirects: [true] } },
						default: 21,
						description: "Max number of redirects to follow"
					}]
				}]
			},
			{
				displayName: "Proxy",
				name: "proxy",
				description: "Add Proxy",
				type: "fixedCollection",
				typeOptions: { multipleValues: false },
				default: { proxy: {} },
				options: [{
					displayName: "Proxy",
					name: "proxy",
					values: [
						{
							displayName: "Protocol",
							name: "protocol",
							type: "options",
							default: "https",
							options: [{
								name: "HTTPS",
								value: "https"
							}, {
								name: "HTTP",
								value: "http"
							}]
						},
						{
							displayName: "Host",
							name: "host",
							type: "string",
							default: "127.0.0.1",
							description: "Proxy Host (without protocol or port)"
						},
						{
							displayName: "Port",
							name: "port",
							type: "number",
							default: 9e3,
							description: "Proxy Port"
						}
					]
				}]
			},
			{
				displayName: "Timeout",
				name: "timeout",
				type: "number",
				typeOptions: { minValue: 1 },
				default: 5e3,
				description: "Time in ms to wait for the server to send response headers (and start the response body) before aborting the request"
			},
			{
				displayName: "Socket",
				name: "socket",
				description: "Socket options",
				type: "collection",
				typeOptions: { multipleValues: false },
				default: {
					keepAlive: true,
					maxSockets: 50,
					maxFreeSockets: 5
				},
				options: [
					{
						displayName: "Keep Alive",
						name: "keepAlive",
						type: "boolean",
						default: true,
						noDataExpression: true,
						description: "Whether to keep the sockets available."
					},
					{
						displayName: "Max Sockets",
						name: "maxSockets",
						type: "number",
						typeOptions: { minValue: 1 },
						default: 50,
						description: "Maximum number of sockets per host to keep open at any given time."
					},
					{
						displayName: "Max Free Sockets",
						name: "maxFreeSockets",
						type: "number",
						typeOptions: { minValue: 1 },
						default: 5,
						description: "Maximum number of sockets per host to leave open in a free state."
					}
				]
			}
		]
	},
	circuitBreakerOptions
];
const syslogModalDescription = [
	{
		displayName: "Host",
		name: "host",
		type: "string",
		default: "127.0.0.1",
		placeholder: "127.0.0.1",
		description: "The IP or host name to make the request to",
		noDataExpression: true
	},
	{
		displayName: "Port",
		name: "port",
		type: "number",
		default: "514",
		placeholder: "514",
		description: "The port number to make the request to",
		noDataExpression: true
	},
	{
		displayName: "Protocol",
		name: "protocol",
		type: "options",
		options: [
			{
				name: "TCP",
				value: "tcp"
			},
			{
				name: "UDP",
				value: "udp"
			},
			{
				name: "TLS",
				value: "tls"
			}
		],
		default: "udp",
		description: "The protocol to use for the connection"
	},
	{
		displayName: "TLS CA",
		name: "tlsCa",
		type: "string",
		typeOptions: { rows: 4 },
		displayOptions: { show: { protocol: ["tls"] } },
		required: true,
		default: "",
		description: "The CA certificate to use for TLS connections"
	},
	{
		displayName: "Facility",
		name: "facility",
		type: "options",
		options: [
			{
				name: "Kernel",
				value: 0
			},
			{
				name: "User",
				value: 1
			},
			{
				name: "System",
				value: 3
			},
			{
				name: "Audit",
				value: 13
			},
			{
				name: "Alert",
				value: 14
			},
			{
				name: "Local0",
				value: 16
			},
			{
				name: "Local1",
				value: 17
			},
			{
				name: "Local2",
				value: 18
			},
			{
				name: "Local3",
				value: 19
			},
			{
				name: "Local4",
				value: 20
			},
			{
				name: "Local5",
				value: 21
			},
			{
				name: "Local6",
				value: 22
			},
			{
				name: "Local7",
				value: 23
			}
		],
		default: "16",
		description: "Syslog facility parameter"
	},
	{
		displayName: "App Name",
		name: "app_name",
		type: "string",
		default: "n8n",
		placeholder: "n8n",
		noDataExpression: true,
		description: "Syslog app name parameter"
	},
	circuitBreakerOptions
];
const sentryModalDescription = [{
	displayName: "DSN",
	name: "dsn",
	type: "string",
	default: "https://",
	noDataExpression: true,
	description: "Your Sentry DSN Client Key"
}, circuitBreakerOptions];
var import_get = /* @__PURE__ */ __toESM(require_get(), 1);
var _hoisted_1$22 = { class: "mt-m text-right" };
var _hoisted_2$9 = { class: "" };
var EventDestinationSettingsModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	name: "EventDestinationSettingsModal",
	__name: "EventDestinationSettingsModal",
	props: {
		modalName: {},
		destination: { default: () => deepCopy(defaultMessageEventBusDestinationOptions) },
		isNew: {
			type: Boolean,
			default: false
		},
		eventBus: {}
	},
	setup(__props) {
		const { modalName, destination, isNew, eventBus } = __props;
		const i18n$2 = useI18n();
		const { confirm } = useMessage();
		const telemetry$1 = useTelemetry();
		const logStreamingStore = useLogStreamingStore();
		const ndvStore = useNDVStore();
		const workflowsStore = useWorkflowsStore();
		const workflowState = injectWorkflowState();
		const uiStore = useUIStore();
		const unchanged = ref(!isNew);
		const activeTab = ref("settings");
		const hasOnceBeenSaved = ref(!isNew);
		const isSaving = ref(false);
		const isDeleting = ref(false);
		const loading$2 = ref(false);
		const typeSelectValue = ref("");
		const typeSelectPlaceholder = ref("Destination Type");
		const nodeParameters = ref(deepCopy(defaultMessageEventBusDestinationOptions));
		const webhookDescription = ref(webhookModalDescription);
		const sentryDescription = ref(sentryModalDescription);
		const syslogDescription = ref(syslogModalDescription);
		const modalBus = ref(createEventBus());
		const headerLabel = ref(destination.label);
		const testMessageSent = ref(false);
		const testMessageResult = ref(false);
		const typeSelectOptions = computed(() => {
			const options$1 = [];
			for (const t of messageEventBusDestinationTypeNames) {
				if (t === MessageEventBusDestinationTypeNames.abstract) continue;
				options$1.push({
					value: t,
					label: `settings.log-streaming.${t}`
				});
			}
			return options$1;
		});
		const isTypeAbstract = computed(() => nodeParameters.value.__type === MessageEventBusDestinationTypeNames.abstract);
		const isTypeWebhook = computed(() => nodeParameters.value.__type === MessageEventBusDestinationTypeNames.webhook);
		const isTypeSyslog = computed(() => nodeParameters.value.__type === MessageEventBusDestinationTypeNames.syslog);
		const isTypeSentry = computed(() => nodeParameters.value.__type === MessageEventBusDestinationTypeNames.sentry);
		const node = computed(() => destinationToFakeINodeUi(nodeParameters.value));
		const typeLabelName = computed(() => `settings.log-streaming.${nodeParameters.value.__type}`);
		const sidebarItems = computed(() => {
			const items = [{
				id: "settings",
				label: i18n$2.baseText("settings.log-streaming.tab.settings"),
				position: "top"
			}];
			if (!isTypeAbstract.value) items.push({
				id: "events",
				label: i18n$2.baseText("settings.log-streaming.tab.events"),
				position: "top"
			});
			return items;
		});
		const canManageLogStreaming = computed(() => hasPermission(["rbac"], { rbac: { scope: "logStreaming:manage" } }));
		const isFormValid = computed(() => {
			if (isTypeAbstract.value) return false;
			let parameterDescription;
			if (isTypeWebhook.value) parameterDescription = webhookDescription.value;
			else if (isTypeSentry.value) parameterDescription = sentryDescription.value;
			else if (isTypeSyslog.value) parameterDescription = syslogDescription.value;
			else return false;
			return getNodeParametersIssues(parameterDescription, node.value, null) === null;
		});
		function onUpdateNodeProperties(event) {
			const updateInformation = event[1];
			if (updateInformation.name === destination.id) {
				if ("credentials" in updateInformation.properties) {
					unchanged.value = false;
					nodeParameters.value.credentials = updateInformation.properties.credentials;
				}
			}
		}
		onMounted(() => {
			setupNode(Object.assign(deepCopy(defaultMessageEventBusDestinationOptions), destination));
			workflowStateEventBus.on("updateNodeProperties", onUpdateNodeProperties);
		});
		onUnmounted(() => workflowStateEventBus.off("updateNodeProperties", onUpdateNodeProperties));
		function onInput() {
			unchanged.value = false;
			testMessageSent.value = false;
		}
		function onTabSelect(tab$4) {
			activeTab.value = tab$4;
		}
		function onLabelChange(value) {
			onInput();
			headerLabel.value = value;
			nodeParameters.value.label = value;
		}
		function setupNode(options$1) {
			workflowsStore.removeNode(node.value);
			ndvStore.setActiveNodeName(options$1.id ?? "thisshouldnothappen", "other");
			workflowsStore.addNode(destinationToFakeINodeUi(options$1));
			nodeParameters.value = options$1;
			logStreamingStore.items[destination.id].destination = options$1;
		}
		function onTypeSelectInput(destinationType) {
			typeSelectValue.value = destinationType;
		}
		async function onContinueAddClicked() {
			let newDestination;
			switch (typeSelectValue.value) {
				case MessageEventBusDestinationTypeNames.syslog:
					newDestination = Object.assign(deepCopy(defaultMessageEventBusDestinationSyslogOptions), { id: destination.id });
					break;
				case MessageEventBusDestinationTypeNames.sentry:
					newDestination = Object.assign(deepCopy(defaultMessageEventBusDestinationSentryOptions), { id: destination.id });
					break;
				case MessageEventBusDestinationTypeNames.webhook:
					newDestination = Object.assign(deepCopy(defaultMessageEventBusDestinationWebhookOptions), { id: destination.id });
					break;
			}
			if (newDestination) {
				headerLabel.value = newDestination?.label ?? headerLabel.value;
				setupNode(newDestination);
			}
		}
		function valueChanged(parameterData) {
			unchanged.value = false;
			testMessageSent.value = false;
			const newValue = parameterData.value;
			const parameterPath = parameterData.name?.startsWith("parameters.") ? parameterData.name.split(".").slice(1).join(".") : parameterData.name || "";
			const nodeParametersCopy = deepCopy(nodeParameters.value);
			if (parameterData.value === void 0 && parameterPath.match(/(.*)\[(\d+)\]$/)) {
				const path = parameterPath.match(/(.*)\[(\d+)\]$/)?.[1];
				const index = parseInt(parameterPath.match(/(.*)\[(\d+)\]$/)?.[2] ?? "0", 10);
				const data = (0, import_get.default)(nodeParametersCopy, path);
				if (Array.isArray(data)) {
					data.splice(index, 1);
					nodeParametersCopy[path] = data;
				}
			} else if (newValue === void 0) (0, import_unset.default)(nodeParametersCopy, parameterPath);
			else (0, import_set.default)(nodeParametersCopy, parameterPath, newValue);
			nodeParameters.value = deepCopy(nodeParametersCopy);
			workflowState.updateNodeProperties({
				name: node.value.name,
				properties: {
					parameters: nodeParameters.value,
					position: [0, 0]
				}
			});
			if (hasOnceBeenSaved.value) logStreamingStore.updateDestination(nodeParameters.value);
		}
		async function sendTestEvent() {
			testMessageResult.value = await logStreamingStore.sendTestMessage(nodeParameters.value);
			testMessageSent.value = true;
		}
		async function removeThis() {
			if (await confirm(i18n$2.baseText("settings.log-streaming.destinationDelete.message", { interpolate: { destinationName: destination.label } }), i18n$2.baseText("settings.log-streaming.destinationDelete.headline"), {
				type: "warning",
				confirmButtonText: i18n$2.baseText("settings.log-streaming.destinationDelete.confirmButtonText"),
				cancelButtonText: i18n$2.baseText("settings.log-streaming.destinationDelete.cancelButtonText")
			}) !== "confirm") return;
			else {
				callEventBus("remove", destination.id);
				uiStore.closeModal(LOG_STREAM_MODAL_KEY);
				uiStore.markStateClean();
			}
		}
		function onModalClose() {
			if (!hasOnceBeenSaved.value) {
				workflowsStore.removeNode(node.value);
				if (nodeParameters.value.id && typeof nodeParameters.value.id !== "object") logStreamingStore.removeDestination(nodeParameters.value.id.toString());
			}
			ndvStore.unsetActiveNodeName();
			callEventBus("closing", destination.id);
			uiStore.markStateClean();
		}
		async function saveDestination() {
			if (unchanged.value || !destination.id || !isFormValid.value) return;
			if (await logStreamingStore.saveDestination(nodeParameters.value)) {
				hasOnceBeenSaved.value = true;
				testMessageSent.value = false;
				unchanged.value = true;
				callEventBus("destinationWasSaved", destination.id);
				uiStore.markStateClean();
				const destinationType = (nodeParameters.value.__type && typeof nodeParameters.value.__type !== "object" ? `${nodeParameters.value.__type}` : "unknown").replace("$MessageEventBusDestination", "").toLowerCase();
				const isComplete = () => {
					if (isTypeWebhook.value) return destination.url !== "";
					else if (isTypeSentry.value) return destination.dsn !== "";
					else if (isTypeSyslog.value) {
						const syslogDestination = destination;
						return syslogDestination.host !== "" && syslogDestination.port !== void 0 && syslogDestination.protocol !== "" && syslogDestination.facility !== void 0 && syslogDestination.app_name !== "";
					}
					return false;
				};
				telemetry$1.track("User updated log streaming destination", {
					instance_id: useRootStore().instanceId,
					destination_type: destinationType,
					is_complete: isComplete(),
					is_active: destination.enabled
				});
			}
		}
		function callEventBus(event, data) {
			if (eventBus) eventBus.emit(event, data);
		}
		const defNameRef = useTemplateRef("defNameRef");
		const { width } = useElementSize(defNameRef);
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(modalName),
				"event-bus": modalBus.value,
				"before-close": onModalClose,
				scrollable: true,
				center: true,
				loading: loading$2.value,
				"min-width": isTypeAbstract.value ? "460px" : "70%",
				"max-width": isTypeAbstract.value ? "460px" : "70%",
				"min-height": isTypeAbstract.value ? "160px" : "650px",
				"max-height": isTypeAbstract.value ? "300px" : "650px",
				"data-test-id": "destination-modal"
			}, {
				header: withCtx(() => [isTypeAbstract.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.headerCreate)
				}, [..._cache[0] || (_cache[0] = [createBaseVNode("span", null, "Add new destination", -1)])], 2)) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.header) }, [createBaseVNode("div", {
					ref_key: "defNameRef",
					ref: defNameRef,
					class: normalizeClass(_ctx.$style.destinationInfo)
				}, [createVNode(unref(N8nInlineTextEdit_default), {
					"max-width": unref(width) - 10,
					"data-test-id": "subtitle-showing-type",
					"model-value": headerLabel.value,
					readonly: isTypeAbstract.value,
					"onUpdate:modelValue": onLabelChange
				}, null, 8, [
					"max-width",
					"model-value",
					"readonly"
				]), createVNode(unref(N8nText_default), {
					size: "small",
					tag: "p",
					color: "text-light"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(!isTypeAbstract.value ? unref(i18n$2).baseText(typeLabelName.value) : "Select type"), 1)]),
					_: 1
				})], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.destinationActions) }, [nodeParameters.value && hasOnceBeenSaved.value && unchanged.value ? (openBlock(), createBlock(unref(N8nButton_default), {
					key: 0,
					variant: "subtle",
					icon: testMessageSent.value ? testMessageResult.value ? "check" : "triangle-alert" : void 0,
					title: testMessageSent.value && testMessageResult.value ? "Event sent and returned OK" : "Event returned with error",
					label: "Send Test-Event",
					disabled: !hasOnceBeenSaved.value || !unchanged.value,
					"data-test-id": "destination-test-button",
					onClick: sendTestEvent
				}, null, 8, [
					"icon",
					"title",
					"disabled"
				])) : createCommentVNode("", true), canManageLogStreaming.value ? (openBlock(), createElementBlock(Fragment, { key: 1 }, [nodeParameters.value && hasOnceBeenSaved.value ? (openBlock(), createBlock(unref(N8nIconButton_default), {
					key: 0,
					variant: "subtle",
					title: unref(i18n$2).baseText("settings.log-streaming.delete"),
					icon: "trash-2",
					disabled: isSaving.value,
					loading: isDeleting.value,
					"data-test-id": "destination-delete-button",
					onClick: removeThis
				}, null, 8, [
					"title",
					"disabled",
					"loading"
				])) : createCommentVNode("", true), createVNode(SaveButton_default, {
					saved: unchanged.value && hasOnceBeenSaved.value,
					disabled: unchanged.value || !isFormValid.value,
					"saving-label": unref(i18n$2).baseText("settings.log-streaming.saving"),
					"data-test-id": "destination-save-button",
					onClick: saveDestination
				}, null, 8, [
					"saved",
					"disabled",
					"saving-label"
				])], 64)) : createCommentVNode("", true)], 2)], 2), _cache[1] || (_cache[1] = createBaseVNode("hr", null, null, -1))], 64))]),
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.container) }, [isTypeAbstract.value ? (openBlock(), createBlock(unref(N8nInputLabel_default), {
					key: 0,
					class: normalizeClass(_ctx.$style.typeSelector),
					label: unref(i18n$2).baseText("settings.log-streaming.selecttype"),
					"tooltip-text": unref(i18n$2).baseText("settings.log-streaming.selecttypehint"),
					bold: false,
					size: "medium",
					underline: false
				}, {
					default: withCtx(() => [createVNode(unref(N8nSelect_default), {
						ref: "typeSelectRef",
						"model-value": typeSelectValue.value,
						placeholder: typeSelectPlaceholder.value,
						"data-test-id": "select-destination-type",
						name: "name",
						"onUpdate:modelValue": onTypeSelectInput
					}, {
						default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(typeSelectOptions.value || [], (option) => {
							return openBlock(), createBlock(unref(N8nOption_default), {
								key: option.value,
								value: option.value,
								label: unref(i18n$2).baseText(option.label)
							}, null, 8, ["value", "label"]);
						}), 128))]),
						_: 1
					}, 8, ["model-value", "placeholder"]), createBaseVNode("div", _hoisted_1$22, [createVNode(unref(N8nButton_default), {
						size: "large",
						"data-test-id": "select-destination-button",
						disabled: !typeSelectValue.value,
						onClick: onContinueAddClicked
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText(`settings.log-streaming.continue`)), 1)]),
						_: 1
					}, 8, ["disabled"])])]),
					_: 1
				}, 8, [
					"class",
					"label",
					"tooltip-text"
				])) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.sidebar) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(sidebarItems.value, (item$2) => {
						return openBlock(), createBlock(unref(N8nMenuItem_default), {
							key: item$2.id,
							item: item$2,
							active: activeTab.value === item$2.id,
							onClick: () => onTabSelect(item$2.id)
						}, null, 8, [
							"item",
							"active",
							"onClick"
						]);
					}), 128))], 2),
					activeTab.value === "settings" ? (openBlock(), createElementBlock("div", {
						key: 0,
						ref: "content",
						class: normalizeClass(_ctx.$style.mainContent)
					}, [isTypeWebhook.value ? (openBlock(), createBlock(ParameterInputList_default, {
						key: 0,
						parameters: webhookDescription.value,
						"hide-delete": true,
						"node-values": nodeParameters.value,
						"is-read-only": !canManageLogStreaming.value,
						path: "",
						onValueChanged: valueChanged
					}, null, 8, [
						"parameters",
						"node-values",
						"is-read-only"
					])) : isTypeSyslog.value ? (openBlock(), createBlock(ParameterInputList_default, {
						key: 1,
						parameters: syslogDescription.value,
						"hide-delete": true,
						"node-values": nodeParameters.value,
						"is-read-only": !canManageLogStreaming.value,
						path: "",
						onValueChanged: valueChanged
					}, null, 8, [
						"parameters",
						"node-values",
						"is-read-only"
					])) : isTypeSentry.value ? (openBlock(), createBlock(ParameterInputList_default, {
						key: 2,
						parameters: sentryDescription.value,
						"hide-delete": true,
						"node-values": nodeParameters.value,
						"is-read-only": !canManageLogStreaming.value,
						path: "",
						onValueChanged: valueChanged
					}, null, 8, [
						"parameters",
						"node-values",
						"is-read-only"
					])) : createCommentVNode("", true)], 2)) : createCommentVNode("", true),
					activeTab.value === "events" ? (openBlock(), createElementBlock("div", {
						key: 1,
						class: normalizeClass(_ctx.$style.mainContent)
					}, [createBaseVNode("div", _hoisted_2$9, [createVNode(unref(N8nInputLabel_default), {
						class: "mb-m mt-m",
						label: unref(i18n$2).baseText("settings.log-streaming.tab.events.title"),
						bold: true,
						size: "medium",
						underline: false
					}, null, 8, ["label"]), createVNode(EventSelection_default, {
						"destination-id": unref(destination).id,
						readonly: !canManageLogStreaming.value,
						onInput,
						onChange: valueChanged
					}, null, 8, ["destination-id", "readonly"])])], 2)) : createCommentVNode("", true)
				], 64))], 2)]),
				_: 1
			}, 8, [
				"name",
				"event-bus",
				"loading",
				"min-width",
				"max-width",
				"min-height",
				"max-height"
			]);
		};
	}
});
var EventDestinationSettingsModal_vue_vue_type_style_index_0_lang_module_default = {
	labelMargins: "_labelMargins_bgsjl_125",
	typeSelector: "_typeSelector_bgsjl_130",
	sidebarSwitches: "_sidebarSwitches_bgsjl_136",
	tabbar: "_tabbar_bgsjl_144",
	mainContent: "_mainContent_bgsjl_148",
	sidebar: "_sidebar_bgsjl_136",
	cardTitle: "_cardTitle_bgsjl_167",
	header: "_header_bgsjl_172",
	headerCreate: "_headerCreate_bgsjl_177",
	container: "_container_bgsjl_182",
	destinationInfo: "_destinationInfo_bgsjl_187",
	destinationActions: "_destinationActions_bgsjl_196"
};
var EventDestinationSettingsModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(EventDestinationSettingsModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": EventDestinationSettingsModal_vue_vue_type_style_index_0_lang_module_default }]]);
const useSetupWorkflowCredentialsModalState = () => {
	const workflowsStore = useWorkflowsStore();
	const workflowState = injectWorkflowState();
	const credentialsStore = useCredentialsStore();
	const nodeHelpers = useNodeHelpers();
	const { appCredentials, credentialOverrides, credentialUsages, credentialsByKey, numFilledCredentials, selectedCredentialIdByKey, setSelectedCredentialId, unsetSelectedCredential } = useCredentialSetupState(computed(() => {
		return workflowsStore.allNodes;
	}));
	const setInitialCredentialSelection = () => {
		selectedCredentialIdByKey.value = {};
		for (const credUsage of credentialUsages.value) {
			const credential = credentialsStore.getCredentialsByType(credUsage.credentialType).find((cred) => cred.name === credUsage.credentialName);
			if (!credential) continue;
			selectedCredentialIdByKey.value[credUsage.key] = credential.id;
		}
	};
	const setCredential = (credentialKey, credentialId) => {
		setSelectedCredentialId(credentialKey, credentialId);
		const usages = credentialsByKey.value.get(credentialKey);
		if (!usages) return;
		const credential = {
			id: credentialId,
			name: credentialsStore.getCredentialById(credentialId)?.name
		};
		usages.usedBy.forEach((node) => {
			workflowState.updateNodeProperties({
				name: node.name,
				properties: { credentials: {
					...node.credentials,
					[usages.credentialType]: credential
				} }
			});
			nodeHelpers.updateNodeCredentialIssuesByName(node.name);
		});
		setInitialCredentialSelection();
	};
	const unsetCredential = (credentialKey) => {
		unsetSelectedCredential(credentialKey);
		const usages = credentialsByKey.value.get(credentialKey);
		if (!usages) return;
		usages.usedBy.forEach((node) => {
			const credentials = { ...node.credentials };
			delete credentials[usages.credentialType];
			workflowState.updateNodeProperties({
				name: node.name,
				properties: { credentials }
			});
			nodeHelpers.updateNodeCredentialIssuesByName(node.name);
		});
		setInitialCredentialSelection();
	};
	return {
		appCredentials,
		credentialOverrides,
		credentialUsages,
		credentialsByKey,
		numFilledCredentials,
		selectedCredentialIdByKey,
		setInitialCredentialSelection,
		setCredential,
		unsetCredential
	};
};
var SetupWorkflowCredentialsModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "SetupWorkflowCredentialsModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const i18n$2 = useI18n();
		const telemetry$1 = useTelemetry();
		const workflowStore = useWorkflowsStore();
		const uiStore = useUIStore();
		const props = __props;
		const modalTitle = computed(() => {
			if (props.data?.source === "builder") return i18n$2.baseText("setupCredentialsModal.title.builder");
			return i18n$2.baseText("setupCredentialsModal.title");
		});
		const { appCredentials, credentialUsages, numFilledCredentials, selectedCredentialIdByKey, setInitialCredentialSelection, setCredential, unsetCredential } = useSetupWorkflowCredentialsModalState();
		onMounted(() => {
			setInitialCredentialSelection();
			telemetry$1.track("User opened cred setup", { source: props.data?.source ?? "canvas" });
		});
		onUnmounted(() => {
			telemetry$1.track("User closed cred setup", {
				completed: numFilledCredentials.value === credentialUsages.value.length,
				creds_filled: numFilledCredentials.value,
				creds_needed: credentialUsages.value.length,
				workflow_id: workflowStore.workflowId,
				source: props.data?.source ?? "canvas"
			});
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "700px",
				"max-height": "90%",
				name: props.modalName
			}, {
				header: withCtx(() => [createVNode(unref(N8nHeading_default), {
					tag: "h2",
					size: "xlarge"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(modalTitle.value), 1)]),
					_: 1
				})]),
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.grid) }, [createBaseVNode("div", {
					class: normalizeClass(_ctx.$style.notice),
					"data-test-id": "info-callout"
				}, [createVNode(AppsRequiringCredsNotice_default, {
					"app-credentials": unref(appCredentials),
					source: props.data?.source
				}, null, 8, ["app-credentials", "source"])], 2), createBaseVNode("div", null, [createBaseVNode("ol", { class: normalizeClass(_ctx.$style.appCredentialsContainer) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(credentialUsages), (credentials, index) => {
					return openBlock(), createBlock(SetupTemplateFormStep_default, {
						key: credentials.key,
						class: normalizeClass(_ctx.$style.appCredential),
						order: index + 1,
						credentials,
						"selected-credential-id": unref(selectedCredentialIdByKey)[credentials.key],
						source: props.data?.source,
						onCredentialSelected: _cache[0] || (_cache[0] = ($event) => unref(setCredential)($event.credentialUsageKey, $event.credentialId)),
						onCredentialDeselected: _cache[1] || (_cache[1] = ($event) => unref(unsetCredential)($event.credentialUsageKey))
					}, null, 8, [
						"class",
						"order",
						"credentials",
						"selected-credential-id",
						"source"
					]);
				}), 128))], 2)])], 2)]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					size: "large",
					label: unref(i18n$2).baseText("templateSetup.continue.button"),
					disabled: unref(numFilledCredentials) === 0,
					"data-test-id": "continue-button",
					onClick: _cache[2] || (_cache[2] = ($event) => unref(uiStore).closeModal(props.modalName))
				}, null, 8, ["label", "disabled"])], 2)]),
				_: 1
			}, 8, ["name"]);
		};
	}
});
var SetupWorkflowCredentialsModal_vue_vue_type_style_index_0_lang_module_default = {
	grid: "_grid_ng0wr_125",
	notice: "_notice_ng0wr_133",
	appCredentialsContainer: "_appCredentialsContainer_ng0wr_137",
	appCredential: "_appCredential_ng0wr_137",
	footer: "_footer_ng0wr_149"
};
var SetupWorkflowCredentialsModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(SetupWorkflowCredentialsModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": SetupWorkflowCredentialsModal_vue_vue_type_style_index_0_lang_module_default }]]);
var require__arrayAggregator = /* @__PURE__ */ __commonJSMin(((exports, module) => {
	function arrayAggregator$1(array, setter, iteratee, accumulator) {
		var index = -1, length = array == null ? 0 : array.length;
		while (++index < length) {
			var value = array[index];
			setter(accumulator, value, iteratee(value), array);
		}
		return accumulator;
	}
	module.exports = arrayAggregator$1;
}));
var require__baseAggregator = /* @__PURE__ */ __commonJSMin(((exports, module) => {
	var baseEach = require__baseEach();
	function baseAggregator$1(collection, setter, iteratee, accumulator) {
		baseEach(collection, function(value, key, collection$1) {
			setter(accumulator, value, iteratee(value), collection$1);
		});
		return accumulator;
	}
	module.exports = baseAggregator$1;
}));
var require__createAggregator = /* @__PURE__ */ __commonJSMin(((exports, module) => {
	var arrayAggregator = require__arrayAggregator(), baseAggregator = require__baseAggregator(), baseIteratee = require__baseIteratee(), isArray = require_isArray();
	function createAggregator$1(setter, initializer) {
		return function(collection, iteratee) {
			var func = isArray(collection) ? arrayAggregator : baseAggregator, accumulator = initializer ? initializer() : {};
			return func(collection, setter, baseIteratee(iteratee, 2), accumulator);
		};
	}
	module.exports = createAggregator$1;
}));
var import_groupBy = /* @__PURE__ */ __toESM((/* @__PURE__ */ __commonJSMin(((exports, module) => {
	var baseAssignValue = require__baseAssignValue(), createAggregator = require__createAggregator();
	var hasOwnProperty = Object.prototype.hasOwnProperty;
	module.exports = createAggregator(function(result, value, key) {
		if (hasOwnProperty.call(result, key)) result[key].push(value);
		else baseAssignValue(result, key, [value]);
	});
})))(), 1);
var i18n = useI18n();
const getStatusText = (status) => i18n.baseText(`settings.sourceControl.status.${status}`);
const getStatusTheme = (status) => {
	return {
		[SOURCE_CONTROL_FILE_STATUS.created]: "success",
		[SOURCE_CONTROL_FILE_STATUS.deleted]: "danger",
		[SOURCE_CONTROL_FILE_STATUS.modified]: "warning"
	}[status];
};
var pullStatusPriority = {
	[SOURCE_CONTROL_FILE_STATUS.modified]: 2,
	[SOURCE_CONTROL_FILE_STATUS.created]: 1,
	[SOURCE_CONTROL_FILE_STATUS.deleted]: 3
};
const getPullPriorityByStatus = (status) => pullStatusPriority[status] ?? 0;
var pushStatusPriority = {
	[SOURCE_CONTROL_FILE_STATUS.modified]: 1,
	[SOURCE_CONTROL_FILE_STATUS.renamed]: 2,
	[SOURCE_CONTROL_FILE_STATUS.created]: 3,
	[SOURCE_CONTROL_FILE_STATUS.deleted]: 4
};
const getPushPriorityByStatus = (status) => pushStatusPriority[status] ?? 0;
var createVariablesToast = (router) => {
	const route = {
		name: VIEWS.HOME_VARIABLES,
		query: { incomplete: "true" }
	};
	const { href } = router.resolve(route);
	return {
		title: i18n.baseText("settings.sourceControl.pull.upToDate.variables.title"),
		message: h("a", {
			href,
			onClick: (e) => {
				e.preventDefault();
				telemetry.track("User clicked review variables");
				router.push(route);
			}
		}, i18n.baseText("settings.sourceControl.pull.upToDate.variables.description")),
		type: "info",
		duration: 0
	};
};
var createCredentialsToast = (router) => {
	const route = {
		name: VIEWS.CREDENTIALS,
		query: { setupNeeded: "true" }
	};
	const { href } = router.resolve(route);
	return {
		title: i18n.baseText("settings.sourceControl.pull.upToDate.credentials.title"),
		message: h("a", {
			href,
			onClick: (e) => {
				e.preventDefault();
				telemetry.track("User clicked review credentials");
				router.push(route);
			}
		}, i18n.baseText("settings.sourceControl.pull.upToDate.credentials.description")),
		type: "info",
		duration: 0
	};
};
var pullMessage = ({ credential, tags, variables, datatable, workflow, folders, project }) => {
	const messages = [];
	if (workflow?.length) messages.push(i18n.baseText("generic.workflow", {
		adjustToNumber: workflow.length,
		interpolate: { count: workflow.length }
	}));
	if (credential?.length) messages.push(i18n.baseText("generic.credential", {
		adjustToNumber: credential.length,
		interpolate: { count: credential.length }
	}));
	if (variables?.length) messages.push(i18n.baseText("generic.variable_plural"));
	if (datatable?.length) messages.push(i18n.baseText("generic.datatable", {
		adjustToNumber: datatable.length,
		interpolate: { count: datatable.length }
	}));
	if (tags?.length) messages.push(i18n.baseText("generic.tag_plural"));
	if (folders?.length) messages.push(i18n.baseText("generic.folders_plural"));
	if (project?.length) messages.push(i18n.baseText("generic.projects"));
	const totalCount = (workflow?.length ?? 0) + (credential?.length ?? 0) + (variables?.length ?? 0) + (datatable?.length ?? 0) + (tags?.length ?? 0) + (folders?.length ?? 0) + (project?.length ?? 0);
	const verbCount = !!(variables?.length || tags?.length || folders?.length || project?.length) ? Math.max(totalCount, 2) : totalCount;
	return [new Intl.ListFormat(i18n.locale, {
		style: "long",
		type: "conjunction"
	}).format(messages), i18n.baseText("settings.sourceControl.pull.success.description", { adjustToNumber: verbCount })].join(" ");
};
const notifyUserAboutPullWorkFolderOutcome = async (files, toast, router) => {
	if (!files?.length) {
		toast.showMessage({
			title: i18n.baseText("settings.sourceControl.pull.upToDate.title"),
			message: i18n.baseText("settings.sourceControl.pull.upToDate.description"),
			type: "success"
		});
		return;
	}
	const { credential, tags, variables, datatable, workflow, folders, project } = (0, import_groupBy.default)(files, "type");
	const toastMessages = [
		...variables?.length ? [createVariablesToast(router)] : [],
		...credential?.length ? [createCredentialsToast(router)] : [],
		{
			title: i18n.baseText("settings.sourceControl.pull.success.title"),
			message: pullMessage({
				credential,
				tags,
				variables,
				datatable,
				workflow,
				folders,
				project
			}),
			type: "success"
		}
	];
	for (const message$2 of toastMessages) {
		toast.showToast(message$2);
		await nextTick();
	}
};
var import_dateformat$2 = /* @__PURE__ */ __toESM(require_dateformat(), 1);
var import_orderBy$1 = /* @__PURE__ */ __toESM(require_orderBy(), 1);
var _hoisted_1$21 = { style: {
	"display": "flex",
	"flex-direction": "column",
	"height": "100%"
} };
var _hoisted_2$8 = { style: {
	"display": "flex",
	"flex": "1",
	"min-height": "0"
} };
var _hoisted_3$5 = ["data-test-id", "onClick"];
var _hoisted_4$5 = { style: { "flex": "1" } };
var _hoisted_5$2 = { style: {
	"flex": "1",
	"overflow": "hidden"
} };
var _hoisted_6$2 = { key: 2 };
var _hoisted_7$1 = {
	key: 1,
	class: "mb-xs"
};
var SourceControlPullModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "SourceControlPullModal",
	props: { data: {} },
	setup(__props) {
		const props = __props;
		const telemetry$1 = useTelemetry();
		const loadingService = useLoadingService();
		const toast = useToast();
		const i18n$2 = useI18n();
		const sourceControlStore = useSourceControlStore();
		const projectsStore = useProjectsStore();
		const route = useRoute();
		const router = useRouter();
		const settingsStore = useSettingsStore();
		const uiStore = useUIStore();
		const isWorkflowDiffsEnabled = computed(() => settingsStore.settings.enterprise.workflowDiffs);
		const status = ref(props.data.status || []);
		const isLoading = ref(false);
		const autoPublish = ref("none");
		const autoPublishOptions = computed(() => {
			const hasPublishedWorkflows = status.value.filter((f) => f.type === SOURCE_CONTROL_FILE_TYPE.workflow).some((w) => w.isLocalPublished && w.status !== "created");
			return [
				{
					label: i18n$2.baseText("settings.sourceControl.modals.pull.autoPublish.options.off"),
					description: i18n$2.baseText("settings.sourceControl.modals.pull.autoPublish.options.off.description"),
					value: "none"
				},
				{
					label: i18n$2.baseText("settings.sourceControl.modals.pull.autoPublish.options.published"),
					description: i18n$2.baseText("settings.sourceControl.modals.pull.autoPublish.options.published.description"),
					value: "published",
					disabled: !hasPublishedWorkflows
				},
				{
					label: i18n$2.baseText("settings.sourceControl.modals.pull.autoPublish.options.on"),
					description: i18n$2.baseText("settings.sourceControl.modals.pull.autoPublish.options.on.description"),
					value: "all"
				}
			];
		});
		const hasModifiedWorkflows = computed(() => {
			return status.value.some((f) => f.type === SOURCE_CONTROL_FILE_TYPE.workflow && f.status === "modified");
		});
		const hasModifiedCredentials = computed(() => {
			return status.value.some((f) => f.type === SOURCE_CONTROL_FILE_TYPE.credential && f.status === "modified");
		});
		async function loadSourceControlStatus() {
			if (isLoading.value) return;
			isLoading.value = true;
			loadingService.startLoading();
			loadingService.setLoadingText(i18n$2.baseText("settings.sourceControl.loading.checkingForChanges"));
			try {
				status.value = await sourceControlStore.getAggregatedStatus({
					direction: "pull",
					preferLocalVersion: false,
					verbose: false
				}) || [];
				if (status.value.length === 0) {
					toast.showMessage({
						title: i18n$2.baseText("settings.sourceControl.pull.upToDate.description"),
						type: "success"
					});
					close();
				}
			} catch (error$2) {
				toast.showError(error$2, "Error");
				close();
			} finally {
				isLoading.value = false;
				loadingService.stopLoading();
				loadingService.setLoadingText(i18n$2.baseText("genericHelpers.loading"));
			}
		}
		onBeforeMount(() => {
			projectsStore.getAvailableProjects();
		});
		const activeTab = ref(SOURCE_CONTROL_FILE_TYPE.workflow);
		const groupedFilesByType = computed(() => {
			const grouped = {};
			status.value.forEach((file) => {
				if (!grouped[file.type]) grouped[file.type] = [];
				grouped[file.type].push(file);
			});
			return grouped;
		});
		const filteredWorkflows = computed(() => {
			return groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.workflow] || [];
		});
		const sortedWorkflows = computed(() => {
			return (0, import_orderBy$1.default)(filteredWorkflows.value, [({ status: status$1 }) => getPullPriorityByStatus(status$1), "updatedAt"], ["asc", "desc"]).map((file) => ({
				...file,
				willBeAutoPublished: file.type === SOURCE_CONTROL_FILE_TYPE.workflow && file.status !== "deleted" && shouldAutoPublishWorkflow({
					isNewWorkflow: file.status === "created",
					isLocalPublished: file.isLocalPublished ?? false,
					isRemoteArchived: file.isRemoteArchived ?? false,
					autoPublish: autoPublish.value
				})
			}));
		});
		const filteredCredentials = computed(() => {
			return groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.credential] || [];
		});
		const sortedCredentials = computed(() => (0, import_orderBy$1.default)(filteredCredentials.value, [({ status: status$1 }) => getPullPriorityByStatus(status$1), "updatedAt"], ["asc", "desc"]));
		const filteredDataTables = computed(() => {
			return groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.datatable] || [];
		});
		const sortedDataTables = computed(() => (0, import_orderBy$1.default)(filteredDataTables.value, [({ status: status$1 }) => getPullPriorityByStatus(status$1), "updatedAt"], ["asc", "desc"]));
		const conflictedDataTables = computed(() => {
			return filteredDataTables.value.filter((dt) => {
				return dt.conflict === true && dt.status === "modified";
			});
		});
		const hasDataTableConflicts = computed(() => conflictedDataTables.value.length > 0);
		const dataTableWarningMessage = computed(() => {
			if (!hasDataTableConflicts.value) return "";
			return i18n$2.baseText("settings.sourceControl.modals.pull.dataTablesWarning", { interpolate: { count: conflictedDataTables.value.length } });
		});
		const activeDataSourceFiltered = computed(() => {
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.workflow) return sortedWorkflows.value;
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.credential) return sortedCredentials.value;
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.datatable) return sortedDataTables.value;
			return [];
		});
		const filtersNoResultText = computed(() => {
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.workflow) return i18n$2.baseText("workflows.noResults");
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.credential) return i18n$2.baseText("credentials.noResults");
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.datatable) return i18n$2.baseText("dataTables.noResults");
			return i18n$2.baseText("workflows.noResults");
		});
		const tabs$4 = computed(() => {
			return [
				{
					label: "Workflows",
					value: SOURCE_CONTROL_FILE_TYPE.workflow,
					total: groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.workflow]?.length || 0
				},
				{
					label: "Credentials",
					value: SOURCE_CONTROL_FILE_TYPE.credential,
					total: groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.credential]?.length || 0
				},
				{
					label: "Data Tables",
					value: SOURCE_CONTROL_FILE_TYPE.datatable,
					total: groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.datatable]?.length || 0
				}
			];
		});
		const otherFiles = computed(() => {
			const others = [];
			const variables = groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.variables];
			if (variables) others.push.apply(others, variables);
			const tags = groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.tags];
			if (tags) others.push.apply(others, tags);
			const folders = groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.folders];
			if (folders) others.push.apply(others, folders);
			const projects = groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.project];
			if (projects) others.push.apply(others, projects);
			return others;
		});
		const otherFilesText = computed(() => {
			const parts = [];
			const variables = groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.variables];
			if (variables?.length) parts.push(`Variables (${variables.length})`);
			const tags = groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.tags];
			if (tags?.length) parts.push(`Tags (${tags.length})`);
			const folders = groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.folders];
			if (folders?.length) parts.push(`Folders (${folders.length})`);
			const projects = groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.project];
			if (projects?.length) parts.push(`Projects (${projects.length})`);
			return parts.join(", ");
		});
		function close() {
			router.back();
		}
		async function pullWorkfolder() {
			loadingService.startLoading(i18n$2.baseText("settings.sourceControl.loading.checkingForChanges"));
			const workflowsToAutoPublish = sortedWorkflows.value.filter((w) => w.willBeAutoPublished);
			try {
				const pullStatus = await sourceControlStore.pullWorkfolder(true, autoPublish.value);
				await notifyUserAboutPullWorkFolderOutcome(pullStatus, toast, router);
				sourceControlEventBus.emit("pull");
				if (workflowsToAutoPublish.length > 0) {
					const workflowResults = pullStatus.filter((file) => file.type === SOURCE_CONTROL_FILE_TYPE.workflow && workflowsToAutoPublish.some((w) => w.id === file.id));
					if (workflowResults.length > 0) uiStore.openModalWithData({
						name: SOURCE_CONTROL_PULL_RESULT_MODAL_KEY,
						data: { workflows: workflowResults }
					});
				}
			} catch (error$2) {
				toast.showError(error$2, "Error");
			} finally {
				loadingService.stopLoading();
				close();
			}
		}
		function renderUpdatedAt(file) {
			const currentYear = (/* @__PURE__ */ new Date()).getFullYear().toString();
			return i18n$2.baseText("settings.sourceControl.lastUpdated", { interpolate: {
				date: (0, import_dateformat$2.default)(file.updatedAt, `d mmm${file.updatedAt?.startsWith(currentYear) ? "" : ", yyyy"}`),
				time: (0, import_dateformat$2.default)(file.updatedAt, "HH:MM")
			} });
		}
		function openDiffModal(id) {
			telemetry$1.track("User clicks compare workflows", {
				workflow_id: id,
				context: "source_control_pull"
			});
			router.push({ query: {
				...route.query,
				diff: id,
				direction: "pull"
			} });
		}
		const modalHeight = computed(() => groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.workflow]?.length || groupedFilesByType.value[SOURCE_CONTROL_FILE_TYPE.credential]?.length ? "min(80vh, 850px)" : "auto");
		onMounted(() => {
			if (!props.data.status || props.data.status.length === 0) loadSourceControlStatus();
		});
		return (_ctx, _cache) => {
			const _component_RouterLink = resolveComponent("RouterLink");
			return !isLoading.value ? (openBlock(), createBlock(Modal_default, {
				key: 0,
				width: "812px",
				"event-bus": __props.data.eventBus,
				name: unref(SOURCE_CONTROL_PULL_MODAL_KEY),
				height: modalHeight.value,
				"custom-class": _ctx.$style.sourceControlPull,
				"before-close": close
			}, {
				header: withCtx(() => [createVNode(unref(N8nHeading_default), {
					tag: "h1",
					size: "xlarge"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pull.title")), 1)]),
					_: 1
				}), createBaseVNode("div", { class: normalizeClass([[_ctx.$style.filtersRow], "mt-xs"]) }, [createVNode(unref(N8nText_default), { tag: "div" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pull.description")) + " ", 1), createVNode(unref(N8nLink_default), { to: unref(i18n$2).baseText("settings.sourceControl.docs.using.pushPull.url") }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.push.description.learnMore")), 1)]),
						_: 1
					}, 8, ["to"])]),
					_: 1
				})], 2)]),
				content: withCtx(() => [createBaseVNode("div", _hoisted_1$21, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.autoPublishSection) }, [createVNode(unref(N8nText_default), {
					tag: "div",
					bold: "",
					size: "medium",
					color: "text-dark"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pull.autoPublish.title")), 1)]),
					_: 1
				}), createVNode(unref(N8nSelect_default), {
					modelValue: autoPublish.value,
					"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => autoPublish.value = $event),
					size: "medium",
					class: normalizeClass(_ctx.$style.select),
					"data-test-id": "auto-publish-select"
				}, {
					default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(autoPublishOptions.value, (option) => {
						return openBlock(), createBlock(unref(N8nOption_default), {
							key: option.value,
							value: option.value,
							label: option.label,
							disabled: option.disabled
						}, {
							default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.listOption) }, [createVNode(unref(N8nText_default), { bold: "" }, {
								default: withCtx(() => [createTextVNode(toDisplayString(option.label), 1)]),
								_: 2
							}, 1024), option.description ? (openBlock(), createBlock(unref(N8nText_default), {
								key: 0,
								size: "small",
								color: "text-light"
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(option.description), 1)]),
								_: 2
							}, 1024)) : createCommentVNode("", true)], 2)]),
							_: 2
						}, 1032, [
							"value",
							"label",
							"disabled"
						]);
					}), 128))]),
					_: 1
				}, 8, ["modelValue", "class"])], 2), createBaseVNode("div", _hoisted_2$8, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.tabs) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(tabs$4.value, (tab$4) => {
					return openBlock(), createElementBlock("button", {
						key: tab$4.value,
						type: "button",
						class: normalizeClass([_ctx.$style.tab, { [_ctx.$style.tabActive]: activeTab.value === tab$4.value }]),
						"data-test-id": `source-control-pull-modal-tab-${tab$4.value}`,
						onClick: ($event) => activeTab.value = tab$4.value
					}, [createBaseVNode("div", null, toDisplayString(tab$4.label), 1), createVNode(unref(N8nText_default), {
						tag: "div",
						color: "text-light"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(tab$4.total) + " " + toDisplayString(tab$4.total === 1 ? "item" : "items"), 1)]),
						_: 2
					}, 1024)], 10, _hoisted_3$5);
				}), 128))], 2), createBaseVNode("div", _hoisted_4$5, [createBaseVNode("div", { class: normalizeClass([_ctx.$style.table]) }, [createBaseVNode("div", { class: normalizeClass([_ctx.$style.tableHeader]) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.headerTitle) }, [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [..._cache[1] || (_cache[1] = [createTextVNode("Title", -1)])]),
					_: 1
				})], 2)], 2), createBaseVNode("div", _hoisted_5$2, [!activeDataSourceFiltered.value.length ? (openBlock(), createBlock(unref(N8nInfoTip_default), {
					key: 0,
					class: "p-xs",
					bold: false
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(filtersNoResultText.value), 1)]),
					_: 1
				})) : createCommentVNode("", true), activeDataSourceFiltered.value.length ? (openBlock(), createBlock(unref(script$1), {
					key: 1,
					class: normalizeClass([_ctx.$style.scroller]),
					items: activeDataSourceFiltered.value,
					"min-item-size": 57,
					"item-class": "scrollerItem"
				}, {
					default: withCtx(({ item: file, active: active$1, index }) => [createVNode(unref(script), {
						item: file,
						active: active$1,
						"size-dependencies": [file.name, file.id],
						"data-index": index
					}, {
						default: withCtx(() => [createBaseVNode("div", {
							class: normalizeClass([_ctx.$style.listItem]),
							"data-test-id": "pull-modal-item"
						}, [createBaseVNode("div", { class: normalizeClass([_ctx.$style.itemContent]) }, [createVNode(unref(N8nText_default), {
							tag: "div",
							bold: "",
							color: "text-dark",
							class: normalizeClass([_ctx.$style.listItemName])
						}, {
							default: withCtx(() => [file.type === unref(SOURCE_CONTROL_FILE_TYPE).credential ? (openBlock(), createBlock(_component_RouterLink, {
								key: 0,
								target: "_blank",
								rel: "noopener noreferrer",
								to: {
									name: unref(VIEWS).CREDENTIALS,
									params: { credentialId: file.id }
								}
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(file.name), 1)]),
								_: 2
							}, 1032, ["to"])) : file.type === unref(SOURCE_CONTROL_FILE_TYPE).workflow ? (openBlock(), createBlock(_component_RouterLink, {
								key: 1,
								target: "_blank",
								rel: "noopener noreferrer",
								to: {
									name: unref(VIEWS).WORKFLOW,
									params: { name: file.id }
								}
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(file.name), 1)]),
								_: 2
							}, 1032, ["to"])) : (openBlock(), createElementBlock("span", _hoisted_6$2, toDisplayString(file.name), 1))]),
							_: 2
						}, 1032, ["class"]), createBaseVNode("div", { class: normalizeClass(_ctx.$style.statusLine) }, [
							file.updatedAt ? (openBlock(), createBlock(unref(N8nText_default), {
								key: 0,
								color: "text-light",
								size: "small"
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(renderUpdatedAt(file)), 1)]),
								_: 2
							}, 1024)) : createCommentVNode("", true),
							file.willBeAutoPublished ? (openBlock(), createBlock(unref(N8nText_default), {
								key: 1,
								color: "success",
								size: "small",
								bold: ""
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pull.autoPublishing")), 1)]),
								_: 1
							})) : createCommentVNode("", true),
							file.isRemoteArchived ? (openBlock(), createBlock(unref(N8nText_default), {
								key: 2,
								color: "warning",
								size: "small",
								bold: ""
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pull.willBeArchived")), 1)]),
								_: 1
							})) : createCommentVNode("", true)
						], 2)], 2), createBaseVNode("span", { class: normalizeClass([_ctx.$style.badges]) }, [createVNode(unref(N8nBadge_default), {
							theme: unref(getStatusTheme)(file.status),
							style: { "height": "25px" }
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(getStatusText)(file.status)), 1)]),
							_: 2
						}, 1032, ["theme"]), isWorkflowDiffsEnabled.value ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [file.type === unref(SOURCE_CONTROL_FILE_TYPE).workflow && file.status === "modified" ? (openBlock(), createBlock(unref(N8nTooltip_default), {
							key: 0,
							content: unref(i18n$2).baseText("workflowDiff.compare"),
							placement: "top"
						}, {
							default: withCtx(() => [createVNode(unref(N8nIconButton_default), {
								variant: "subtle",
								icon: "file-diff",
								onClick: ($event) => openDiffModal(file.id)
							}, null, 8, ["onClick"])]),
							_: 2
						}, 1032, ["content"])) : createCommentVNode("", true)], 64)) : createCommentVNode("", true)], 2)], 2)]),
						_: 2
					}, 1032, [
						"item",
						"active",
						"size-dependencies",
						"data-index"
					])]),
					_: 1
				}, 8, ["class", "items"])) : createCommentVNode("", true)])], 2)])])])]),
				footer: withCtx(() => [
					hasModifiedCredentials.value ? (openBlock(), createBlock(unref(N8nNotice_default), {
						key: 0,
						compact: false,
						class: "mt-0"
					}, {
						default: withCtx(() => [createVNode(unref(N8nText_default), { size: "small" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pull.modifiedCredentialsNotice")), 1)]),
							_: 1
						})]),
						_: 1
					})) : createCommentVNode("", true),
					otherFiles.value.length ? (openBlock(), createElementBlock("div", _hoisted_7$1, [createVNode(unref(N8nText_default), {
						bold: "",
						size: "medium"
					}, {
						default: withCtx(() => [..._cache[2] || (_cache[2] = [createTextVNode("Additional changes to be pulled:", -1)])]),
						_: 1
					}), createVNode(unref(N8nText_default), { size: "small" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(otherFilesText.value), 1)]),
						_: 1
					})])) : createCommentVNode("", true),
					hasDataTableConflicts.value ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 2,
						theme: "warning",
						class: "mb-xs"
					}, {
						default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.warningContent) }, [createBaseVNode("div", null, toDisplayString(dataTableWarningMessage.value), 1), createBaseVNode("ul", { class: normalizeClass(_ctx.$style.dataTableList) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(conflictedDataTables.value, (table$3) => {
							return openBlock(), createElementBlock("li", { key: table$3.id }, toDisplayString(table$3.name), 1);
						}), 128))], 2)], 2)]),
						_: 1
					})) : createCommentVNode("", true),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
						variant: "subtle",
						class: "mr-2xs",
						onClick: close
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pull.buttons.cancel")), 1)]),
						_: 1
					}), createVNode(unref(N8nButton_default), {
						variant: "solid",
						"data-test-id": "force-pull",
						onClick: pullWorkfolder
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(hasModifiedWorkflows.value ? unref(i18n$2).baseText("settings.sourceControl.modals.pull.buttons.save") : unref(i18n$2).baseText("settings.sourceControl.modals.pull.buttons.pull")), 1)]),
						_: 1
					})], 2)
				]),
				_: 1
			}, 8, [
				"event-bus",
				"name",
				"height",
				"custom-class"
			])) : createCommentVNode("", true);
		};
	}
});
var SourceControlPullModal_vue_vue_type_style_index_0_lang_module_default = {
	sourceControlPull: "_sourceControlPull_1rygv_125",
	filtersRow: "_filtersRow_1rygv_132",
	filters: "_filters_1rygv_132",
	headerTitle: "_headerTitle_1rygv_145",
	filtersApplied: "_filtersApplied_1rygv_151",
	scroller: "_scroller_1rygv_155",
	listItem: "_listItem_1rygv_160",
	itemContent: "_itemContent_1rygv_174",
	listItemName: "_listItemName_1rygv_179",
	badges: "_badges_1rygv_196",
	footer: "_footer_1rygv_203",
	warningContent: "_warningContent_1rygv_210",
	dataTableList: "_dataTableList_1rygv_216",
	table: "_table_1rygv_228",
	tableHeader: "_tableHeader_1rygv_238",
	tabs: "_tabs_1rygv_244",
	tab: "_tab_1rygv_228",
	tabActive: "_tabActive_1rygv_272",
	autoPublishSection: "_autoPublishSection_1rygv_277",
	select: "_select_1rygv_285",
	statusLine: "_statusLine_1rygv_289",
	listOption: "_listOption_1rygv_295"
};
var SourceControlPullModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(SourceControlPullModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": SourceControlPullModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$20 = { style: {
	"display": "flex",
	"flex-direction": "column",
	"height": "100%"
} };
var _hoisted_2$7 = { style: {
	"display": "flex",
	"flex": "1",
	"min-height": "0"
} };
var _hoisted_3$4 = ["data-test-id", "onClick"];
var _hoisted_4$4 = { style: { "flex": "1" } };
var SourceControlPullResultModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "SourceControlPullResultModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const uiStore = useUIStore();
		const publishedWorkflows = computed(() => {
			return props.data.workflows.filter((w) => w.type === SOURCE_CONTROL_FILE_TYPE.workflow && !w.publishingError);
		});
		const failedWorkflows = computed(() => {
			return props.data.workflows.filter((w) => w.type === SOURCE_CONTROL_FILE_TYPE.workflow && w.publishingError);
		});
		const activeTab = ref(failedWorkflows.value.length > 0 ? "failed" : "published");
		const tabs$4 = computed(() => {
			const tabsList = [];
			if (failedWorkflows.value.length > 0) tabsList.push({
				label: i18n$2.baseText("settings.sourceControl.modals.pullResult.tabs.failed"),
				value: "failed",
				total: failedWorkflows.value.length
			});
			tabsList.push({
				label: i18n$2.baseText("settings.sourceControl.modals.pullResult.tabs.published"),
				value: "published",
				total: publishedWorkflows.value.length
			});
			return tabsList;
		});
		const activeWorkflows = computed(() => {
			return activeTab.value === "failed" ? failedWorkflows.value : publishedWorkflows.value;
		});
		function close() {
			uiStore.closeModal(props.modalName);
		}
		return (_ctx, _cache) => {
			const _component_RouterLink = resolveComponent("RouterLink");
			return openBlock(), createBlock(Modal_default, {
				name: __props.modalName,
				width: "812px",
				height: "min(80vh, 850px)",
				"custom-class": _ctx.$style.pullResultModal,
				onClose: close
			}, {
				header: withCtx(() => [createVNode(unref(N8nHeading_default), {
					tag: "h1",
					size: "xlarge"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pullResult.title")), 1)]),
					_: 1
				})]),
				content: withCtx(() => [createBaseVNode("div", _hoisted_1$20, [createBaseVNode("div", _hoisted_2$7, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.tabs) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(tabs$4.value, (tab$4) => {
					return openBlock(), createElementBlock("button", {
						key: tab$4.value,
						type: "button",
						class: normalizeClass([_ctx.$style.tab, { [_ctx.$style.tabActive]: activeTab.value === tab$4.value }]),
						"data-test-id": `pull-result-modal-tab-${tab$4.value}`,
						onClick: ($event) => activeTab.value = tab$4.value
					}, [createBaseVNode("div", null, toDisplayString(tab$4.label), 1), createVNode(unref(N8nText_default), {
						tag: "div",
						color: "text-light"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pullResult.itemCount", {
							adjustToNumber: tab$4.total,
							interpolate: { count: `${tab$4.total}` }
						})), 1)]),
						_: 2
					}, 1024)], 10, _hoisted_3$4);
				}), 128))], 2), createBaseVNode("div", _hoisted_4$4, [createBaseVNode("div", { class: normalizeClass([_ctx.$style.table]) }, [createBaseVNode("div", { class: normalizeClass([_ctx.$style.tableHeader]) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.headerTitle) }, [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pullResult.tableHeader.title")), 1)]),
					_: 1
				})], 2)], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.tableContent) }, [!activeWorkflows.value.length ? (openBlock(), createBlock(unref(N8nInfoTip_default), {
					key: 0,
					class: "p-xs",
					bold: false
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pullResult.noWorkflows")), 1)]),
					_: 1
				})) : createCommentVNode("", true), activeWorkflows.value.length ? (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.scrollContent)
				}, [(openBlock(true), createElementBlock(Fragment, null, renderList(activeWorkflows.value, (workflow) => {
					return openBlock(), createElementBlock("div", {
						key: workflow.id,
						class: normalizeClass(_ctx.$style.listItem)
					}, [createBaseVNode("div", { class: normalizeClass([_ctx.$style.itemContent]) }, [createVNode(unref(N8nText_default), {
						tag: "div",
						bold: "",
						color: "text-dark",
						class: normalizeClass([_ctx.$style.listItemName])
					}, {
						default: withCtx(() => [createVNode(_component_RouterLink, {
							target: "_blank",
							rel: "noopener noreferrer",
							to: {
								name: unref(VIEWS).WORKFLOW,
								params: { name: workflow.id }
							}
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(workflow.name), 1)]),
							_: 2
						}, 1032, ["to"])]),
						_: 2
					}, 1032, ["class"]), workflow.publishingError ? (openBlock(), createBlock(unref(N8nText_default), {
						key: 0,
						tag: "p",
						class: "mt-4xs",
						color: "danger",
						size: "small"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(workflow.publishingError), 1)]),
						_: 2
					}, 1024)) : createCommentVNode("", true)], 2)], 2);
				}), 128))], 2)) : createCommentVNode("", true)], 2)], 2)])])])]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					type: "primary",
					onClick: close
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.pullResult.buttons.close")), 1)]),
					_: 1
				})], 2)]),
				_: 1
			}, 8, ["name", "custom-class"]);
		};
	}
});
var SourceControlPullResultModal_vue_vue_type_style_index_0_lang_module_default = {
	pullResultModal: "_pullResultModal_ibmqa_125",
	headerTitle: "_headerTitle_ibmqa_132",
	scrollContent: "_scrollContent_ibmqa_138",
	listItem: "_listItem_ibmqa_144",
	itemContent: "_itemContent_ibmqa_157",
	listItemName: "_listItemName_ibmqa_162",
	footer: "_footer_ibmqa_179",
	table: "_table_ibmqa_186",
	tableHeader: "_tableHeader_ibmqa_196",
	tableContent: "_tableContent_ibmqa_202",
	tabs: "_tabs_ibmqa_209",
	tab: "_tab_ibmqa_186",
	tabActive: "_tabActive_ibmqa_237"
};
var SourceControlPullResultModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(SourceControlPullResultModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": SourceControlPullResultModal_vue_vue_type_style_index_0_lang_module_default }]]);
var import_dateformat$1 = /* @__PURE__ */ __toESM(require_dateformat(), 1);
var import_orderBy = /* @__PURE__ */ __toESM(require_orderBy(), 1);
var _hoisted_1$19 = {
	key: 0,
	class: "mt-s"
};
var _hoisted_2$6 = { style: {
	"display": "flex",
	"height": "100%"
} };
var _hoisted_3$3 = ["data-test-id", "onClick"];
var _hoisted_4$3 = { style: { "flex": "1" } };
var _hoisted_5$1 = { style: {
	"flex": "1",
	"overflow": "hidden"
} };
var _hoisted_6$1 = { key: 0 };
var SourceControlPushModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "SourceControlPushModal",
	props: { data: {} },
	setup(__props) {
		const props = __props;
		const loadingService = useLoadingService();
		const toast = useToast();
		const i18n$2 = useI18n();
		const sourceControlStore = useSourceControlStore();
		const projectsStore = useProjectsStore();
		const route = useRoute();
		const router = useRouter();
		const telemetry$1 = useTelemetry();
		const usersStore = useUsersStore();
		const settingsStore = useSettingsStore();
		const isWorkflowDiffsEnabled = computed(() => settingsStore.settings.enterprise.workflowDiffs);
		const status = ref(props.data.status ?? []);
		const isLoading = ref(false);
		async function loadSourceControlStatus() {
			if (isLoading.value) return;
			isLoading.value = true;
			loadingService.startLoading();
			loadingService.setLoadingText(i18n$2.baseText("settings.sourceControl.loading.checkingForChanges"));
			try {
				const freshStatus = await sourceControlStore.getAggregatedStatus();
				if (!freshStatus.length) {
					toast.showMessage({
						title: "No changes to commit",
						message: "Everything is up to date",
						type: "info"
					});
					close();
					return;
				}
				status.value = freshStatus;
				freshStatus.forEach((file) => {
					if (file.type === "credential") selectedCredentials.add(file.id);
					if (file.type === "datatable") selectedDataTables.add(file.id);
				});
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("error"));
				close();
			} finally {
				loadingService.stopLoading();
				loadingService.setLoadingText(i18n$2.baseText("genericHelpers.loading"));
				isLoading.value = false;
			}
		}
		const projectAdminCalloutDismissed = useStorage("SOURCE_CONTROL_PROJECT_ADMIN_CALLOUT_DISMISSED", false, localStorage);
		onBeforeMount(() => {
			projectsStore.getAvailableProjects();
		});
		const projectsForFilters = computed(() => {
			return projectsStore.availableProjects.filter((project) => !project.role || project.role === "project:admin");
		});
		const concatenateWithAnd = (messages) => new Intl.ListFormat(i18n$2.locale, {
			style: "long",
			type: "conjunction"
		}).format(messages);
		const classifyFilesByType = (files, currentWorkflowId) => files.reduce((acc, file) => {
			const project = projectsStore.availableProjects.find(({ id }) => id === file.owner?.projectId);
			if (file.location === SOURCE_CONTROL_FILE_LOCATION.remote && file.type === SOURCE_CONTROL_FILE_TYPE.workflow && file.status === SOURCE_CONTROL_FILE_STATUS.created) return acc;
			if (file.type === SOURCE_CONTROL_FILE_TYPE.variables) {
				acc.variables.push({
					...file,
					project
				});
				return acc;
			}
			if (file.type === SOURCE_CONTROL_FILE_TYPE.datatable) {
				acc.datatable.push({
					...file,
					project
				});
				return acc;
			}
			if (file.type === SOURCE_CONTROL_FILE_TYPE.tags) {
				acc.tags.push({
					...file,
					project
				});
				return acc;
			}
			if (file.type === SOURCE_CONTROL_FILE_TYPE.folders) {
				acc.folders.push({
					...file,
					project
				});
				return acc;
			}
			if (file.type === SOURCE_CONTROL_FILE_TYPE.workflow && currentWorkflowId === file.id) acc.currentWorkflow = {
				...file,
				project
			};
			if (file.type === SOURCE_CONTROL_FILE_TYPE.workflow) {
				acc.workflow.push({
					...file,
					project
				});
				return acc;
			}
			if (file.type === SOURCE_CONTROL_FILE_TYPE.credential) {
				acc.credential.push({
					...file,
					project
				});
				return acc;
			}
			if (file.type === SOURCE_CONTROL_FILE_TYPE.project) {
				acc.projects.push({
					...file,
					project
				});
				return acc;
			}
			return acc;
		}, {
			tags: [],
			variables: [],
			datatable: [],
			credential: [],
			workflow: [],
			folders: [],
			projects: [],
			currentWorkflow: void 0
		});
		const userNotices = computed(() => {
			const messages = [];
			if (changes$1.value.variables.length) messages.push({
				title: "Variables",
				content: "at least one new or modified"
			});
			if (changes$1.value.tags.length) messages.push({
				title: "Tags",
				content: "at least one new or modified"
			});
			if (changes$1.value.folders.length) messages.push({
				title: "Folders",
				content: "at least one new or modified"
			});
			if (changes$1.value.projects.length) messages.push({
				title: "Projects",
				content: "at least one new or modified"
			});
			return messages;
		});
		const hasModifiedCredentialsSelected = computed(() => {
			return changes$1.value.credential.some((credential) => selectedCredentials.has(credential.id) && credential.status === "modified");
		});
		const workflowId = computed(() => [VIEWS.WORKFLOW].includes(route.name) && route.params.name?.toString() || void 0);
		const changes$1 = computed(() => classifyFilesByType(status.value, workflowId.value));
		const selectedWorkflows = reactive(/* @__PURE__ */ new Set());
		const maybeSelectCurrentWorkflow = (workflow) => workflow && selectedWorkflows.add(workflow.id);
		const filters$2 = ref({ project: null });
		const filtersApplied$2 = computed(() => Boolean(search.value) || Boolean(Object.values(filters$2.value).filter(Boolean).length));
		const resetFilters = () => {
			filters$2.value = { project: null };
			search.value = "";
		};
		const statusFilterOptions = [
			{
				label: "New",
				value: SOURCE_CONTROL_FILE_STATUS.created
			},
			{
				label: "Modified",
				value: SOURCE_CONTROL_FILE_STATUS.modified
			},
			{
				label: "Deleted",
				value: SOURCE_CONTROL_FILE_STATUS.deleted
			}
		];
		const search = ref("");
		const debouncedSearch = refDebounced(search, 250);
		const filterCount = computed(() => Object.values(filters$2.value).reduce((acc, item$2) => item$2 ? acc + 1 : acc, 0));
		const filteredWorkflows = computed(() => {
			const searchQuery = debouncedSearch.value.toLocaleLowerCase();
			return changes$1.value.workflow.filter((workflow) => {
				if (!workflow.name.toLocaleLowerCase().includes(searchQuery)) return false;
				if (filters$2.value.project) return workflow.project?.id === filters$2.value.project.id;
				if (filters$2.value.status && filters$2.value.status !== workflow.status) return false;
				return true;
			});
		});
		const sortedWorkflows = computed(() => (0, import_orderBy.default)(filteredWorkflows.value, [
			({ id }) => id === changes$1.value.currentWorkflow?.id,
			({ status: status$1 }) => getPushPriorityByStatus(status$1),
			"updatedAt"
		], [
			"desc",
			"asc",
			"desc"
		]));
		const selectedCredentials = reactive(/* @__PURE__ */ new Set());
		const selectedDataTables = reactive(/* @__PURE__ */ new Set());
		const filteredCredentials = computed(() => {
			const searchQuery = debouncedSearch.value.toLocaleLowerCase();
			return changes$1.value.credential.filter((credential) => {
				if (!credential.name.toLocaleLowerCase().includes(searchQuery)) return false;
				if (filters$2.value.project) return credential.project?.id === filters$2.value.project.id;
				if (filters$2.value.status && filters$2.value.status !== credential.status) return false;
				return true;
			});
		});
		const sortedCredentials = computed(() => (0, import_orderBy.default)(filteredCredentials.value, [({ status: status$1 }) => getPushPriorityByStatus(status$1), "updatedAt"], ["asc", "desc"]));
		const filteredDataTables = computed(() => {
			const searchQuery = debouncedSearch.value.toLocaleLowerCase();
			return changes$1.value.datatable.filter((dataTable) => {
				if (!dataTable.name.toLocaleLowerCase().includes(searchQuery)) return false;
				if (filters$2.value.project) return dataTable.project?.id === filters$2.value.project.id;
				if (filters$2.value.status && filters$2.value.status !== dataTable.status) return false;
				return true;
			});
		});
		const sortedDataTables = computed(() => (0, import_orderBy.default)(filteredDataTables.value, [({ status: status$1 }) => getPushPriorityByStatus(status$1), "updatedAt"], ["asc", "desc"]));
		const commitMessage = ref("");
		const isSubmitDisabled = computed(() => {
			if (!commitMessage.value.trim()) return true;
			return selectedCredentials.size + selectedDataTables.size + changes$1.value.tags.length + changes$1.value.variables.length + changes$1.value.folders.length + changes$1.value.projects.length + selectedWorkflows.size <= 0;
		});
		const selectAllIndeterminate = computed(() => {
			if (!activeSelection.value.size) return false;
			if (toRaw(activeSelection.value).intersection(new Set(activeDataSourceFiltered.value.map(({ id }) => id))).size === 0) return false;
			return !allVisibleItemsSelected.value;
		});
		const selectedCount = computed(() => selectedWorkflows.size + selectedCredentials.size + selectedDataTables.size);
		function onToggleSelectAll() {
			if (allVisibleItemsSelected.value) {
				const diff = toRaw(activeSelection.value).difference(new Set(activeDataSourceFiltered.value.map(({ id }) => id)));
				activeSelection.value.clear();
				diff.forEach((id) => activeSelection.value.add(id));
			} else activeDataSourceFiltered.value.forEach((file) => activeSelection.value.add(file.id));
		}
		function close() {
			router.back();
		}
		function renderUpdatedAt(file) {
			const currentYear = (/* @__PURE__ */ new Date()).getFullYear().toString();
			return i18n$2.baseText("settings.sourceControl.lastUpdated", { interpolate: {
				date: (0, import_dateformat$1.default)(file.updatedAt, `d mmm${file.updatedAt?.startsWith(currentYear) ? "" : ", yyyy"}`),
				time: (0, import_dateformat$1.default)(file.updatedAt, "HH:MM")
			} });
		}
		async function onCommitKeyDownEnter() {
			if (!isSubmitDisabled.value) await commitAndPush();
		}
		const successNotificationMessage = () => {
			const messages = [];
			if (selectedWorkflows.size) messages.push(i18n$2.baseText("generic.workflow", {
				adjustToNumber: selectedWorkflows.size,
				interpolate: { count: selectedWorkflows.size }
			}));
			if (selectedCredentials.size) messages.push(i18n$2.baseText("generic.credential", {
				adjustToNumber: selectedCredentials.size,
				interpolate: { count: selectedCredentials.size }
			}));
			if (changes$1.value.variables.length) messages.push(i18n$2.baseText("generic.variable_plural"));
			if (selectedDataTables.size) messages.push(i18n$2.baseText("generic.datatable", {
				adjustToNumber: selectedDataTables.size,
				interpolate: { count: selectedDataTables.size }
			}));
			if (changes$1.value.folders.length) messages.push(i18n$2.baseText("generic.folders_plural"));
			if (changes$1.value.tags.length) messages.push(i18n$2.baseText("generic.tag_plural"));
			if (changes$1.value.projects.length) messages.push(i18n$2.baseText("generic.projects"));
			const totalCount = selectedWorkflows.size + selectedCredentials.size + changes$1.value.variables.length + selectedDataTables.size + changes$1.value.folders.length + changes$1.value.tags.length + changes$1.value.projects.length;
			return [concatenateWithAnd(messages), i18n$2.baseText("settings.sourceControl.modals.push.success.description", { adjustToNumber: totalCount })].join(" ");
		};
		async function commitAndPush() {
			const files = changes$1.value.tags.concat(changes$1.value.variables).concat(changes$1.value.datatable.filter((file) => selectedDataTables.has(file.id))).concat(changes$1.value.credential.filter((file) => selectedCredentials.has(file.id))).concat(changes$1.value.folders).concat(changes$1.value.projects).concat(changes$1.value.workflow.filter((file) => selectedWorkflows.has(file.id)));
			loadingService.startLoading(i18n$2.baseText("settings.sourceControl.loading.push"));
			close();
			try {
				await sourceControlStore.pushWorkfolder({
					force: true,
					commitMessage: commitMessage.value,
					fileNames: files
				});
				toast.showToast({
					title: i18n$2.baseText("settings.sourceControl.modals.push.success.title"),
					message: successNotificationMessage(),
					type: "success"
				});
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("error"));
			} finally {
				loadingService.stopLoading();
			}
		}
		const modalHeight = computed(() => changes$1.value.workflow.length ? "min(80vh, 850px)" : "auto");
		watch(() => filters$2.value.status, (status$1) => {
			telemetry$1.track("User filtered by status in commit modal", { status: status$1 });
		});
		watch(refDebounced(search, 500), (term) => {
			telemetry$1.track("User searched workflows in commit modal", { search: term });
		});
		const activeTab = ref(SOURCE_CONTROL_FILE_TYPE.workflow);
		const allVisibleItemsSelected = computed(() => {
			if (!activeSelection.value.size) return false;
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.workflow) {
				const workflowsSet = new Set(sortedWorkflows.value.map(({ id }) => id));
				if (!workflowsSet.size) return false;
				return !workflowsSet.difference(toRaw(activeSelection.value)).size;
			}
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.credential) {
				const credentialsSet = new Set(sortedCredentials.value.map(({ id }) => id));
				if (!credentialsSet.size) return false;
				return !credentialsSet.difference(toRaw(activeSelection.value)).size;
			}
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.datatable) {
				const dataTablesSet = new Set(sortedDataTables.value.map(({ id }) => id));
				if (!dataTablesSet.size) return false;
				return !dataTablesSet.difference(toRaw(activeSelection.value)).size;
			}
			return false;
		});
		function toggleSelected(id) {
			if (activeSelection.value.has(id)) activeSelection.value.delete(id);
			else activeSelection.value.add(id);
		}
		const activeDataSource = computed(() => {
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.workflow) return changes$1.value.workflow;
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.credential) return changes$1.value.credential;
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.datatable) return changes$1.value.datatable;
			return [];
		});
		const activeDataSourceFiltered = computed(() => {
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.workflow) return sortedWorkflows.value;
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.credential) return sortedCredentials.value;
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.datatable) return sortedDataTables.value;
			return [];
		});
		const activeEntityLocale = computed(() => {
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.workflow) return "generic.workflows";
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.credential) return "generic.credentials";
			return "generic.datatable";
		});
		const activeSelection = computed(() => {
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.workflow) return selectedWorkflows;
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.credential) return selectedCredentials;
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.datatable) return selectedDataTables;
			return /* @__PURE__ */ new Set();
		});
		const tabs$4 = computed(() => {
			return [
				{
					label: "Workflows",
					value: SOURCE_CONTROL_FILE_TYPE.workflow,
					selected: selectedWorkflows.size,
					total: changes$1.value.workflow.length
				},
				{
					label: "Credentials",
					value: SOURCE_CONTROL_FILE_TYPE.credential,
					selected: selectedCredentials.size,
					total: changes$1.value.credential.length
				},
				{
					label: "Data Tables",
					value: SOURCE_CONTROL_FILE_TYPE.datatable,
					selected: selectedDataTables.size,
					total: changes$1.value.datatable.length
				}
			];
		});
		const filtersNoResultText = computed(() => {
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.workflow) return i18n$2.baseText("workflows.noResults");
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.credential) return i18n$2.baseText("credentials.noResults");
			if (activeTab.value === SOURCE_CONTROL_FILE_TYPE.datatable) return i18n$2.baseText("dataTables.noResults");
			return i18n$2.baseText("workflows.noResults");
		});
		function castType(type) {
			if (type === SOURCE_CONTROL_FILE_TYPE.workflow) return ResourceType.Workflow;
			return ResourceType.Credential;
		}
		function castProject(project) {
			return {
				homeProject: project,
				id: "",
				name: "",
				active: false,
				activeVersionId: null,
				createdAt: "",
				updatedAt: "",
				isArchived: false,
				readOnly: false,
				resourceType: "workflow",
				sharedWithProjects: []
			};
		}
		function openDiffModal(id, workflowStatus) {
			telemetry$1.track("User clicks compare workflows", {
				workflow_id: id,
				context: "source_control_push"
			});
			router.push({ query: {
				...route.query,
				diff: id,
				workflowStatus,
				direction: "push"
			} });
		}
		watchEffect(() => {
			if (changes$1.value.currentWorkflow && !selectedWorkflows.has(changes$1.value.currentWorkflow.id)) maybeSelectCurrentWorkflow(changes$1.value.currentWorkflow);
		});
		onMounted(async () => {
			await loadSourceControlStatus();
		});
		return (_ctx, _cache) => {
			return !isLoading.value ? (openBlock(), createBlock(Modal_default, {
				key: 0,
				width: "812px",
				"event-bus": __props.data.eventBus,
				name: unref(SOURCE_CONTROL_PUSH_MODAL_KEY),
				height: modalHeight.value,
				"custom-class": _ctx.$style.sourceControlPush,
				"before-close": close
			}, {
				header: withCtx(() => [
					createVNode(unref(N8nHeading_default), {
						tag: "h1",
						size: "xlarge"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.push.title")), 1)]),
						_: 1
					}),
					changes$1.value.workflow.length || changes$1.value.credential.length || changes$1.value.datatable.length ? (openBlock(), createElementBlock("div", {
						key: 0,
						class: normalizeClass([[_ctx.$style.filtersRow], "mt-l"])
					}, [createBaseVNode("div", { class: normalizeClass([_ctx.$style.filters]) }, [createVNode(unref(Input_default), {
						modelValue: search.value,
						"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => search.value = $event),
						"data-test-id": "source-control-push-search",
						placeholder: "Filter by title",
						clearable: "",
						style: { "width": "234px" }
					}, {
						prefix: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "search" })]),
						_: 1
					}, 8, ["modelValue"]), createVNode(unref(N8nPopover_default), {
						width: "304px",
						"content-class": _ctx.$style["popover-content"],
						style: { "align-self": "normal" },
						"z-index": "2000"
					}, {
						trigger: withCtx(() => [createVNode(unref(N8nButton_default), {
							variant: "subtle",
							icon: "funnel",
							style: { "height": "100%" },
							active: Boolean(filterCount.value),
							"data-test-id": "source-control-filter-dropdown"
						}, {
							default: withCtx(() => [filterCount.value ? (openBlock(), createBlock(unref(N8nBadge_default), {
								key: 0,
								theme: "primary",
								class: "mr-4xs"
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(filterCount.value), 1)]),
								_: 1
							})) : createCommentVNode("", true)]),
							_: 1
						}, 8, ["active"])]),
						content: withCtx(() => [
							createVNode(unref(N8nInputLabel_default), {
								label: unref(i18n$2).baseText("workflows.filters.status"),
								bold: false,
								size: "small",
								color: "text-base",
								class: "mb-3xs"
							}, null, 8, ["label"]),
							createVNode(unref(N8nSelect_default), {
								modelValue: filters$2.value.status,
								"onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => filters$2.value.status = $event),
								"data-test-id": "source-control-status-filter",
								clearable: ""
							}, {
								default: withCtx(() => [(openBlock(), createElementBlock(Fragment, null, renderList(statusFilterOptions, (option) => {
									return createVNode(unref(N8nOption_default), mergeProps({
										key: option.label,
										"data-test-id": "source-control-status-filter-option"
									}, { ref_for: true }, option), null, 16);
								}), 64))]),
								_: 1
							}, 8, ["modelValue"]),
							createVNode(unref(N8nInputLabel_default), {
								label: unref(i18n$2).baseText("forms.resourceFiltersDropdown.owner"),
								bold: false,
								size: "small",
								color: "text-base",
								class: "mb-3xs mt-3xs"
							}, null, 8, ["label"]),
							createVNode(ProjectSharing_default, {
								modelValue: filters$2.value.project,
								"onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => filters$2.value.project = $event),
								"data-test-id": "source-control-push-modal-project-search",
								projects: projectsForFilters.value,
								placeholder: unref(i18n$2).baseText("forms.resourceFiltersDropdown.owner.placeholder"),
								"empty-options-text": unref(i18n$2).baseText("projects.sharing.noMatchingProjects")
							}, null, 8, [
								"modelValue",
								"projects",
								"placeholder",
								"empty-options-text"
							]),
							filterCount.value ? (openBlock(), createElementBlock("div", _hoisted_1$19, [createVNode(unref(N8nLink_default), { onClick: resetFilters }, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("forms.resourceFiltersDropdown.reset")), 1)]),
								_: 1
							})])) : createCommentVNode("", true)
						]),
						_: 1
					}, 8, ["content-class"])], 2)], 2)) : createCommentVNode("", true),
					unref(usersStore).currentUser && unref(usersStore).currentUser.role ? (openBlock(), createElementBlock(Fragment, { key: 1 }, [unref(usersStore).currentUser.role !== unref(ROLE).Owner && unref(usersStore).currentUser.role !== unref(ROLE).Admin ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [!unref(projectAdminCalloutDismissed) ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 0,
						theme: "secondary",
						class: "mt-s"
					}, {
						trailingContent: withCtx(() => [createVNode(unref(N8nIcon_default), {
							icon: "x",
							title: "Dismiss",
							size: "medium",
							type: "secondary",
							onClick: _cache[3] || (_cache[3] = ($event) => projectAdminCalloutDismissed.value = true)
						})]),
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.push.projectAdmin.callout")) + " ", 1)]),
						_: 1
					})) : createCommentVNode("", true)], 64)) : createCommentVNode("", true)], 64)) : createCommentVNode("", true)
				]),
				content: withCtx(() => [createBaseVNode("div", _hoisted_2$6, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.tabs) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(tabs$4.value, (tab$4) => {
					return openBlock(), createElementBlock("button", {
						key: tab$4.value,
						type: "button",
						class: normalizeClass([_ctx.$style.tab, { [_ctx.$style.tabActive]: activeTab.value === tab$4.value }]),
						"data-test-id": `source-control-push-modal-tab-${tab$4.value}`,
						onClick: ($event) => activeTab.value = tab$4.value
					}, [createBaseVNode("div", null, toDisplayString(tab$4.label), 1), createVNode(unref(N8nText_default), {
						tag: "div",
						color: "text-light"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(tab$4.selected) + " / " + toDisplayString(tab$4.total) + " selected ", 1)]),
						_: 2
					}, 1024)], 10, _hoisted_3$3);
				}), 128))], 2), createBaseVNode("div", _hoisted_4$3, [createBaseVNode("div", { class: normalizeClass([_ctx.$style.table]) }, [createBaseVNode("div", { class: normalizeClass([_ctx.$style.tableHeader]) }, [createVNode(unref(Checkbox_default), {
					class: normalizeClass(_ctx.$style.selectAll),
					indeterminate: selectAllIndeterminate.value,
					"model-value": allVisibleItemsSelected.value,
					"data-test-id": "source-control-push-modal-toggle-all",
					disabled: activeDataSourceFiltered.value.length === 0,
					"onUpdate:modelValue": onToggleSelectAll
				}, {
					label: withCtx(() => [createVNode(unref(N8nText_default), null, {
						default: withCtx(() => [..._cache[5] || (_cache[5] = [createTextVNode(" Title ", -1)])]),
						_: 1
					})]),
					_: 1
				}, 8, [
					"class",
					"indeterminate",
					"model-value",
					"disabled"
				]), filtersApplied$2.value ? (openBlock(), createBlock(unref(N8nInfoTip_default), {
					key: 0,
					class: normalizeClass(["p-xs", _ctx.$style.filtersApplied]),
					bold: false
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.push.filter", { interpolate: {
						count: `${activeDataSourceFiltered.value.length} / ${activeDataSource.value.length}`,
						entity: unref(i18n$2).baseText(activeEntityLocale.value).toLowerCase()
					} })) + " ", 1), createVNode(unref(N8nLink_default), {
						size: "small",
						"data-test-id": "source-control-filters-reset",
						onClick: resetFilters
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflows.filters.active.reset")), 1)]),
						_: 1
					})]),
					_: 1
				}, 8, ["class"])) : createCommentVNode("", true)], 2), createBaseVNode("div", _hoisted_5$1, [!activeDataSourceFiltered.value.length ? (openBlock(), createBlock(unref(N8nInfoTip_default), {
					key: 0,
					class: "p-xs",
					bold: false
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(filtersNoResultText.value), 1)]),
					_: 1
				})) : createCommentVNode("", true), activeDataSourceFiltered.value.length ? (openBlock(), createBlock(unref(script$1), {
					key: 1,
					class: normalizeClass([_ctx.$style.scroller]),
					items: activeDataSourceFiltered.value,
					"min-item-size": 57,
					"item-class": "scrollerItem"
				}, {
					default: withCtx(({ item: file, active: active$1, index }) => [createVNode(unref(script), {
						item: file,
						active: active$1,
						"size-dependencies": [file.name, file.id],
						"data-index": index,
						"data-test-id": "push-modal-item"
					}, {
						default: withCtx(() => [createVNode(unref(Checkbox_default), {
							class: normalizeClass([_ctx.$style.listItem]),
							"data-test-id": "source-control-push-modal-file-checkbox",
							"model-value": activeSelection.value.has(file.id),
							"onUpdate:modelValue": ($event) => toggleSelected(file.id)
						}, {
							label: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.listItemContent) }, [createBaseVNode("span", null, [createVNode(unref(N8nText_default), {
								tag: "div",
								bold: "",
								color: "text-dark",
								class: normalizeClass([_ctx.$style.listItemName])
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(file.name || file.id), 1)]),
								_: 2
							}, 1032, ["class"]), file.updatedAt ? (openBlock(), createBlock(unref(N8nText_default), {
								key: 0,
								tag: "p",
								class: "mt-0",
								color: "text-light",
								size: "small"
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(renderUpdatedAt(file)), 1)]),
								_: 2
							}, 1024)) : createCommentVNode("", true)]), createBaseVNode("span", { class: normalizeClass([_ctx.$style.badges]) }, [
								changes$1.value.currentWorkflow && file.id === changes$1.value.currentWorkflow.id ? (openBlock(), createBlock(unref(N8nBadge_default), {
									key: 0,
									class: "mr-2xs"
								}, {
									default: withCtx(() => [..._cache[6] || (_cache[6] = [createTextVNode(" Current workflow ", -1)])]),
									_: 1
								})) : createCommentVNode("", true),
								file.type === unref(SOURCE_CONTROL_FILE_TYPE).workflow || file.type === unref(SOURCE_CONTROL_FILE_TYPE).credential || file.type === unref(SOURCE_CONTROL_FILE_TYPE).datatable ? (openBlock(), createElementBlock(Fragment, { key: 1 }, [file.project ? (openBlock(), createBlock(ProjectCardBadge_default, {
									key: 0,
									"data-test-id": "source-control-push-modal-project-badge",
									resource: castProject(file.project),
									"resource-type": castType(file.type),
									"resource-type-label": unref(i18n$2).baseText(`generic.${file.type}`).toLowerCase(),
									"personal-project": unref(projectsStore).personalProject,
									"show-badge-border": false
								}, null, 8, [
									"resource",
									"resource-type",
									"resource-type-label",
									"personal-project"
								])) : createCommentVNode("", true)], 64)) : createCommentVNode("", true),
								createVNode(unref(N8nBadge_default), {
									theme: unref(getStatusTheme)(file.status),
									style: { "height": "25px" }
								}, {
									default: withCtx(() => [createTextVNode(toDisplayString(unref(getStatusText)(file.status)), 1)]),
									_: 2
								}, 1032, ["theme"]),
								isWorkflowDiffsEnabled.value ? (openBlock(), createElementBlock(Fragment, { key: 2 }, [file.type === unref(SOURCE_CONTROL_FILE_TYPE).workflow ? (openBlock(), createBlock(unref(N8nTooltip_default), {
									key: 0,
									content: unref(i18n$2).baseText("workflowDiff.compare"),
									placement: "top"
								}, {
									default: withCtx(() => [createVNode(unref(N8nIconButton_default), {
										variant: "subtle",
										"data-test-id": "source-control-workflow-diff-button",
										icon: "file-diff",
										onClick: ($event) => openDiffModal(file.id, file.status)
									}, null, 8, ["onClick"])]),
									_: 2
								}, 1032, ["content"])) : createCommentVNode("", true)], 64)) : createCommentVNode("", true)
							], 2)], 2)]),
							_: 2
						}, 1032, [
							"class",
							"model-value",
							"onUpdate:modelValue"
						])]),
						_: 2
					}, 1032, [
						"item",
						"active",
						"size-dependencies",
						"data-index"
					])]),
					_: 1
				}, 8, ["class", "items"])) : createCommentVNode("", true)])], 2)])])]),
				footer: withCtx(() => [
					userNotices.value.length || hasModifiedCredentialsSelected.value ? (openBlock(), createBlock(unref(N8nNotice_default), {
						key: 0,
						compact: false,
						class: "mt-0",
						id: "source-control-push-modal-notice"
					}, {
						default: withCtx(() => [userNotices.value.length ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
							createVNode(unref(N8nText_default), {
								bold: "",
								size: "medium"
							}, {
								default: withCtx(() => [..._cache[7] || (_cache[7] = [createTextVNode("Changes to variables, tags, folders and projects ", -1)])]),
								_: 1
							}),
							_cache[8] || (_cache[8] = createBaseVNode("br", null, null, -1)),
							(openBlock(true), createElementBlock(Fragment, null, renderList(userNotices.value, ({ title: title$7, content: content$13 }) => {
								return openBlock(), createElementBlock(Fragment, { key: title$7 }, [createVNode(unref(N8nText_default), {
									bold: "",
									size: "small"
								}, {
									default: withCtx(() => [createTextVNode(toDisplayString(title$7), 1)]),
									_: 2
								}, 1024), createVNode(unref(N8nText_default), { size: "small" }, {
									default: withCtx(() => [createTextVNode(" : " + toDisplayString(content$13) + ". ", 1)]),
									_: 2
								}, 1024)], 64);
							}), 128)),
							hasModifiedCredentialsSelected.value ? (openBlock(), createElementBlock("br", _hoisted_6$1)) : createCommentVNode("", true)
						], 64)) : createCommentVNode("", true), hasModifiedCredentialsSelected.value ? (openBlock(), createBlock(unref(N8nText_default), {
							key: 1,
							size: "small"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.push.modifiedCredentialsNotice")), 1)]),
							_: 1
						})) : createCommentVNode("", true)]),
						_: 1
					})) : createCommentVNode("", true),
					createVNode(unref(N8nText_default), {
						bold: "",
						tag: "p"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.push.commitMessage")), 1)]),
						_: 1
					}),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(Input_default), {
						modelValue: commitMessage.value,
						"onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => commitMessage.value = $event),
						class: "mr-2xs",
						"data-test-id": "source-control-push-modal-commit",
						placeholder: unref(i18n$2).baseText("settings.sourceControl.modals.push.commitMessage.placeholder"),
						onKeydown: withKeys(withModifiers(onCommitKeyDownEnter, ["stop"]), ["enter"])
					}, null, 8, [
						"modelValue",
						"placeholder",
						"onKeydown"
					]), createVNode(unref(N8nButton_default), {
						variant: "solid",
						"data-test-id": "source-control-push-modal-submit",
						disabled: isSubmitDisabled.value,
						size: "large",
						onClick: commitAndPush
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.modals.push.buttons.save")) + " " + toDisplayString(selectedCount.value ? `(${selectedCount.value})` : void 0), 1)]),
						_: 1
					}, 8, ["disabled"])], 2)
				]),
				_: 1
			}, 8, [
				"event-bus",
				"name",
				"height",
				"custom-class"
			])) : createCommentVNode("", true);
		};
	}
});
var SourceControlPushModal_vue_vue_type_style_index_0_lang_module_default = {
	filtersRow: "_filtersRow_1q3i6_125",
	filters: "_filters_1q3i6_125",
	selectAll: "_selectAll_1q3i6_138",
	filtersApplied: "_filtersApplied_1q3i6_144",
	scroller: "_scroller_1q3i6_148",
	listItem: "_listItem_1q3i6_153",
	listItemContent: "_listItemContent_1q3i6_164",
	listItemName: "_listItemName_1q3i6_170",
	badges: "_badges_1q3i6_180",
	footer: "_footer_1q3i6_186",
	sourceControlPush: "_sourceControlPush_1q3i6_193",
	table: "_table_1q3i6_200",
	tableHeader: "_tableHeader_1q3i6_210",
	tabs: "_tabs_1q3i6_216",
	tab: "_tab_1q3i6_200",
	tabActive: "_tabActive_1q3i6_244",
	"popover-content": "_popover-content_1q3i6_249"
};
var SourceControlPushModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(SourceControlPushModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": SourceControlPushModal_vue_vue_type_style_index_0_lang_module_default }]]);
var TagsTableHeader_default = /* @__PURE__ */ __plugin_vue_export_helper_default(/* @__PURE__ */ defineComponent({
	__name: "TagsTableHeader",
	props: {
		disabled: {
			type: Boolean,
			default: false
		},
		search: { default: "" }
	},
	emits: ["searchChange", "createEnable"],
	setup(__props, { emit: __emit }) {
		const i18n$2 = useI18n();
		const emit = __emit;
		const maxLength = ref(24);
		const onAddNew = () => {
			emit("createEnable");
		};
		const onSearchChange = (search) => {
			emit("searchChange", search);
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(ElRow), { class: "tags-header" }, {
				default: withCtx(() => [createVNode(unref(ElCol), { span: 10 }, {
					default: withCtx(() => [createVNode(unref(Input_default), {
						placeholder: unref(i18n$2).baseText("tagsTableHeader.searchTags"),
						"model-value": __props.search,
						disabled: __props.disabled,
						maxlength: maxLength.value,
						clearable: "",
						"onUpdate:modelValue": onSearchChange
					}, {
						prefix: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "search" })]),
						_: 1
					}, 8, [
						"placeholder",
						"model-value",
						"disabled",
						"maxlength"
					])]),
					_: 1
				}), createVNode(unref(ElCol), { span: 14 }, {
					default: withCtx(() => [createVNode(unref(N8nButton_default), {
						disabled: __props.disabled,
						icon: "plus",
						label: unref(i18n$2).baseText("tagsTableHeader.addNew"),
						size: "large",
						float: "right",
						onClick: onAddNew
					}, null, 8, ["disabled", "label"])]),
					_: 1
				})]),
				_: 1
			});
		};
	}
}), [["__scopeId", "data-v-02364ed2"]]);
var _hoisted_1$18 = { key: 1 };
var INPUT_TRANSITION_TIMEOUT = 350;
var DELETE_TRANSITION_TIMEOUT = 100;
var TagsTable_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "TagsTable",
	props: {
		rows: {},
		isLoading: { type: Boolean },
		newName: {},
		isSaving: { type: Boolean },
		usageColumnTitleLocaleKey: { default: "tagsTable.usage" }
	},
	emits: [
		"updateEnable",
		"newNameChange",
		"deleteEnable",
		"cancelOperation",
		"applyOperation"
	],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const table$3 = ref(null);
		const nameInput = ref(null);
		const maxLength = ref(24);
		const getRowClasses = ({ row: row$3 }) => {
			return row$3.disable ? "disabled" : "";
		};
		const getSpan = ({ row: row$3, columnIndex }) => {
			if (columnIndex === 0 && row$3.tag && row$3.delete) return {
				rowspan: 1,
				colspan: 2
			};
			if (columnIndex === 1 && row$3.tag && row$3.delete) return {
				rowspan: 0,
				colspan: 0
			};
			return {
				rowspan: 1,
				colspan: 1
			};
		};
		const enableUpdate = (row$3) => {
			if (row$3.tag) {
				emit("updateEnable", row$3.tag.id);
				emit("newNameChange", row$3.tag.name);
				focusOnInput();
			}
		};
		const enableDelete = (row$3) => {
			if (row$3.tag) {
				emit("deleteEnable", row$3.tag.id);
				focusOnDelete();
			}
		};
		const cancel = () => {
			emit("cancelOperation");
		};
		const apply = () => {
			emit("applyOperation");
		};
		const onNewNameChange = (name$3) => {
			emit("newNameChange", name$3);
		};
		const focusOnInput = () => {
			setTimeout(() => {
				if (nameInput.value?.focus) nameInput.value.focus();
			}, INPUT_TRANSITION_TIMEOUT);
		};
		const focusOnDelete = () => {
			setTimeout(() => {
				const inputRef = nameInput.value;
				if (inputRef?.focus) inputRef.focus();
			}, DELETE_TRANSITION_TIMEOUT);
		};
		const focusOnCreate = () => {
			const bodyWrapperRef = table$3.value?.$refs.bodyWrapper;
			if (bodyWrapperRef) bodyWrapperRef.scrollTop = 0;
			focusOnInput();
		};
		watch(() => props.rows, (newValue) => {
			if (newValue?.[0]?.create) focusOnCreate();
		});
		onMounted(() => {
			if (props.rows.length === 1 && props.rows[0].create) focusOnInput();
		});
		return (_ctx, _cache) => {
			const _directive_loading = resolveDirective("loading");
			return withDirectives((openBlock(), createBlock(unref(ElTable), {
				ref_key: "table",
				ref: table$3,
				class: normalizeClass(_ctx.$style["tags-table"]),
				stripe: "",
				"max-height": "450",
				"empty-text": unref(i18n$2).baseText("tagsTable.noMatchingTagsExist"),
				data: __props.rows,
				"span-method": getSpan,
				"row-class-name": getRowClasses
			}, {
				default: withCtx(() => [
					createVNode(unref(ElTableColumn), { label: unref(i18n$2).baseText("tagsTable.name") }, {
						default: withCtx((scope) => [(openBlock(), createElementBlock("div", {
							key: scope.row.id,
							class: normalizeClass(_ctx.$style.name),
							onKeydown: _cache[0] || (_cache[0] = withModifiers(() => {}, ["stop"]))
						}, [createVNode(Transition, {
							name: "fade",
							mode: "out-in"
						}, {
							default: withCtx(() => [scope.row.create || scope.row.update ? (openBlock(), createBlock(unref(Input_default), {
								key: 0,
								ref_key: "nameInput",
								ref: nameInput,
								"model-value": __props.newName,
								maxlength: maxLength.value,
								"onUpdate:modelValue": onNewNameChange
							}, null, 8, ["model-value", "maxlength"])) : scope.row.delete ? (openBlock(), createElementBlock("span", _hoisted_1$18, [createBaseVNode("span", null, toDisplayString(unref(i18n$2).baseText("tagsTable.areYouSureYouWantToDeleteThisTag")), 1), createBaseVNode("input", {
								ref: "deleteHiddenInput",
								class: normalizeClass(_ctx.$style.hidden)
							}, null, 2)])) : (openBlock(), createElementBlock("span", {
								key: 2,
								class: normalizeClass({ [_ctx.$style.disabled]: scope.row.disable })
							}, toDisplayString(scope.row.tag.name), 3))]),
							_: 2
						}, 1024)], 34))]),
						_: 1
					}, 8, ["label"]),
					createVNode(unref(ElTableColumn), {
						label: unref(i18n$2).baseText(__props.usageColumnTitleLocaleKey),
						width: "170"
					}, {
						default: withCtx((scope) => [createVNode(Transition, {
							name: "fade",
							mode: "out-in"
						}, {
							default: withCtx(() => [!scope.row.create && !scope.row.delete ? (openBlock(), createElementBlock("div", {
								key: 0,
								class: normalizeClass({ [_ctx.$style.disabled]: scope.row.disable })
							}, toDisplayString(scope.row.usage), 3)) : createCommentVNode("", true)]),
							_: 2
						}, 1024)]),
						_: 1
					}, 8, ["label"]),
					createVNode(unref(ElTableColumn), null, {
						default: withCtx((scope) => [createVNode(Transition, {
							name: "fade",
							mode: "out-in"
						}, {
							default: withCtx(() => [scope.row.create ? (openBlock(), createElementBlock("div", {
								key: 0,
								class: normalizeClass(_ctx.$style.ops)
							}, [createVNode(unref(N8nButton_default), {
								variant: "subtle",
								label: unref(i18n$2).baseText("tagsTable.cancel"),
								disabled: __props.isSaving,
								onClick: withModifiers(cancel, ["stop"])
							}, null, 8, ["label", "disabled"]), createVNode(unref(N8nButton_default), {
								label: unref(i18n$2).baseText("tagsTable.createTag"),
								loading: __props.isSaving,
								onClick: withModifiers(apply, ["stop"])
							}, null, 8, ["label", "loading"])], 2)) : scope.row.update ? (openBlock(), createElementBlock("div", {
								key: 1,
								class: normalizeClass(_ctx.$style.ops)
							}, [createVNode(unref(N8nButton_default), {
								variant: "subtle",
								label: unref(i18n$2).baseText("tagsTable.cancel"),
								disabled: __props.isSaving,
								onClick: withModifiers(cancel, ["stop"])
							}, null, 8, ["label", "disabled"]), createVNode(unref(N8nButton_default), {
								label: unref(i18n$2).baseText("tagsTable.saveChanges"),
								loading: __props.isSaving,
								onClick: withModifiers(apply, ["stop"])
							}, null, 8, ["label", "loading"])], 2)) : scope.row.delete ? (openBlock(), createElementBlock("div", {
								key: 2,
								class: normalizeClass(_ctx.$style.ops)
							}, [createVNode(unref(N8nButton_default), {
								variant: "subtle",
								label: unref(i18n$2).baseText("tagsTable.cancel"),
								disabled: __props.isSaving,
								onClick: withModifiers(cancel, ["stop"])
							}, null, 8, ["label", "disabled"]), createVNode(unref(N8nButton_default), {
								label: unref(i18n$2).baseText("tagsTable.deleteTag"),
								loading: __props.isSaving,
								onClick: withModifiers(apply, ["stop"])
							}, null, 8, ["label", "loading"])], 2)) : !scope.row.disable ? (openBlock(), createElementBlock("div", {
								key: 3,
								class: normalizeClass([_ctx.$style.ops, _ctx.$style.main])
							}, [createVNode(unref(N8nIconButton_default), {
								title: unref(i18n$2).baseText("tagsTable.editTag"),
								icon: "pen",
								"data-test-id": "edit-tag-button",
								onClick: withModifiers(($event) => enableUpdate(scope.row), ["stop"])
							}, null, 8, ["title", "onClick"]), scope.row.canDelete ? (openBlock(), createBlock(unref(N8nIconButton_default), {
								key: 0,
								title: unref(i18n$2).baseText("tagsTable.deleteTag"),
								icon: "trash-2",
								"data-test-id": "delete-tag-button",
								onClick: withModifiers(($event) => enableDelete(scope.row), ["stop"])
							}, null, 8, ["title", "onClick"])) : createCommentVNode("", true)], 2)) : createCommentVNode("", true)]),
							_: 2
						}, 1024)]),
						_: 1
					})
				]),
				_: 1
			}, 8, [
				"class",
				"empty-text",
				"data"
			])), [[_directive_loading, __props.isLoading]]);
		};
	}
});
const disabled$1 = "_disabled_1ogen_125";
const name$1 = "_name_1ogen_129";
const ops = "_ops_1ogen_135";
const main = "_main_1ogen_146";
const hidden = "_hidden_1ogen_155";
var TagsTable_vue_vue_type_style_index_0_lang_module_default = {
	"tags-table": "_tags-table_1ogen_125",
	disabled: disabled$1,
	name: name$1,
	ops,
	main,
	hidden
};
var TagsTable_default = /* @__PURE__ */ __plugin_vue_export_helper_default(TagsTable_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": TagsTable_vue_vue_type_style_index_0_lang_module_default }], ["__scopeId", "data-v-6f1aecbf"]]);
var TagsView_default = /* @__PURE__ */ defineComponent({
	name: "TagsView",
	__name: "TagsView",
	props: {
		usageColumnTitleLocaleKey: { default: "tagsTable.usage" },
		usageLocaleKey: { default: "tagsView.inUse" },
		tags: {},
		isLoading: { type: Boolean }
	},
	emits: [
		"update",
		"delete",
		"create",
		"disableCreate"
	],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const matches = (name$3, filter) => name$3.toLowerCase().trim().includes(filter.toLowerCase().trim());
		const i18n$2 = useI18n();
		const rbacStore = useRBACStore();
		const createEnabled = ref(false);
		const deleteId = ref("");
		const updateId = ref("");
		const search = ref("");
		const newName = ref("");
		const stickyIds = ref(/* @__PURE__ */ new Set());
		const isSaving = ref(false);
		const isCreateEnabled = computed(() => props.tags.length === 0 || createEnabled.value);
		const rows = computed(() => {
			const getUsage = (count) => count && count > 0 ? i18n$2.baseText(props.usageLocaleKey, { adjustToNumber: count }) : i18n$2.baseText("tagsView.notBeingUsed");
			const disabled$2 = isCreateEnabled.value || !!updateId.value || !!deleteId.value;
			const tagRows = props.tags.filter((tag) => stickyIds.value.has(tag.id) || matches(tag.name, search.value)).map((tag) => ({
				tag,
				usage: getUsage(tag.usageCount),
				disable: disabled$2 && tag.id !== deleteId.value && tag.id !== updateId.value,
				update: disabled$2 && tag.id === updateId.value,
				delete: disabled$2 && tag.id === deleteId.value,
				canDelete: rbacStore.hasScope("tag:delete")
			}));
			return isCreateEnabled.value ? [{ create: true }, ...tagRows] : tagRows;
		});
		const onNewNameChange = (name$3) => {
			newName.value = name$3;
		};
		const onSearchChange = (searchValue) => {
			stickyIds.value.clear();
			search.value = searchValue;
		};
		const isHeaderDisabled = () => {
			return props.isLoading || !!(isCreateEnabled.value || updateId.value || deleteId.value);
		};
		const onUpdateEnable = (updateIdValue) => {
			updateId.value = updateIdValue;
		};
		const disableUpdate = () => {
			updateId.value = "";
			newName.value = "";
		};
		const updateTag = () => {
			isSaving.value = true;
			const name$3 = newName.value.trim();
			const onUpdate = (updated) => {
				isSaving.value = false;
				if (updated) {
					stickyIds.value.add(updateId.value);
					disableUpdate();
				}
			};
			emit("update", updateId.value, name$3, onUpdate);
		};
		const onDeleteEnable = (deleteIdValue) => {
			deleteId.value = deleteIdValue;
		};
		const disableDelete = () => {
			deleteId.value = "";
		};
		const deleteTag = () => {
			isSaving.value = true;
			const onDelete = (deleted) => {
				if (deleted) disableDelete();
				isSaving.value = false;
			};
			emit("delete", deleteId.value, onDelete);
		};
		const onCreateEnable = () => {
			createEnabled.value = true;
			newName.value = "";
		};
		const disableCreate = () => {
			createEnabled.value = false;
			emit("disableCreate");
		};
		const createTag = () => {
			isSaving.value = true;
			const name$3 = newName.value.trim();
			const onCreate = (created) => {
				if (created) {
					stickyIds.value.add(created.id);
					disableCreate();
				}
				isSaving.value = false;
			};
			emit("create", name$3, onCreate);
		};
		const applyOperation = () => {
			if (isSaving.value) return;
			else if (isCreateEnabled.value) createTag();
			else if (updateId.value) updateTag();
			else if (deleteId.value) deleteTag();
		};
		const cancelOperation = () => {
			if (isSaving.value) return;
			else if (isCreateEnabled.value) disableCreate();
			else if (updateId.value) disableUpdate();
			else if (deleteId.value) disableDelete();
		};
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { onKeyup: [withKeys(applyOperation, ["enter"]), withKeys(cancelOperation, ["esc"])] }, [createVNode(TagsTableHeader_default, {
				search: search.value,
				disabled: isHeaderDisabled(),
				onSearchChange,
				onCreateEnable
			}, null, 8, ["search", "disabled"]), createVNode(TagsTable_default, {
				ref: "tagsTable",
				rows: rows.value,
				"is-loading": __props.isLoading,
				"is-saving": isSaving.value,
				"new-name": newName.value,
				"usage-column-title-locale-key": __props.usageColumnTitleLocaleKey,
				"data-test-id": "tags-table",
				onNewNameChange,
				onUpdateEnable,
				onDeleteEnable,
				onCancelOperation: cancelOperation,
				onApplyOperation: applyOperation
			}, null, 8, [
				"rows",
				"is-loading",
				"is-saving",
				"new-name",
				"usage-column-title-locale-key"
			])], 32);
		};
	}
});
var _hoisted_1$17 = { class: "mb-s" };
var _hoisted_2$5 = { class: "description" };
var NoTagsView_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "NoTagsView",
	props: {
		titleLocaleKey: { default: "noTagsView.readyToOrganizeYourWorkflows" },
		descriptionLocaleKey: { default: "noTagsView.withWorkflowTagsYouReFree" },
		createLocaleKey: { default: "noTagsView.createTag" }
	},
	setup(__props) {
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { class: normalizeClass(_ctx.$style.container) }, [createVNode(unref(ElCol), {
				class: "notags",
				span: 16
			}, {
				default: withCtx(() => [_cache[1] || (_cache[1] = createBaseVNode("div", { class: "icon" }, "", -1)), createBaseVNode("div", { class: normalizeClass(_ctx.$style.content) }, [
					createBaseVNode("div", _hoisted_1$17, [createVNode(unref(N8nHeading_default), { size: "large" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText(__props.titleLocaleKey)), 1)]),
						_: 1
					})]),
					createBaseVNode("div", _hoisted_2$5, toDisplayString(unref(i18n$2).baseText(__props.descriptionLocaleKey)), 1),
					createVNode(unref(N8nButton_default), {
						label: unref(i18n$2).baseText(`${__props.createLocaleKey}`),
						size: "large",
						onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("enableCreate"))
					}, null, 8, ["label"])
				], 2)]),
				_: 1
			})], 2);
		};
	}
});
var NoTagsView_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_15m14_125",
	content: "_content_15m14_132"
};
var NoTagsView_default = /* @__PURE__ */ __plugin_vue_export_helper_default(NoTagsView_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": NoTagsView_vue_vue_type_style_index_0_lang_module_default }], ["__scopeId", "data-v-d999c057"]]);
var TagsManager_default = /* @__PURE__ */ defineComponent({
	__name: "TagsManager",
	props: {
		modalKey: {},
		usageLocaleKey: { default: "tagsView.inUse" },
		usageColumnTitleLocaleKey: { default: "tagsTable.usage" },
		titleLocaleKey: { default: "tagsManager.manageTags" },
		noTagsTitleLocaleKey: { default: "noTagsView.readyToOrganizeYourWorkflows" },
		noTagsDescriptionLocaleKey: { default: "noTagsView.withWorkflowTagsYouReFree" },
		noTagsCreateLocaleKey: { default: "noTagsView.createTag" },
		tags: {},
		isLoading: { type: Boolean },
		onFetchTags: {},
		onCreateTag: {},
		onUpdateTag: {},
		onDeleteTag: {}
	},
	emits: ["update:tags"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const tagIds = ref(props.tags.map((tag) => tag.id));
		const isCreating = ref(false);
		const modalBus = createEventBus();
		const tags = computed(() => tagIds.value.map((tagId) => props.tags.find((tag) => tag.id === tagId)).filter((tag) => Boolean(tag)));
		const hasTags = computed(() => tags.value.length > 0);
		const i18n$2 = useI18n();
		onMounted(() => {
			props.onFetchTags();
		});
		function onEnableCreate() {
			isCreating.value = true;
		}
		function onDisableCreate() {
			isCreating.value = false;
		}
		async function onCreate(name$3, createCallback) {
			try {
				if (!name$3) throw new Error(i18n$2.baseText("tagsManager.tagNameCannotBeEmpty"));
				const newTag = await props.onCreateTag(name$3);
				tagIds.value = [newTag.id, ...tagIds.value];
				emit("update:tags", [...props.tags, newTag]);
				createCallback(newTag);
			} catch (error$2) {
				createCallback(null, error$2);
			}
		}
		async function onUpdate(id, name$3, updateCallback) {
			const tag = props.tags.find((t) => t.id === id);
			if (!tag) {
				updateCallback(false, /* @__PURE__ */ new Error("Tag not found"));
				return;
			}
			const oldName = tag.name;
			try {
				if (!name$3) throw new Error(i18n$2.baseText("tagsManager.tagNameCannotBeEmpty"));
				if (name$3 === oldName) {
					updateCallback(true);
					return;
				}
				const updatedTag = await props.onUpdateTag(id, name$3);
				emit("update:tags", props.tags.map((t) => t.id === id ? updatedTag : t));
				updateCallback(true);
			} catch (error$2) {
				updateCallback(false, error$2);
			}
		}
		async function onDelete(id, deleteCallback) {
			if (!props.tags.find((t) => t.id === id)) {
				deleteCallback(false, /* @__PURE__ */ new Error("Tag not found"));
				return;
			}
			try {
				const deleted = await props.onDeleteTag(id);
				if (!deleted) throw new Error(i18n$2.baseText("tagsManager.couldNotDeleteTag"));
				tagIds.value = tagIds.value.filter((tagId) => tagId !== id);
				emit("update:tags", props.tags.filter((t) => t.id !== id));
				deleteCallback(deleted);
			} catch (error$2) {
				deleteCallback(false, error$2);
			}
		}
		function onEnter() {
			if (props.isLoading) return;
			else if (!hasTags.value) onEnableCreate();
			else modalBus.emit("close");
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				title: unref(i18n$2).baseText(__props.titleLocaleKey),
				name: __props.modalKey,
				"event-bus": unref(modalBus),
				"min-width": "620px",
				"min-height": "420px",
				onEnter
			}, {
				content: withCtx(() => [createVNode(unref(ElRow), null, {
					default: withCtx(() => [hasTags.value || isCreating.value ? (openBlock(), createBlock(TagsView_default, {
						key: 0,
						"is-loading": __props.isLoading,
						tags: tags.value,
						"usage-locale-key": __props.usageLocaleKey,
						"usage-column-title-locale-key": __props.usageColumnTitleLocaleKey,
						onCreate,
						onUpdate,
						onDelete,
						onDisableCreate
					}, null, 8, [
						"is-loading",
						"tags",
						"usage-locale-key",
						"usage-column-title-locale-key"
					])) : (openBlock(), createBlock(NoTagsView_default, {
						key: 1,
						"title-locale-key": __props.noTagsTitleLocaleKey,
						"description-locale-key": __props.noTagsDescriptionLocaleKey,
						"create-locale-key": __props.noTagsCreateLocaleKey,
						onEnableCreate
					}, null, 8, [
						"title-locale-key",
						"description-locale-key",
						"create-locale-key"
					]))]),
					_: 1
				})]),
				footer: withCtx(({ close }) => [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					label: unref(i18n$2).baseText("tagsManager.done"),
					style: { "margin-left": "auto" },
					onClick: close
				}, null, 8, ["label", "onClick"])]),
				_: 1
			}, 8, [
				"title",
				"name",
				"event-bus"
			]);
		};
	}
});
var AnnotationTagsManager_ee_default = /* @__PURE__ */ defineComponent({
	__name: "AnnotationTagsManager.ee",
	setup(__props) {
		const i18n$2 = useI18n();
		const { showError, showMessage } = useToast();
		const tagsStore = useAnnotationTagsStore();
		const tags = computed(() => tagsStore.allTags);
		const isLoading = computed(() => tagsStore.isLoading);
		async function fetchTags() {
			try {
				await tagsStore.fetchAll({
					force: true,
					withUsageCount: true
				});
			} catch (error$2) {
				showError(error$2, i18n$2.baseText("tagsManager.showError.onFetch.title"), i18n$2.baseText("tagsManager.showError.onFetch.message"));
			}
		}
		async function createTag(name$3) {
			try {
				return await tagsStore.create(name$3);
			} catch (error$2) {
				const escapedName = escape(name$3);
				showError(error$2, i18n$2.baseText("tagsManager.showError.onCreate.title"), i18n$2.baseText("tagsManager.showError.onCreate.message", { interpolate: { escapedName } }) + ":");
				throw error$2;
			}
		}
		async function updateTag(id, name$3) {
			try {
				const updatedTag = await tagsStore.rename({
					id,
					name: name$3
				});
				showMessage({
					title: i18n$2.baseText("tagsManager.showMessage.onUpdate.title"),
					type: "success"
				});
				return updatedTag;
			} catch (error$2) {
				const escapedName = escape(name$3);
				showError(error$2, i18n$2.baseText("tagsManager.showError.onUpdate.title"), i18n$2.baseText("tagsManager.showError.onUpdate.message", { interpolate: { escapedName } }) + ":");
				throw error$2;
			}
		}
		async function deleteTag(id) {
			try {
				const deleted = await tagsStore.deleteTagById(id);
				if (!deleted) throw new Error(i18n$2.baseText("tagsManager.couldNotDeleteTag"));
				showMessage({
					title: i18n$2.baseText("tagsManager.showMessage.onDelete.title"),
					type: "success"
				});
				return deleted;
			} catch (error$2) {
				const tag = tagsStore.tagsById[id];
				const escapedName = escape(tag?.name || "");
				showError(error$2, i18n$2.baseText("tagsManager.showError.onDelete.title"), i18n$2.baseText("tagsManager.showError.onDelete.message", { interpolate: { escapedName } }) + ":");
				throw error$2;
			}
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(TagsManager_default, {
				"title-locale-key": "annotationTagsManager.manageTags",
				"usage-locale-key": "annotationTagsView.inUse",
				"usage-column-title-locale-key": "annotationTagsView.usage",
				"no-tags-title-locale-key": "noAnnotationTagsView.title",
				"no-tags-description-locale-key": "noAnnotationTagsView.description",
				"modal-key": unref(ANNOTATION_TAGS_MANAGER_MODAL_KEY),
				tags: tags.value,
				"is-loading": isLoading.value,
				"on-fetch-tags": fetchTags,
				"on-create-tag": createTag,
				"on-update-tag": updateTag,
				"on-delete-tag": deleteTag
			}, null, 8, [
				"modal-key",
				"tags",
				"is-loading"
			]);
		};
	}
});
var WorkflowTagsManager_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowTagsManager",
	setup(__props) {
		const i18n$2 = useI18n();
		const { showError, showMessage } = useToast();
		const tagsStore = useTagsStore();
		const tags = computed(() => tagsStore.allTags);
		const isLoading = computed(() => tagsStore.isLoading);
		async function fetchTags() {
			try {
				await tagsStore.fetchAll({
					force: true,
					withUsageCount: true
				});
			} catch (error$2) {
				showError(error$2, i18n$2.baseText("tagsManager.showError.onFetch.title"), i18n$2.baseText("tagsManager.showError.onFetch.message"));
			}
		}
		async function createTag(name$3) {
			try {
				return await tagsStore.create(name$3);
			} catch (error$2) {
				const escapedName = escape(name$3);
				showError(error$2, i18n$2.baseText("tagsManager.showError.onCreate.title"), i18n$2.baseText("tagsManager.showError.onCreate.message", { interpolate: { escapedName } }) + ":");
				throw error$2;
			}
		}
		async function updateTag(id, name$3) {
			try {
				const updatedTag = await tagsStore.rename({
					id,
					name: name$3
				});
				showMessage({
					title: i18n$2.baseText("tagsManager.showMessage.onUpdate.title"),
					type: "success"
				});
				return updatedTag;
			} catch (error$2) {
				const escapedName = escape(name$3);
				showError(error$2, i18n$2.baseText("tagsManager.showError.onUpdate.title"), i18n$2.baseText("tagsManager.showError.onUpdate.message", { interpolate: { escapedName } }) + ":");
				throw error$2;
			}
		}
		async function deleteTag(id) {
			try {
				const deleted = await tagsStore.deleteTagById(id);
				if (!deleted) throw new Error(i18n$2.baseText("tagsManager.couldNotDeleteTag"));
				showMessage({
					title: i18n$2.baseText("tagsManager.showMessage.onDelete.title"),
					type: "success"
				});
				return deleted;
			} catch (error$2) {
				const tag = tagsStore.tagsById[id];
				const escapedName = escape(tag?.name || "");
				showError(error$2, i18n$2.baseText("tagsManager.showError.onDelete.title"), i18n$2.baseText("tagsManager.showError.onDelete.message", { interpolate: { escapedName } }) + ":");
				throw error$2;
			}
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(TagsManager_default, {
				"modal-key": unref(TAGS_MANAGER_MODAL_KEY),
				tags: tags.value,
				"is-loading": isLoading.value,
				"on-fetch-tags": fetchTags,
				"on-create-tag": createTag,
				"on-update-tag": updateTag,
				"on-delete-tag": deleteTag
			}, null, 8, [
				"modal-key",
				"tags",
				"is-loading"
			]);
		};
	}
});
var import_dateformat = /* @__PURE__ */ __toESM(require_dateformat(), 1);
var _hoisted_1$16 = ["data-test-id"];
var WhatsNewModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WhatsNewModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const articleRefs = ref({});
		const pageRedirectionHelper = usePageRedirectionHelper();
		const i18n$2 = useI18n();
		const modalBus = createEventBus();
		const versionsStore = useVersionsStore();
		const uiStore = useUIStore();
		const usersStore = useUsersStore();
		const telemetry$1 = useTelemetry();
		const nextVersions = computed(() => versionsStore.nextVersions);
		const openUpdatesPanel = () => {
			uiStore.openModal(VERSIONS_MODAL_KEY);
		};
		const onUpdateClick = async () => {
			telemetry$1.track("User clicked on update button", { source: "whats-new-modal" });
			await pageRedirectionHelper.goToVersions();
		};
		const scrollToItem = async (articleId) => {
			await nextTick(() => {
				const target = articleRefs.value[articleId];
				if (!target) return;
				target.scrollIntoView({
					behavior: "smooth",
					block: "start"
				});
			});
		};
		modalBus.on("opened", () => {
			versionsStore.closeWhatsNewCallout();
			for (const item$2 of versionsStore.whatsNewArticles) if (!versionsStore.isWhatsNewArticleRead(item$2.id)) versionsStore.setWhatsNewArticleRead(item$2.id);
			scrollToItem(props.data.articleId);
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				"max-width": "860px",
				"max-height": "85vh",
				"event-bus": unref(modalBus),
				name: unref(WHATS_NEW_MODAL_KEY),
				center: true,
				"show-close": false
			}, {
				header: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.header) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.row) }, [createVNode(unref(N8nIcon_default), {
					icon: "bell",
					color: "primary",
					size: "large"
				}), createBaseVNode("div", { class: normalizeClass(_ctx.$style.column) }, [createVNode(unref(N8nHeading_default), { size: "xlarge" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(versionsStore).whatsNew.title), 1)]),
					_: 1
				}), createBaseVNode("div", { class: normalizeClass(_ctx.$style.row) }, [createVNode(unref(N8nHeading_default), {
					size: "medium",
					color: "text-light"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(import_dateformat.default)(unref(versionsStore).latestVersion.createdAt, `d mmmm, yyyy`)), 1)]),
					_: 1
				}), unref(versionsStore).hasVersionUpdates ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [createVNode(unref(N8nText_default), {
					size: "medium",
					class: normalizeClass(_ctx.$style.text),
					color: "text-base"
				}, {
					default: withCtx(() => [..._cache[0] || (_cache[0] = [createTextVNode("", -1)])]),
					_: 1
				}, 8, ["class"]), createVNode(unref(N8nLink_default), {
					size: "medium",
					theme: "primary",
					"data-test-id": "whats-new-modal-next-versions-link",
					onClick: openUpdatesPanel
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("whatsNew.versionsBehind", { interpolate: { count: nextVersions.value.length > 99 ? "99+" : nextVersions.value.length } })), 1)]),
					_: 1
				})], 64)) : createCommentVNode("", true)], 2)], 2)], 2), unref(versionsStore).hasVersionUpdates ? (openBlock(), createBlock(unref(N8nTooltip_default), {
					key: 0,
					disabled: unref(usersStore).canUserUpdateVersion,
					content: unref(i18n$2).baseText("whatsNew.updateNudgeTooltip"),
					placement: "bottom"
				}, {
					default: withCtx(() => [createVNode(unref(N8nButton_default), {
						size: "large",
						label: unref(i18n$2).baseText("whatsNew.update"),
						disabled: !unref(usersStore).canUserUpdateVersion,
						"data-test-id": "whats-new-modal-update-button",
						onClick: onUpdateClick
					}, null, 8, ["label", "disabled"])]),
					_: 1
				}, 8, ["disabled", "content"])) : createCommentVNode("", true)], 2)]),
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.container) }, [
					unref(versionsStore).hasSignificantUpdates ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 0,
						class: normalizeClass(_ctx.$style.callout),
						theme: "warning"
					}, {
						default: withCtx(() => [renderSlot(_ctx.$slots, "callout-message", {}, () => [createVNode(unref(N8nText_default), { size: "small" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("whatsNew.updateAvailable", { interpolate: {
								currentVersion: unref(versionsStore).currentVersion?.name ?? "unknown",
								latestVersion: unref(versionsStore).latestVersion?.name,
								count: nextVersions.value.length
							} })) + " ", 1), createVNode(unref(N8nLink_default), {
								size: "small",
								underline: true,
								theme: "primary",
								to: unref(RELEASE_NOTES_URL),
								target: "_blank"
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("whatsNew.updateAvailable.changelogLink")), 1)]),
								_: 1
							}, 8, ["to"])]),
							_: 1
						})])]),
						_: 3
					}, 8, ["class"])) : createCommentVNode("", true),
					(openBlock(true), createElementBlock(Fragment, null, renderList(unref(versionsStore).whatsNewArticles, (item$2) => {
						return openBlock(), createElementBlock("div", {
							ref_for: true,
							ref: (el) => {
								if (el) articleRefs.value[item$2.id] = el;
							},
							key: item$2.id,
							class: normalizeClass(_ctx.$style.article),
							"data-test-id": `whats-new-item-${item$2.id}`
						}, [createVNode(unref(N8nHeading_default), {
							bold: "",
							tag: "h2",
							size: "xlarge"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(item$2.title), 1)]),
							_: 2
						}, 1024), createVNode(unref(N8nMarkdown_default), {
							content: item$2.content,
							class: normalizeClass(_ctx.$style.markdown),
							options: {
								markdown: {
									html: true,
									linkify: true,
									typographer: true,
									breaks: true
								},
								tasklists: { enabled: false },
								linkAttributes: { attrs: {
									target: "_blank",
									rel: "noopener"
								} },
								youtube: {
									width: "100%",
									height: "315"
								}
							}
						}, null, 8, ["content", "class"])], 10, _hoisted_1$16);
					}), 128)),
					createVNode(unref(N8nMarkdown_default), {
						content: unref(versionsStore).whatsNew.footer,
						class: normalizeClass(_ctx.$style.markdown),
						options: {
							markdown: {
								html: true,
								linkify: true,
								typographer: true,
								breaks: true
							},
							tasklists: { enabled: false },
							linkAttributes: { attrs: {
								target: "_blank",
								rel: "noopener"
							} },
							youtube: {
								width: "100%",
								height: "315"
							}
						}
					}, null, 8, ["content", "class"])
				], 2)]),
				_: 3
			}, 8, ["event-bus", "name"]);
		};
	}
});
var WhatsNewModal_vue_vue_type_style_index_0_lang_module_default = {
	header: "_header_1bhk4_125",
	column: "_column_1bhk4_137",
	row: "_row_1bhk4_143",
	container: "_container_1bhk4_150",
	article: "_article_1bhk4_154",
	markdown: "_markdown_1bhk4_158"
};
var WhatsNewModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WhatsNewModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WhatsNewModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$15 = { "data-test-id": "conflicting-webhook-path" };
var WorkflowActivationConflictingWebhookModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowActivationConflictingWebhookModal",
	props: { data: {} },
	setup(__props) {
		const modalBus = createEventBus();
		const uiStore = useUIStore();
		const rootStore = useRootStore();
		const { data } = __props;
		const webhookUrl = computed(() => {
			return rootStore.webhookUrl;
		});
		const webhookTypeUi = computed(() => {
			const suggestionBase = " and activate this one, or ";
			if (data.triggerType === "n8n-nodes-base.formTrigger") return {
				title: "Form",
				callout: "form trigger",
				suggestion: suggestionBase + "adjust the following URL path in either workflow:"
			};
			if (data.triggerType === "@n8n/n8n-nodes-langchain.chatTrigger") return {
				title: "Chat",
				callout: "chat trigger",
				suggestion: suggestionBase + "insert a new Chat Trigger node in either workflow:"
			};
			if (data.triggerType === "n8n-nodes-base.webhook") return {
				title: "Webhook",
				callout: "webhook trigger",
				suggestion: suggestionBase + "adjust the following URL path in either workflow:"
			};
			return {
				title: "Trigger",
				callout: "trigger",
				suggestion: suggestionBase + "insert a new trigger node of the same type in either workflow:"
			};
		});
		const workflowUrl = computed(() => {
			return rootStore.urlBaseEditor + "workflow/" + data.workflowId;
		});
		const onClick = async () => {
			uiStore.closeModal(WORKFLOW_ACTIVATION_CONFLICTING_WEBHOOK_MODAL_KEY);
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "540px",
				name: unref(WORKFLOW_ACTIVATION_CONFLICTING_WEBHOOK_MODAL_KEY),
				title: `Conflicting ${webhookTypeUi.value.title} Path`,
				"event-bus": unref(modalBus),
				center: true
			}, {
				content: withCtx(() => [
					createVNode(unref(N8nCallout_default), {
						theme: "danger",
						"data-test-id": "conflicting-webhook-callout"
					}, {
						default: withCtx(() => [createTextVNode(" A " + toDisplayString(webhookTypeUi.value.callout) + " '" + toDisplayString(unref(data).node) + "' in the workflow '" + toDisplayString(unref(data).workflowName) + "' uses a conflicting URL path, so this workflow cannot be activated ", 1)]),
						_: 1
					}),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.container) }, [createBaseVNode("div", null, [
						createVNode(unref(N8nText_default), { color: "text-base" }, {
							default: withCtx(() => [..._cache[0] || (_cache[0] = [createTextVNode(" You can deactivate ", -1)])]),
							_: 1
						}),
						createVNode(unref(N8nLink_default), {
							to: workflowUrl.value,
							underline: true
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(data).workflowName), 1)]),
							_: 1
						}, 8, ["to"]),
						_cache[1] || (_cache[1] = createTextVNode(" " + toDisplayString(" ") + " ", -1)),
						createVNode(unref(N8nText_default), {
							color: "text-base",
							"data-test-id": "conflicting-webhook-suggestion"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(webhookTypeUi.value.suggestion), 1)]),
							_: 1
						})
					])], 2),
					createBaseVNode("div", _hoisted_1$15, [createVNode(unref(N8nText_default), { color: "text-light" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(webhookUrl.value) + "/", 1)]),
						_: 1
					}), createVNode(unref(N8nText_default), {
						color: "text-dark",
						bold: ""
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(data).webhookPath), 1)]),
						_: 1
					})])
				]),
				footer: withCtx(() => [createVNode(unref(N8nButton_default), {
					label: "Done",
					size: "medium",
					float: "right",
					"data-test-id": "close-button",
					onClick
				})]),
				_: 1
			}, 8, [
				"name",
				"title",
				"event-bus"
			]);
		};
	}
});
var WorkflowActivationConflictingWebhookModal_vue_vue_type_style_index_0_lang_module_default = { container: "_container_1lcly_125" };
var WorkflowActivationConflictingWebhookModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowActivationConflictingWebhookModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowActivationConflictingWebhookModal_vue_vue_type_style_index_0_lang_module_default }]]);
var DEFAULT_WORKFLOW_NAME = "My Sub-workflow";
var WorkflowExtractionNameModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowExtractionNameModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const toast = useToast();
		const modalBus = createEventBus();
		const workflowExtraction = useWorkflowExtraction();
		const workflowName = ref(DEFAULT_WORKFLOW_NAME);
		const initiatedExtraction = ref(false);
		const workflowNameOrDefault = computed(() => {
			if (workflowName.value) return workflowName.value;
			return DEFAULT_WORKFLOW_NAME;
		});
		const onSubmit = async () => {
			if (initiatedExtraction.value) return;
			initiatedExtraction.value = true;
			const { selection, subGraph } = props.data;
			try {
				await workflowExtraction.extractNodesIntoSubworkflow(selection, subGraph, workflowNameOrDefault.value);
			} catch (e) {
				toast.showError(e, i18n$2.baseText("workflowExtraction.error.failure"));
			} finally {
				modalBus.emit("close");
			}
		};
		const inputRef = ref(null);
		onMounted(() => {
			setTimeout(() => {
				inputRef.value?.inputRef?.select();
				inputRef.value?.inputRef?.focus();
			});
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				"max-width": "540px",
				title: unref(i18n$2).baseText("workflowExtraction.modal.description", { adjustToNumber: props.data.subGraph.length }),
				"event-bus": unref(modalBus),
				name: unref(WORKFLOW_EXTRACTION_NAME_MODAL_KEY),
				center: true,
				"close-on-click-modal": false
			}, {
				content: withCtx(() => [createVNode(unref(N8nFormInput_default), {
					ref_key: "inputRef",
					ref: inputRef,
					modelValue: workflowName.value,
					"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => workflowName.value = $event),
					name: "key",
					label: "",
					"max-length": "128",
					"focus-initially": "",
					onEnter: onSubmit
				}, null, 8, ["modelValue"])]),
				footer: withCtx(({ close }) => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					label: unref(i18n$2).baseText("generic.cancel"),
					float: "right",
					"data-test-id": "cancel-button",
					onClick: close
				}, null, 8, ["label", "onClick"]), createVNode(unref(N8nButton_default), {
					label: unref(i18n$2).baseText("generic.confirm"),
					float: "right",
					disabled: !workflowName.value,
					"data-test-id": "submit-button",
					onClick: onSubmit
				}, null, 8, ["label", "disabled"])], 2)]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var WorkflowExtractionNameModal_vue_vue_type_style_index_0_lang_module_default = {
	row: "_row_5zd7s_125",
	container: "_container_5zd7s_129",
	description: "_description_5zd7s_133",
	footer: "_footer_5zd7s_138"
};
var WorkflowExtractionNameModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowExtractionNameModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowExtractionNameModal_vue_vue_type_style_index_0_lang_module_default }]]);
var WorkflowHistoryVersionRestoreModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowHistoryVersionRestoreModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const uiStore = useUIStore();
		const closeModal = () => {
			uiStore.closeModal(props.modalName);
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "500px",
				name: props.modalName,
				"before-close": props.data.beforeClose
			}, {
				header: withCtx(() => [createVNode(unref(N8nHeading_default), {
					tag: "h2",
					size: "xlarge"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowHistory.action.restore.modal.title")), 1)]),
					_: 1
				})]),
				content: withCtx(() => [createBaseVNode("div", null, [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [
						createVNode(unref(I18nT), {
							keypath: "workflowHistory.action.restore.modal.subtitle",
							tag: "span",
							scope: "global"
						}, {
							date: withCtx(() => [createBaseVNode("strong", null, toDisplayString(props.data.formattedCreatedAt), 1)]),
							_: 1
						}),
						_cache[0] || (_cache[0] = createBaseVNode("br", null, null, -1)),
						_cache[1] || (_cache[1] = createBaseVNode("br", null, null, -1)),
						props.data.isWorkflowActivated ? (openBlock(), createBlock(unref(I18nT), {
							key: 0,
							keypath: "workflowHistory.action.restore.modal.publishedNote",
							tag: "span",
							scope: "global"
						})) : createCommentVNode("", true)
					]),
					_: 1
				})])]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(props.data.buttons, (button$2, index) => {
					return openBlock(), createBlock(unref(N8nButton_default), {
						key: index,
						size: "medium",
						variant: button$2.variant,
						onClick: () => {
							button$2.action();
							closeModal();
						}
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(button$2.text), 1)]),
						_: 2
					}, 1032, ["variant", "onClick"]);
				}), 128))], 2)]),
				_: 1
			}, 8, ["name", "before-close"]);
		};
	}
});
var WorkflowHistoryVersionRestoreModal_vue_vue_type_style_index_0_lang_module_default = { footer: "_footer_1xtox_125" };
var WorkflowHistoryVersionRestoreModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowHistoryVersionRestoreModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowHistoryVersionRestoreModal_vue_vue_type_style_index_0_lang_module_default }]]);
var WorkflowHistoryVersionUnpublishModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowHistoryVersionUnpublishModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const uiStore = useUIStore();
		const unpublishing = ref(false);
		const closeModal = () => {
			uiStore.closeModal(props.modalName);
		};
		const onCancel = () => {
			props.data.eventBus.emit("cancel");
			closeModal();
		};
		const onUnpublish = () => {
			unpublishing.value = true;
			props.data.eventBus.emit("unpublish");
		};
		onBeforeUnmount(() => {
			unpublishing.value = false;
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "500px",
				name: props.modalName,
				"before-close": onCancel
			}, {
				header: withCtx(() => [createVNode(unref(N8nHeading_default), {
					tag: "h2",
					size: "xlarge"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowHistory.action.unpublish.modal.title", { interpolate: { versionName: props.data.versionName || "" } })), 1)]),
					_: 1
				})]),
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.content) }, [createVNode(unref(N8nIcon_default), {
					class: normalizeClass(_ctx.$style.icon),
					icon: "triangle-alert",
					color: "warning",
					size: "xlarge"
				}, null, 8, ["class"]), createVNode(unref(N8nText_default), { size: "medium" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowHistory.action.unpublish.modal.description", { interpolate: { versionName: props.data.versionName || "" } })), 1)]),
					_: 1
				})], 2)]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					size: "medium",
					disabled: unpublishing.value,
					onClick: onCancel
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.cancel")), 1)]),
					_: 1
				}, 8, ["disabled"]), createVNode(unref(N8nButton_default), {
					variant: "solid",
					size: "medium",
					loading: unpublishing.value,
					onClick: onUnpublish
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowHistory.action.unpublish.modal.button.unpublish")), 1)]),
					_: 1
				}, 8, ["loading"])], 2)]),
				_: 1
			}, 8, ["name"]);
		};
	}
});
var WorkflowHistoryVersionUnpublishModal_vue_vue_type_style_index_0_lang_module_default = {
	footer: "_footer_1hiim_125",
	content: "_content_1hiim_134",
	icon: "_icon_1hiim_141"
};
var WorkflowHistoryVersionUnpublishModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowHistoryVersionUnpublishModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowHistoryVersionUnpublishModal_vue_vue_type_style_index_0_lang_module_default }]]);
var WorkflowVersionForm_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowVersionForm",
	props: /* @__PURE__ */ mergeModels({
		disabled: { type: Boolean },
		versionNameTestId: {},
		descriptionTestId: {}
	}, {
		"versionName": { required: true },
		"versionNameModifiers": {},
		"description": { required: true },
		"descriptionModifiers": {}
	}),
	emits: /* @__PURE__ */ mergeModels(["submit"], ["update:versionName", "update:description"]),
	setup(__props, { expose: __expose, emit: __emit }) {
		const versionName = useModel(__props, "versionName");
		const description$8 = useModel(__props, "description");
		const nameInputRef = useTemplateRef("nameInput");
		const i18n$2 = useI18n();
		const emit = __emit;
		const focusInput = () => {
			nameInputRef.value?.select();
		};
		const handleEnterKey = () => {
			emit("submit");
		};
		__expose({ focusInput });
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { class: normalizeClass(_ctx.$style.formContainer) }, [createVNode(unref(N8nInputLabel_default), {
				"input-name": "workflow-version-name",
				label: unref(i18n$2).baseText("workflows.publishModal.versionNameLabel"),
				required: true,
				class: normalizeClass(_ctx.$style.inputWrapper)
			}, {
				default: withCtx(() => [createVNode(unref(Input_default), {
					id: "workflow-version-name",
					ref: "nameInput",
					modelValue: versionName.value,
					"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => versionName.value = $event),
					disabled: __props.disabled,
					size: "large",
					maxlength: unref(128),
					"data-test-id": __props.versionNameTestId,
					onKeydown: withKeys(handleEnterKey, ["enter"])
				}, null, 8, [
					"modelValue",
					"disabled",
					"maxlength",
					"data-test-id"
				])]),
				_: 1
			}, 8, ["label", "class"]), createVNode(unref(N8nInputLabel_default), {
				"input-name": "workflow-version-description",
				label: unref(i18n$2).baseText("workflows.publishModal.descriptionPlaceholder")
			}, {
				default: withCtx(() => [createVNode(unref(Input_default), {
					id: "workflow-version-description",
					modelValue: description$8.value,
					"onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => description$8.value = $event),
					type: "textarea",
					rows: 4,
					disabled: __props.disabled,
					size: "large",
					maxlength: unref(WORKFLOW_VERSION_DESCRIPTION_MAX_LENGTH),
					"data-test-id": __props.descriptionTestId
				}, null, 8, [
					"modelValue",
					"disabled",
					"maxlength",
					"data-test-id"
				])]),
				_: 1
			}, 8, ["label"])], 2);
		};
	}
});
var WorkflowVersionForm_vue_vue_type_style_index_0_lang_module_default = {
	formContainer: "_formContainer_1ibyw_125",
	inputWrapper: "_inputWrapper_1ibyw_131"
};
var WorkflowVersionForm_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowVersionForm_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowVersionForm_vue_vue_type_style_index_0_lang_module_default }]]);
var WorkflowVersionFormModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowVersionFormModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const modalEventBus = createEventBus();
		const uiStore = useUIStore();
		const versionForm = useTemplateRef("versionForm");
		const versionName = ref("");
		const description$8 = ref("");
		const submitting = computed(() => props.data.submitting ?? false);
		function onModalOpened() {
			versionForm.value?.focusInput();
		}
		onMounted(() => {
			if (props.data.versionName) versionName.value = props.data.versionName;
			else if (props.data.versionId) versionName.value = generateVersionName(props.data.versionId);
			if (props.data.description) description$8.value = props.data.description;
			modalEventBus.on("opened", onModalOpened);
		});
		onBeforeUnmount(() => {
			modalEventBus.off("opened", onModalOpened);
		});
		const closeModal = () => {
			uiStore.closeModal(props.modalName);
		};
		const onCancel = () => {
			props.data.eventBus.emit("cancel");
			closeModal();
		};
		const handleSubmit = () => {
			if (versionName.value.trim().length === 0) return;
			props.data.eventBus.emit("submit", {
				versionId: props.data.versionId,
				name: versionName.value,
				description: description$8.value
			});
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "500px",
				"max-height": "85vh",
				name: __props.modalName,
				"event-bus": unref(modalEventBus),
				center: true,
				"before-close": onCancel
			}, {
				header: withCtx(() => [createVNode(unref(N8nHeading_default), { size: "xlarge" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(__props.data.modalTitle), 1)]),
					_: 1
				})]),
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.content) }, [createVNode(WorkflowVersionForm_default, {
					ref_key: "versionForm",
					ref: versionForm,
					"version-name": versionName.value,
					"onUpdate:versionName": _cache[0] || (_cache[0] = ($event) => versionName.value = $event),
					description: description$8.value,
					"onUpdate:description": _cache[1] || (_cache[1] = ($event) => description$8.value = $event),
					"version-name-test-id": `${__props.modalName}-version-name-input`,
					"description-test-id": `${__props.modalName}-description-input`,
					onSubmit: handleSubmit
				}, null, 8, [
					"version-name",
					"description",
					"version-name-test-id",
					"description-test-id"
				]), createBaseVNode("div", { class: normalizeClass(_ctx.$style.actions) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					disabled: submitting.value,
					label: unref(i18n$2).baseText("generic.cancel"),
					"data-test-id": `${__props.modalName}-cancel-button`,
					onClick: onCancel
				}, null, 8, [
					"disabled",
					"label",
					"data-test-id"
				]), createVNode(unref(N8nButton_default), {
					loading: submitting.value,
					disabled: versionName.value.trim().length === 0,
					label: __props.data.submitButtonLabel,
					"data-test-id": `${__props.modalName}-submit-button`,
					onClick: handleSubmit
				}, null, 8, [
					"loading",
					"disabled",
					"label",
					"data-test-id"
				])], 2)], 2)]),
				_: 1
			}, 8, ["name", "event-bus"]);
		};
	}
});
var WorkflowVersionFormModal_vue_vue_type_style_index_0_lang_module_default = {
	content: "_content_1r5gk_125",
	actions: "_actions_1r5gk_131"
};
var WorkflowVersionFormModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowVersionFormModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowVersionFormModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$14 = { class: "list-option" };
var _hoisted_2$4 = { class: "option-headline" };
var _hoisted_3$2 = { class: "option-description" };
var _hoisted_4$2 = ["textContent"];
var _hoisted_5 = ["disabled"];
var _hoisted_6 = {
	key: 1,
	"data-test-id": "workflow-caller-policy"
};
var _hoisted_7 = ["textContent"];
var _hoisted_8 = ["textContent"];
var _hoisted_9 = ["textContent"];
var _hoisted_10 = ["textContent"];
var _hoisted_11 = ["textContent"];
var _hoisted_12 = ["textContent"];
var _hoisted_13 = ["textContent"];
var _hoisted_14 = ["textContent"];
var _hoisted_15 = {
	key: 2,
	"data-test-id": "workflow-settings-timeout-form"
};
var _hoisted_16 = ["textContent"];
var _hoisted_17 = { for: "availableInMCP" };
var _hoisted_18 = { for: "timeSavedPerExecution" };
var _hoisted_19 = { class: "ignore-key-press-canvas" };
var WorkflowSettings_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowSettings",
	setup(__props) {
		const route = useRoute();
		const i18n$2 = useI18n();
		const externalHooks = useExternalHooks();
		const toast = useToast();
		const modalBus = createEventBus();
		const telemetry$1 = useTelemetry();
		const { isEligibleForMcpAccess, trackMcpAccessEnabledForWorkflow, mcpTriggerMap } = useMcp();
		const { registerCustomAction, unregisterCustomAction } = useGlobalLinkActions();
		const { isEnabled: isCredentialResolverEnabled } = useDynamicCredentials();
		const rootStore = useRootStore();
		const settingsStore = useSettingsStore();
		const sourceControlStore = useSourceControlStore();
		const collaborationStore = useCollaborationStore();
		const workflowsStore = useWorkflowsStore();
		const workflowsListStore = useWorkflowsListStore();
		const workflowState = injectWorkflowState();
		const workflowsEEStore = useWorkflowsEEStore();
		const nodeCreatorStore = useNodeCreatorStore();
		const posthogStore = usePostHog();
		const isLoading = ref(true);
		const workflowCallerPolicyOptions = ref([]);
		const saveDataErrorExecutionOptions = ref([]);
		const saveDataSuccessExecutionOptions = ref([]);
		const saveExecutionProgressOptions = ref([]);
		const saveManualOptions = ref([]);
		const executionLogicAllOptions = ref([
			{
				key: "v0",
				value: i18n$2.baseText("workflowSettings.executionLogic.v0.title"),
				description: i18n$2.baseText("workflowSettings.executionLogic.v0.description")
			},
			{
				key: "v1",
				value: i18n$2.baseText("workflowSettings.executionLogic.v1.title"),
				description: i18n$2.baseText("workflowSettings.executionLogic.v1.description")
			},
			{
				key: "v2",
				value: i18n$2.baseText("workflowSettings.executionLogic.v2.title"),
				description: i18n$2.baseText("workflowSettings.executionLogic.v2.description")
			}
		]);
		const timezones = ref([]);
		const workflowSettings = ref({});
		const workflows = ref([]);
		const credentialResolverSelectRef = ref(null);
		const originalBinaryMode = ref(void 0);
		const { resolvers: credentialResolvers, fetchResolvers: loadCredentialResolvers, openCreateModal, openEditModal } = useCredentialResolvers();
		const executionTimeout = ref(0);
		const maxExecutionTimeout = ref(0);
		const timeoutHMS = ref({
			hours: 0,
			minutes: 0,
			seconds: 0
		});
		const helpTexts = computed(() => ({
			errorWorkflow: i18n$2.baseText("workflowSettings.helpTexts.errorWorkflow"),
			timezone: i18n$2.baseText("workflowSettings.helpTexts.timezone"),
			credentialResolver: i18n$2.baseText("workflowSettings.helpTexts.credentialResolver"),
			saveDataErrorExecution: i18n$2.baseText("workflowSettings.helpTexts.saveDataErrorExecution"),
			saveDataSuccessExecution: i18n$2.baseText("workflowSettings.helpTexts.saveDataSuccessExecution"),
			saveExecutionProgress: i18n$2.baseText("workflowSettings.helpTexts.saveExecutionProgress"),
			saveManualExecutions: i18n$2.baseText("workflowSettings.helpTexts.saveManualExecutions"),
			executionTimeoutToggle: i18n$2.baseText("workflowSettings.helpTexts.executionTimeoutToggle"),
			executionTimeout: i18n$2.baseText("workflowSettings.helpTexts.executionTimeout"),
			workflowCallerPolicy: i18n$2.baseText("workflowSettings.helpTexts.workflowCallerPolicy"),
			workflowCallerIds: i18n$2.baseText("workflowSettings.helpTexts.workflowCallerIds")
		}));
		const defaultValues = ref({
			timezone: "America/New_York",
			saveDataErrorExecution: "all",
			saveDataSuccessExecution: "all",
			saveExecutionProgress: false,
			saveManualExecutions: false,
			workflowCallerPolicy: "workflowsFromSameOwner",
			availableInMCP: false
		});
		const executionLogic = computed(() => {
			if (workflowSettings.value.binaryMode === "combined") return "v2";
			return workflowSettings.value.executionOrder || "v0";
		});
		const isMCPEnabled = computed(() => settingsStore.isModuleActive("mcp") && settingsStore.moduleSettings.mcp?.mcpAccessEnabled);
		const readOnlyEnv = computed(() => sourceControlStore.preferences.branchReadOnly || collaborationStore.shouldBeReadOnly);
		const workflowName = computed(() => workflowsStore.workflowName);
		const workflowId = computed(() => workflowsStore.workflowId);
		const workflow = computed(() => workflowsListStore.getWorkflowById(workflowId.value));
		const isSharingEnabled = computed(() => settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.Sharing]);
		const workflowOwnerName = computed(() => {
			const fallback = i18n$2.baseText("workflowSettings.callerPolicy.options.workflowsFromSameProject");
			return workflowsEEStore.getWorkflowOwnerName(`${workflowId.value}`, fallback);
		});
		const workflowPermissions = computed(() => getResourcePermissions(workflow.value?.scopes).workflow);
		const mcpToggleDisabled = computed(() => {
			return readOnlyEnv.value || !workflowPermissions.value.update || !isEligibleForMcp.value;
		});
		const mcpToggleTooltip = computed(() => {
			if (!isEligibleForMcp.value) return i18n$2.baseText("mcp.workflowNotEligable.description", { interpolate: { triggers: Object.values(mcpTriggerMap).join(", ") } });
			return i18n$2.baseText("workflowSettings.availableInMCP.tooltip");
		});
		const isEligibleForMcp = computed(() => {
			if (!workflow?.value?.active) return false;
			return isEligibleForMcpAccess(workflow.value);
		});
		const savedTimeNodes = computed(() => {
			if (!workflow?.value?.nodes) return [];
			return workflow.value.nodes.filter((node) => node.type === "n8n-nodes-base.timeSaved" && node.disabled !== true);
		});
		const hasSavedTimeNodes = computed(() => {
			return savedTimeNodes.value.length > 0;
		});
		const timeSavedModeOptions = computed(() => [{
			label: i18n$2.baseText("workflowSettings.timeSavedPerExecution.tab.fixed"),
			value: "fixed"
		}, {
			label: i18n$2.baseText("workflowSettings.timeSavedPerExecution.tab.dynamic"),
			value: "dynamic"
		}]);
		const executionLogicOptions = computed(() => {
			if (workflowSettings.value.binaryMode === "combined") return executionLogicAllOptions.value;
			if (posthogStore.isVariantEnabled(EXECUTION_LOGIC_V2_EXPERIMENT.name, EXECUTION_LOGIC_V2_EXPERIMENT.variant)) return executionLogicAllOptions.value;
			return executionLogicAllOptions.value.filter((option) => option.key !== "v2");
		});
		const onCallerIdsInput = (str) => {
			workflowSettings.value.callerIds = /^[a-zA-Z0-9,\s_-]+$/.test(str) ? str : str.replace(/[^a-zA-Z0-9,\s_-]/g, "");
		};
		const closeDialog = () => {
			modalBus.emit("close");
			externalHooks.run("workflowSettings.dialogVisibleChanged", { dialogVisible: false });
		};
		const setTheTimeout = (key, value) => {
			const time = value ? parseInt(value, 10) : 0;
			timeoutHMS.value = {
				...timeoutHMS.value,
				[key]: time
			};
		};
		const loadWorkflowCallerPolicyOptions = async () => {
			workflowCallerPolicyOptions.value = [
				{
					key: "none",
					value: i18n$2.baseText("workflowSettings.callerPolicy.options.none")
				},
				{
					key: "workflowsFromSameOwner",
					value: i18n$2.baseText(workflow.value.homeProject?.type === ProjectTypes.Personal ? "workflowSettings.callerPolicy.options.workflowsFromPersonalProject" : "workflowSettings.callerPolicy.options.workflowsFromTeamProject", { interpolate: { projectName: workflowOwnerName.value } })
				},
				{
					key: "workflowsFromAList",
					value: i18n$2.baseText("workflowSettings.callerPolicy.options.workflowsFromAList")
				},
				{
					key: "any",
					value: i18n$2.baseText("workflowSettings.callerPolicy.options.any")
				}
			];
		};
		const loadSaveDataErrorExecutionOptions = async () => {
			saveDataErrorExecutionOptions.value = [
				{
					key: "DEFAULT",
					value: i18n$2.baseText("workflowSettings.saveDataErrorExecutionOptions.defaultSave", { interpolate: { defaultValue: defaultValues.value.saveDataErrorExecution === "all" ? i18n$2.baseText("workflowSettings.saveDataErrorExecutionOptions.save") : i18n$2.baseText("workflowSettings.saveDataErrorExecutionOptions.doNotSave") } })
				},
				{
					key: "all",
					value: i18n$2.baseText("workflowSettings.saveDataErrorExecutionOptions.save")
				},
				{
					key: "none",
					value: i18n$2.baseText("workflowSettings.saveDataErrorExecutionOptions.doNotSave")
				}
			];
		};
		const loadSaveDataSuccessExecutionOptions = async () => {
			saveDataSuccessExecutionOptions.value = [
				{
					key: "DEFAULT",
					value: i18n$2.baseText("workflowSettings.saveDataSuccessExecutionOptions.defaultSave", { interpolate: { defaultValue: defaultValues.value.saveDataSuccessExecution === "all" ? i18n$2.baseText("workflowSettings.saveDataSuccessExecutionOptions.save") : i18n$2.baseText("workflowSettings.saveDataSuccessExecutionOptions.doNotSave") } })
				},
				{
					key: "all",
					value: i18n$2.baseText("workflowSettings.saveDataSuccessExecutionOptions.save")
				},
				{
					key: "none",
					value: i18n$2.baseText("workflowSettings.saveDataSuccessExecutionOptions.doNotSave")
				}
			];
		};
		const loadSaveExecutionProgressOptions = async () => {
			saveExecutionProgressOptions.value = [
				{
					key: "DEFAULT",
					value: i18n$2.baseText("workflowSettings.saveExecutionProgressOptions.defaultSave", { interpolate: { defaultValue: defaultValues.value.saveExecutionProgress ? i18n$2.baseText("workflowSettings.saveExecutionProgressOptions.save") : i18n$2.baseText("workflowSettings.saveExecutionProgressOptions.doNotSave") } })
				},
				{
					key: true,
					value: i18n$2.baseText("workflowSettings.saveExecutionProgressOptions.save")
				},
				{
					key: false,
					value: i18n$2.baseText("workflowSettings.saveExecutionProgressOptions.doNotSave")
				}
			];
		};
		const loadSaveManualOptions = async () => {
			saveManualOptions.value = [
				{
					key: "DEFAULT",
					value: i18n$2.baseText("workflowSettings.saveManualOptions.defaultSave", { interpolate: { defaultValue: defaultValues.value.saveManualExecutions ? i18n$2.baseText("workflowSettings.saveManualOptions.save") : i18n$2.baseText("workflowSettings.saveManualOptions.doNotSave") } })
				},
				{
					key: true,
					value: i18n$2.baseText("workflowSettings.saveManualOptions.save")
				},
				{
					key: false,
					value: i18n$2.baseText("workflowSettings.saveManualOptions.doNotSave")
				}
			];
		};
		const loadTimezones = async () => {
			if (timezones.value.length !== 0) return;
			const timezonesData = await settingsStore.getTimezones();
			let defaultTimezoneValue = timezonesData[defaultValues.value.timezone];
			if (defaultTimezoneValue === void 0) defaultTimezoneValue = i18n$2.baseText("workflowSettings.defaultTimezoneNotValid");
			timezones.value.push({
				key: "DEFAULT",
				value: i18n$2.baseText("workflowSettings.defaultTimezone", { interpolate: { defaultTimezoneValue } })
			});
			for (const timezone of Object.keys(timezonesData)) timezones.value.push({
				key: timezone,
				value: timezonesData[timezone]
			});
		};
		const loadWorkflows = async (searchTerm) => {
			const workflowsData = await workflowsListStore.searchWorkflows({
				query: searchTerm,
				isArchived: false,
				triggerNodeTypes: ["n8n-nodes-base.errorTrigger"]
			});
			workflowsData.sort((a, b) => {
				if (a.name.toLowerCase() < b.name.toLowerCase()) return -1;
				if (a.name.toLowerCase() > b.name.toLowerCase()) return 1;
				return 0;
			});
			workflowsData.unshift({
				id: "DEFAULT",
				name: i18n$2.baseText("workflowSettings.noWorkflow")
			});
			workflows.value = workflowsData;
		};
		const handleCreateNewResolver = async () => {
			credentialResolverSelectRef.value?.blur();
			await nextTick();
			openCreateModal({ onSave: async (resolverId) => {
				await loadCredentialResolvers();
				workflowSettings.value.credentialResolverId = resolverId;
			} });
		};
		const handleEditResolver = async () => {
			if (!workflowSettings.value.credentialResolverId) return;
			openEditModal(workflowSettings.value.credentialResolverId, {
				onSave: loadCredentialResolvers,
				onDelete: async (deletedResolverId) => {
					await loadCredentialResolvers();
					if (workflowSettings.value.credentialResolverId === deletedResolverId) workflowSettings.value.credentialResolverId = void 0;
				}
			});
		};
		const { debounce: debounce$3 } = useDebounce();
		const debouncedLoadWorkflows = debounce$3(loadWorkflows, {
			debounceTime: 300,
			trailing: true
		});
		const convertToHMS = (num) => {
			if (num > 0) {
				const hours = Math.floor(num / 3600);
				const remainder = num % 3600;
				return {
					hours,
					minutes: Math.floor(remainder / 60),
					seconds: remainder % 60
				};
			}
			return {
				hours: 0,
				minutes: 0,
				seconds: 0
			};
		};
		const saveSettings = async () => {
			const data = { settings: workflowSettings.value };
			const { hours, minutes, seconds } = timeoutHMS.value;
			data.settings.executionTimeout = data.settings.executionTimeout !== -1 ? hours * 3600 + minutes * 60 + seconds : -1;
			if (data.settings.executionTimeout === 0) {
				toast.showError(new Error(i18n$2.baseText("workflowSettings.showError.saveSettings1.errorMessage")), i18n$2.baseText("workflowSettings.showError.saveSettings1.title"), i18n$2.baseText("workflowSettings.showError.saveSettings1.message") + ":");
				return;
			}
			if (workflowSettings.value?.maxExecutionTimeout && data.settings.executionTimeout > workflowSettings.value?.maxExecutionTimeout) {
				const convertedMaxExecutionTimeout = convertToHMS(workflowSettings.value.maxExecutionTimeout);
				toast.showError(new Error(i18n$2.baseText("workflowSettings.showError.saveSettings2.errorMessage", { interpolate: {
					hours: convertedMaxExecutionTimeout.hours.toString(),
					minutes: convertedMaxExecutionTimeout.minutes.toString(),
					seconds: convertedMaxExecutionTimeout.seconds.toString()
				} })), i18n$2.baseText("workflowSettings.showError.saveSettings2.title"), i18n$2.baseText("workflowSettings.showError.saveSettings2.message") + ":");
				return;
			}
			delete data.settings.maxExecutionTimeout;
			isLoading.value = true;
			data.versionId = workflowsStore.workflowVersionId;
			data.expectedChecksum = workflowsStore.workflowChecksum;
			try {
				await workflowsStore.updateWorkflow(String(route.params.name), data);
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("workflowSettings.showError.saveSettings3.title"));
				isLoading.value = false;
				return;
			}
			const localWorkflowSettings = Object.fromEntries(Object.entries(workflowSettings.value).filter(([, value]) => value !== "DEFAULT"));
			const oldSettings = deepCopy(workflowsStore.workflowSettings);
			workflowState.setWorkflowSettings(localWorkflowSettings);
			isLoading.value = false;
			toast.showMessage({
				title: i18n$2.baseText("workflowSettings.showMessage.saveSettings.title"),
				type: "success"
			});
			closeDialog();
			externalHooks.run("workflowSettings.saveSettings", { oldSettings });
			telemetry$1.track("User updated workflow settings", {
				workflow_id: workflowsStore.workflowId,
				time_saved: workflowSettings.value.timeSavedPerExecution ?? "",
				error_workflow: workflowSettings.value.errorWorkflow ?? ""
			});
			if (isMCPEnabled.value && workflowSettings.value.availableInMCP) trackMcpAccessEnabledForWorkflow(workflowId.value);
			if (workflowSettings.value.binaryMode !== originalBinaryMode.value) toast.showMessage({
				title: i18n$2.baseText("workflowSettings.executionLogic.changed.title"),
				message: h("span", [i18n$2.baseText("workflowSettings.executionLogic.changed.description"), h(N8nLink_default, {
					to: "https://docs.n8n.io/data/binary-data/",
					size: "small",
					newWindow: true
				}, () => i18n$2.baseText("generic.learnMore"))]),
				type: "warning",
				duration: 0
			});
		};
		const toggleTimeout = () => {
			workflowSettings.value.executionTimeout = workflowSettings.value.executionTimeout === -1 ? 0 : -1;
		};
		const toggleAvailableInMCP = () => {
			workflowSettings.value.availableInMCP = !workflowSettings.value.availableInMCP;
		};
		const updateTimeSavedPerExecution = (value) => {
			const numValue = parseInt(value, 10);
			workflowSettings.value.timeSavedPerExecution = isNaN(numValue) ? void 0 : numValue < 0 ? 0 : numValue;
		};
		const onExecutionLogicModeChange = (value) => {
			if (value === "v0" || value === "v1") {
				workflowSettings.value.binaryMode = BINARY_MODE_SEPARATE;
				workflowSettings.value.executionOrder = value;
			}
			if (value === "v2") {
				workflowSettings.value.binaryMode = BINARY_MODE_COMBINED;
				workflowSettings.value.executionOrder = "v1";
			}
		};
		onMounted(async () => {
			executionTimeout.value = rootStore.executionTimeout;
			maxExecutionTimeout.value = rootStore.maxExecutionTimeout;
			if (!workflowsStore.isWorkflowSaved[workflowsStore.workflowId]) {
				toast.showMessage({
					title: "No workflow active",
					message: "No workflow active to display settings of.",
					type: "error",
					duration: 0
				});
				closeDialog();
				return;
			}
			defaultValues.value.saveDataErrorExecution = settingsStore.saveDataErrorExecution;
			defaultValues.value.saveDataSuccessExecution = settingsStore.saveDataSuccessExecution;
			defaultValues.value.saveManualExecutions = settingsStore.saveManualExecutions;
			defaultValues.value.saveExecutionProgress = settingsStore.saveDataProgressExecution;
			defaultValues.value.timezone = rootStore.timezone;
			defaultValues.value.workflowCallerPolicy = settingsStore.workflowCallerPolicyDefaultOption;
			isLoading.value = true;
			try {
				const promises = [
					workflowsListStore.fetchWorkflow(workflowId.value),
					loadWorkflows(),
					loadSaveDataErrorExecutionOptions(),
					loadSaveDataSuccessExecutionOptions(),
					loadSaveExecutionProgressOptions(),
					loadSaveManualOptions(),
					loadTimezones(),
					loadWorkflowCallerPolicyOptions()
				];
				if (isCredentialResolverEnabled.value) promises.push(loadCredentialResolvers());
				await Promise.all(promises);
			} catch (error$2) {
				toast.showError(error$2, "Problem loading settings", "The following error occurred loading the data:");
			}
			const workflowSettingsData = deepCopy(workflowsStore.workflowSettings);
			if (workflowSettingsData.timeSavedMode === void 0) workflowSettingsData.timeSavedMode = "fixed";
			if (workflowSettingsData.errorWorkflow === void 0) workflowSettingsData.errorWorkflow = "DEFAULT";
			if (workflowSettingsData.timezone === void 0) workflowSettingsData.timezone = "DEFAULT";
			if (workflowSettingsData.saveDataErrorExecution === void 0) workflowSettingsData.saveDataErrorExecution = "DEFAULT";
			if (workflowSettingsData.saveDataSuccessExecution === void 0) workflowSettingsData.saveDataSuccessExecution = "DEFAULT";
			if (workflowSettingsData.saveExecutionProgress === void 0) workflowSettingsData.saveExecutionProgress = "DEFAULT";
			if (workflowSettingsData.saveManualExecutions === void 0) workflowSettingsData.saveManualExecutions = "DEFAULT";
			if (workflowSettingsData.callerPolicy === void 0) workflowSettingsData.callerPolicy = defaultValues.value.workflowCallerPolicy;
			if (workflowSettingsData.executionTimeout === void 0) workflowSettingsData.executionTimeout = rootStore.executionTimeout;
			if (workflowSettingsData.maxExecutionTimeout === void 0) workflowSettingsData.maxExecutionTimeout = rootStore.maxExecutionTimeout;
			if (workflowSettingsData.executionOrder === void 0) workflowSettingsData.executionOrder = "v0";
			if (workflowSettingsData.binaryMode === void 0) workflowSettingsData.binaryMode = BINARY_MODE_SEPARATE;
			if (workflowSettingsData.availableInMCP === void 0) workflowSettingsData.availableInMCP = defaultValues.value.availableInMCP;
			originalBinaryMode.value = workflowSettingsData.binaryMode;
			workflowSettings.value = workflowSettingsData;
			timeoutHMS.value = convertToHMS(workflowSettingsData.executionTimeout);
			isLoading.value = false;
			externalHooks.run("workflowSettings.dialogVisibleChanged", { dialogVisible: true });
			telemetry$1.track("User opened workflow settings", { workflow_id: workflowsStore.workflowId });
			registerCustomAction({
				key: "openSavedTimeNodeCreator",
				action: () => {
					closeDialog();
					nodeCreatorStore.openNodeCreatorForRegularNodes(NODE_CREATOR_OPEN_SOURCES.NODE_CONNECTION_ACTION);
				}
			});
		});
		onBeforeUnmount(() => {
			debouncedLoadWorkflows.cancel?.();
			unregisterCustomAction("openSavedTimeNodeCreator");
		});
		return (_ctx, _cache) => {
			const _directive_n8n_html = resolveDirective("n8n-html");
			const _directive_loading = resolveDirective("loading");
			return openBlock(), createBlock(Modal_default, {
				name: unref(WORKFLOW_SETTINGS_MODAL_KEY),
				width: "65%",
				"max-height": "80%",
				title: unref(i18n$2).baseText("workflowSettings.settingsFor", { interpolate: {
					workflowName: workflowName.value,
					workflowId: workflowId.value
				} }),
				"event-bus": unref(modalBus),
				scrollable: true
			}, {
				content: withCtx(() => [withDirectives((openBlock(), createElementBlock("div", {
					class: normalizeClass(_ctx.$style["workflow-settings"]),
					"data-test-id": "workflow-settings-dialog"
				}, [
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.executionLogic")), 1)]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), {
							span: 14,
							class: "ignore-key-press-canvas"
						}, {
							default: withCtx(() => [createVNode(unref(N8nSelect_default), {
								modelValue: executionLogic.value,
								"onUpdate:modelValue": [_cache[0] || (_cache[0] = ($event) => executionLogic.value = $event), onExecutionLogicModeChange],
								placeholder: "Select Execution Order",
								size: "medium",
								filterable: "",
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"limit-popper-width": true,
								"data-test-id": "workflow-settings-execution-order"
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(executionLogicOptions.value, (option) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key: option.key,
										label: option.value,
										value: option.key
									}, {
										default: withCtx(() => [createBaseVNode("div", _hoisted_1$14, [createBaseVNode("div", _hoisted_2$4, toDisplayString(option.value), 1), withDirectives(createBaseVNode("div", _hoisted_3$2, null, 512), [[_directive_n8n_html, option.description]])])]),
										_: 2
									}, 1032, ["label", "value"]);
								}), 128))]),
								_: 1
							}, 8, ["modelValue", "disabled"])]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), { "data-test-id": "error-workflow" }, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.errorWorkflow")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [withDirectives(createBaseVNode("div", null, null, 512), [[_directive_n8n_html, helpTexts.value.errorWorkflow]])]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), {
							span: 14,
							class: "ignore-key-press-canvas"
						}, {
							default: withCtx(() => [createVNode(unref(N8nSelect_default), {
								modelValue: workflowSettings.value.errorWorkflow,
								"onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => workflowSettings.value.errorWorkflow = $event),
								placeholder: "Select Workflow",
								filterable: "",
								remote: "",
								"remote-method": unref(debouncedLoadWorkflows),
								"remote-show-suffix": "",
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"limit-popper-width": true,
								"data-test-id": "workflow-settings-error-workflow"
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(workflows.value, (item$2) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key: item$2.id,
										label: item$2.name,
										value: item$2.id,
										disabled: item$2.active === false
									}, {
										default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.optionContent) }, [createBaseVNode("span", null, toDisplayString(item$2.name), 1), item$2.active === false ? (openBlock(), createBlock(unref(N8nTooltip_default), {
											key: 0,
											content: unref(i18n$2).baseText("resourceLocator.workflow.inactive.tooltip"),
											placement: "top"
										}, {
											default: withCtx(() => [createVNode(unref(N8nIcon_default), {
												icon: "triangle-alert",
												size: "small",
												class: normalizeClass(_ctx.$style.inactiveIcon)
											}, null, 8, ["class"])]),
											_: 1
										}, 8, ["content"])) : createCommentVNode("", true)], 2)]),
										_: 2
									}, 1032, [
										"label",
										"value",
										"disabled"
									]);
								}), 128))]),
								_: 1
							}, 8, [
								"modelValue",
								"remote-method",
								"disabled"
							])]),
							_: 1
						})]),
						_: 1
					}),
					unref(isCredentialResolverEnabled) ? (openBlock(), createBlock(unref(ElRow), {
						key: 0,
						"data-test-id": "credential-resolver"
					}, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.credentialResolver")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createBaseVNode("div", { textContent: toDisplayString(helpTexts.value.credentialResolver) }, null, 8, _hoisted_4$2)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), {
							span: 14,
							class: "ignore-key-press-canvas"
						}, {
							default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["credential-resolver-container"]) }, [createVNode(unref(N8nSelect_default), {
								ref_key: "credentialResolverSelectRef",
								ref: credentialResolverSelectRef,
								modelValue: workflowSettings.value.credentialResolverId,
								"onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => workflowSettings.value.credentialResolverId = $event),
								placeholder: unref(i18n$2).baseText("workflowSettings.credentialResolver.placeholder"),
								filterable: "",
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"limit-popper-width": true,
								"data-test-id": "workflow-settings-credential-resolver"
							}, {
								footer: withCtx(() => [createBaseVNode("button", {
									type: "button",
									class: normalizeClass(_ctx.$style["create-new-button"]),
									disabled: readOnlyEnv.value || !workflowPermissions.value.update,
									"data-test-id": "workflow-settings-credential-resolver-create-new",
									onClick: handleCreateNewResolver
								}, [createVNode(unref(N8nIcon_default), {
									size: "xsmall",
									icon: "plus"
								}), createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("workflowSettings.credentialResolver.createNew")), 1)], 10, _hoisted_5)]),
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(credentialResolvers), (resolver) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key: resolver.id,
										label: resolver.name,
										value: resolver.id
									}, null, 8, ["label", "value"]);
								}), 128))]),
								_: 1
							}, 8, [
								"modelValue",
								"placeholder",
								"disabled"
							]), workflowSettings.value.credentialResolverId ? (openBlock(), createBlock(unref(N8nIconButton_default), {
								key: 0,
								variant: "ghost",
								icon: "pen",
								size: "small",
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								title: unref(i18n$2).baseText("workflowSettings.credentialResolver.edit"),
								"data-test-id": "workflow-settings-credential-resolver-edit",
								onClick: handleEditResolver
							}, null, 8, ["disabled", "title"])) : createCommentVNode("", true)], 2)]),
							_: 1
						})]),
						_: 1
					})) : createCommentVNode("", true),
					isSharingEnabled.value ? (openBlock(), createElementBlock("div", _hoisted_6, [createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.callerPolicy")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createBaseVNode("div", { textContent: toDisplayString(helpTexts.value.workflowCallerPolicy) }, null, 8, _hoisted_7)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), {
							span: 14,
							class: "ignore-key-press-canvas"
						}, {
							default: withCtx(() => [createVNode(unref(N8nSelect_default), {
								modelValue: workflowSettings.value.callerPolicy,
								"onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => workflowSettings.value.callerPolicy = $event),
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								placeholder: unref(i18n$2).baseText("workflowSettings.selectOption"),
								filterable: "",
								"limit-popper-width": true
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(workflowCallerPolicyOptions.value, (option) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key: option.key,
										label: option.value,
										value: option.key
									}, null, 8, ["label", "value"]);
								}), 128))]),
								_: 1
							}, 8, [
								"modelValue",
								"disabled",
								"placeholder"
							])]),
							_: 1
						})]),
						_: 1
					}), workflowSettings.value.callerPolicy === "workflowsFromAList" ? (openBlock(), createBlock(unref(ElRow), { key: 0 }, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.callerIds")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createBaseVNode("div", { textContent: toDisplayString(helpTexts.value.workflowCallerIds) }, null, 8, _hoisted_8)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), { span: 14 }, {
							default: withCtx(() => [createVNode(unref(Input_default), {
								modelValue: workflowSettings.value.callerIds,
								"onUpdate:modelValue": [_cache[4] || (_cache[4] = ($event) => workflowSettings.value.callerIds = $event), onCallerIdsInput],
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								placeholder: unref(i18n$2).baseText("workflowSettings.callerIds.placeholder"),
								type: "text",
								"data-test-id": "workflow-caller-policy-workflow-ids"
							}, null, 8, [
								"modelValue",
								"disabled",
								"placeholder"
							])]),
							_: 1
						})]),
						_: 1
					})) : createCommentVNode("", true)])) : createCommentVNode("", true),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.timezone")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createBaseVNode("div", { textContent: toDisplayString(helpTexts.value.timezone) }, null, 8, _hoisted_9)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), {
							span: 14,
							class: "ignore-key-press-canvas"
						}, {
							default: withCtx(() => [createVNode(unref(N8nSelect_default), {
								modelValue: workflowSettings.value.timezone,
								"onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => workflowSettings.value.timezone = $event),
								placeholder: "Select Timezone",
								filterable: "",
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"limit-popper-width": true,
								"data-test-id": "workflow-settings-timezone"
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(timezones.value, (timezone) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key: timezone.key,
										label: timezone.value,
										value: timezone.key
									}, null, 8, ["label", "value"]);
								}), 128))]),
								_: 1
							}, 8, ["modelValue", "disabled"])]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.saveDataErrorExecution")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createBaseVNode("div", { textContent: toDisplayString(helpTexts.value.saveDataErrorExecution) }, null, 8, _hoisted_10)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), {
							span: 14,
							class: "ignore-key-press-canvas"
						}, {
							default: withCtx(() => [createVNode(unref(N8nSelect_default), {
								modelValue: workflowSettings.value.saveDataErrorExecution,
								"onUpdate:modelValue": _cache[6] || (_cache[6] = ($event) => workflowSettings.value.saveDataErrorExecution = $event),
								placeholder: unref(i18n$2).baseText("workflowSettings.selectOption"),
								filterable: "",
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"limit-popper-width": true,
								"data-test-id": "workflow-settings-save-failed-executions"
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(saveDataErrorExecutionOptions.value, (option) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key: option.key,
										label: option.value,
										value: option.key
									}, null, 8, ["label", "value"]);
								}), 128))]),
								_: 1
							}, 8, [
								"modelValue",
								"placeholder",
								"disabled"
							])]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.saveDataSuccessExecution")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createBaseVNode("div", { textContent: toDisplayString(helpTexts.value.saveDataSuccessExecution) }, null, 8, _hoisted_11)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), {
							span: 14,
							class: "ignore-key-press-canvas"
						}, {
							default: withCtx(() => [createVNode(unref(N8nSelect_default), {
								modelValue: workflowSettings.value.saveDataSuccessExecution,
								"onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => workflowSettings.value.saveDataSuccessExecution = $event),
								placeholder: unref(i18n$2).baseText("workflowSettings.selectOption"),
								filterable: "",
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"limit-popper-width": true,
								"data-test-id": "workflow-settings-save-success-executions"
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(saveDataSuccessExecutionOptions.value, (option) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key: option.key,
										label: option.value,
										value: option.key
									}, null, 8, ["label", "value"]);
								}), 128))]),
								_: 1
							}, 8, [
								"modelValue",
								"placeholder",
								"disabled"
							])]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.saveManualExecutions")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createBaseVNode("div", { textContent: toDisplayString(helpTexts.value.saveManualExecutions) }, null, 8, _hoisted_12)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), {
							span: 14,
							class: "ignore-key-press-canvas"
						}, {
							default: withCtx(() => [createVNode(unref(N8nSelect_default), {
								modelValue: workflowSettings.value.saveManualExecutions,
								"onUpdate:modelValue": _cache[8] || (_cache[8] = ($event) => workflowSettings.value.saveManualExecutions = $event),
								placeholder: unref(i18n$2).baseText("workflowSettings.selectOption"),
								filterable: "",
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"limit-popper-width": true,
								"data-test-id": "workflow-settings-save-manual-executions"
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(saveManualOptions.value, (option) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key: `${option.key}`,
										label: option.value,
										value: option.key
									}, null, 8, ["label", "value"]);
								}), 128))]),
								_: 1
							}, 8, [
								"modelValue",
								"placeholder",
								"disabled"
							])]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.saveExecutionProgress")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createBaseVNode("div", { textContent: toDisplayString(helpTexts.value.saveExecutionProgress) }, null, 8, _hoisted_13)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), {
							span: 14,
							class: "ignore-key-press-canvas"
						}, {
							default: withCtx(() => [createVNode(unref(N8nSelect_default), {
								modelValue: workflowSettings.value.saveExecutionProgress,
								"onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => workflowSettings.value.saveExecutionProgress = $event),
								placeholder: unref(i18n$2).baseText("workflowSettings.selectOption"),
								filterable: "",
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"limit-popper-width": true,
								"data-test-id": "workflow-settings-save-execution-progress"
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(saveExecutionProgressOptions.value, (option) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key: `${option.key}`,
										label: option.value,
										value: option.key
									}, null, 8, ["label", "value"]);
								}), 128))]),
								_: 1
							}, 8, [
								"modelValue",
								"placeholder",
								"disabled"
							])]),
							_: 1
						})]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.timeoutWorkflow")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createBaseVNode("div", { textContent: toDisplayString(helpTexts.value.executionTimeoutToggle) }, null, 8, _hoisted_14)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), { span: 14 }, {
							default: withCtx(() => [createBaseVNode("div", null, [createVNode(unref(ElSwitch), {
								ref: "inputField",
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"model-value": (workflowSettings.value.executionTimeout ?? -1) > -1,
								"data-test-id": "workflow-settings-timeout-workflow",
								"onUpdate:modelValue": toggleTimeout
							}, null, 8, ["disabled", "model-value"])])]),
							_: 1
						})]),
						_: 1
					}),
					(workflowSettings.value.executionTimeout ?? -1) > -1 ? (openBlock(), createElementBlock("div", _hoisted_15, [createVNode(unref(ElRow), null, {
						default: withCtx(() => [
							createVNode(unref(ElCol), {
								span: 10,
								class: normalizeClass(_ctx.$style["setting-name"])
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.timeoutAfter")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
									content: withCtx(() => [createBaseVNode("div", { textContent: toDisplayString(helpTexts.value.executionTimeout) }, null, 8, _hoisted_16)]),
									default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
									_: 1
								})]),
								_: 1
							}, 8, ["class"]),
							createVNode(unref(ElCol), { span: 4 }, {
								default: withCtx(() => [createVNode(unref(Input_default), {
									disabled: readOnlyEnv.value || !workflowPermissions.value.update,
									"model-value": timeoutHMS.value.hours,
									min: 0,
									"onUpdate:modelValue": _cache[10] || (_cache[10] = (value) => setTheTimeout("hours", value))
								}, {
									append: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.hours")), 1)]),
									_: 1
								}, 8, ["disabled", "model-value"])]),
								_: 1
							}),
							createVNode(unref(ElCol), {
								span: 4,
								class: normalizeClass(_ctx.$style["timeout-input"])
							}, {
								default: withCtx(() => [createVNode(unref(Input_default), {
									disabled: readOnlyEnv.value || !workflowPermissions.value.update,
									"model-value": timeoutHMS.value.minutes,
									min: 0,
									max: 60,
									"onUpdate:modelValue": _cache[11] || (_cache[11] = (value) => setTheTimeout("minutes", value))
								}, {
									append: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.minutes")), 1)]),
									_: 1
								}, 8, ["disabled", "model-value"])]),
								_: 1
							}, 8, ["class"]),
							createVNode(unref(ElCol), {
								span: 4,
								class: normalizeClass(_ctx.$style["timeout-input"])
							}, {
								default: withCtx(() => [createVNode(unref(Input_default), {
									disabled: readOnlyEnv.value || !workflowPermissions.value.update,
									"model-value": timeoutHMS.value.seconds,
									min: 0,
									max: 60,
									"onUpdate:modelValue": _cache[12] || (_cache[12] = (value) => setTheTimeout("seconds", value))
								}, {
									append: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.seconds")), 1)]),
									_: 1
								}, 8, ["disabled", "model-value"])]),
								_: 1
							}, 8, ["class"])
						]),
						_: 1
					})])) : createCommentVNode("", true),
					isMCPEnabled.value ? (openBlock(), createBlock(unref(ElRow), {
						key: 3,
						"data-test-id": "workflow-settings-available-in-mcp"
					}, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createBaseVNode("label", _hoisted_17, [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.availableInMCP")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createTextVNode(toDisplayString(mcpToggleTooltip.value), 1)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})])]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), { span: 14 }, {
							default: withCtx(() => [createBaseVNode("div", null, [createVNode(unref(N8nTooltip_default), {
								placement: "top",
								disabled: !mcpToggleDisabled.value
							}, {
								content: withCtx(() => [createTextVNode(toDisplayString(mcpToggleTooltip.value), 1)]),
								default: withCtx(() => [createVNode(unref(ElSwitch), {
									ref: "inputField",
									disabled: mcpToggleDisabled.value,
									"model-value": workflowSettings.value.availableInMCP ?? false,
									"data-test-id": "workflow-settings-available-in-mcp",
									"onUpdate:modelValue": toggleAvailableInMCP
								}, null, 8, ["disabled", "model-value"])]),
								_: 1
							}, 8, ["disabled"])])]),
							_: 1
						})]),
						_: 1
					})) : createCommentVNode("", true),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 10,
							class: normalizeClass(_ctx.$style["setting-name"])
						}, {
							default: withCtx(() => [createBaseVNode("label", _hoisted_18, [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.timeSavedPerExecution")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
								content: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowSettings.timeSavedPerExecution.tooltip")), 1)]),
								default: withCtx(() => [createVNode(unref(N8nIcon_default), { icon: "circle-help" })]),
								_: 1
							})])]),
							_: 1
						}, 8, ["class"]), createVNode(unref(ElCol), { span: 14 }, {
							default: withCtx(() => [createBaseVNode("div", _hoisted_19, [createVNode(unref(N8nSelect_default), {
								modelValue: workflowSettings.value.timeSavedMode,
								"onUpdate:modelValue": _cache[13] || (_cache[13] = ($event) => workflowSettings.value.timeSavedMode = $event),
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"data-test-id": "workflow-settings-time-saved-mode",
								size: "medium",
								filterable: "",
								"limit-popper-width": true
							}, {
								default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(timeSavedModeOptions.value, (option) => {
									return openBlock(), createBlock(unref(N8nOption_default), {
										key: option.value,
										label: option.label,
										value: option.value
									}, null, 8, ["label", "value"]);
								}), 128))]),
								_: 1
							}, 8, ["modelValue", "disabled"])])]),
							_: 1
						})]),
						_: 1
					}),
					workflowSettings.value.timeSavedMode === "fixed" ? (openBlock(), createBlock(unref(ElRow), { key: 4 }, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 14,
							offset: 10
						}, {
							default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["time-saved-input"]) }, [createVNode(unref(N8nInputNumber_default), {
								id: "timeSavedPerExecution",
								modelValue: workflowSettings.value.timeSavedPerExecution,
								"onUpdate:modelValue": [_cache[14] || (_cache[14] = ($event) => workflowSettings.value.timeSavedPerExecution = $event), updateTimeSavedPerExecution],
								"controls-position": "right",
								size: "medium",
								controls: true,
								disabled: readOnlyEnv.value || !workflowPermissions.value.update,
								"data-test-id": "workflow-settings-time-saved-per-execution",
								min: 0
							}, null, 8, ["modelValue", "disabled"]), createBaseVNode("span", null, toDisplayString(unref(i18n$2).baseText("workflowSettings.timeSavedPerExecution.hint")), 1)], 2)]),
							_: 1
						})]),
						_: 1
					})) : createCommentVNode("", true),
					workflowSettings.value.timeSavedMode === "fixed" && hasSavedTimeNodes.value ? (openBlock(), createBlock(unref(ElRow), { key: 5 }, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 14,
							offset: 10
						}, {
							default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["time-saved-content"]) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style["time-saved-warning"]) }, [withDirectives(createBaseVNode("span", null, null, 512), [[_directive_n8n_html, unref(i18n$2).baseText("workflowSettings.timeSavedPerExecution.fixedTabWarning", { interpolate: { link: `<a href='#' class='${_ctx.$style["time-saved-link"]}' data-action='openSavedTimeNodeCreator'>${unref(i18n$2).baseText("workflowSettings.timeSavedPerExecution.fixedTabWarning.link")}</a>` } })]])], 2)], 2)]),
							_: 1
						})]),
						_: 1
					})) : createCommentVNode("", true),
					workflowSettings.value.timeSavedMode === "dynamic" && hasSavedTimeNodes.value ? (openBlock(), createBlock(unref(ElRow), { key: 6 }, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 14,
							offset: 10
						}, {
							default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["time-saved-content"]) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style["time-saved-nodes-active"]) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style["nodes-active-wrapper"]) }, [createVNode(unref(N8nIcon_default), {
								icon: "clock",
								class: normalizeClass(_ctx.$style["nodes-active-icon"])
							}, null, 8, ["class"]), createBaseVNode("div", { class: normalizeClass(_ctx.$style["nodes-active-content"]) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style["nodes-active-title"]) }, toDisplayString(unref(i18n$2).baseText("workflowSettings.timeSavedPerExecution.nodesDetected", { interpolate: { count: savedTimeNodes.value.length } })), 3), createBaseVNode("div", { class: normalizeClass(_ctx.$style["nodes-active-hint"]) }, toDisplayString(unref(i18n$2).baseText("workflowSettings.timeSavedPerExecution.nodesDetected.hint")), 3)], 2)], 2), createBaseVNode("a", {
								href: "#",
								class: normalizeClass(_ctx.$style["add-more-link"]),
								"data-action": "openSavedTimeNodeCreator"
							}, toDisplayString(unref(i18n$2).baseText("workflowSettings.timeSavedPerExecution.nodesDetected.addMore")), 3)], 2)], 2)]),
							_: 1
						})]),
						_: 1
					})) : createCommentVNode("", true),
					workflowSettings.value.timeSavedMode === "dynamic" && !hasSavedTimeNodes.value ? (openBlock(), createBlock(unref(ElRow), { key: 7 }, {
						default: withCtx(() => [createVNode(unref(ElCol), {
							span: 14,
							offset: 10
						}, {
							default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["time-saved-content"]) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style["time-saved-no-nodes"]) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style["no-nodes-title"]) }, toDisplayString(unref(i18n$2).baseText("workflowSettings.timeSavedPerExecution.noNodesDetected")), 3), createBaseVNode("div", { class: normalizeClass(_ctx.$style["no-nodes-hint"]) }, toDisplayString(unref(i18n$2).baseText("workflowSettings.timeSavedPerExecution.noNodesDetected.hint")), 3)], 2)], 2)]),
							_: 1
						})]),
						_: 1
					})) : createCommentVNode("", true)
				], 2)), [[_directive_loading, isLoading.value]])]),
				footer: withCtx(() => [createBaseVNode("div", {
					class: normalizeClass(_ctx.$style["action-buttons"]),
					"data-test-id": "workflow-settings-save-button"
				}, [createVNode(unref(N8nButton_default), {
					disabled: readOnlyEnv.value || !workflowPermissions.value.update,
					label: unref(i18n$2).baseText("workflowSettings.save"),
					size: "large",
					float: "right",
					onClick: saveSettings
				}, null, 8, ["disabled", "label"])], 2)]),
				_: 1
			}, 8, [
				"name",
				"title",
				"event-bus"
			]);
		};
	}
});
const optionContent$1 = "_optionContent_su0eg_285";
const c = "_c_su0eg_292";
var WorkflowSettings_vue_vue_type_style_index_0_lang_module_default = {
	"workflow-settings": "_workflow-settings_su0eg_125",
	"setting-name": "_setting-name_su0eg_139",
	"timeout-input": "_timeout-input_su0eg_153",
	"time-saved": "_time-saved_su0eg_157",
	"time-saved-input": "_time-saved-input_su0eg_168",
	"time-saved-dropdown": "_time-saved-dropdown_su0eg_177",
	"time-saved-tabs": "_time-saved-tabs_su0eg_181",
	"time-saved-content": "_time-saved-content_su0eg_187",
	"time-saved-warning": "_time-saved-warning_su0eg_194",
	"time-saved-link": "_time-saved-link_su0eg_199",
	"time-saved-no-nodes": "_time-saved-no-nodes_su0eg_207",
	"no-nodes-title": "_no-nodes-title_su0eg_213",
	"no-nodes-hint": "_no-nodes-hint_su0eg_218",
	"time-saved-nodes-active": "_time-saved-nodes-active_su0eg_224",
	"nodes-active-wrapper": "_nodes-active-wrapper_su0eg_230",
	"nodes-active-icon": "_nodes-active-icon_su0eg_236",
	"nodes-active-content": "_nodes-active-content_su0eg_241",
	"nodes-active-title": "_nodes-active-title_su0eg_248",
	"nodes-active-hint": "_nodes-active-hint_su0eg_253",
	"add-more-link": "_add-more-link_su0eg_258",
	"list-option": "_list-option_su0eg_267",
	"option-headline": "_option-headline_su0eg_272",
	"option-description": "_option-description_su0eg_277",
	optionContent: optionContent$1,
	c,
	"credential-resolver-container": "_credential-resolver-container_su0eg_301",
	"create-new-button": "_create-new-button_su0eg_306"
};
var WorkflowSettings_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowSettings_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowSettings_vue_vue_type_style_index_0_lang_module_default }]]);
var WorkflowShareModal_ee_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowShareModal.ee",
	props: { data: {} },
	setup(__props) {
		const { data } = __props;
		const workflowsStore = useWorkflowsStore();
		const workflowsListStore = useWorkflowsListStore();
		const settingsStore = useSettingsStore();
		const uiStore = useUIStore();
		const workflowsEEStore = useWorkflowsEEStore();
		const projectsStore = useProjectsStore();
		const rolesStore = useRolesStore();
		const toast = useToast();
		const message$2 = useMessage();
		const pageRedirectionHelper = usePageRedirectionHelper();
		const i18n$2 = useI18n();
		const router = useRouter();
		const route = useRoute();
		const workflowSaving = useWorkflowSaving({ router });
		const workflow = ref(data.id && workflowsListStore.workflowsById[data.id] ? workflowsListStore.workflowsById[data.id] : workflowsStore.workflow);
		const loading$2 = ref(true);
		const isDirty = ref(false);
		const modalBus = createEventBus();
		const sharedWithProjects = ref([...workflow.value.sharedWithProjects ?? []]);
		const teamProject = ref(null);
		const isSharingEnabled = computed(() => settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.Sharing]);
		const isHomeTeamProject = computed(() => workflow.value.homeProject?.type === ProjectTypes.Team);
		const modalTitle = computed(() => {
			if (isHomeTeamProject.value) return i18n$2.baseText("workflows.shareModal.title.static", { interpolate: { projectName: workflow.value.homeProject?.name ?? "" } });
			return i18n$2.baseText(isSharingEnabled.value ? uiStore.contextBasedTranslationKeys.workflows.sharing.title : uiStore.contextBasedTranslationKeys.workflows.sharing.unavailable.title, { interpolate: { name: workflow.value.name } });
		});
		const workflowPermissions = computed(() => getResourcePermissions(workflow.value?.scopes).workflow);
		const isPersonalSpaceRestricted = computed(() => workflow.value.homeProject?.type === ProjectTypes.Personal && workflow.value.homeProject?.id === projectsStore.personalProject?.id && !workflowPermissions.value.share);
		const workflowOwnerName = computed(() => workflowsEEStore.getWorkflowOwnerName(`${workflow.value.id}`));
		const projects = computed(() => projectsStore.personalProjects.filter((project) => project.id !== workflow.value.homeProject?.id));
		const numberOfMembersInHomeTeamProject = computed(() => teamProject.value?.relations.length ?? 0);
		const workflowRoleTranslations = computed(() => ({
			"workflow:editor": i18n$2.baseText("workflows.shareModal.role.editor"),
			"workflow:owner": ""
		}));
		const workflowRoles = computed(() => rolesStore.processedWorkflowRoles.map(({ slug, scopes, displayName, licensed, description: description$8, systemRole, roleType }) => ({
			slug,
			displayName: slug in workflowRoleTranslations.value ? workflowRoleTranslations.value[slug] : displayName,
			scopes,
			licensed,
			description: description$8,
			systemRole,
			roleType
		})));
		const trackTelemetry = (eventName, data$1) => {
			telemetry.track(eventName, {
				workflow_id: workflow.value.id,
				...data$1
			});
		};
		const onProjectAdded = (project) => {
			trackTelemetry("User selected sharee to add", {
				project_id_sharer: workflow.value.homeProject?.id,
				project_id_sharee: project.id
			});
		};
		const onProjectRemoved = (project) => {
			trackTelemetry("User selected sharee to remove", {
				project_id_sharer: workflow.value.homeProject?.id,
				project_id_sharee: project.id
			});
		};
		const onSave = async () => {
			if (loading$2.value) return;
			loading$2.value = true;
			const saveWorkflowPromise = async () => {
				if (!workflowsStore.isWorkflowSaved[workflow.value.id]) {
					const parentFolderId = route.query.folderId;
					const workflowId = await workflowSaving.saveAsNewWorkflow({ parentFolderId });
					if (!workflowId) throw new Error(i18n$2.baseText("workflows.shareModal.onSave.error.title"));
					return workflowId;
				} else return workflow.value.id;
			};
			try {
				const workflowId = await saveWorkflowPromise();
				await workflowsEEStore.saveWorkflowSharedWith({
					workflowId,
					sharedWithProjects: sharedWithProjects.value
				});
				toast.showMessage({ title: i18n$2.baseText("workflows.shareModal.onSave.success.title") });
				isDirty.value = false;
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("workflows.shareModal.onSave.error.title"));
			} finally {
				modalBus.emit("close");
				loading$2.value = false;
			}
		};
		const onCloseModal = async () => {
			if (isDirty.value) {
				if (await message$2.confirm(i18n$2.baseText("workflows.shareModal.saveBeforeClose.message"), i18n$2.baseText("workflows.shareModal.saveBeforeClose.title"), {
					type: "warning",
					confirmButtonText: i18n$2.baseText("workflows.shareModal.saveBeforeClose.confirmButtonText"),
					cancelButtonText: i18n$2.baseText("workflows.shareModal.saveBeforeClose.cancelButtonText")
				}) === "confirm") return await onSave();
			}
			return true;
		};
		const goToUpgrade = () => {
			pageRedirectionHelper.goToUpgrade("workflow_sharing", "upgrade-workflow-sharing");
		};
		const initialize = async () => {
			if (isSharingEnabled.value) {
				await projectsStore.getAllProjects();
				if (workflowsStore.isWorkflowSaved[workflow.value.id]) await workflowsListStore.fetchWorkflow(workflow.value.id);
				if (isHomeTeamProject.value && workflow.value.homeProject) teamProject.value = await projectsStore.fetchProject(workflow.value.homeProject.id);
			}
			loading$2.value = false;
		};
		onMounted(async () => {
			await initialize();
		});
		watch(sharedWithProjects, () => {
			isDirty.value = true;
		}, { deep: true });
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "460px",
				"max-height": "75%",
				title: modalTitle.value,
				"event-bus": unref(modalBus),
				name: unref(WORKFLOW_SHARE_MODAL_KEY),
				center: true,
				"before-close": onCloseModal
			}, {
				content: withCtx(() => [!isSharingEnabled.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.container)
				}, [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText(unref(uiStore).contextBasedTranslationKeys.workflows.sharing.unavailable.description.modal)), 1)]),
					_: 1
				})], 2)) : (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.container)
				}, [!workflowPermissions.value.share && !isHomeTeamProject.value && !isPersonalSpaceRestricted.value ? (openBlock(), createBlock(unref(N8nInfoTip_default), {
					key: 0,
					bold: false,
					class: "mb-s"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflows.shareModal.info.sharee", { interpolate: { workflowOwnerName: workflowOwnerName.value } })), 1)]),
					_: 1
				})) : createCommentVNode("", true), createVNode(EnterpriseEdition_ee_default, {
					features: [unref(EnterpriseEditionFeature).Sharing],
					class: normalizeClass(_ctx.$style.content)
				}, {
					fallback: withCtx(() => [createVNode(unref(N8nText_default), null, {
						default: withCtx(() => [createVNode(unref(I18nT), {
							keypath: unref(uiStore).contextBasedTranslationKeys.workflows.sharing.unavailable.description.tooltip,
							tag: "span",
							scope: "global"
						}, {
							action: withCtx(() => [..._cache[2] || (_cache[2] = [])]),
							_: 1
						}, 8, ["keypath"])]),
						_: 1
					})]),
					default: withCtx(() => [createBaseVNode("div", null, [createVNode(ProjectSharing_default, {
						modelValue: sharedWithProjects.value,
						"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => sharedWithProjects.value = $event),
						"home-project": workflow.value.homeProject,
						projects: projects.value,
						roles: workflowRoles.value,
						readonly: !workflowPermissions.value.share,
						static: isHomeTeamProject.value || !workflowPermissions.value.share,
						"disabled-tooltip": isPersonalSpaceRestricted.value ? unref(i18n$2).baseText("workflows.shareModal.info.personalSpaceRestricted") : void 0,
						placeholder: unref(i18n$2).baseText("workflows.shareModal.select.placeholder"),
						"empty-options-text": unref(i18n$2).baseText("workflows.shareModel.select.notFound"),
						onProjectAdded,
						onProjectRemoved
					}, null, 8, [
						"modelValue",
						"home-project",
						"projects",
						"roles",
						"readonly",
						"static",
						"disabled-tooltip",
						"placeholder",
						"empty-options-text"
					]), isHomeTeamProject.value ? (openBlock(), createBlock(unref(N8nInfoTip_default), {
						key: 0,
						bold: false,
						class: "mt-s"
					}, {
						default: withCtx(() => [createVNode(unref(I18nT), {
							keypath: "workflows.shareModal.info.members",
							tag: "span",
							scope: "global"
						}, {
							projectName: withCtx(() => [createTextVNode(toDisplayString(workflow.value.homeProject?.name), 1)]),
							members: withCtx(() => [createBaseVNode("strong", null, toDisplayString(unref(i18n$2).baseText("workflows.shareModal.info.members.number", {
								interpolate: { number: String(numberOfMembersInHomeTeamProject.value) },
								adjustToNumber: numberOfMembersInHomeTeamProject.value
							})), 1)]),
							_: 1
						})]),
						_: 1
					})) : createCommentVNode("", true)])]),
					_: 1
				}, 8, ["features", "class"])], 2))]),
				footer: withCtx(() => [!isSharingEnabled.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.actionButtons)
				}, [createVNode(unref(N8nButton_default), { onClick: goToUpgrade }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText(unref(uiStore).contextBasedTranslationKeys.workflows.sharing.unavailable.button)), 1)]),
					_: 1
				})], 2)) : (openBlock(), createBlock(EnterpriseEdition_ee_default, {
					key: 1,
					features: [unref(EnterpriseEditionFeature).Sharing],
					class: normalizeClass(_ctx.$style.actionButtons)
				}, {
					default: withCtx(() => [withDirectives(createVNode(unref(N8nText_default), {
						color: "text-light",
						size: "small",
						class: "mr-xs"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflows.shareModal.changesHint")), 1)]),
						_: 1
					}, 512), [[vShow, isDirty.value]]), isHomeTeamProject.value ? (openBlock(), createBlock(unref(N8nButton_default), {
						key: 0,
						variant: "subtle",
						onClick: _cache[1] || (_cache[1] = ($event) => unref(modalBus).emit("close"))
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("generic.close")), 1)]),
						_: 1
					})) : withDirectives((openBlock(), createBlock(unref(N8nButton_default), {
						key: 1,
						loading: loading$2.value,
						disabled: !isDirty.value,
						"data-test-id": "workflow-sharing-modal-save-button",
						onClick: onSave
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflows.shareModal.save")), 1)]),
						_: 1
					}, 8, ["loading", "disabled"])), [[vShow, workflowPermissions.value.share]])]),
					_: 1
				}, 8, ["features", "class"]))]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var WorkflowShareModal_ee_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_15pka_125",
	content: "_content_15pka_135",
	usersList: "_usersList_15pka_142",
	actionButtons: "_actionButtons_15pka_147",
	roleSelect: "_roleSelect_15pka_153",
	roleSelectRemoveOption: "_roleSelectRemoveOption_15pka_157"
};
var WorkflowShareModal_ee_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowShareModal_ee_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowShareModal_ee_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$13 = {
	key: 0,
	class: "ml-4xs"
};
var _hoisted_2$3 = { key: 0 };
var _hoisted_3$1 = { style: { "flex": "1" } };
var _hoisted_4$1 = { key: 2 };
var WorkflowDiffModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowDiffModal",
	props: { data: {} },
	setup(__props) {
		const props = __props;
		const { selectedDetailId, onNodeClick, syncIsEnabled } = useProvideViewportSync();
		const telemetry$1 = useTelemetry();
		const toast = useToast();
		const $style = useCssModule();
		const nodeTypesStore = useNodeTypesStore();
		const sourceControlStore = useSourceControlStore();
		const i18n$2 = useI18n();
		const router = useRouter();
		const route = useRoute();
		const workflowsListStore = useWorkflowsListStore();
		const manualAsyncConfiguration = {
			resetOnExecute: true,
			shallow: false,
			immediate: false
		};
		const isClosed = ref(false);
		const remote = useAsyncState(async () => {
			if (props.data.direction === "push" && props.data.workflowStatus === "created") return {
				workflow: void 0,
				remote: true
			};
			try {
				const { workflowId } = props.data;
				const { content: workflow } = await sourceControlStore.getRemoteWorkflow(workflowId);
				return {
					workflow,
					remote: true
				};
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("generic.error"));
				handleBeforeClose();
				return {
					workflow: void 0,
					remote: true
				};
			}
		}, void 0, manualAsyncConfiguration);
		const local = useAsyncState(async () => {
			try {
				const { workflowId } = props.data;
				return {
					workflow: await workflowsListStore.fetchWorkflow(workflowId),
					remote: false
				};
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("generic.error"));
				handleBeforeClose();
				return {
					workflow: void 0,
					remote: false
				};
			}
		}, void 0, manualAsyncConfiguration);
		const sourceWorkFlow = computed(() => props.data.direction === "push" ? remote : local);
		const targetWorkFlow = computed(() => props.data.direction === "push" ? local : remote);
		const { source, target, nodesDiff, connectionsDiff } = useWorkflowDiff(computed(() => removeWorkflowExecutionData(sourceWorkFlow.value.state.value?.workflow)), computed(() => removeWorkflowExecutionData(targetWorkFlow.value.state.value?.workflow)));
		const { settingsDiff, nodeChanges, activeTab, tabs: tabs$4, selectedNode, nodeDiffs, changesCount, isSourceWorkflowNew, modifiers } = useWorkflowDiffUI({
			sourceWorkflow: computed(() => sourceWorkFlow.value.state.value?.workflow),
			targetWorkflow: computed(() => targetWorkFlow.value.state.value?.workflow),
			nodesDiff,
			connectionsDiff,
			selectedDetailId
		});
		function getWorkflowLabel(isRemote) {
			return isRemote ? i18n$2.baseText("workflowDiff.remote", { interpolate: { branchName: sourceControlStore.preferences.branchName } }) : i18n$2.baseText("workflowDiff.local");
		}
		const sourceLabel = computed(() => getWorkflowLabel(sourceWorkFlow.value.state.value?.remote ?? false));
		const targetLabel = computed(() => getWorkflowLabel(targetWorkFlow.value.state.value?.remote ?? false));
		function nextNodeChange() {
			telemetry$1.track("User iterated over changes", {
				workflow_id: props.data.workflowId,
				context: "next"
			});
			const nextIndex = (nodeChanges.value.findIndex((change) => change.node.id === selectedDetailId.value) + 1) % nodeChanges.value.length;
			selectedDetailId.value = nodeChanges.value[nextIndex]?.node.id;
		}
		function previousNodeChange() {
			telemetry$1.track("User iterated over changes", {
				workflow_id: props.data.workflowId,
				context: "previous"
			});
			const previousIndex = (nodeChanges.value.findIndex((change) => change.node.id === selectedDetailId.value) - 1 + nodeChanges.value.length) % nodeChanges.value.length;
			selectedDetailId.value = nodeChanges.value[previousIndex]?.node.id;
		}
		function setActiveTab(active$1) {
			if (!active$1) {
				activeTab.value = void 0;
				return;
			}
			telemetry$1.track("User clicked workflow diff changes button", { workflow_id: props.data.workflowId });
			activeTab.value = "nodes";
		}
		function trackTabChange(value) {
			telemetry$1.track("User clicked changes tabs", {
				workflow_id: props.data.workflowId,
				context: `${value}_tab`
			});
		}
		function handleBeforeClose() {
			if (isClosed.value) return;
			isClosed.value = true;
			selectedDetailId.value = void 0;
			if (window.history.length > 1) router.back();
			else {
				const newQuery = { ...route.query };
				delete newQuery.diff;
				delete newQuery.direction;
				router.replace({ query: newQuery });
			}
		}
		function handleEscapeKey(event) {
			if (event.key === "Escape") {
				event.preventDefault();
				event.stopPropagation();
				handleBeforeClose();
			}
		}
		onMounted(async () => {
			document.addEventListener("keydown", handleEscapeKey, true);
			await nodeTypesStore.loadNodeTypesIfNotLoaded();
			remote.execute();
			local.execute();
		});
		onUnmounted(() => {
			document.removeEventListener("keydown", handleEscapeKey, true);
		});
		onNodeClick((nodeId) => {
			const node = nodesDiff.value.get(nodeId);
			if (!node) return;
			telemetry$1.track("User clicked to view node changes", {
				workflow_id: props.data.workflowId,
				node_type: node.node.type,
				context: "canvas"
			});
			if (node.status !== NodeDiffStatus.Eq) selectedDetailId.value = nodeId;
		});
		function setSelectedDetailId(nodeId, context) {
			if (!nodeId) {
				selectedDetailId.value = void 0;
				return;
			}
			selectedDetailId.value = nodeId;
			const node = nodesDiff.value.get(nodeId);
			if (!node) return;
			telemetry$1.track("User clicked to view node changes", {
				workflow_id: props.data.workflowId,
				node_type: node.node.type,
				context: `${context}_list`
			});
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				"event-bus": __props.data.eventBus,
				name: unref(WORKFLOW_DIFF_MODAL_KEY),
				"custom-class": unref($style).workflowDiffModal,
				height: "100%",
				width: "100%",
				"max-width": "100%",
				"max-height": "100%",
				"close-on-press-escape": false,
				onBeforeClose: handleBeforeClose
			}, {
				header: withCtx(() => [createBaseVNode("div", { class: normalizeClass(unref($style).header) }, [createBaseVNode("div", { class: normalizeClass(unref($style).headerLeft) }, [createVNode(unref(N8nIconButton_default), {
					variant: "subtle",
					icon: "arrow-left",
					class: normalizeClass([unref($style).backButton, "mr-xs"]),
					"icon-size": "large",
					onClick: handleBeforeClose
				}, null, 8, ["class"]), createVNode(unref(N8nHeading_default), {
					tag: "h4",
					size: "medium"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(sourceWorkFlow.value.state.value?.workflow?.name || targetWorkFlow.value.state.value?.workflow?.name), 1)]),
					_: 1
				})], 2), createBaseVNode("div", { class: normalizeClass(unref($style).headerRight) }, [
					createVNode(unref(Checkbox_default), {
						modelValue: unref(syncIsEnabled),
						"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => isRef(syncIsEnabled) ? syncIsEnabled.value = $event : null),
						"label-size": "small",
						label: "Sync views",
						class: "mb-0 mr-s"
					}, null, 8, ["modelValue"]),
					createVNode(unref(ElDropdown), {
						trigger: "click",
						"popper-options": {
							placement: "bottom-end",
							modifiers: unref(modifiers)
						},
						"popper-class": unref($style).popper,
						onVisibleChange: setActiveTab
					}, {
						dropdown: withCtx(() => [createVNode(unref(ElDropdownMenu), { "hide-on-click": false }, {
							default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(unref($style).dropdownContent) }, [createVNode(unref(N8nRadioButtons_default), {
								modelValue: unref(activeTab),
								"onUpdate:modelValue": [_cache[1] || (_cache[1] = ($event) => isRef(activeTab) ? activeTab.value = $event : null), trackTabChange],
								options: unref(tabs$4),
								class: normalizeClass([unref($style).tabs, "mb-xs"])
							}, {
								option: withCtx(({ label: label$4, data: optionData }) => [createTextVNode(toDisplayString(label$4) + " ", 1), optionData?.count ? (openBlock(), createElementBlock("span", _hoisted_1$13, " (" + toDisplayString(optionData.count) + ") ", 1)) : createCommentVNode("", true)]),
								_: 1
							}, 8, [
								"modelValue",
								"options",
								"class"
							]), createBaseVNode("div", null, [
								unref(activeTab) === "nodes" ? (openBlock(), createElementBlock("ul", _hoisted_2$3, [unref(nodeChanges).length > 0 ? (openBlock(true), createElementBlock(Fragment, { key: 0 }, renderList(unref(nodeChanges), (change) => {
									return openBlock(), createBlock(unref(ElDropdownItem), {
										key: change.node.id,
										class: normalizeClass({
											[unref($style).clickableChange]: true,
											[unref($style).clickableChangeActive]: unref(selectedDetailId) === change.node.id
										}),
										onClick: withModifiers(($event) => setSelectedDetailId(change.node.id, unref(activeTab)), ["prevent"])
									}, {
										default: withCtx(() => [
											createVNode(DiffBadge_default, { type: change.status }, null, 8, ["type"]),
											createVNode(NodeIcon_default, {
												"node-type": change.type,
												size: 16,
												class: "ml-2xs mr-4xs"
											}, null, 8, ["node-type"]),
											createBaseVNode("span", { class: normalizeClass(unref($style).nodeName) }, toDisplayString(change.node.name), 3)
										]),
										_: 2
									}, 1032, ["class", "onClick"]);
								}), 128)) : (openBlock(), createElementBlock("li", {
									key: 1,
									class: normalizeClass(unref($style).emptyState)
								}, [createVNode(unref(N8nText_default), {
									color: "text-base",
									size: "small"
								}, {
									default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowDiff.noChanges")), 1)]),
									_: 1
								})], 2))])) : createCommentVNode("", true),
								unref(activeTab) === "connectors" ? (openBlock(), createElementBlock("ul", {
									key: 1,
									class: normalizeClass(unref($style).changes)
								}, [unref(connectionsDiff).size > 0 ? (openBlock(true), createElementBlock(Fragment, { key: 0 }, renderList(unref(connectionsDiff), (change) => {
									return openBlock(), createElementBlock("li", { key: change[0] }, [createBaseVNode("div", null, [createVNode(DiffBadge_default, { type: change[1].status }, null, 8, ["type"])]), createBaseVNode("div", _hoisted_3$1, [createBaseVNode("ul", { class: normalizeClass(unref($style).changesNested) }, [
										createVNode(unref(ElDropdownItem), {
											class: normalizeClass({
												[unref($style).clickableChange]: true,
												[unref($style).clickableChangeActive]: unref(selectedDetailId) === change[1].connection.source?.id
											}),
											onClick: withModifiers(($event) => setSelectedDetailId(change[1].connection.source?.id, unref(activeTab)), ["prevent"])
										}, {
											default: withCtx(() => [createVNode(NodeIcon_default, {
												"node-type": change[1].connection.sourceType,
												size: 16,
												class: "ml-2xs mr-4xs"
											}, null, 8, ["node-type"]), createBaseVNode("span", { class: normalizeClass(unref($style).nodeName) }, toDisplayString(change[1].connection.source?.name), 3)]),
											_: 2
										}, 1032, ["class", "onClick"]),
										createBaseVNode("div", { class: normalizeClass(unref($style).separator) }, null, 2),
										createVNode(unref(ElDropdownItem), {
											class: normalizeClass({
												[unref($style).clickableChange]: true,
												[unref($style).clickableChangeActive]: unref(selectedDetailId) === change[1].connection.target?.id
											}),
											onClick: withModifiers(($event) => setSelectedDetailId(change[1].connection.target?.id, unref(activeTab)), ["prevent"])
										}, {
											default: withCtx(() => [createVNode(NodeIcon_default, {
												"node-type": change[1].connection.targetType,
												size: 16,
												class: "ml-2xs mr-4xs"
											}, null, 8, ["node-type"]), createBaseVNode("span", { class: normalizeClass(unref($style).nodeName) }, toDisplayString(change[1].connection.target?.name), 3)]),
											_: 2
										}, 1032, ["class", "onClick"])
									], 2)])]);
								}), 128)) : (openBlock(), createElementBlock("li", {
									key: 1,
									class: normalizeClass(unref($style).emptyState)
								}, [createVNode(unref(N8nText_default), {
									color: "text-base",
									size: "small"
								}, {
									default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowDiff.noChanges")), 1)]),
									_: 1
								})], 2))], 2)) : createCommentVNode("", true),
								unref(activeTab) === "settings" ? (openBlock(), createElementBlock("ul", _hoisted_4$1, [unref(settingsDiff).length > 0 ? (openBlock(true), createElementBlock(Fragment, { key: 0 }, renderList(unref(settingsDiff), (setting) => {
									return openBlock(), createElementBlock("li", { key: setting.name }, [createVNode(unref(N8nText_default), {
										color: "text-dark",
										size: "medium",
										tag: "div",
										bold: ""
									}, {
										default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText(`workflowSettings.${setting.name}`)), 1)]),
										_: 2
									}, 1024), createVNode(NodeDiff_default, {
										"old-string": setting.before,
										"new-string": setting.after,
										class: normalizeClass(unref($style).noNumberDiff)
									}, null, 8, [
										"old-string",
										"new-string",
										"class"
									])]);
								}), 128)) : (openBlock(), createElementBlock("li", {
									key: 1,
									class: normalizeClass(unref($style).emptyState)
								}, [createVNode(unref(N8nText_default), {
									color: "text-base",
									size: "small"
								}, {
									default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowDiff.noChanges")), 1)]),
									_: 1
								})], 2))])) : createCommentVNode("", true)
							])], 2)]),
							_: 1
						})]),
						default: withCtx(() => [createVNode(unref(N8nButton_default), {
							variant: "subtle",
							style: { "--button--radius": "4px 0 0 4px" }
						}, {
							default: withCtx(() => [unref(changesCount) ? (openBlock(), createElementBlock("div", {
								key: 0,
								class: normalizeClass(unref($style).circleBadge)
							}, toDisplayString(unref(changesCount)), 3)) : createCommentVNode("", true), createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("workflowDiff.changes")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["popper-options", "popper-class"]),
					createVNode(unref(N8nIconButton_default), {
						variant: "subtle",
						icon: "chevron-left",
						class: normalizeClass(unref($style).navigationButton),
						style: {
							"--button--radius": "0",
							"margin": "0 -1px"
						},
						onClick: previousNodeChange
					}, null, 8, ["class"]),
					createVNode(unref(N8nIconButton_default), {
						variant: "subtle",
						icon: "chevron-right",
						class: normalizeClass(unref($style).navigationButton),
						style: { "--button--radius": "0 4px 4px 0" },
						onClick: nextNodeChange
					}, null, 8, ["class"])
				], 2)], 2)]),
				content: withCtx(() => [createVNode(WorkflowDiffContent_default, {
					"source-nodes": unref(source).nodes,
					"source-connections": unref(source).connections,
					"target-nodes": unref(target).nodes,
					"target-connections": unref(target).connections,
					"source-label": sourceLabel.value,
					"target-label": targetLabel.value,
					"source-exists": !!sourceWorkFlow.value.state.value?.workflow,
					"target-exists": !!targetWorkFlow.value.state.value?.workflow,
					"selected-node": unref(selectedNode),
					"node-diffs": unref(nodeDiffs),
					"is-source-workflow-new": unref(isSourceWorkflowNew),
					"nodes-diff": unref(nodesDiff),
					"connections-diff": unref(connectionsDiff),
					onCloseAside: _cache[2] || (_cache[2] = ($event) => selectedDetailId.value = void 0)
				}, {
					sourceLabel: withCtx(() => [sourceWorkFlow.value.state.value ? (openBlock(), createBlock(unref(N8nText_default), {
						key: 0,
						color: "text-dark",
						size: "small",
						class: normalizeClass(unref($style).sourceBadge)
					}, {
						default: withCtx(() => [sourceWorkFlow.value.state.value.remote ? (openBlock(), createBlock(unref(N8nIcon_default), {
							key: 0,
							icon: "git-branch"
						})) : createCommentVNode("", true), createTextVNode(" " + toDisplayString(sourceLabel.value), 1)]),
						_: 1
					}, 8, ["class"])) : createCommentVNode("", true)]),
					sourceEmptyText: withCtx(() => [sourceWorkFlow.value.state.value?.remote ? (openBlock(), createBlock(unref(N8nText_default), {
						key: 0,
						color: "text-base"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(isSourceWorkflowNew) ? unref(i18n$2).baseText("workflowDiff.newWorkflow.remote") : unref(i18n$2).baseText("workflowDiff.deletedWorkflow.remote")), 1)]),
						_: 1
					})) : (openBlock(), createBlock(unref(N8nText_default), {
						key: 1,
						color: "text-base"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(isSourceWorkflowNew) ? unref(i18n$2).baseText("workflowDiff.newWorkflow.database") : unref(i18n$2).baseText("workflowDiff.deletedWorkflow.database")), 1)]),
						_: 1
					}))]),
					targetLabel: withCtx(() => [targetWorkFlow.value.state.value ? (openBlock(), createBlock(unref(N8nText_default), {
						key: 0,
						color: "text-dark",
						size: "small",
						class: normalizeClass(unref($style).sourceBadge)
					}, {
						default: withCtx(() => [targetWorkFlow.value.state.value.remote ? (openBlock(), createBlock(unref(N8nIcon_default), {
							key: 0,
							icon: "git-branch"
						})) : createCommentVNode("", true), createTextVNode(" " + toDisplayString(targetLabel.value), 1)]),
						_: 1
					}, 8, ["class"])) : createCommentVNode("", true)]),
					targetEmptyText: withCtx(() => [targetWorkFlow.value.state.value?.remote ? (openBlock(), createBlock(unref(N8nText_default), {
						key: 0,
						color: "text-base"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowDiff.deletedWorkflow.remote")), 1)]),
						_: 1
					})) : (openBlock(), createBlock(unref(N8nText_default), {
						key: 1,
						color: "text-base"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowDiff.deletedWorkflow.database")), 1)]),
						_: 1
					}))]),
					_: 1
				}, 8, [
					"source-nodes",
					"source-connections",
					"target-nodes",
					"target-connections",
					"source-label",
					"target-label",
					"source-exists",
					"target-exists",
					"selected-node",
					"node-diffs",
					"is-source-workflow-new",
					"nodes-diff",
					"connections-diff"
				])]),
				_: 1
			}, 8, [
				"event-bus",
				"name",
				"custom-class"
			]);
		};
	}
});
var WorkflowDiffModal_vue_vue_type_style_index_0_lang_module_default = {
	workflowDiffModal: "_workflowDiffModal_1lf2g_125",
	sourceBadge: "_sourceBadge_1lf2g_139 _sourceBadge_5j5ev_3",
	tabs: "_tabs_1lf2g_143",
	popper: "_popper_1lf2g_154",
	changes: "_changes_1lf2g_161",
	clickableChange: "_clickableChange_1lf2g_170",
	changesNested: "_changesNested_1lf2g_174",
	clickableChangeActive: "_clickableChangeActive_1lf2g_195",
	nodeName: "_nodeName_1lf2g_199",
	separator: "_separator_1lf2g_207",
	circleBadge: "_circleBadge_1lf2g_216",
	dropdownContent: "_dropdownContent_1lf2g_230",
	noNumberDiff: "_noNumberDiff_1lf2g_242",
	header: "_header_1lf2g_251",
	navigationButton: "_navigationButton_1lf2g_256",
	backButton: "_backButton_1lf2g_260",
	headerLeft: "_headerLeft_1lf2g_264",
	headerRight: "_headerRight_1lf2g_265",
	emptyState: "_emptyState_1lf2g_270"
};
var WorkflowDiffModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowDiffModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowDiffModal_vue_vue_type_style_index_0_lang_module_default }]]);
var PromptMfaCodeModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "PromptMfaCodeModal",
	setup(__props) {
		const i18n$2 = useI18n();
		const formBus = createFormEventBus();
		const readyToSubmit = ref(false);
		const formFields = [{
			name: "mfaCodeOrMfaRecoveryCode",
			initialValue: "",
			properties: {
				label: i18n$2.baseText("mfa.code.recovery.input.label"),
				placeholder: i18n$2.baseText("mfa.code.recovery.input.placeholder"),
				focusInitially: true,
				capitalize: true,
				required: true
			}
		}];
		function onSubmit(values) {
			if (!("mfaCodeOrMfaRecoveryCode" in values && typeof values.mfaCodeOrMfaRecoveryCode === "string")) return;
			if (validate_default(values.mfaCodeOrMfaRecoveryCode)) {
				promptMfaCodeBus.emit("close", { mfaRecoveryCode: values.mfaCodeOrMfaRecoveryCode });
				return;
			}
			promptMfaCodeBus.emit("close", { mfaCode: values.mfaCodeOrMfaRecoveryCode });
		}
		function onClickSave() {
			formBus.emit("submit");
		}
		function onFormReady(isReady) {
			readyToSubmit.value = isReady;
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				width: "500px",
				height: "300px",
				"max-height": "640px",
				title: unref(i18n$2).baseText("mfa.prompt.code.modal.title"),
				"event-bus": unref(promptMfaCodeBus),
				name: unref(PROMPT_MFA_CODE_MODAL_KEY),
				center: true
			}, {
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass([_ctx.$style.formContainer]) }, [createVNode(unref(N8nFormInputs_default), {
					"data-test-id": "mfa-code-or-recovery-code-input",
					inputs: formFields,
					"event-bus": unref(formBus),
					onSubmit,
					onReady: onFormReady
				}, null, 8, ["event-bus"])], 2)]),
				footer: withCtx(() => [createBaseVNode("div", null, [createVNode(unref(N8nButton_default), {
					float: "right",
					disabled: !readyToSubmit.value,
					label: unref(i18n$2).baseText("settings.personal.save"),
					size: "large",
					"data-test-id": "mfa-save-button",
					onClick: onClickSave
				}, null, 8, ["disabled", "label"])])]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var PromptMfaCodeModal_vue_vue_type_style_index_0_lang_module_default = { formContainer: "_formContainer_1rysb_125" };
var PromptMfaCodeModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(PromptMfaCodeModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": PromptMfaCodeModal_vue_vue_type_style_index_0_lang_module_default }]]);
var DynamicModalLoader_default = /* @__PURE__ */ defineComponent({
	__name: "DynamicModalLoader",
	setup(__props) {
		const registeredModals = shallowRef([]);
		const isAsyncComponentFactory = (component) => {
			return typeof component === "function";
		};
		const updateModals = () => {
			const modals = [];
			getAll().forEach((modalDef, key) => {
				const component = isAsyncComponentFactory(modalDef.component) ? defineAsyncComponent(modalDef.component) : modalDef.component;
				modals.push({
					key,
					component
				});
			});
			registeredModals.value = modals;
		};
		let unsubscribe;
		onMounted(() => {
			updateModals();
			unsubscribe = subscribe(() => {
				updateModals();
			});
		});
		onUnmounted(() => {
			unsubscribe?.();
		});
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", null, [(openBlock(true), createElementBlock(Fragment, null, renderList(registeredModals.value, (modal$1) => {
				return openBlock(), createBlock(ModalRoot_default, {
					key: modal$1.key,
					name: modal$1.key
				}, {
					default: withCtx(({ modalName, active: active$1, open, activeId, mode: mode$2, data }) => [(openBlock(), createBlock(resolveDynamicComponent(modal$1.component), {
						"modal-name": modalName,
						active: active$1,
						open,
						"active-id": activeId,
						mode: mode$2,
						data
					}, null, 8, [
						"modal-name",
						"active",
						"open",
						"active-id",
						"mode",
						"data"
					]))]),
					_: 2
				}, 1032, ["name"]);
			}), 128))]);
		};
	}
});
var TemplateCard_vue_vue_type_script_setup_true_lang_default$1 = /* @__PURE__ */ defineComponent({
	__name: "TemplateCard",
	props: {
		template: {},
		currentNodeName: {}
	},
	setup(__props) {
		const props = __props;
		const nodeTypesStore = useNodeTypesStore();
		const { getTemplateRoute, trackTemplateTileClick } = usePersonalizedTemplatesV2Store();
		const router = useRouter();
		const uiStore = useUIStore();
		const locale = useI18n();
		const templateNodes = computed(() => {
			if (!props.template?.nodes) return [];
			const uniqueNodeTypes = new Set(props.template.nodes.map((node) => node.name));
			const nodeTypesArray = Array.from(uniqueNodeTypes);
			if (props.currentNodeName && uniqueNodeTypes.has(props.currentNodeName)) {
				const otherNodes = nodeTypesArray.filter((nodeType) => nodeType !== props.currentNodeName);
				const nodesToShow = [props.currentNodeName];
				if (otherNodes.length > 0) nodesToShow.push(otherNodes[0]);
				return nodesToShow.map((nodeType) => nodeTypesStore.getNodeType(nodeType)).filter(Boolean);
			}
			return nodeTypesArray.slice(0, 2).map((nodeType) => nodeTypesStore.getNodeType(nodeType)).filter(Boolean);
		});
		const handleUseTemplate = async () => {
			trackTemplateTileClick(props.template.id);
			await router.push(getTemplateRoute(props.template.id));
			uiStore.closeModal(EXPERIMENT_TEMPLATE_RECO_V2_KEY);
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(N8nCard_default), { class: normalizeClass(_ctx.$style.suggestion) }, {
				default: withCtx(() => [createBaseVNode("div", null, [templateNodes.value.length > 0 ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass([_ctx.$style.nodes, "mb-s"])
				}, [(openBlock(true), createElementBlock(Fragment, null, renderList(templateNodes.value, (nodeType) => {
					return openBlock(), createElementBlock("div", {
						key: nodeType.name,
						class: normalizeClass(_ctx.$style.nodeIcon)
					}, [createVNode(NodeIcon_default, {
						size: 18,
						"stroke-width": 1.5,
						"node-type": nodeType
					}, null, 8, ["node-type"])], 2);
				}), 128))], 2)) : createCommentVNode("", true), createVNode(unref(N8nText_default), {
					size: "medium",
					bold: true
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(__props.template.name), 1)]),
					_: 1
				})]), createBaseVNode("div", { class: normalizeClass([_ctx.$style.actions, "mt-m"]) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					label: unref(locale).baseText("workflows.templateRecoV2.useTemplate"),
					size: "xsmall",
					onClick: handleUseTemplate
				}, null, 8, ["label"])], 2)]),
				_: 1
			}, 8, ["class"]);
		};
	}
});
var TemplateCard_vue_vue_type_style_index_0_lang_module_default$1 = {
	nodes: "_nodes_1e9yq_125",
	nodeIcon: "_nodeIcon_1e9yq_130",
	suggestion: "_suggestion_1e9yq_141",
	actions: "_actions_1e9yq_148",
	user: "_user_1e9yq_154",
	avatar: "_avatar_1e9yq_160"
};
var TemplateCard_default$1 = /* @__PURE__ */ __plugin_vue_export_helper_default(TemplateCard_vue_vue_type_script_setup_true_lang_default$1, [["__cssModules", { "$style": TemplateCard_vue_vue_type_style_index_0_lang_module_default$1 }]]);
var _hoisted_1$12 = ["src"];
var YoutubeCard_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "YoutubeCard",
	props: {
		videoId: {},
		title: {},
		description: {}
	},
	setup(__props) {
		const props = __props;
		const { trackVideoClick } = usePersonalizedTemplatesV2Store();
		const openYouTubeVideo = () => {
			trackVideoClick(props.title);
			window.open(`https://www.youtube.com/watch?v=${props.videoId}`, "_blank");
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(N8nCard_default), {
				hoverable: "",
				onClick: openYouTubeVideo
			}, {
				default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.tutorial) }, [createBaseVNode("img", {
					src: `https://img.youtube.com/vi/${props.videoId}/hq720.jpg`,
					width: "250px",
					class: normalizeClass(_ctx.$style.video)
				}, null, 10, _hoisted_1$12), createBaseVNode("div", null, [createVNode(unref(N8nText_default), {
					tag: "h2",
					size: "large",
					bold: true
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(props.title), 1)]),
					_: 1
				}), createVNode(unref(N8nText_default), {
					tag: "h3",
					size: "small",
					class: "mt-2xs"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(props.description), 1)]),
					_: 1
				})])], 2)]),
				_: 1
			});
		};
	}
});
var YoutubeCard_vue_vue_type_style_index_0_lang_module_default = {
	tutorial: "_tutorial_7x292_125",
	video: "_video_7x292_131"
};
var YoutubeCard_default = /* @__PURE__ */ __plugin_vue_export_helper_default(YoutubeCard_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": YoutubeCard_vue_vue_type_style_index_0_lang_module_default }]]);
var NodeRecommendationModal_vue_vue_type_script_setup_true_lang_default$1 = /* @__PURE__ */ defineComponent({
	__name: "NodeRecommendationModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const uiStore = useUIStore();
		const { nodes: userSelectedNodes, getNodeData, getTemplateData, trackModalTabView, trackSeeMoreClick } = usePersonalizedTemplatesV2Store();
		const nodeTypesStore = useNodeTypesStore();
		const locale = useI18n();
		const closeModal = () => {
			uiStore.closeModal(EXPERIMENT_TEMPLATE_RECO_V2_KEY);
		};
		const selectedNode = ref(props.data.nodeName ?? userSelectedNodes[0] ?? "");
		const starterTemplates = ref([]);
		const popularTemplates = ref([]);
		const isLoadingTemplates = ref(false);
		const nodes$3 = computed(() => userSelectedNodes.map((nodeName$3) => {
			return {
				value: nodeName$3,
				label: nodeTypesStore.getNodeType(nodeName$3)?.displayName ?? ""
			};
		}));
		const nodeTypes = computed(() => new Map(userSelectedNodes.map((nodeName$3) => [nodeName$3, nodeTypesStore.getNodeType(nodeName$3)])));
		const currentNodeData = computed(() => {
			return getNodeData(selectedNode.value);
		});
		const youtubeVideos = computed(() => {
			return currentNodeData.value.youtube || [];
		});
		const starterLink = computed(() => {
			const name$3 = nodeTypes.value.get(selectedNode.value)?.displayName ?? "";
			const encodedName = encodeURIComponent(name$3);
			return `${TEMPLATES_URLS.BASE_WEBSITE_URL}?integrations=${encodedName}&q=Simple`;
		});
		const popularLink = computed(() => {
			const name$3 = nodeTypes.value.get(selectedNode.value)?.displayName ?? "";
			const encodedName = encodeURIComponent(name$3);
			return `${TEMPLATES_URLS.BASE_WEBSITE_URL}?integrations=${encodedName}`;
		});
		function onSelectedNodeChange(val) {
			selectedNode.value = val;
		}
		watchEffect(async () => {
			if (!selectedNode.value) return;
			const nodeDisplayName = nodes$3.value.find((n) => n.value === selectedNode.value)?.label;
			if (nodeDisplayName) trackModalTabView(nodeDisplayName);
			isLoadingTemplates.value = true;
			try {
				const nodeData = getNodeData(selectedNode.value);
				const starterPromises = nodeData.starter?.map(async (id) => await getTemplateData(id)) || [];
				const popularPromises = nodeData.popular?.map(async (id) => await getTemplateData(id)) || [];
				const [starterResults, popularResults] = await Promise.all([Promise.allSettled(starterPromises), Promise.allSettled(popularPromises)]);
				starterTemplates.value = starterResults.filter((result) => result.status === "fulfilled" && result.value !== null).map((result) => result.value);
				popularTemplates.value = popularResults.filter((result) => result.status === "fulfilled" && result.value !== null).map((result) => result.value);
			} catch (error$2) {
				console.error("Error loading templates:", error$2);
			} finally {
				isLoadingTemplates.value = false;
			}
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(EXPERIMENT_TEMPLATE_RECO_V2_KEY),
				"min-width": "min(800px, 90vw)",
				"max-height": "90vh",
				onClose: closeModal,
				onCanceled: closeModal
			}, {
				header: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.header) }, [createVNode(unref(N8nRadioButtons_default), {
					modelValue: selectedNode.value,
					"onUpdate:modelValue": [_cache[0] || (_cache[0] = ($event) => selectedNode.value = $event), onSelectedNodeChange],
					options: nodes$3.value,
					size: "medium"
				}, {
					option: withCtx((option) => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.tab) }, [createVNode(NodeIcon_default, {
						size: 18,
						class: normalizeClass(_ctx.$style.nodeIcon),
						"stroke-width": 1.5,
						"node-type": nodeTypes.value.get(option.value)
					}, null, 8, ["class", "node-type"])], 2)]),
					_: 1
				}, 8, ["modelValue", "options"])], 2)]),
				content: withCtx(() => [
					createBaseVNode("div", { class: normalizeClass([_ctx.$style.title, "mb-m"]) }, [createVNode(unref(N8nText_default), {
						tag: "h2",
						size: "large",
						bold: true
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.templateRecoV2.starterTemplates")), 1)]),
						_: 1
					}), createVNode(unref(N8nLink_default), {
						href: starterLink.value,
						onClick: _cache[1] || (_cache[1] = ($event) => unref(trackSeeMoreClick)("starter"))
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.templateRecoV2.seeMoreStarterTemplates")), 1)]),
						_: 1
					}, 8, ["href"])], 2),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.suggestions) }, [isLoadingTemplates.value ? (openBlock(), createElementBlock("div", {
						key: 0,
						class: normalizeClass(_ctx.$style.loading)
					}, [createVNode(unref(N8nSpinner_default), { size: "small" }), createVNode(unref(N8nText_default), { size: "small" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.templateRecoV2.loadingTemplates")), 1)]),
						_: 1
					})], 2)) : (openBlock(true), createElementBlock(Fragment, { key: 1 }, renderList(starterTemplates.value, (template) => {
						return openBlock(), createBlock(TemplateCard_default$1, {
							key: template.id,
							template,
							"current-node-name": selectedNode.value
						}, null, 8, ["template", "current-node-name"]);
					}), 128))], 2),
					createBaseVNode("div", { class: normalizeClass([_ctx.$style.title, "mb-m mt-m"]) }, [createVNode(unref(N8nText_default), {
						tag: "h2",
						size: "large",
						bold: true
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.templateRecoV2.popularTemplates")), 1)]),
						_: 1
					}), createVNode(unref(N8nLink_default), {
						href: popularLink.value,
						onClick: _cache[2] || (_cache[2] = ($event) => unref(trackSeeMoreClick)("popular"))
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.templateRecoV2.seeMorePopularTemplates")), 1)]),
						_: 1
					}, 8, ["href"])], 2),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.suggestions) }, [isLoadingTemplates.value ? (openBlock(), createElementBlock("div", {
						key: 0,
						class: normalizeClass(_ctx.$style.loading)
					}, [createVNode(unref(N8nSpinner_default), { size: "small" }), createVNode(unref(N8nText_default), { size: "small" }, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.templateRecoV2.loadingTemplates")), 1)]),
						_: 1
					})], 2)) : (openBlock(true), createElementBlock(Fragment, { key: 1 }, renderList(popularTemplates.value, (template) => {
						return openBlock(), createBlock(TemplateCard_default$1, {
							key: template.id,
							template,
							"current-node-name": selectedNode.value
						}, null, 8, ["template", "current-node-name"]);
					}), 128))], 2),
					createVNode(unref(N8nText_default), {
						tag: "h2",
						size: "large",
						bold: true,
						class: "mb-m mt-m"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("workflows.templateRecoV2.tutorials")), 1)]),
						_: 1
					}),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.videos) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(youtubeVideos.value, (video$1) => {
						return openBlock(), createBlock(YoutubeCard_default, {
							key: video$1.id,
							"video-id": video$1.id,
							title: video$1.title,
							description: video$1.description
						}, null, 8, [
							"video-id",
							"title",
							"description"
						]);
					}), 128))], 2)
				]),
				_: 1
			}, 8, ["name"]);
		};
	}
});
var NodeRecommendationModal_vue_vue_type_style_index_0_lang_module_default$1 = {
	header: "_header_156ku_125",
	tab: "_tab_156ku_130",
	suggestions: "_suggestions_156ku_134",
	title: "_title_156ku_142",
	videos: "_videos_156ku_149",
	loading: "_loading_156ku_156"
};
var NodeRecommendationModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(NodeRecommendationModal_vue_vue_type_script_setup_true_lang_default$1, [["__cssModules", { "$style": NodeRecommendationModal_vue_vue_type_style_index_0_lang_module_default$1 }]]);
var TemplateCard_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "TemplateCard",
	props: { template: {} },
	setup(__props) {
		const props = __props;
		const nodeTypesStore = useNodeTypesStore();
		const { getTemplateRoute, trackTemplateClickFromModal } = usePersonalizedTemplatesV3Store();
		const router = useRouter();
		const uiStore = useUIStore();
		const templateNodes = computed(() => {
			if (!props.template?.nodes) return [];
			const uniqueNodeTypes = new Set(props.template.nodes.map((node) => node.name));
			const nodeTypesArray = Array.from(uniqueNodeTypes);
			const nodesToShow = [];
			const hubspotNode = nodeTypesStore.getNodeType("n8n-nodes-base.hubspot");
			if (hubspotNode && uniqueNodeTypes.has("n8n-nodes-base.hubspot")) nodesToShow.push(hubspotNode);
			const otherNodes = nodeTypesArray.filter((nodeType) => nodeType !== "n8n-nodes-base.hubspot");
			if (otherNodes.length > 0) {
				const otherNodeType = nodeTypesStore.getNodeType(otherNodes[0]);
				if (otherNodeType) nodesToShow.push(otherNodeType);
			}
			return nodesToShow;
		});
		const cleanTitle = computed(() => {
			if (!props.template?.name) return "";
			return props.template.name.replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{1F900}-\u{1F9FF}]|[\u{1FA00}-\u{1FA6F}]|[\u{1FA70}-\u{1FAFF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu, "").replace(/\s+/g, " ").trim();
		});
		const cleanDescription = computed(() => {
			if (!props.template?.description) return "";
			return props.template.description.replace(/\*\*(.*?)\*\*/g, "<script setup lang=\"ts\">").replace(/\*(.*?)\*/g, "<script setup lang=\"ts\">").replace(/`(.*?)`/g, "<script setup lang=\"ts\">").replace(/!\[(.*?)\]\(.*?\)/g, "").replace(/\[(.*?)\]\(.*?\)/g, "<script setup lang=\"ts\">").replace(/#{1,6}\s/g, "").replace(/^\s*[-*+]\s/gm, "").replace(/^\s*\d+\.\s/gm, "").replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{1F900}-\u{1F9FF}]|[\u{1FA00}-\u{1FA6F}]|[\u{1FA70}-\u{1FAFF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu, "").replace(/[\r\n\t\f\v]/g, " ").replace(/[\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/g, " ").replace(/[\u200B-\u200D\uFEFF\uFE0F]/g, "").replace(/\s+/g, " ").trim();
		});
		const handleUseTemplate = async () => {
			trackTemplateClickFromModal(props.template.id);
			await router.push(getTemplateRoute(props.template.id));
			uiStore.closeModal(EXPERIMENT_TEMPLATE_RECO_V3_KEY);
		};
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(N8nCard_default), {
				class: normalizeClass(_ctx.$style.suggestion),
				onClick: handleUseTemplate
			}, {
				default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.content) }, [createVNode(unref(N8nText_default), {
					size: "medium",
					bold: true
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(cleanTitle.value), 1)]),
					_: 1
				}), cleanDescription.value ? (openBlock(), createBlock(unref(N8nText_default), {
					key: 0,
					size: "small",
					class: normalizeClass([_ctx.$style.description, "mt-2xs"])
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(cleanDescription.value), 1)]),
					_: 1
				}, 8, ["class"])) : createCommentVNode("", true)], 2), templateNodes.value.length > 0 ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass([_ctx.$style.nodes, "mt-m"])
				}, [(openBlock(true), createElementBlock(Fragment, null, renderList(templateNodes.value, (nodeType) => {
					return openBlock(), createElementBlock("div", {
						key: nodeType.name,
						class: normalizeClass(_ctx.$style.nodeIcon)
					}, [createVNode(NodeIcon_default, {
						size: 18,
						"stroke-width": 1.5,
						"node-type": nodeType
					}, null, 8, ["node-type"])], 2);
				}), 128))], 2)) : createCommentVNode("", true)]),
				_: 1
			}, 8, ["class"]);
		};
	}
});
var TemplateCard_vue_vue_type_style_index_0_lang_module_default = {
	nodes: "_nodes_1mfcg_125",
	nodeIcon: "_nodeIcon_1mfcg_130",
	remainingNodes: "_remainingNodes_1mfcg_139",
	description: "_description_1mfcg_144",
	suggestion: "_suggestion_1mfcg_154",
	content: "_content_1mfcg_169"
};
var TemplateCard_default = /* @__PURE__ */ __plugin_vue_export_helper_default(TemplateCard_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": TemplateCard_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$11 = { key: 1 };
var NodeRecommendationModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "NodeRecommendationModal",
	setup(__props) {
		const uiStore = useUIStore();
		const templatesStore = useTemplatesStore();
		const { getHubSpotData, getTemplateData, trackPersonalizationModalView, trackTemplatesRepoClickFromModal } = usePersonalizedTemplatesV3Store();
		const locale = useI18n();
		const closeModal = () => {
			uiStore.closeModal(EXPERIMENT_TEMPLATE_RECO_V3_KEY);
		};
		const openTemplateRepository = () => {
			trackTemplatesRepoClickFromModal();
			window.open(templatesStore.websiteTemplateRepositoryURL, "_blank");
		};
		const templates$1 = ref([]);
		const isLoadingTemplates = ref(false);
		watchEffect(async () => {
			trackPersonalizationModalView();
			isLoadingTemplates.value = true;
			try {
				const templatePromises = getHubSpotData().templates?.map(async (id) => await getTemplateData(id)) || [];
				templates$1.value = (await Promise.allSettled(templatePromises)).filter((result) => result.status === "fulfilled" && result.value !== null).map((result) => result.value);
			} catch (error$2) {
				console.error("Error loading templates:", error$2);
			} finally {
				isLoadingTemplates.value = false;
			}
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(EXPERIMENT_TEMPLATE_RECO_V3_KEY),
				"min-width": "min(800px, 90vw)",
				"max-height": "90vh",
				class: normalizeClass(_ctx.$style.modal),
				onClose: closeModal,
				onCanceled: closeModal
			}, {
				header: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.header) }, [createVNode(unref(N8nText_default), {
					tag: "h1",
					size: "large",
					bold: true
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("experiments.personalizedTemplatesV3.recommendedForYou")), 1)]),
					_: 1
				})], 2)]),
				content: withCtx(() => [isLoadingTemplates.value ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.loading)
				}, [createVNode(unref(N8nSpinner_default), { size: "small" }), createVNode(unref(N8nText_default), { size: "small" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("experiments.personalizedTemplatesV3.loadingTemplates")), 1)]),
					_: 1
				})], 2)) : (openBlock(), createElementBlock("div", _hoisted_1$11, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.templates) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(templates$1.value, (template) => {
					return openBlock(), createBlock(TemplateCard_default, {
						key: template.id,
						template
					}, null, 8, ["template"]);
				}), 128))], 2), createVNode(unref(N8nCard_default), {
					class: normalizeClass([_ctx.$style.footerCard]),
					onClick: openTemplateRepository
				}, {
					default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footerContent) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footerText) }, [createVNode(unref(N8nText_default), {
						size: "medium",
						bold: true,
						class: "mr-s",
						color: "text-light"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("experiments.personalizedTemplatesV3.couldntFind")), 1)]),
						_: 1
					}), createVNode(unref(N8nText_default), {
						size: "small",
						class: normalizeClass("mt-2xs")
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(locale).baseText("experiments.personalizedTemplatesV3.browseAllTemplates")), 1)]),
						_: 1
					})], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.footerIcon) }, [createVNode(unref(N8nIcon_default), {
						icon: "external-link",
						size: "medium"
					})], 2)], 2)]),
					_: 1
				}, 8, ["class"])]))]),
				_: 1
			}, 8, ["name", "class"]);
		};
	}
});
var NodeRecommendationModal_vue_vue_type_style_index_0_lang_module_default = {
	modal: "_modal_1a3q6_125",
	header: "_header_1a3q6_129",
	templates: "_templates_1a3q6_134",
	loading: "_loading_1a3q6_141",
	footerCard: "_footerCard_1a3q6_150",
	footerContent: "_footerContent_1a3q6_161",
	footerText: "_footerText_1a3q6_167",
	footerIcon: "_footerIcon_1a3q6_172"
};
var NodeRecommendationModal_default$1 = /* @__PURE__ */ __plugin_vue_export_helper_default(NodeRecommendationModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": NodeRecommendationModal_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$10 = { key: 2 };
var VALUE_MAX_LENGTH = 1e3;
var VariableModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "VariableModal",
	props: {
		mode: { default: "new" },
		variable: {}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const { showError } = useToast();
		const uiStore = useUIStore();
		const environmentsStore = useEnvironmentsStore();
		const projectsStore = useProjectsStore();
		const modalBus = createEventBus();
		const loading$2 = ref(false);
		const validateOnBlur = ref(false);
		const keyInputRef = ref(null);
		const keyValidationRules = [
			{ name: "REQUIRED" },
			{
				name: "MAX_LENGTH",
				config: { maximum: 50 }
			},
			{
				name: "MATCH_REGEX",
				config: {
					regex: /^[A-Za-z0-9_]+$/,
					message: i18n$2.baseText("variables.editing.key.error.regex")
				}
			}
		];
		const valueValidationRules = [{
			name: "MAX_LENGTH",
			config: { maximum: VALUE_MAX_LENGTH }
		}];
		const form$4 = reactive({
			key: props.variable?.key || "",
			value: props.variable?.value || "",
			projectId: props.variable ? props.variable.project?.id : projectsStore.currentProjectId
		});
		const formValidation = reactive({
			key: false,
			value: false
		});
		const keyExistsInSameScope = computed(() => {
			if (!form$4.key) return false;
			return !!environmentsStore.variables.find((v) => {
				if (props.mode === "edit" && v.id === props.variable?.id) return false;
				if (v.key !== form$4.key) return false;
				if (!v.project && !form$4.projectId) return true;
				return v.project && v.project?.id === form$4.projectId;
			});
		});
		const globalVariableExistsWarning = computed(() => {
			if (!form$4.key || keyExistsInSameScope.value) return false;
			if (!form$4.projectId) return false;
			return !!environmentsStore.variables.find((v) => v.key === form$4.key && !v.project);
		});
		const isValid = computed(() => Object.values(formValidation).every((value) => value) && !keyExistsInSameScope.value);
		const modalTitle = computed(() => props.mode === "new" ? i18n$2.baseText("variables.modal.title.create") : i18n$2.baseText("variables.modal.title.edit"));
		const projectOptions = computed(() => {
			const options$1 = [{
				value: "",
				label: i18n$2.baseText("variables.modal.scope.global"),
				icon: {
					type: "icon",
					value: "database"
				}
			}];
			if (projectsStore.availableProjects) options$1.push(...projectsStore.availableProjects.filter((project) => project.type !== "personal").map((project) => {
				const icon$7 = project.icon || {
					type: "icon",
					value: "layer-group"
				};
				return {
					value: project.id,
					label: project.name ?? project.id,
					icon: icon$7
				};
			}));
			return options$1;
		});
		const selectedProjectIcon = computed(() => {
			return projectOptions.value.find((option) => option.value === form$4.projectId)?.icon ?? {
				type: "icon",
				value: "database"
			};
		});
		const showScopeField = computed(() => {
			return props.mode === "new" && !projectsStore.currentProjectId;
		});
		function closeModal() {
			uiStore.closeModal(VARIABLE_MODAL_KEY);
		}
		async function handleSubmit() {
			validateOnBlur.value = true;
			if (!isValid.value) return;
			try {
				loading$2.value = true;
				const variablePayload = {
					key: form$4.key,
					value: form$4.value
				};
				if (typeof form$4.projectId !== "undefined") variablePayload.projectId = form$4.projectId;
				if (props.mode === "new") await environmentsStore.createVariable(variablePayload);
				else if (props.variable) await environmentsStore.updateVariable({
					id: props.variable.id,
					...variablePayload
				});
				closeModal();
			} catch (error$2) {
				showError(error$2, i18n$2.baseText("variables.errors.save"));
			} finally {
				loading$2.value = false;
			}
		}
		onMounted(async () => {
			await nextTick();
			const input$1 = keyInputRef.value?.inputRef;
			if (input$1) requestAnimationFrame(() => {
				input$1.focus();
			});
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				title: modalTitle.value,
				"event-bus": unref(modalBus),
				name: unref(VARIABLE_MODAL_KEY),
				width: "600px",
				"lock-scroll": false,
				"close-on-esc": true,
				"close-on-click-modal": false,
				"show-close": true
			}, {
				content: withCtx(() => [createBaseVNode("div", {
					class: normalizeClass(_ctx.$style.form),
					onKeyup: withKeys(handleSubmit, ["enter"])
				}, [
					createVNode(unref(N8nFormInput_default), {
						ref_key: "keyInputRef",
						ref: keyInputRef,
						modelValue: form$4.key,
						"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => form$4.key = $event),
						label: unref(i18n$2).baseText("variables.modal.key.label"),
						name: "key",
						"focus-initially": "",
						"data-test-id": "variable-modal-key-input",
						placeholder: unref(i18n$2).baseText("variables.editing.key.placeholder"),
						required: "",
						"validate-on-blur": validateOnBlur.value,
						"validation-rules": keyValidationRules,
						onValidate: _cache[1] || (_cache[1] = (value) => formValidation.key = value)
					}, null, 8, [
						"modelValue",
						"label",
						"placeholder",
						"validate-on-blur"
					]),
					keyExistsInSameScope.value ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 0,
						theme: "danger",
						"data-test-id": "variable-modal-key-exists-error"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("variables.modal.error.keyExistsInProject")), 1)]),
						_: 1
					})) : globalVariableExistsWarning.value ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 1,
						theme: "warning",
						"data-test-id": "variable-modal-global-exists-warning"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("variables.modal.warning.globalKeyExists")), 1)]),
						_: 1
					})) : createCommentVNode("", true),
					createVNode(unref(N8nFormInput_default), {
						modelValue: form$4.value,
						"onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => form$4.value = $event),
						name: "value",
						label: unref(i18n$2).baseText("variables.modal.value.label"),
						"data-test-id": "variable-modal-value-input",
						placeholder: unref(i18n$2).baseText("variables.editing.value.placeholder"),
						type: "textarea",
						autosize: {
							minRows: 3,
							maxRows: 6
						},
						maxlength: VALUE_MAX_LENGTH,
						"validate-on-blur": validateOnBlur.value,
						"validation-rules": valueValidationRules,
						onValidate: _cache[3] || (_cache[3] = (value) => formValidation.value = value)
					}, null, 8, [
						"modelValue",
						"label",
						"placeholder",
						"validate-on-blur"
					]),
					showScopeField.value ? (openBlock(), createElementBlock("div", _hoisted_1$10, [createVNode(unref(N8nInputLabel_default), {
						label: unref(i18n$2).baseText("variables.modal.scope.label"),
						color: "text-dark"
					}, {
						default: withCtx(() => [createVNode(unref(N8nSelect_default), {
							modelValue: form$4.projectId,
							"onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => form$4.projectId = $event),
							size: "large",
							filterable: "",
							"data-test-id": "variable-modal-scope-select"
						}, {
							prefix: withCtx(() => [selectedProjectIcon.value?.type === "emoji" ? (openBlock(), createBlock(unref(N8nText_default), {
								key: 0,
								class: normalizeClass(_ctx.$style.menuItemEmoji)
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(selectedProjectIcon.value.value), 1)]),
								_: 1
							}, 8, ["class"])) : selectedProjectIcon.value?.value ? (openBlock(), createBlock(unref(N8nIcon_default), {
								key: 1,
								icon: selectedProjectIcon.value.value
							}, null, 8, ["icon"])) : createCommentVNode("", true)]),
							default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(projectOptions.value, (option) => {
								return openBlock(), createBlock(unref(N8nOption_default), {
									key: option.value || "global",
									value: option.value,
									label: option.label,
									class: normalizeClass({ [_ctx.$style.globalOption]: option.value === "" })
								}, {
									default: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.optionContent) }, [option.icon?.type === "emoji" ? (openBlock(), createBlock(unref(N8nText_default), {
										key: 0,
										class: normalizeClass(_ctx.$style.menuItemEmoji)
									}, {
										default: withCtx(() => [createTextVNode(toDisplayString(option.icon.value), 1)]),
										_: 2
									}, 1032, ["class"])) : option.icon?.value ? (openBlock(), createBlock(unref(N8nIcon_default), {
										key: 1,
										icon: option.icon.value
									}, null, 8, ["icon"])) : createCommentVNode("", true), createBaseVNode("span", null, toDisplayString(option.label), 1)], 2)]),
									_: 2
								}, 1032, [
									"value",
									"label",
									"class"
								]);
							}), 128))]),
							_: 1
						}, 8, ["modelValue"])]),
						_: 1
					}, 8, ["label"])])) : createCommentVNode("", true)
				], 34)]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					label: unref(i18n$2).baseText("variables.modal.button.cancel"),
					"data-test-id": "variable-modal-cancel-button",
					onClick: closeModal
				}, null, 8, ["label"]), createVNode(unref(N8nButton_default), {
					loading: loading$2.value,
					disabled: !isValid.value,
					label: unref(i18n$2).baseText("variables.modal.button.save"),
					"data-test-id": "variable-modal-save-button",
					onClick: handleSubmit
				}, null, 8, [
					"loading",
					"disabled",
					"label"
				])], 2)]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var VariableModal_vue_vue_type_style_index_0_lang_module_default = {
	form: "_form_uzzue_125",
	footer: "_footer_uzzue_131",
	optionContent: "_optionContent_uzzue_139",
	iconEmoji: "_iconEmoji_uzzue_145",
	globalOption: "_globalOption_uzzue_150"
};
var VariableModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(VariableModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": VariableModal_vue_vue_type_style_index_0_lang_module_default }]]);
var StopManyExecutionsModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "StopManyExecutionsModal",
	props: { modalName: {} },
	setup(__props) {
		const props = __props;
		const isLoading = ref(false);
		const executionsStore = useExecutionsStore();
		const i18n$2 = useI18n();
		const telemetry$1 = useTelemetry();
		const checkRunning = ref(true);
		const checkQueued = ref(true);
		const checkWaiting = ref(true);
		const activeFilterHint = computed(() => {
			const { startedBefore, startedAfter } = executionsStore.executionsFilters;
			if (startedBefore && startedAfter) return i18n$2.baseText("executionStopManyModal.dateHint.startEnd", { interpolate: {
				startedBefore,
				startedAfter
			} });
			else if (startedAfter) return i18n$2.baseText("executionStopManyModal.dateHint.startOnly", { interpolate: { startedAfter } });
			else if (startedBefore) return i18n$2.baseText("executionStopManyModal.dateHint.endOnly", { interpolate: { startedBefore } });
			return "";
		});
		const allWorkflowsHint = computed(() => {
			if (executionsStore.filters.workflowId === "all") return i18n$2.baseText("executionStopManyModal.allWorkflowsHint");
			return "";
		});
		const toast = useToast();
		const modalBus = createEventBus();
		const onSubmit = async () => {
			try {
				const status = [
					checkWaiting.value ? ["waiting"] : [],
					checkRunning.value ? ["running"] : [],
					checkQueued.value ? ["new"] : []
				].flat();
				const { startedBefore, startedAfter } = executionsStore.executionsFilters;
				isLoading.value = true;
				const { stopped: count } = await executionsStore.stopManyExecutions({
					status,
					startedBefore,
					startedAfter
				});
				isLoading.value = false;
				toast.showMessage({
					title: i18n$2.baseText("executionStopManyModal.success", { interpolate: { count } }),
					type: count > 0 ? "success" : "info"
				});
				telemetry$1.track("User confirmed stop many executions", {
					waitingExecutions: checkWaiting.value,
					runningExecutions: checkRunning.value,
					queuedExecutions: checkQueued.value,
					stoppedCount: count
				});
			} catch (e) {
				toast.showError(e, i18n$2.baseText("executionStopManyModal.error.failure"));
			} finally {
				modalBus.emit("close");
			}
		};
		function closeModal() {
			modalBus.emit("close");
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				"max-width": "540px",
				title: unref(i18n$2).baseText("executionStopManyModal.title"),
				"event-bus": unref(modalBus),
				name: props.modalName,
				center: true
			}, {
				content: withCtx(() => [
					activeFilterHint.value ? (openBlock(), createBlock(unref(ElRow), {
						key: 0,
						class: normalizeClass(_ctx.$style.vertPadding)
					}, {
						default: withCtx(() => [createVNode(unref(N8nCallout_default), { theme: "info" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(activeFilterHint.value), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"])) : createCommentVNode("", true),
					allWorkflowsHint.value ? (openBlock(), createBlock(unref(ElRow), {
						key: 1,
						class: normalizeClass(_ctx.$style.vertPadding)
					}, {
						default: withCtx(() => [createVNode(unref(N8nCallout_default), { theme: "warning" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(allWorkflowsHint.value), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"])) : createCommentVNode("", true),
					createVNode(unref(ElRow), { class: normalizeClass(_ctx.$style.vertPadding) }, {
						default: withCtx(() => [createVNode(unref(N8nText_default), { color: "text-base" }, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("executionStopManyModal.description")), 1)]),
							_: 1
						})]),
						_: 1
					}, 8, ["class"]),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(N8nFormInput_default), {
							modelValue: checkQueued.value,
							"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => checkQueued.value = $event),
							type: "checkbox",
							label: unref(i18n$2).baseText("executionStopManyModal.queued"),
							"data-test-id": "sme-check-queued"
						}, null, 8, ["modelValue", "label"])]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(N8nFormInput_default), {
							modelValue: checkRunning.value,
							"onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => checkRunning.value = $event),
							type: "checkbox",
							label: unref(i18n$2).baseText("executionStopManyModal.running"),
							"data-test-id": "sme-check-running"
						}, null, 8, ["modelValue", "label"])]),
						_: 1
					}),
					createVNode(unref(ElRow), null, {
						default: withCtx(() => [createVNode(unref(N8nFormInput_default), {
							modelValue: checkWaiting.value,
							"onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => checkWaiting.value = $event),
							type: "checkbox",
							label: unref(i18n$2).baseText("executionStopManyModal.waiting"),
							"data-test-id": "sme-check-waiting"
						}, null, 8, ["modelValue", "label"])]),
						_: 1
					})
				]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					label: unref(i18n$2).baseText("executionStopManyModal.button.close"),
					"data-test-id": "sme-close-button",
					onClick: closeModal
				}, null, 8, ["label"]), createVNode(unref(N8nButton_default), {
					disabled: !checkWaiting.value && !checkRunning.value && !checkQueued.value,
					label: unref(i18n$2).baseText("executionStopManyModal.button.submit"),
					loading: isLoading.value,
					"data-test-id": "sme-submit-button",
					onClick: onSubmit
				}, null, 8, [
					"disabled",
					"label",
					"loading"
				])], 2)]),
				_: 1
			}, 8, [
				"title",
				"event-bus",
				"name"
			]);
		};
	}
});
var StopManyExecutionsModal_vue_vue_type_style_index_0_lang_module_default = {
	form: "_form_1v8e2_125",
	footer: "_footer_1v8e2_131",
	vertPadding: "_vertPadding_1v8e2_139"
};
var StopManyExecutionsModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(StopManyExecutionsModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": StopManyExecutionsModal_vue_vue_type_style_index_0_lang_module_default }]]);
var WorkflowDescriptionModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowDescriptionModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const modalBus = createEventBus();
		const i18n$2 = useI18n();
		const toast = useToast();
		const telemetry$1 = useTelemetry();
		const settingsStore = useSettingsStore();
		const workflowStore = useWorkflowsStore();
		const descriptionValue = ref(props.data.workflowDescription ?? "");
		const descriptionInput = useTemplateRef("descriptionInput");
		const isSaving = ref(false);
		const normalizedCurrentValue = computed(() => (descriptionValue.value ?? "").trim());
		const normalizedLastSaved = computed(() => (props.data.workflowDescription ?? "").trim());
		const canSave = computed(() => normalizedCurrentValue.value !== normalizedLastSaved.value);
		const isMcpEnabled = computed(() => settingsStore.isModuleActive("mcp") && settingsStore.moduleSettings.mcp?.mcpAccessEnabled);
		const textareaTip = computed(() => isMcpEnabled.value ? i18n$2.baseText("workflow.description.mcp") : i18n$2.baseText("workflow.description.nomcp"));
		const saveDescription = async () => {
			isSaving.value = true;
			try {
				await workflowStore.saveWorkflowDescription(props.data.workflowId, normalizedCurrentValue.value ?? null);
				props.data.onSave?.(normalizedCurrentValue.value ?? null);
				telemetry$1.track("User set workflow description", {
					workflow_id: props.data.workflowId,
					description: normalizedCurrentValue.value ?? null
				});
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("workflow.description.error.title"));
			} finally {
				isSaving.value = false;
			}
		};
		const cancel = () => {
			modalBus.emit("close");
		};
		const save = async () => {
			await saveDescription();
			modalBus.emit("close");
		};
		const handleKeyDown = async (event) => {
			if (event.key === "Escape") {
				event.preventDefault();
				event.stopPropagation();
				cancel();
			}
			if (event.key === "Enter" && !event.shiftKey) {
				if (!canSave.value) return;
				event.preventDefault();
				event.stopPropagation();
				await save();
			}
		};
		onMounted(() => {
			setTimeout(() => {
				descriptionInput.value?.focus();
			}, 150);
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(WORKFLOW_DESCRIPTION_MODAL_KEY),
				title: unref(i18n$2).baseText("generic.description"),
				width: "500",
				class: normalizeClass(_ctx.$style.container),
				"event-bus": unref(modalBus),
				"close-on-click-modal": false
			}, {
				content: withCtx(() => [createBaseVNode("div", {
					class: normalizeClass(_ctx.$style["description-edit-content"]),
					"data-test-id": "workflow-description-edit-content"
				}, [createVNode(unref(N8nText_default), {
					color: "text-base",
					"data-test-id": "descriptionTooltip"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(textareaTip.value), 1)]),
					_: 1
				}), createVNode(unref(Input_default), {
					ref_key: "descriptionInput",
					ref: descriptionInput,
					modelValue: descriptionValue.value,
					"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => descriptionValue.value = $event),
					rows: 6,
					"data-test-id": "workflow-description-input",
					type: "textarea",
					onKeydown: handleKeyDown
				}, null, 8, ["modelValue"])], 2)]),
				footer: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style["popover-footer"]) }, [createVNode(unref(N8nButton_default), {
					variant: "subtle",
					label: unref(i18n$2).baseText("generic.cancel"),
					size: "small",
					disabled: isSaving.value,
					"data-test-id": "workflow-description-cancel-button",
					onClick: cancel
				}, null, 8, ["label", "disabled"]), createVNode(unref(N8nButton_default), {
					variant: "solid",
					label: unref(i18n$2).baseText("generic.unsavedWork.confirmMessage.confirmButtonText"),
					loading: isSaving.value,
					disabled: !canSave.value || isSaving.value,
					"data-test-id": "workflow-description-save-button",
					onClick: save
				}, null, 8, [
					"label",
					"loading",
					"disabled"
				])], 2)]),
				_: 1
			}, 8, [
				"name",
				"title",
				"class",
				"event-bus"
			]);
		};
	}
});
var WorkflowDescriptionModal_vue_vue_type_style_index_0_lang_module_default = {
	"description-edit-content": "_description-edit-content_1vjsk_125",
	"popover-footer": "_popover-footer_1vjsk_132"
};
var WorkflowDescriptionModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowDescriptionModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowDescriptionModal_vue_vue_type_style_index_0_lang_module_default }]]);
var WorkflowActivationErrorMessage_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowActivationErrorMessage",
	props: { message: {} },
	setup(__props) {
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", null, [
				createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowActivator.showMessage.displayActivationError.message.errorDataNotUndefined")) + " ", 1),
				_cache[0] || (_cache[0] = createBaseVNode("br", null, null, -1)),
				createBaseVNode("i", null, toDisplayString(__props.message), 1)
			]);
		};
	}
});
var WorkflowPublishModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WorkflowPublishModal",
	setup(__props) {
		const modalBus = createEventBus();
		const i18n$2 = useI18n();
		const workflowsStore = useWorkflowsStore();
		const credentialsStore = useCredentialsStore();
		const { showMessage } = useToast();
		const workflowActivate = useWorkflowActivate();
		const publishing = ref(false);
		const publishForm = useTemplateRef("publishForm");
		const description$8 = ref("");
		const versionName = ref("");
		const foundTriggers = computed(() => getActivatableTriggerNodes(workflowsStore.workflowTriggerNodes));
		const containsTrigger = computed(() => {
			return foundTriggers.value.length > 0;
		});
		const wfHasAnyChanges = computed(() => {
			return workflowsStore.workflow.versionId !== workflowsStore.workflow.activeVersion?.versionId;
		});
		const hasNodeIssues = computed(() => workflowsStore.nodesIssuesExist);
		const inputsDisabled = computed(() => {
			return !wfHasAnyChanges.value || !containsTrigger.value || hasNodeIssues.value || publishing.value;
		});
		const isPublishDisabled = computed(() => {
			return inputsDisabled.value || versionName.value.trim().length === 0;
		});
		const activeCalloutId = computed(() => {
			if (!containsTrigger.value) return "noTrigger";
			if (hasNodeIssues.value) return "nodeIssues";
			if (!wfHasAnyChanges.value) return "noChanges";
			return null;
		});
		function onModalOpened() {
			publishForm.value?.focusInput();
		}
		onMounted(() => {
			const versionData = workflowsStore.versionData;
			if (!versionName.value) if (versionData?.name) versionName.value = versionData.name;
			else versionName.value = generateVersionName(workflowsStore.workflow.versionId);
			if (!description$8.value && versionData?.description) description$8.value = versionData.description;
			modalBus.on("opened", onModalOpened);
		});
		onBeforeUnmount(() => {
			modalBus.off("opened", onModalOpened);
		});
		function findManagedOpenAiCredentialId(usedCredentials) {
			return Object.keys(usedCredentials).find((credentialId) => {
				const credential = credentialsStore.state.credentials[credentialId];
				return credential.isManaged && credential.type === "openAiApi";
			});
		}
		function hasActiveNodeUsingCredential(nodes$3, credentialId) {
			return nodes$3.some((node) => node?.credentials?.["openAiApi"]?.id === credentialId && !node.disabled);
		}
		const shouldShowFreeAiCreditsWarning = computed(() => {
			const usedCredentials = workflowsStore?.usedCredentials;
			if (!usedCredentials) return false;
			const managedOpenAiCredentialId = findManagedOpenAiCredentialId(usedCredentials);
			if (!managedOpenAiCredentialId) return false;
			return hasActiveNodeUsingCredential(workflowsStore.allNodes, managedOpenAiCredentialId);
		});
		async function displayActivationError() {
			let errorMessage;
			try {
				const errorData = await workflowsStore.getActivationError(workflowsStore.workflow.id);
				if (errorData === void 0) errorMessage = i18n$2.baseText("workflowActivator.showMessage.displayActivationError.message.errorDataUndefined");
				else errorMessage = h(WorkflowActivationErrorMessage_default, { message: errorData });
			} catch {
				errorMessage = i18n$2.baseText("workflowActivator.showMessage.displayActivationError.message.catchBlock");
			}
			showMessage({
				title: i18n$2.baseText("workflowActivator.showMessage.displayActivationError.title"),
				message: errorMessage,
				type: "warning",
				duration: 0
			});
		}
		async function handlePublish() {
			if (isPublishDisabled.value) return;
			publishing.value = true;
			const { success, errorHandled } = await workflowActivate.publishWorkflow(workflowsStore.workflow.id, workflowsStore.workflow.versionId, {
				name: versionName.value,
				description: description$8.value
			});
			if (success) {
				workflowsStore.setWorkflowVersionData({
					versionId: workflowsStore.workflow.versionId,
					name: versionName.value,
					description: description$8.value
				});
				if (shouldShowFreeAiCreditsWarning.value) showMessage({
					title: i18n$2.baseText("freeAi.credits.showWarning.workflow.activation.title"),
					message: i18n$2.baseText("freeAi.credits.showWarning.workflow.activation.description"),
					type: "warning",
					duration: 0
				});
				telemetry.track("User published version from canvas", { workflow_id: workflowsStore.workflow.id });
				modalBus.emit("close");
			} else if (!errorHandled) await displayActivationError();
			publishing.value = false;
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				"max-width": "500px",
				"max-height": "85vh",
				name: unref(WORKFLOW_PUBLISH_MODAL_KEY),
				center: true,
				"show-close": true,
				"close-on-click-modal": false,
				"event-bus": unref(modalBus)
			}, {
				header: withCtx(() => [createVNode(unref(N8nHeading_default), { size: "xlarge" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflows.publishModal.title")), 1)]),
					_: 1
				})]),
				content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.content) }, [
					activeCalloutId.value === "noTrigger" ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 0,
						theme: "danger",
						icon: "status-error"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflows.publishModal.noTriggerMessage")), 1)]),
						_: 1
					})) : activeCalloutId.value === "nodeIssues" ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 1,
						theme: "danger",
						icon: "status-error"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.title", {
							interpolate: { count: unref(workflowsStore).nodesWithIssues.length },
							adjustToNumber: unref(workflowsStore).nodesWithIssues.length
						})) + " ", 1), createBaseVNode("ul", { class: normalizeClass(_ctx.$style.nodeLinks) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(workflowsStore).nodesWithIssues, (node) => {
							return openBlock(), createElementBlock("li", { key: node.id }, [createVNode(unref(N8nLink_default), {
								size: "small",
								to: `/workflow/${unref(workflowsStore).workflow.id}/${node.id}`,
								onClick: _cache[0] || (_cache[0] = ($event) => unref(modalBus).emit("close"))
							}, {
								default: withCtx(() => [createTextVNode(toDisplayString(node.name), 1)]),
								_: 2
							}, 1032, ["to"])]);
						}), 128))], 2)]),
						_: 1
					})) : activeCalloutId.value === "noChanges" ? (openBlock(), createBlock(unref(N8nCallout_default), {
						key: 2,
						theme: "warning"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("workflows.publishModal.noChanges")), 1)]),
						_: 1
					})) : createCommentVNode("", true),
					createVNode(WorkflowVersionForm_default, {
						ref_key: "publishForm",
						ref: publishForm,
						"version-name": versionName.value,
						"onUpdate:versionName": _cache[1] || (_cache[1] = ($event) => versionName.value = $event),
						description: description$8.value,
						"onUpdate:description": _cache[2] || (_cache[2] = ($event) => description$8.value = $event),
						disabled: inputsDisabled.value,
						"version-name-test-id": "workflow-publish-version-name-input",
						"description-test-id": "workflow-publish-description-input",
						onSubmit: handlePublish
					}, null, 8, [
						"version-name",
						"description",
						"disabled"
					]),
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.actions) }, [createVNode(unref(N8nButton_default), {
						variant: "subtle",
						disabled: publishing.value,
						label: unref(i18n$2).baseText("generic.cancel"),
						"data-test-id": "workflow-publish-cancel-button",
						onClick: _cache[3] || (_cache[3] = ($event) => unref(modalBus).emit("close"))
					}, null, 8, ["disabled", "label"]), createVNode(unref(N8nButton_default), {
						disabled: isPublishDisabled.value,
						loading: publishing.value,
						label: unref(i18n$2).baseText("workflows.publish"),
						"data-test-id": "workflow-publish-button",
						onClick: handlePublish
					}, null, 8, [
						"disabled",
						"loading",
						"label"
					])], 2)
				], 2)]),
				_: 1
			}, 8, ["name", "event-bus"]);
		};
	}
});
var WorkflowPublishModal_vue_vue_type_style_index_0_lang_module_default = {
	content: "_content_1b5ei_125",
	actions: "_actions_1b5ei_131",
	nodeLinks: "_nodeLinks_1b5ei_137"
};
var WorkflowPublishModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WorkflowPublishModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WorkflowPublishModal_vue_vue_type_style_index_0_lang_module_default }]]);
var Badge_vue_vue_type_script_lang_default = {
	components: { ElTag },
	props: ["text", "type"]
};
var Badge_vue_vue_type_style_index_0_lang_module_default = {
	badge: "_badge_pehdx_125",
	danger: "_danger_pehdx_135 _badge_pehdx_125",
	warning: "_warning_pehdx_142 _badge_pehdx_125"
};
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
	const _component_ElTag = resolveComponent("ElTag");
	return $props.type === "danger" ? (openBlock(), createBlock(_component_ElTag, {
		key: 0,
		type: "danger",
		size: "small",
		class: normalizeClass(_ctx.$style["danger"]),
		"disable-transitions": true
	}, {
		default: withCtx(() => [createTextVNode(toDisplayString($props.text), 1)]),
		_: 1
	}, 8, ["class"])) : $props.type === "warning" ? (openBlock(), createBlock(_component_ElTag, {
		key: 1,
		size: "small",
		class: normalizeClass(_ctx.$style["warning"]),
		"disable-transitions": true
	}, {
		default: withCtx(() => [createTextVNode(toDisplayString($props.text), 1)]),
		_: 1
	}, 8, ["class"])) : createCommentVNode("", true);
}
var Badge_default = /* @__PURE__ */ __plugin_vue_export_helper_default(Badge_vue_vue_type_script_lang_default, [["render", _sfc_render], ["__cssModules", { "$style": Badge_vue_vue_type_style_index_0_lang_module_default }]]);
var WarningTooltip_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "WarningTooltip",
	setup(__props) {
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("span", null, [createVNode(unref(N8nTooltip_default), {
				content: " ",
				placement: "top"
			}, {
				content: withCtx(() => [renderSlot(_ctx.$slots, "default")]),
				default: withCtx(() => [createVNode(unref(N8nIcon_default), {
					class: normalizeClass(_ctx.$style["icon"]),
					icon: "triangle-alert"
				}, null, 8, ["class"])]),
				_: 3
			})]);
		};
	}
});
var WarningTooltip_vue_vue_type_style_index_0_lang_module_default = { icon: "_icon_1n98w_125" };
var WarningTooltip_default = /* @__PURE__ */ __plugin_vue_export_helper_default(WarningTooltip_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": WarningTooltip_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$9 = ["href"];
var VersionCard_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "VersionCard",
	props: { version: {} },
	setup(__props) {
		const i18n$2 = useI18n();
		const nodeName$3 = (node) => {
			return node !== null ? node.displayName : i18n$2.baseText("versionCard.unknown");
		};
		return (_ctx, _cache) => {
			const _directive_n8n_html = resolveDirective("n8n-html");
			return __props.version ? (openBlock(), createElementBlock("a", {
				key: 0,
				href: __props.version.documentationUrl,
				target: "_blank",
				class: normalizeClass(_ctx.$style.card),
				"data-test-id": "version-card"
			}, [
				createBaseVNode("div", { class: normalizeClass(_ctx.$style.header) }, [createBaseVNode("div", null, [
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.name) }, toDisplayString(`${unref(i18n$2).baseText("versionCard.version")} ${__props.version.name}`), 3),
					__props.version.hasSecurityIssue ? (openBlock(), createBlock(WarningTooltip_default, { key: 0 }, {
						default: withCtx(() => [withDirectives(createBaseVNode("span", null, null, 512), [[_directive_n8n_html, unref(i18n$2).baseText("versionCard.thisVersionHasASecurityIssue")]])]),
						_: 1
					})) : createCommentVNode("", true),
					__props.version.hasSecurityFix ? (openBlock(), createBlock(Badge_default, {
						key: 1,
						text: unref(i18n$2).baseText("versionCard.securityUpdate"),
						type: "danger"
					}, null, 8, ["text"])) : createCommentVNode("", true),
					__props.version.hasBreakingChange ? (openBlock(), createBlock(Badge_default, {
						key: 2,
						text: unref(i18n$2).baseText("versionCard.breakingChanges"),
						type: "warning"
					}, null, 8, ["text"])) : createCommentVNode("", true)
				]), createBaseVNode("div", { class: normalizeClass(_ctx.$style["release-date"]) }, [createTextVNode(toDisplayString(unref(i18n$2).baseText("versionCard.released")) + "\xA0", 1), createVNode(TimeAgo_default, { date: __props.version.createdAt }, null, 8, ["date"])], 2)], 2),
				__props.version.description || __props.version.nodes && __props.version.nodes.length ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.divider)
				}, null, 2)) : createCommentVNode("", true),
				createBaseVNode("div", null, [__props.version.description ? withDirectives((openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.description)
				}, null, 2)), [[_directive_n8n_html, __props.version.description]]) : createCommentVNode("", true), __props.version.nodes && __props.version.nodes.length > 0 ? (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.nodes)
				}, [(openBlock(true), createElementBlock(Fragment, null, renderList(__props.version.nodes, (node) => {
					return openBlock(), createBlock(NodeIcon_default, {
						key: node.name,
						"node-type": node,
						title: nodeName$3(node)
					}, null, 8, ["node-type", "title"]);
				}), 128))], 2)) : createCommentVNode("", true)])
			], 10, _hoisted_1$9)) : createCommentVNode("", true);
		};
	}
});
const card$1 = "_card_k0ocw_125";
const header$3 = "_header_k0ocw_137";
const name = "_name_k0ocw_152";
const divider = "_divider_k0ocw_159";
const description$3 = "_description_k0ocw_165";
const nodes = "_nodes_k0ocw_179";
var VersionCard_vue_vue_type_style_index_0_lang_module_default = {
	card: card$1,
	header: header$3,
	name,
	divider,
	description: description$3,
	"release-date": "_release-date_k0ocw_172",
	nodes
};
var VersionCard_default = /* @__PURE__ */ __plugin_vue_export_helper_default(VersionCard_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": VersionCard_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$8 = { key: 0 };
var UpdatesPanel_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "UpdatesPanel",
	setup(__props) {
		const versionsStore = useVersionsStore();
		const pageRedirectionHelper = usePageRedirectionHelper();
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createBlock(ModalDrawer_default, {
				name: unref(VERSIONS_MODAL_KEY),
				direction: "ltr",
				width: "520px",
				"data-test-id": "version-updates-panel"
			}, {
				header: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style.title) }, toDisplayString(unref(i18n$2).baseText("updatesPanel.weVeBeenBusy")), 3)]),
				content: withCtx(() => [createBaseVNode("section", { class: normalizeClass(_ctx.$style["description"]) }, [unref(versionsStore).currentVersion ? (openBlock(), createElementBlock("p", _hoisted_1$8, [
					createTextVNode(toDisplayString(unref(i18n$2).baseText("updatesPanel.youReOnVersion", { interpolate: { currentVersionName: unref(versionsStore).currentVersion.name } })) + " ", 1),
					createBaseVNode("strong", null, [createVNode(TimeAgo_default, { date: unref(versionsStore).currentVersion.createdAt }, null, 8, ["date"])]),
					createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("updatesPanel.andIs")) + " ", 1),
					createBaseVNode("strong", null, toDisplayString(unref(i18n$2).baseText("updatesPanel.version", { interpolate: {
						numberOfVersions: unref(versionsStore).nextVersions.length,
						howManySuffix: unref(versionsStore).nextVersions.length > 1 ? "s" : ""
					} })), 1),
					createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("updatesPanel.behindTheLatest")), 1)
				])) : createCommentVNode("", true), unref(versionsStore).infoUrl ? (openBlock(), createBlock(unref(N8nButton_default), {
					key: 1,
					variant: "ghost",
					size: "large",
					class: normalizeClass(_ctx.$style["link"]),
					bold: true,
					onClick: _cache[0] || (_cache[0] = ($event) => unref(pageRedirectionHelper).goToVersions())
				}, {
					default: withCtx(() => [createVNode(unref(N8nIcon_default), {
						icon: "info",
						class: "mr-2xs"
					}), createBaseVNode("span", null, toDisplayString(unref(i18n$2).baseText("updatesPanel.howToUpdateYourN8nVersion")), 1)]),
					_: 1
				}, 8, ["class"])) : createCommentVNode("", true)], 2), createBaseVNode("section", { class: normalizeClass(_ctx.$style.versions) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(versionsStore).nextVersions, (version) => {
					return openBlock(), createElementBlock("div", {
						key: version.name,
						class: normalizeClass(_ctx.$style["versions-card"])
					}, [createVNode(VersionCard_default, { version }, null, 8, ["version"])], 2);
				}), 128))], 2)]),
				_: 1
			}, 8, ["name"]);
		};
	}
});
var UpdatesPanel_vue_vue_type_style_index_0_lang_module_default = {
	title: "_title_18xkw_125",
	description: "_description_18xkw_133",
	link: "_link_18xkw_148",
	versions: "_versions_18xkw_157",
	"versions-card": "_versions-card_18xkw_166"
};
var UpdatesPanel_default = /* @__PURE__ */ __plugin_vue_export_helper_default(UpdatesPanel_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": UpdatesPanel_vue_vue_type_style_index_0_lang_module_default }]]);
var CredentialResolverEditModal_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CredentialResolverEditModal",
	props: {
		modalName: {},
		data: {}
	},
	setup(__props) {
		const props = __props;
		const modalBus = createEventBus();
		const i18n$2 = useI18n();
		const toast = useToast();
		const rootStore = useRootStore();
		const activeTab = ref("configuration");
		const isLoading = ref(false);
		const isSaving = ref(false);
		const resolverName$1 = ref("");
		const resolverType = ref("");
		const resolverConfig = ref({});
		const clearCredentials = ref(null);
		const hasUnsavedChanges = ref(false);
		const errorMessage = ref("");
		const mainContentRef = ref();
		const originalResolverName = ref("");
		const originalResolverType = ref("");
		const originalResolverConfig = ref({});
		const hasEverMadeNonNameChange = ref(false);
		const { resolverTypes: availableTypes, fetchResolverTypes: loadResolverTypes, deleteResolver: deleteResolverFromComposable, isDeleting } = useCredentialResolvers();
		const isEditMode = computed(() => !!props.data?.resolverId);
		const isCredentialInformation = (value) => {
			if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") return true;
			if (Array.isArray(value)) return value.every((v) => typeof v === "string" || typeof v === "object" && v !== null && !Array.isArray(v));
			if (typeof value === "object" && value !== null) return true;
			return false;
		};
		const toCredentialData = (config$1) => {
			const result = {};
			for (const [key, value] of Object.entries(config$1)) if (isCredentialInformation(value)) result[key] = value;
			else if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") result[key] = String(value);
			return result;
		};
		const selectedType = computed(() => {
			return availableTypes.value.find((t) => t.name === resolverType.value);
		});
		const toNodeProperty = (option) => {
			return {
				...option,
				name: typeof option.name === "string" ? option.name : "",
				type: typeof option.type === "string" ? option.type : "string",
				displayName: typeof option.displayName === "string" ? option.displayName : "",
				default: option.default ?? "",
				...typeof option.required === "boolean" && { required: option.required },
				...typeof option.description === "string" && { description: option.description },
				...typeof option.placeholder === "string" && { placeholder: option.placeholder }
			};
		};
		const resolverProperties = computed(() => {
			if (!selectedType.value?.options) return [];
			return selectedType.value.options.map(toNodeProperty);
		});
		const resolverData = computed(() => {
			return toCredentialData(resolverConfig.value);
		});
		const requiredPropertiesFilled = computed(() => {
			for (const property of resolverProperties.value) {
				if (property.required !== true) continue;
				const resolverProperty = resolverData.value[property.name];
				if (property.type === "string" && !resolverProperty) return false;
				if (property.type === "number") {
					const containsExpression = typeof resolverProperty === "string" && resolverProperty.startsWith("=");
					if (typeof resolverProperty !== "number" && !containsExpression) return false;
				}
			}
			return true;
		});
		const hasNonNameChanges = computed(() => {
			if (!isEditMode.value) return false;
			const typeChanged = originalResolverType.value !== resolverType.value;
			const configChanged = JSON.stringify(originalResolverConfig.value) !== JSON.stringify(resolverConfig.value);
			if (typeChanged || configChanged) hasEverMadeNonNameChange.value = true;
			return hasEverMadeNonNameChange.value;
		});
		const canSave = computed(() => {
			const baseCheck = resolverName$1.value.trim() !== "" && resolverType.value !== "";
			if (isEditMode.value && hasNonNameChanges.value) return baseCheck && clearCredentials.value !== null;
			return baseCheck;
		});
		const sidebarItems = computed(() => [{
			id: "configuration",
			label: i18n$2.baseText("credentialResolverEdit.sidebar.configuration"),
			position: "top"
		}, {
			id: "details",
			label: i18n$2.baseText("credentialResolverEdit.sidebar.details"),
			position: "top"
		}]);
		const loadResolver = async () => {
			if (!props.data?.resolverId) return;
			try {
				const resolver = await getCredentialResolver(rootStore.restApiContext, props.data.resolverId);
				resolverName$1.value = resolver.name;
				resolverType.value = resolver.type;
				resolverConfig.value = resolver.decryptedConfig || {};
				originalResolverName.value = resolver.name;
				originalResolverType.value = resolver.type;
				originalResolverConfig.value = deepCopy(resolver.decryptedConfig || {});
				hasEverMadeNonNameChange.value = false;
				clearCredentials.value = null;
			} catch (error$2) {
				toast.showError(error$2, i18n$2.baseText("credentialResolverEdit.error.save"));
			}
		};
		const beforeClose = () => {
			if (hasUnsavedChanges.value) {}
			return true;
		};
		const save = async () => {
			if (!canSave.value) return;
			isSaving.value = true;
			errorMessage.value = "";
			if (!requiredPropertiesFilled.value) {
				errorMessage.value = i18n$2.baseText("credentialResolverEdit.error.missingRequiredFields");
				isSaving.value = false;
				return;
			}
			if (isEditMode.value && hasNonNameChanges.value && clearCredentials.value === null) {
				errorMessage.value = i18n$2.baseText("credentialResolverEdit.clearCredentials.error.required");
				isSaving.value = false;
				return;
			}
			try {
				const payload = {
					name: resolverName$1.value.trim(),
					type: resolverType.value,
					config: resolverConfig.value
				};
				if (isEditMode.value) {
					if (hasNonNameChanges.value && clearCredentials.value !== null) payload.clearCredentials = clearCredentials.value;
					else if (!hasNonNameChanges.value) payload.clearCredentials = false;
				}
				let savedResolver;
				if (isEditMode.value && props.data?.resolverId) savedResolver = await updateCredentialResolver(rootStore.restApiContext, props.data.resolverId, payload);
				else savedResolver = await createCredentialResolver(rootStore.restApiContext, payload);
				if (props.data?.onSave) props.data.onSave(savedResolver.id);
				toast.showMessage({
					title: i18n$2.baseText("credentialResolverEdit.saveSuccess.title"),
					type: "success"
				});
				hasUnsavedChanges.value = false;
				modalBus.emit("close");
			} catch (error$2) {
				errorMessage.value = error$2 instanceof Error ? error$2.message : i18n$2.baseText("credentialResolverEdit.error.save");
				mainContentRef.value?.scrollTo({
					top: 0,
					behavior: "smooth"
				});
			} finally {
				isSaving.value = false;
			}
		};
		const onConfigUpdate = (updateData) => {
			resolverConfig.value = {
				...resolverConfig.value,
				[updateData.name]: updateData.value
			};
			hasUnsavedChanges.value = true;
			errorMessage.value = "";
			if (isEditMode.value) clearCredentials.value = null;
		};
		const onNameEdit = (newName) => {
			resolverName$1.value = newName;
			hasUnsavedChanges.value = true;
		};
		const onTabSelect = (tabId) => {
			activeTab.value = tabId;
		};
		const deleteResolver = async () => {
			if (!props.data?.resolverId) return;
			if (await deleteResolverFromComposable({
				id: props.data.resolverId,
				name: resolverName$1.value,
				type: resolverType.value,
				config: JSON.stringify(resolverConfig.value),
				createdAt: /* @__PURE__ */ new Date(),
				updatedAt: /* @__PURE__ */ new Date()
			})) {
				hasUnsavedChanges.value = false;
				if (props.data?.onDelete) props.data.onDelete(props.data.resolverId);
				modalBus.emit("close");
			}
		};
		onMounted(async () => {
			isLoading.value = true;
			await loadResolverTypes();
			if (isEditMode.value) await loadResolver();
			else {
				resolverName$1.value = i18n$2.baseText("credentialResolverEdit.defaultName");
				clearCredentials.value = null;
			}
			isLoading.value = false;
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Modal_default, {
				name: unref(CREDENTIAL_RESOLVER_EDIT_MODAL_KEY),
				"custom-class": _ctx.$style.resolverModal,
				"event-bus": unref(modalBus),
				loading: isLoading.value,
				"before-close": beforeClose,
				width: "70%",
				height: "80%"
			}, {
				header: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.header) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.resolverInfo) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.resolverIcon) }, [createVNode(unref(N8nIconButton_default), {
					variant: "subtle",
					icon: "database",
					size: "large",
					disabled: true
				})], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.resolverName) }, [resolverName$1.value ? (openBlock(), createBlock(unref(N8nInlineTextEdit_default), {
					key: 0,
					"data-test-id": "credential-resolver-name",
					"model-value": resolverName$1.value,
					"onUpdate:modelValue": onNameEdit
				}, null, 8, ["model-value"])) : createCommentVNode("", true), selectedType.value ? (openBlock(), createBlock(unref(N8nText_default), {
					key: 1,
					size: "small",
					tag: "p",
					color: "text-light"
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(selectedType.value.displayName), 1)]),
					_: 1
				})) : createCommentVNode("", true)], 2)], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.resolverActions) }, [isEditMode.value ? (openBlock(), createBlock(unref(N8nIconButton_default), {
					key: 0,
					variant: "subtle",
					title: unref(i18n$2).baseText("credentialResolverEdit.delete"),
					icon: "trash-2",
					disabled: isSaving.value,
					loading: unref(isDeleting),
					"data-test-id": "credential-resolver-delete-button",
					onClick: deleteResolver
				}, null, 8, [
					"title",
					"disabled",
					"loading"
				])) : createCommentVNode("", true), createVNode(SaveButton_default, {
					saved: false,
					"is-saving": isSaving.value,
					disabled: !canSave.value,
					"data-test-id": "credential-resolver-save-button",
					onClick: save
				}, null, 8, ["is-saving", "disabled"])], 2)], 2)]),
				content: withCtx(() => [createBaseVNode("div", {
					class: normalizeClass(_ctx.$style.container),
					"data-test-id": "credential-resolver-edit-dialog"
				}, [
					createBaseVNode("div", { class: normalizeClass(_ctx.$style.sidebar) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(sidebarItems.value, (item$2) => {
						return openBlock(), createBlock(unref(N8nMenuItem_default), {
							key: item$2.id,
							item: item$2,
							active: activeTab.value === item$2.id,
							onClick: () => onTabSelect(item$2.id)
						}, null, 8, [
							"item",
							"active",
							"onClick"
						]);
					}), 128))], 2),
					activeTab.value === "configuration" ? (openBlock(), createElementBlock("div", {
						key: 0,
						ref_key: "mainContentRef",
						ref: mainContentRef,
						class: normalizeClass(_ctx.$style.mainContent)
					}, [
						errorMessage.value ? (openBlock(), createBlock(unref(N8nCallout_default), {
							key: 0,
							theme: "danger",
							class: normalizeClass(_ctx.$style.errorAlert),
							"data-test-id": "credential-resolver-error-alert"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(errorMessage.value), 1)]),
							_: 1
						}, 8, ["class"])) : createCommentVNode("", true),
						isEditMode.value && hasNonNameChanges.value ? (openBlock(), createElementBlock("div", {
							key: 1,
							class: normalizeClass(_ctx.$style.formGroup)
						}, [createBaseVNode("label", { class: normalizeClass(_ctx.$style.label) }, toDisplayString(unref(i18n$2).baseText("credentialResolverEdit.clearCredentials.label")), 3), createVNode(unref(N8nSelect_default), {
							modelValue: clearCredentials.value,
							"onUpdate:modelValue": [_cache[0] || (_cache[0] = ($event) => clearCredentials.value = $event), _cache[1] || (_cache[1] = () => {
								hasUnsavedChanges.value = true;
								errorMessage.value = "";
							})],
							placeholder: unref(i18n$2).baseText("credentialResolverEdit.clearCredentials.placeholder"),
							"data-test-id": "credential-resolver-clear-credentials-select"
						}, {
							default: withCtx(() => [createVNode(unref(N8nOption_default), {
								label: unref(i18n$2).baseText("credentialResolverEdit.clearCredentials.yes"),
								value: true
							}, null, 8, ["label"]), createVNode(unref(N8nOption_default), {
								label: unref(i18n$2).baseText("credentialResolverEdit.clearCredentials.no"),
								value: false
							}, null, 8, ["label"])]),
							_: 1
						}, 8, ["modelValue", "placeholder"])], 2)) : createCommentVNode("", true),
						isEditMode.value && hasNonNameChanges.value ? (openBlock(), createBlock(unref(N8nCallout_default), {
							key: 2,
							theme: "warning",
							class: normalizeClass(_ctx.$style.warningAlert),
							"data-test-id": "credential-resolver-clear-credentials-warning"
						}, {
							default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialResolverEdit.clearCredentials.warning")), 1)]),
							_: 1
						}, 8, ["class"])) : createCommentVNode("", true),
						createBaseVNode("div", { class: normalizeClass(_ctx.$style.formGroup) }, [createBaseVNode("label", { class: normalizeClass(_ctx.$style.label) }, toDisplayString(unref(i18n$2).baseText("credentialResolverEdit.type.label")), 3), createVNode(unref(N8nSelect_default), {
							modelValue: resolverType.value,
							"onUpdate:modelValue": [_cache[2] || (_cache[2] = ($event) => resolverType.value = $event), _cache[3] || (_cache[3] = () => {
								hasUnsavedChanges.value = true;
								errorMessage.value = "";
								clearCredentials.value = null;
							})],
							placeholder: unref(i18n$2).baseText("credentialResolverEdit.type.placeholder"),
							"data-test-id": "credential-resolver-type-select"
						}, {
							default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(availableTypes), (type) => {
								return openBlock(), createBlock(unref(N8nOption_default), {
									key: type.name,
									label: type.displayName,
									value: type.name
								}, null, 8, ["label", "value"]);
							}), 128))]),
							_: 1
						}, 8, ["modelValue", "placeholder"])], 2),
						resolverProperties.value.length > 0 ? (openBlock(), createElementBlock("div", {
							key: 3,
							class: normalizeClass(_ctx.$style.configSection)
						}, [createVNode(CredentialInputs_default, {
							"credential-properties": resolverProperties.value,
							"credential-data": resolverData.value,
							"documentation-url": "",
							"show-validation-warnings": !!errorMessage.value,
							onUpdate: onConfigUpdate
						}, null, 8, [
							"credential-properties",
							"credential-data",
							"show-validation-warnings"
						])], 2)) : createCommentVNode("", true)
					], 2)) : createCommentVNode("", true),
					activeTab.value === "details" ? (openBlock(), createElementBlock("div", {
						key: 1,
						class: normalizeClass(_ctx.$style.mainContent)
					}, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.formGroup) }, [createBaseVNode("label", { class: normalizeClass(_ctx.$style.label) }, toDisplayString(unref(i18n$2).baseText("credentialResolverEdit.details.id")), 3), props.data?.resolverId ? (openBlock(), createBlock(unref(N8nText_default), {
						key: 0,
						color: "text-base"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(props.data.resolverId), 1)]),
						_: 1
					})) : (openBlock(), createBlock(unref(N8nText_default), {
						key: 1,
						color: "text-light"
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("credentialResolverEdit.details.notSaved")), 1)]),
						_: 1
					}))], 2)], 2)) : createCommentVNode("", true)
				], 2)]),
				_: 1
			}, 8, [
				"name",
				"custom-class",
				"event-bus",
				"loading"
			]);
		};
	}
});
var CredentialResolverEditModal_vue_vue_type_style_index_0_lang_module_default = {
	resolverModal: "_resolverModal_1z027_125",
	mainContent: "_mainContent_1z027_139",
	resolverName: "_resolverName_1z027_145",
	sidebar: "_sidebar_1z027_152",
	header: "_header_1z027_162",
	container: "_container_1z027_166",
	resolverInfo: "_resolverInfo_1z027_171",
	resolverActions: "_resolverActions_1z027_179",
	resolverIcon: "_resolverIcon_1z027_190",
	formGroup: "_formGroup_1z027_196",
	label: "_label_1z027_203",
	configSection: "_configSection_1z027_209",
	errorAlert: "_errorAlert_1z027_213",
	warningAlert: "_warningAlert_1z027_217"
};
var CredentialResolverEditModal_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CredentialResolverEditModal_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CredentialResolverEditModal_vue_vue_type_style_index_0_lang_module_default }]]);
var Modals_default = /* @__PURE__ */ defineComponent({
	__name: "Modals",
	setup(__props) {
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", null, [
				createVNode(ModalRoot_default, { name: unref(CREDENTIAL_EDIT_MODAL_KEY) }, {
					default: withCtx(({ modalName, activeId, mode: mode$2 }) => [createVNode(CredentialEdit_default, {
						"modal-name": modalName,
						mode: mode$2,
						"active-id": activeId
					}, null, 8, [
						"modal-name",
						"mode",
						"active-id"
					])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(API_KEY_CREATE_OR_EDIT_MODAL_KEY) }, {
					default: withCtx(({ modalName, data: { mode: mode$2, activeId } }) => [createVNode(ApiKeyCreateOrEditModal_default, {
						"modal-name": modalName,
						mode: mode$2,
						"active-id": activeId
					}, null, 8, [
						"modal-name",
						"mode",
						"active-id"
					])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(ABOUT_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(AboutModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(CHAT_EMBED_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(ChatEmbedModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(CREDENTIAL_SELECT_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(CredentialsSelectModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(DUPLICATE_MODAL_KEY) }, {
					default: withCtx(({ modalName, active: active$1, data }) => [createVNode(DuplicateWorkflowDialog_default, {
						data,
						"is-active": active$1,
						"modal-name": modalName
					}, null, 8, [
						"data",
						"is-active",
						"modal-name"
					])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(IMPORT_WORKFLOW_URL_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(ImportWorkflowUrlModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(PERSONALIZATION_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(PersonalizationModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(TAGS_MANAGER_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(WorkflowTagsManager_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(ANNOTATION_TAGS_MANAGER_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(AnnotationTagsManager_ee_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, {
					name: unref(VERSIONS_MODAL_KEY),
					"keep-alive": true
				}, {
					default: withCtx(() => [createVNode(UpdatesPanel_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, {
					name: unref(NPS_SURVEY_MODAL_KEY),
					"keep-alive": true
				}, {
					default: withCtx(({ active: active$1 }) => [createVNode(NpsSurvey_default, { "is-active": active$1 }, null, 8, ["is-active"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_SETTINGS_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(WorkflowSettings_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(CHANGE_PASSWORD_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(ChangePasswordModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(CONFIRM_PASSWORD_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(ConfirmPasswordModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(INVITE_USER_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(InviteUsersModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(DELETE_USER_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(DeleteUserModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_ACTIVE_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(ActivationModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(MFA_SETUP_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(MfaSetupModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(PROMPT_MFA_CODE_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(PromptMfaCodeModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_SHARE_MODAL_KEY) }, {
					default: withCtx(({ modalName, active: active$1, data }) => [createVNode(WorkflowShareModal_ee_default, {
						data,
						"is-active": active$1,
						"modal-name": modalName
					}, null, 8, [
						"data",
						"is-active",
						"modal-name"
					])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(COMMUNITY_PACKAGE_INSTALL_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(CommunityPackageInstallModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(IMPORT_CURL_MODAL_KEY) }, {
					default: withCtx(() => [createVNode(ImportCurlModal_default)]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY) }, {
					default: withCtx(({ modalName, activeId, mode: mode$2 }) => [createVNode(CommunityPackageManageConfirmModal_default, {
						"modal-name": modalName,
						"active-package-name": activeId,
						mode: mode$2
					}, null, 8, [
						"modal-name",
						"active-package-name",
						"mode"
					])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(LOG_STREAM_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(EventDestinationSettingsModal_default, {
						"modal-name": modalName,
						destination: data.destination,
						"is-new": data.isNew,
						"event-bus": data.eventBus
					}, null, 8, [
						"modal-name",
						"destination",
						"is-new",
						"event-bus"
					])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(SOURCE_CONTROL_PUSH_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(SourceControlPushModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(SOURCE_CONTROL_PULL_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(SourceControlPullModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(SOURCE_CONTROL_PULL_RESULT_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(SourceControlPullResultModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_DIFF_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(WorkflowDiffModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(EXTERNAL_SECRETS_PROVIDER_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(ExternalSecretsProviderModal_ee_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(SECRETS_PROVIDER_CONNECTION_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(SecretsProviderConnectionModal_ee_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(DELETE_SECRETS_PROVIDER_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(DeleteSecretsProviderModal_ee_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(DEBUG_PAYWALL_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(DebugPaywallModal_default, {
						"data-test-id": "debug-paywall-modal",
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_HISTORY_VERSION_RESTORE) }, {
					default: withCtx(({ modalName, data }) => [createVNode(WorkflowHistoryVersionRestoreModal_default, {
						"data-test-id": "workflow-history-version-restore-modal",
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_HISTORY_VERSION_UNPUBLISH) }, {
					default: withCtx(({ modalName, data }) => [createVNode(WorkflowHistoryVersionUnpublishModal_default, {
						"data-test-id": "workflow-history-version-unpublish-modal",
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_HISTORY_NAME_VERSION_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(WorkflowVersionFormModal_default, {
						"data-test-id": "workflow-history-name-version-modal",
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(SETUP_CREDENTIALS_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(SetupWorkflowCredentialsModal_default, {
						"data-test-id": "setup-workflow-credentials-modal",
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(PROJECT_MOVE_RESOURCE_MODAL) }, {
					default: withCtx(({ modalName, data }) => [createVNode(ProjectMoveResourceModal_default, {
						"data-test-id": "project-move-resource-modal",
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(NEW_ASSISTANT_SESSION_MODAL) }, {
					default: withCtx(({ modalName, data }) => [createVNode(NewAssistantSessionModal_default, {
						name: modalName,
						data
					}, null, 8, ["name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(COMMUNITY_PLUS_ENROLLMENT_MODAL) }, {
					default: withCtx(({ modalName, data }) => [createVNode(CommunityPlusEnrollmentModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(DELETE_FOLDER_MODAL_KEY) }, {
					default: withCtx(({ modalName, activeId, data }) => [createVNode(DeleteFolderModal_default, {
						"modal-name": modalName,
						"active-id": activeId,
						data
					}, null, 8, [
						"modal-name",
						"active-id",
						"data"
					])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(MOVE_FOLDER_MODAL_KEY) }, {
					default: withCtx(({ modalName, activeId, data }) => [createVNode(MoveToFolderModal_default, {
						"modal-name": modalName,
						"active-id": activeId,
						data
					}, null, 8, [
						"modal-name",
						"active-id",
						"data"
					])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_ACTIVATION_CONFLICTING_WEBHOOK_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(WorkflowActivationConflictingWebhookModal_default, {
						data,
						"modal-name": modalName
					}, null, 8, ["data", "modal-name"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(FROM_AI_PARAMETERS_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(FromAiParametersModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(STOP_MANY_EXECUTIONS_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(StopManyExecutionsModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_EXTRACTION_NAME_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(WorkflowExtractionNameModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WHATS_NEW_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(WhatsNewModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(EXPERIMENT_TEMPLATE_RECO_V2_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(NodeRecommendationModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(EXPERIMENT_TEMPLATE_RECO_V3_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(NodeRecommendationModal_default$1, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(VARIABLE_MODAL_KEY) }, {
					default: withCtx(({ data }) => [createVNode(VariableModal_default, {
						mode: data?.mode ?? "new",
						variable: data?.variable
					}, null, 8, ["mode", "variable"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(BINARY_DATA_VIEW_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(BinaryDataViewModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_DESCRIPTION_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(WorkflowDescriptionModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_PUBLISH_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(WorkflowPublishModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(WORKFLOW_HISTORY_PUBLISH_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(WorkflowVersionFormModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(ModalRoot_default, { name: unref(CREDENTIAL_RESOLVER_EDIT_MODAL_KEY) }, {
					default: withCtx(({ modalName, data }) => [createVNode(CredentialResolverEditModal_default, {
						"modal-name": modalName,
						data
					}, null, 8, ["modal-name", "data"])]),
					_: 1
				}, 8, ["name"]),
				createVNode(DynamicModalLoader_default)
			]);
		};
	}
});
var _hoisted_1$7 = ["id"];
var AppModals_default = /* @__PURE__ */ defineComponent({
	__name: "AppModals",
	setup(__props) {
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { id: unref(APP_MODALS_ELEMENT_ID) }, [createVNode(Modals_default)], 8, _hoisted_1$7);
		};
	}
});
var CommandBarItemTitle_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CommandBarItemTitle",
	props: {
		title: {},
		suffix: {},
		suffixIcon: {},
		actionText: {},
		shortcut: {},
		isSelected: { type: Boolean },
		isHovered: { type: Boolean }
	},
	setup(__props) {
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("span", { class: normalizeClass(_ctx.$style.container) }, [
				createBaseVNode("span", { class: normalizeClass(_ctx.$style.title) }, toDisplayString(__props.title), 3),
				__props.suffix ? (openBlock(), createElementBlock("span", {
					key: 0,
					class: normalizeClass(_ctx.$style.suffix)
				}, [__props.suffixIcon ? (openBlock(), createBlock(ProjectIcon_default, {
					key: 0,
					icon: __props.suffixIcon,
					size: "mini",
					"border-less": true
				}, null, 8, ["icon"])) : createCommentVNode("", true), createTextVNode(" " + toDisplayString(__props.suffix), 1)], 2)) : createCommentVNode("", true),
				__props.actionText && (__props.isSelected || __props.isHovered) ? (openBlock(), createElementBlock("span", {
					key: 1,
					class: normalizeClass(_ctx.$style.action)
				}, toDisplayString(__props.actionText), 3)) : createCommentVNode("", true),
				__props.shortcut ? (openBlock(), createElementBlock("span", {
					key: 2,
					class: normalizeClass(_ctx.$style.shortcut)
				}, [createVNode(unref(N8nKeyboardShortcut_default), {
					keys: __props.shortcut.keys,
					"meta-key": __props.shortcut.metaKey,
					"alt-key": __props.shortcut.altKey,
					"shift-key": __props.shortcut.shiftKey
				}, null, 8, [
					"keys",
					"meta-key",
					"alt-key",
					"shift-key"
				])], 2)) : createCommentVNode("", true)
			], 2);
		};
	}
});
var CommandBarItemTitle_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_epkes_125",
	title: "_title_epkes_132",
	suffix: "_suffix_epkes_141",
	action: "_action_epkes_152",
	shortcut: "_shortcut_epkes_158"
};
var CommandBarItemTitle_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CommandBarItemTitle_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CommandBarItemTitle_vue_vue_type_style_index_0_lang_module_default }]]);
var ITEM_ID$8 = {
	ADD_NODE: "add-node",
	OPEN_NODE: "open-node",
	ADD_STICKY: "add-sticky"
};
function useNodeCommands(options$1) {
	const i18n$2 = useI18n();
	const { lastQuery } = options$1;
	const { addNodes, setNodeActive, editableWorkflow } = useCanvasOperations();
	const nodeTypesStore = useNodeTypesStore();
	const credentialsStore = useCredentialsStore();
	const sourceControlStore = useSourceControlStore();
	const workflowsStore = useWorkflowsStore();
	const collaborationStore = useCollaborationStore();
	const { generateMergedNodesAndActions } = useActionsGenerator();
	const isReadOnly = computed(() => sourceControlStore.preferences.branchReadOnly || collaborationStore.shouldBeReadOnly);
	const isArchived = computed(() => workflowsStore.workflow.isArchived);
	const workflowPermissions = computed(() => getResourcePermissions(workflowsStore.workflow.scopes).workflow);
	const hasPermission$1 = (permission) => workflowPermissions.value[permission] === true && !isReadOnly.value && !isArchived.value || !workflowsStore.isWorkflowSaved[workflowsStore.workflowId];
	const mergedNodes = computed(() => {
		const httpOnlyCredentials = credentialsStore.httpOnlyCredentialTypes;
		const nodeTypes = nodeTypesStore.visibleNodeTypes;
		return generateMergedNodesAndActions(nodeTypes, httpOnlyCredentials).mergedNodes;
	});
	const buildAddNodeCommand = (node, isRoot) => {
		const { name: name$3, displayName } = node;
		return {
			id: name$3,
			title: isRoot ? `${i18n$2.baseText("generic.add")} ${displayName}` : displayName,
			section: isRoot ? i18n$2.baseText("commandBar.sections.nodes") : i18n$2.baseText("commandBar.nodes.addNode"),
			keywords: [displayName],
			icon: {
				component: NodeIcon_default,
				props: {
					nodeType: node,
					size: 16
				}
			},
			handler: async () => {
				const nodes$3 = await addNodes([{ type: name$3 }]);
				if (nodes$3 && nodes$3.length > 0) canvasEventBus.emit("nodes:select", { ids: [nodes$3[0].id] });
			}
		};
	};
	const addNodeCommands = computed(() => {
		if (!hasPermission$1("update")) return [];
		return mergedNodes.value.map((node) => buildAddNodeCommand(node, false));
	});
	const rootAddNodeCommandItems = computed(() => {
		if (lastQuery.value.length <= 2 || !hasPermission$1("update")) return [];
		return mergedNodes.value.map((node) => buildAddNodeCommand(node, true));
	});
	const buildOpenNodeCommand = (node, isRoot) => {
		const { id, name: name$3, type } = node;
		const nodeType = nodeTypesStore.getNodeType(node.type, node.typeVersion);
		return {
			id,
			title: isRoot ? i18n$2.baseText("generic.openResource", { interpolate: { resource: name$3 } }) : name$3,
			section: isRoot ? i18n$2.baseText("commandBar.sections.nodes") : i18n$2.baseText("commandBar.nodes.openNode"),
			keywords: [name$3, type],
			icon: {
				component: NodeIcon_default,
				props: {
					nodeType,
					size: 16
				}
			},
			handler: () => {
				setNodeActive(id, "command_bar");
			},
			placeholder: i18n$2.baseText("commandBar.nodes.searchPlaceholder")
		};
	};
	const openNodeCommands = computed(() => {
		return editableWorkflow.value.nodes.map((node) => buildOpenNodeCommand(node, false));
	});
	const rootOpenNodeCommandItems = computed(() => {
		if (lastQuery.value.length <= 2) return [];
		return editableWorkflow.value.nodes.map((node) => buildOpenNodeCommand(node, true));
	});
	return { commands: computed(() => {
		return [
			...hasPermission$1("update") ? [{
				id: ITEM_ID$8.ADD_NODE,
				title: {
					component: CommandBarItemTitle_default,
					props: {
						title: i18n$2.baseText("commandBar.nodes.addNode"),
						shortcut: { keys: ["tab"] }
					}
				},
				keywords: [i18n$2.baseText("commandBar.nodes.addNode")],
				section: i18n$2.baseText("commandBar.sections.nodes"),
				placeholder: i18n$2.baseText("commandBar.nodes.searchPlaceholder"),
				children: [...addNodeCommands.value],
				icon: {
					component: N8nIcon_default,
					props: { icon: "plus" }
				}
			}] : [],
			...rootAddNodeCommandItems.value,
			{
				id: ITEM_ID$8.OPEN_NODE,
				title: i18n$2.baseText("commandBar.nodes.openNode"),
				section: i18n$2.baseText("commandBar.sections.nodes"),
				children: [...openNodeCommands.value],
				placeholder: i18n$2.baseText("commandBar.nodes.searchPlaceholder"),
				icon: {
					component: N8nIcon_default,
					props: { icon: "columns-3-cog" }
				}
			},
			...rootOpenNodeCommandItems.value,
			...hasPermission$1("update") ? [{
				id: ITEM_ID$8.ADD_STICKY,
				title: {
					component: CommandBarItemTitle_default,
					props: {
						title: i18n$2.baseText("commandBar.nodes.addStickyNote"),
						shortcut: {
							shiftKey: true,
							keys: ["s"]
						}
					}
				},
				section: i18n$2.baseText("commandBar.sections.nodes"),
				handler: () => {
					canvasEventBus.emit("create:sticky");
				},
				icon: {
					component: N8nIcon_default,
					props: { icon: "sticky-note" }
				}
			}] : []
		];
	}) };
}
var import_FileSaver_min = require_FileSaver_min();
var import_uniqBy = /* @__PURE__ */ __toESM(require_uniqBy(), 1);
var ITEM_ID$7 = {
	OPEN_CREDENTIAL: "open-credential",
	OPEN_SUB_WORKFLOW: "open-sub-workflow",
	TEST_WORKFLOW: "test-workflow",
	SELECT_ALL: "select-all",
	OPEN_WORKFLOW_SETTINGS: "open-workflow-settings",
	TIDY_UP_WORKFLOW: "tidy-up-workflow",
	RENAME_WORKFLOW: "rename-workflow",
	ADD_TAG: "add-tag",
	DUPLICATE_WORKFLOW: "duplicate-workflow",
	DOWNLOAD_WORKFLOW: "download-workflow",
	IMPORT_WORKFLOW_FROM_URL: "import-workflow-from-url",
	IMPORT_WORKFLOW_FROM_FILE: "import-workflow-from-file",
	ARCHIVE_WORKFLOW: "archive-workflow",
	UNARCHIVE_WORKFLOW: "unarchive-workflow",
	DELETE_WORKFLOW: "delete-workflow",
	PUBLISH_WORKFLOW: "publish-workflow",
	UNPUBLISH_WORKFLOW: "unpublish-workflow"
};
function useWorkflowCommands() {
	const i18n$2 = useI18n();
	const { editableWorkflow } = useCanvasOperations();
	const rootStore = useRootStore();
	const uiStore = useUIStore();
	const tagsStore = useTagsStore();
	const workflowsStore = useWorkflowsStore();
	const sourceControlStore = useSourceControlStore();
	const collaborationStore = useCollaborationStore();
	const router = useRouter();
	const runWorkflow = useRunWorkflow({ router });
	const workflowHelpers = useWorkflowHelpers();
	const telemetry$1 = useTelemetry();
	const isReadOnly = computed(() => sourceControlStore.preferences.branchReadOnly || collaborationStore.shouldBeReadOnly);
	const isArchived = computed(() => workflowsStore.workflow.isArchived);
	const workflowPermissions = computed(() => getResourcePermissions(workflowsStore.workflow.scopes).workflow);
	const hasPermission$1 = (permission) => workflowPermissions.value[permission] === true && !isReadOnly.value || !workflowsStore.isWorkflowSaved[workflowsStore.workflowId];
	const credentialCommands = computed(() => {
		const credentials = (0, import_uniqBy.default)(editableWorkflow.value.nodes.map((node) => Object.values(node.credentials ?? {})).flat(), (cred) => cred.id);
		if (credentials.length === 0) return [];
		return [{
			id: ITEM_ID$7.OPEN_CREDENTIAL,
			title: i18n$2.baseText("commandBar.workflow.openCredential"),
			section: i18n$2.baseText("commandBar.sections.credentials"),
			children: [...credentials.map((credential) => ({
				id: credential.id,
				title: credential.name,
				handler: () => {
					if (typeof credential.id === "string") uiStore.openExistingCredential(credential.id);
				}
			}))],
			icon: {
				component: N8nIcon_default,
				props: { icon: "arrow-right" }
			}
		}];
	});
	const canvasActions = computed(() => [
		...hasPermission$1("update") && !isArchived.value ? [
			{
				id: ITEM_ID$7.PUBLISH_WORKFLOW,
				title: i18n$2.baseText("commandBar.workflow.publish"),
				section: i18n$2.baseText("commandBar.sections.workflow"),
				handler: () => {
					nodeViewEventBus.emit("publishWorkflow");
				},
				icon: {
					component: N8nIcon_default,
					props: { icon: "circle-check" }
				}
			},
			{
				id: ITEM_ID$7.UNPUBLISH_WORKFLOW,
				title: i18n$2.baseText("commandBar.workflow.unpublish"),
				section: i18n$2.baseText("commandBar.sections.workflow"),
				handler: () => {
					nodeViewEventBus.emit("unpublishWorkflow");
				},
				icon: {
					component: N8nIcon_default,
					props: { icon: "circle-minus" }
				}
			},
			{
				id: ITEM_ID$7.TEST_WORKFLOW,
				title: {
					component: CommandBarItemTitle_default,
					props: {
						title: i18n$2.baseText("commandBar.workflow.test"),
						shortcut: {
							metaKey: true,
							keys: ["enter"]
						}
					}
				},
				section: i18n$2.baseText("commandBar.sections.workflow"),
				keywords: [
					i18n$2.baseText("commandBar.workflow.test"),
					i18n$2.baseText("commandBar.workflow.keywords.test"),
					i18n$2.baseText("commandBar.workflow.keywords.execute"),
					i18n$2.baseText("commandBar.workflow.keywords.run"),
					i18n$2.baseText("commandBar.workflow.keywords.workflow")
				],
				handler: () => {
					runWorkflow.runEntireWorkflow("main");
				},
				icon: {
					component: N8nIcon_default,
					props: { icon: "flask-conical" }
				}
			},
			{
				id: ITEM_ID$7.TIDY_UP_WORKFLOW,
				title: {
					component: CommandBarItemTitle_default,
					props: {
						title: i18n$2.baseText("commandBar.workflow.tidyUp"),
						shortcut: {
							shiftKey: true,
							altKey: true,
							keys: ["t"]
						}
					}
				},
				keywords: [i18n$2.baseText("commandBar.workflow.tidyUp")],
				section: i18n$2.baseText("commandBar.sections.workflow"),
				handler: () => {
					canvasEventBus.emit("tidyUp", { source: "command-bar" });
				},
				icon: {
					component: N8nIcon_default,
					props: { icon: "wand-sparkles" }
				}
			},
			{
				id: ITEM_ID$7.RENAME_WORKFLOW,
				title: i18n$2.baseText("commandBar.workflow.rename"),
				section: i18n$2.baseText("commandBar.sections.workflow"),
				handler: () => {
					nodeViewEventBus.emit("renameWorkflow");
				},
				icon: {
					component: N8nIcon_default,
					props: { icon: "pencil-alt" }
				}
			},
			{
				id: ITEM_ID$7.ADD_TAG,
				title: i18n$2.baseText("workflowDetails.addTag"),
				section: i18n$2.baseText("commandBar.sections.workflow"),
				handler: () => {
					nodeViewEventBus.emit("addTag");
				},
				icon: {
					component: N8nIcon_default,
					props: { icon: "tags" }
				}
			}
		] : [],
		{
			id: ITEM_ID$7.SELECT_ALL,
			title: {
				component: CommandBarItemTitle_default,
				props: {
					title: i18n$2.baseText("commandBar.workflow.selectAll"),
					shortcut: {
						metaKey: true,
						keys: ["a"]
					}
				}
			},
			section: i18n$2.baseText("commandBar.sections.workflow"),
			keywords: [i18n$2.baseText("commandBar.workflow.selectAll")],
			handler: () => {
				canvasEventBus.emit("nodes:selectAll");
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "list-checks" }
			}
		},
		{
			id: ITEM_ID$7.OPEN_WORKFLOW_SETTINGS,
			title: i18n$2.baseText("commandBar.workflow.openSettings"),
			section: i18n$2.baseText("commandBar.sections.workflow"),
			handler: () => {
				uiStore.openModal(WORKFLOW_SETTINGS_MODAL_KEY);
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "cog" }
			}
		},
		...hasPermission$1("create") ? [{
			id: ITEM_ID$7.DUPLICATE_WORKFLOW,
			title: i18n$2.baseText("commandBar.workflow.duplicate"),
			section: i18n$2.baseText("commandBar.sections.workflow"),
			handler: () => {
				uiStore.openModalWithData({
					name: DUPLICATE_MODAL_KEY,
					data: {
						id: workflowsStore.workflowId,
						name: editableWorkflow.value.name,
						tags: editableWorkflow.value.tags
					}
				});
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "copy" }
			}
		}] : []
	]);
	const subworkflowCommands = computed(() => {
		const subworkflows = editableWorkflow.value.nodes.filter((node) => node.type === EXECUTE_WORKFLOW_NODE_TYPE).map((node) => node?.parameters?.workflowId).filter((rlValue) => isResourceLocatorValue(rlValue) && typeof rlValue.value === "string" && typeof rlValue.cachedResultName === "string").map(({ value, cachedResultName }) => ({
			id: value,
			name: cachedResultName
		}));
		if (subworkflows.length === 0) return [];
		return [{
			id: ITEM_ID$7.OPEN_SUB_WORKFLOW,
			title: i18n$2.baseText("commandBar.workflow.openSubworkflow"),
			section: i18n$2.baseText("commandBar.sections.workflow"),
			children: [...subworkflows.map((workflow) => ({
				id: workflow.id,
				title: workflow.name,
				handler: () => {
					const { href } = router.resolve({
						name: VIEWS.WORKFLOW,
						params: { name: workflow.id }
					});
					window.open(href, "_blank", "noreferrer");
				}
			}))],
			icon: {
				component: N8nIcon_default,
				props: { icon: "sign-in-alt" }
			}
		}];
	});
	const exportCommands = computed(() => {
		return [{
			id: ITEM_ID$7.DOWNLOAD_WORKFLOW,
			title: i18n$2.baseText("commandBar.workflow.download"),
			section: i18n$2.baseText("commandBar.sections.workflow"),
			handler: async () => {
				const workflowData = await workflowHelpers.getWorkflowDataToSave();
				const { tags, ...data } = workflowData;
				const exportData = {
					...data,
					meta: {
						...workflowData.meta,
						instanceId: rootStore.instanceId
					},
					tags: (tags ?? []).map((tagId) => {
						return tagsStore.tagsById[tagId];
					})
				};
				const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: "application/json;charset=utf-8" });
				let name$3 = editableWorkflow.value.name || "unsaved_workflow";
				name$3 = name$3.replace(/[^a-z0-9]/gi, "_");
				telemetry$1.track("User exported workflow", { workflow_id: workflowData.id });
				(0, import_FileSaver_min.saveAs)(blob, name$3 + ".json");
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "download" }
			},
			keywords: [i18n$2.baseText("commandBar.workflow.keywords.download"), i18n$2.baseText("commandBar.workflow.keywords.export")]
		}];
	});
	const importCommands = computed(() => {
		if (!hasPermission$1("update") || isArchived.value) return [];
		return [{
			id: ITEM_ID$7.IMPORT_WORKFLOW_FROM_URL,
			title: i18n$2.baseText("commandBar.workflow.importFromURL"),
			section: i18n$2.baseText("commandBar.sections.workflow"),
			icon: {
				component: N8nIcon_default,
				props: { icon: "link" }
			},
			handler: () => {
				uiStore.openModal(IMPORT_WORKFLOW_URL_MODAL_KEY);
			}
		}, {
			id: ITEM_ID$7.IMPORT_WORKFLOW_FROM_FILE,
			title: i18n$2.baseText("commandBar.workflow.importFromFile"),
			section: i18n$2.baseText("commandBar.sections.workflow"),
			icon: {
				component: N8nIcon_default,
				props: { icon: "file-import" }
			},
			handler: () => {
				nodeViewEventBus.emit("importWorkflowFromFile");
			}
		}];
	});
	const lifecycleCommands = computed(() => {
		if (!hasPermission$1("delete")) return [];
		return !isArchived.value ? [{
			id: ITEM_ID$7.ARCHIVE_WORKFLOW,
			title: i18n$2.baseText("commandBar.workflow.archive"),
			section: i18n$2.baseText("commandBar.sections.workflow"),
			keywords: [i18n$2.baseText("commandBar.workflow.keywords.delete")],
			icon: {
				component: N8nIcon_default,
				props: { icon: "trash" }
			},
			handler: () => {
				nodeViewEventBus.emit("archiveWorkflow");
			}
		}] : [{
			id: ITEM_ID$7.UNARCHIVE_WORKFLOW,
			title: i18n$2.baseText("commandBar.workflow.unarchive"),
			section: i18n$2.baseText("commandBar.sections.workflow"),
			keywords: [i18n$2.baseText("commandBar.workflow.keywords.restore")],
			icon: {
				component: N8nIcon_default,
				props: { icon: "archive-restore" }
			},
			handler: () => {
				nodeViewEventBus.emit("unarchiveWorkflow");
			}
		}, {
			id: ITEM_ID$7.DELETE_WORKFLOW,
			title: i18n$2.baseText("commandBar.workflow.delete"),
			section: i18n$2.baseText("commandBar.sections.workflow"),
			icon: {
				component: N8nIcon_default,
				props: { icon: "trash" }
			},
			handler: () => {
				nodeViewEventBus.emit("deleteWorkflow");
			}
		}];
	});
	const workflowCommands = computed(() => {
		return [
			...canvasActions.value,
			...subworkflowCommands.value,
			...exportCommands.value,
			...importCommands.value,
			...lifecycleCommands.value
		];
	});
	return { commands: computed(() => [...workflowCommands.value, ...credentialCommands.value]) };
}
var import_debounce$2 = /* @__PURE__ */ __toESM(require_debounce(), 1);
var ITEM_ID$6 = {
	CREATE_WORKFLOW: "create-workflow",
	OPEN_WORKFLOW: "open-workflow"
};
function useWorkflowNavigationCommands(options$1) {
	const i18n$2 = useI18n();
	const { lastQuery, activeNodeId, currentProjectName } = options$1;
	const nodeTypesStore = useNodeTypesStore();
	const credentialsStore = useCredentialsStore();
	const workflowsStore = useWorkflowsStore();
	const workflowsListStore = useWorkflowsListStore();
	const projectsStore = useProjectsStore();
	const tagsStore = useTagsStore();
	const sourceControlStore = useSourceControlStore();
	const foldersStore = useFoldersStore();
	const router = useRouter();
	const route = useRoute();
	const { generateMergedNodesAndActions } = useActionsGenerator();
	const workflowResults = ref([]);
	const workflowKeywords = ref(/* @__PURE__ */ new Map());
	const workflowMatchedNodeTypes = ref(/* @__PURE__ */ new Map());
	const isLoading = ref(false);
	const homeProject = computed(() => projectsStore.currentProject ?? projectsStore.personalProject);
	function orderResultByCurrentProjectFirst(results) {
		return results.sort((a, b) => {
			if (a.homeProject?.id === projectsStore.currentProjectId) return -1;
			if (b.homeProject?.id === projectsStore.currentProjectId) return 1;
			return 0;
		});
	}
	const fetchWorkflowsImpl = async (query) => {
		try {
			const trimmed = (query || "").trim();
			const trimmedLower = trimmed.toLowerCase();
			const httpOnlyCredentials = credentialsStore.httpOnlyCredentialTypes;
			const visibleNodeTypes = nodeTypesStore.allNodeTypes;
			const { mergedNodes } = generateMergedNodesAndActions(visibleNodeTypes, httpOnlyCredentials);
			const matchedNodes = mergedNodes.filter((node) => node.displayName?.toLowerCase() === trimmedLower);
			const matchedNodeTypeNames = Array.from(new Set(matchedNodes.map((node) => node.name)));
			const matchedTag = tagsStore.allTags.find((tag) => tag.name.toLowerCase() === trimmedLower);
			const nameSearchPromise = workflowsListStore.searchWorkflows({
				query: trimmed,
				select: [
					"id",
					"name",
					"active",
					"ownedBy",
					"parentFolder",
					"isArchived",
					"description"
				]
			});
			const nodeTypeSearchPromise = matchedNodeTypeNames.length > 0 ? workflowsListStore.searchWorkflows({
				nodeTypes: matchedNodeTypeNames,
				select: [
					"id",
					"name",
					"active",
					"nodes",
					"ownedBy",
					"parentFolder",
					"isArchived",
					"description"
				]
			}) : Promise.resolve([]);
			const tagSearchPromise = matchedTag ? workflowsListStore.searchWorkflows({
				tags: [matchedTag.name],
				select: [
					"id",
					"name",
					"active",
					"ownedBy",
					"tags",
					"parentFolder",
					"isArchived",
					"description"
				]
			}) : Promise.resolve([]);
			const [byName, byNodeTypes, byTags] = await Promise.all([
				nameSearchPromise,
				nodeTypeSearchPromise,
				tagSearchPromise
			]);
			const keywordsMap = /* @__PURE__ */ new Map();
			const nodeTypesMap = /* @__PURE__ */ new Map();
			const matchedNodeDisplayNames = new Map(matchedNodes.map((node) => [node.name, node.displayName]));
			byNodeTypes.forEach((workflow) => {
				if (!workflow.nodes) return;
				const matchedWorkflowNodes = workflow.nodes.filter((node) => matchedNodeTypeNames.includes(node.type));
				if (matchedWorkflowNodes.length === 0) return;
				nodeTypesMap.set(workflow.id, matchedWorkflowNodes[0].type);
				const matchedDisplayNames = matchedWorkflowNodes.map((node) => matchedNodeDisplayNames.get(node.type)).filter((name$3) => !!name$3);
				if (matchedDisplayNames.length > 0) keywordsMap.set(workflow.id, matchedDisplayNames);
			});
			workflowKeywords.value = keywordsMap;
			workflowMatchedNodeTypes.value = nodeTypesMap;
			const merged = [
				...byName,
				...byNodeTypes,
				...byTags
			];
			const nonArchivedWorkflows = Array.from(new Map(merged.map((w) => [w.id, w])).values()).filter((w) => !w.isArchived);
			workflowResults.value = orderResultByCurrentProjectFirst(nonArchivedWorkflows);
			const parentFolders = nonArchivedWorkflows.map((w) => w.parentFolder).filter((pf) => pf !== void 0 && pf !== null);
			if (parentFolders.length > 0) foldersStore.cacheFolders(parentFolders.map((pf) => ({
				id: pf.id,
				name: pf.name,
				parentFolder: void 0
			})));
		} catch {
			workflowResults.value = [];
			workflowKeywords.value.clear();
			workflowMatchedNodeTypes.value.clear();
		} finally {
			isLoading.value = false;
		}
	};
	const fetchWorkflowsDebounced = (0, import_debounce$2.default)(fetchWorkflowsImpl, 300);
	const buildFolderPath = (folderId) => {
		const path = [];
		let currentFolderId = folderId;
		while (currentFolderId) {
			const folder = foldersStore.getCachedFolder(currentFolderId);
			if (!folder) break;
			path.unshift(folder.name);
			currentFolderId = folder.parentFolder;
		}
		return path;
	};
	const getProjectIcon = (workflow) => {
		if (workflow.homeProject?.type === ProjectTypes.Personal) return {
			type: "icon",
			value: "user"
		};
		if (workflow.homeProject?.name) return isIconOrEmoji(workflow.homeProject.icon) ? workflow.homeProject.icon : {
			type: "icon",
			value: "layers"
		};
		return {
			type: "icon",
			value: "house"
		};
	};
	const getWorkflowProjectSuffix = (workflow) => {
		const parts = [];
		if (workflow.homeProject && workflow.homeProject.type === ProjectTypes.Personal) parts.push(i18n$2.baseText("projects.menu.personal"));
		else if (workflow.homeProject?.name) parts.push(workflow.homeProject.name);
		if (workflow.parentFolder?.id) {
			const folderPath = buildFolderPath(workflow.parentFolder.id);
			if (folderPath.length > 2) parts.push(folderPath[0], "...", folderPath[folderPath.length - 1]);
			else parts.push(...folderPath);
		}
		return parts.join(" / ");
	};
	const openWorkflowCommand = (workflow, isRoot) => {
		let keywords = workflowKeywords.value.get(workflow.id) ?? [];
		const matchedNodeType = workflowMatchedNodeTypes.value.get(workflow.id);
		let icon$7;
		if (matchedNodeType) {
			const nodeType = nodeTypesStore.getNodeType(matchedNodeType);
			if (nodeType) icon$7 = {
				component: NodeIcon_default,
				props: {
					nodeType,
					size: 24
				}
			};
		}
		const workflowName = workflow.name;
		keywords = [...keywords, workflowName];
		if (workflow.description) keywords = [...keywords, workflow.description];
		if (workflow.tags && workflow.tags.length > 0) keywords = [...keywords, ...workflow.tags.map((tag) => typeof tag === "string" ? tag : tag.name)];
		const suffix$1 = getWorkflowProjectSuffix(workflow);
		const name$3 = workflow.name || i18n$2.baseText("commandBar.workflows.unnamed");
		const title$7 = isRoot ? i18n$2.baseText("generic.openResource", { interpolate: { resource: name$3 } }) : name$3;
		const section$1 = isRoot ? i18n$2.baseText("commandBar.sections.workflows") : i18n$2.baseText("commandBar.workflows.open");
		return {
			id: workflow.id,
			matchAnySearchTerm: !isRoot,
			title: {
				component: CommandBarItemTitle_default,
				props: {
					title: title$7,
					suffix: suffix$1,
					...suffix$1 ? { suffixIcon: getProjectIcon(workflow) } : {}
				}
			},
			section: section$1,
			...keywords.length > 0 ? { keywords } : {},
			...icon$7 ? { icon: icon$7 } : {},
			handler: () => {
				const targetRoute = router.resolve({
					name: VIEWS.WORKFLOW,
					params: { name: workflow.id }
				});
				window.location.href = targetRoute.fullPath;
			}
		};
	};
	const openWorkflowCommands = computed(() => {
		return workflowResults.value.map((workflow) => openWorkflowCommand(workflow, false));
	});
	const rootWorkflowItems = computed(() => {
		if (lastQuery.value.length <= 2 || !workflowsStore.canViewWorkflows) return [];
		return workflowResults.value.map((workflow) => openWorkflowCommand(workflow, true));
	});
	const workflowNavigationCommands = computed(() => {
		const hasCreatePermission = !sourceControlStore.preferences.branchReadOnly && getResourcePermissions(homeProject.value?.scopes).workflow.create;
		const newWorkflowCommand = {
			id: ITEM_ID$6.CREATE_WORKFLOW,
			title: i18n$2.baseText("commandBar.workflows.create", { interpolate: { projectName: currentProjectName.value } }),
			keywords: [i18n$2.baseText("workflows.add")],
			section: i18n$2.baseText("commandBar.sections.workflows"),
			icon: {
				component: N8nIcon_default,
				props: {
					icon: "plus",
					color: "text-light"
				}
			},
			handler: () => {
				const targetRoute = router.resolve({
					name: VIEWS.NEW_WORKFLOW,
					query: {
						projectId: projectsStore.currentProjectId,
						parentFolderId: route.params.folderId
					}
				});
				window.location.href = targetRoute.fullPath;
			}
		};
		return [
			...hasCreatePermission ? [newWorkflowCommand] : [],
			...workflowsStore.canViewWorkflows ? [{
				id: ITEM_ID$6.OPEN_WORKFLOW,
				title: i18n$2.baseText("commandBar.workflows.open"),
				section: i18n$2.baseText("commandBar.sections.workflows"),
				placeholder: i18n$2.baseText("commandBar.workflows.searchPlaceholder"),
				children: openWorkflowCommands.value,
				icon: {
					component: N8nIcon_default,
					props: {
						icon: "arrow-right",
						color: "text-light"
					}
				}
			}] : [],
			...rootWorkflowItems.value
		];
	});
	function onCommandBarChange(query) {
		const trimmed = query.trim();
		const isInWorkflowParent = activeNodeId.value === ITEM_ID$6.OPEN_WORKFLOW;
		const isRootWithQuery = activeNodeId.value === null && trimmed.length > 2;
		if (isInWorkflowParent || isRootWithQuery) {
			isLoading.value = true;
			fetchWorkflowsDebounced(trimmed);
		}
	}
	function onCommandBarNavigateTo(to) {
		activeNodeId.value = to;
		if (to === ITEM_ID$6.OPEN_WORKFLOW) {
			isLoading.value = true;
			fetchWorkflowsImpl("");
		} else if (to === null) {
			isLoading.value = false;
			workflowResults.value = [];
			workflowKeywords.value.clear();
			workflowMatchedNodeTypes.value.clear();
		}
	}
	async function initialize() {
		await tagsStore.fetchAll();
	}
	return {
		commands: workflowNavigationCommands,
		handlers: {
			onCommandBarChange,
			onCommandBarNavigateTo
		},
		isLoading,
		initialize
	};
}
var import_debounce$1 = /* @__PURE__ */ __toESM(require_debounce(), 1);
var ITEM_ID$5 = {
	OPEN_DATA_TABLE: "open-data-table",
	CREATE_DATA_TABLE: "create-data-table"
};
function useDataTableNavigationCommands(options$1) {
	const i18n$2 = useI18n();
	const { lastQuery, activeNodeId, currentProjectName } = options$1;
	const dataTableStore = useDataTableStore();
	const projectsStore = useProjectsStore();
	const sourceControlStore = useSourceControlStore();
	const router = useRouter();
	const route = useRoute();
	const dataTableResults = ref([]);
	const isLoading = ref(false);
	const hasDataFetched = ref(false);
	const currentProjectId = computed(() => {
		return typeof route.params.projectId === "string" ? route.params.projectId : personalProjectId.value;
	});
	const homeProject = computed(() => projectsStore.currentProject ?? projectsStore.personalProject);
	const personalProjectId = computed(() => {
		return projectsStore.myProjects.find((p) => p.type === "personal")?.id;
	});
	function orderResultByCurrentProjectFirst(results) {
		return results.sort((a, b) => {
			if (a.project?.id === currentProjectId.value) return -1;
			if (b.project?.id === currentProjectId.value) return 1;
			return 0;
		});
	}
	const fetchDataTablesImpl = async (query) => {
		try {
			const trimmed = (query || "").trim();
			if (!hasDataFetched.value) {
				await dataTableStore.fetchDataTables("", 1, 1e3);
				hasDataFetched.value = true;
			}
			const trimmedLower = trimmed.toLowerCase();
			dataTableResults.value = orderResultByCurrentProjectFirst(dataTableStore.dataTables.filter((dataTable) => dataTable.name.toLowerCase().includes(trimmedLower)));
		} catch {
			dataTableResults.value = [];
		} finally {
			isLoading.value = false;
		}
	};
	const fetchDataTablesDebounced = (0, import_debounce$1.default)(fetchDataTablesImpl, 300);
	const getDataTableProjectSuffix = (dataTable) => {
		if (dataTable.project && dataTable.project.type === "personal") return i18n$2.baseText("projects.menu.personal");
		return dataTable.project?.name ?? "";
	};
	const createDataTableCommand = (dataTable, isRoot) => {
		const keywords = [dataTable.name];
		const title$7 = isRoot ? i18n$2.baseText("generic.openResource", { interpolate: { resource: dataTable.name } }) : dataTable.name;
		const section$1 = isRoot ? i18n$2.baseText("commandBar.sections.dataTables") : i18n$2.baseText("commandBar.dataTables.open");
		return {
			id: dataTable.id,
			title: {
				component: CommandBarItemTitle_default,
				props: {
					title: title$7,
					suffix: getDataTableProjectSuffix(dataTable)
				}
			},
			section: section$1,
			keywords,
			handler: () => {
				router.push({
					name: DATA_TABLE_DETAILS,
					params: {
						projectId: dataTable.projectId,
						id: dataTable.id
					}
				});
			}
		};
	};
	const openDataTableCommands = computed(() => {
		return dataTableResults.value.map((dataTable) => createDataTableCommand(dataTable, false));
	});
	const rootDataTableItems = computed(() => {
		if (lastQuery.value.length <= 2 || !dataTableStore.canViewDataTables) return [];
		return dataTableResults.value.map((dataTable) => createDataTableCommand(dataTable, true));
	});
	const dataTableNavigationCommands = computed(() => {
		const hasCreatePermission = !sourceControlStore.preferences.branchReadOnly && getResourcePermissions(homeProject.value?.scopes).dataTable.create;
		const newDataTableCommand = {
			id: ITEM_ID$5.CREATE_DATA_TABLE,
			title: i18n$2.baseText("commandBar.dataTables.create", { interpolate: { projectName: currentProjectName.value } }),
			section: i18n$2.baseText("commandBar.sections.dataTables"),
			icon: {
				component: N8nIcon_default,
				props: {
					icon: "table",
					color: "text-light"
				}
			},
			handler: () => {
				if (!currentProjectId.value) return;
				router.push({
					name: PROJECT_DATA_TABLES,
					params: {
						projectId: currentProjectId.value,
						new: "new"
					}
				});
			}
		};
		return [
			...hasCreatePermission ? [newDataTableCommand] : [],
			...dataTableStore.canViewDataTables ? [{
				id: ITEM_ID$5.OPEN_DATA_TABLE,
				title: i18n$2.baseText("commandBar.dataTables.open"),
				section: i18n$2.baseText("commandBar.sections.dataTables"),
				placeholder: i18n$2.baseText("commandBar.dataTables.searchPlaceholder"),
				icon: {
					component: N8nIcon_default,
					props: {
						icon: "table",
						color: "text-light"
					}
				},
				children: openDataTableCommands.value
			}] : [],
			...rootDataTableItems.value
		];
	});
	function onCommandBarChange(query) {
		if (!dataTableStore.canViewDataTables) return;
		const trimmed = query.trim();
		const isInDataTableParent = activeNodeId.value === ITEM_ID$5.OPEN_DATA_TABLE;
		const isRootWithQuery = activeNodeId.value === null && trimmed.length > 2;
		if (isInDataTableParent || isRootWithQuery) {
			isLoading.value = true;
			fetchDataTablesDebounced(trimmed);
		}
	}
	function onCommandBarNavigateTo(to) {
		activeNodeId.value = to;
		if (to === ITEM_ID$5.OPEN_DATA_TABLE) {
			isLoading.value = true;
			fetchDataTablesImpl("");
		} else if (to === null) {
			isLoading.value = false;
			dataTableResults.value = [];
			hasDataFetched.value = false;
		}
	}
	return {
		commands: dataTableNavigationCommands,
		handlers: {
			onCommandBarChange,
			onCommandBarNavigateTo
		},
		isLoading
	};
}
var import_debounce = /* @__PURE__ */ __toESM(require_debounce(), 1);
var ITEM_ID$4 = {
	CREATE_CREDENTIAL: "create-credential",
	OPEN_CREDENTIAL: "open-credential"
};
function useCredentialNavigationCommands(options$1) {
	const i18n$2 = useI18n();
	const { lastQuery, activeNodeId, currentProjectName } = options$1;
	const credentialsStore = useCredentialsStore();
	const projectsStore = useProjectsStore();
	const uiStore = useUIStore();
	const sourceControlStore = useSourceControlStore();
	const route = useRoute();
	const router = useRouter();
	const credentialResults = ref([]);
	const isLoading = ref(false);
	const personalProjectId = computed(() => {
		return projectsStore.myProjects.find((p) => p.type === "personal")?.id;
	});
	const homeProject = computed(() => projectsStore.currentProject ?? projectsStore.personalProject);
	function orderResultByCurrentProjectFirst(results) {
		const currentProjectId = typeof route.params.projectId === "string" ? route.params.projectId : personalProjectId.value;
		return results.sort((a, b) => {
			if (a.homeProject?.id === currentProjectId) return -1;
			if (b.homeProject?.id === currentProjectId) return 1;
			return 0;
		});
	}
	const fetchCredentialsImpl = async (query) => {
		try {
			const trimmed = (query || "").trim();
			await credentialsStore.fetchAllCredentials();
			const trimmedLower = trimmed.toLowerCase();
			credentialResults.value = orderResultByCurrentProjectFirst(credentialsStore.allCredentials.filter((credential) => credential.name.toLowerCase().includes(trimmedLower)));
		} catch {
			credentialResults.value = [];
		} finally {
			isLoading.value = false;
		}
	};
	const fetchCredentialsDebounced = (0, import_debounce.default)(fetchCredentialsImpl, 300);
	const getCredentialProjectSuffix = (credential) => {
		if (credential.homeProject && credential.homeProject.type === "personal") return i18n$2.baseText("projects.menu.personal");
		return credential.homeProject?.name ?? "";
	};
	const createCredentialCommand = (credential, isRoot) => {
		const keywords = [credential.name];
		const title$7 = isRoot ? i18n$2.baseText("generic.openResource", { interpolate: { resource: credential.name } }) : credential.name;
		const section$1 = isRoot ? i18n$2.baseText("commandBar.sections.credentials") : i18n$2.baseText("commandBar.credentials.open");
		return {
			id: credential.id,
			title: {
				component: CommandBarItemTitle_default,
				props: {
					title: title$7,
					suffix: getCredentialProjectSuffix(credential)
				}
			},
			section: section$1,
			keywords,
			icon: {
				component: CredentialIcon_default,
				props: { credentialTypeName: credential.type }
			},
			handler: () => {
				uiStore.openExistingCredential(credential.id);
			}
		};
	};
	const openCredentialCommands = computed(() => {
		return credentialResults.value.map((credential) => createCredentialCommand(credential, false));
	});
	const rootCredentialItems = computed(() => {
		if (lastQuery.value.length <= 2) return [];
		return credentialResults.value.map((credential) => createCredentialCommand(credential, true));
	});
	const credentialNavigationCommands = computed(() => {
		const hasCreatePermission = !sourceControlStore.preferences.branchReadOnly && getResourcePermissions(homeProject.value?.scopes).credential.create;
		const newCredentialCommand = {
			id: ITEM_ID$4.CREATE_CREDENTIAL,
			title: i18n$2.baseText("commandBar.credentials.create", { interpolate: { projectName: currentProjectName.value } }),
			section: i18n$2.baseText("commandBar.sections.credentials"),
			keywords: [i18n$2.baseText("credentials.add")],
			icon: {
				component: N8nIcon_default,
				props: {
					icon: "lock",
					color: "text-light"
				}
			},
			handler: () => {
				const currentProjectId = typeof route.params.projectId === "string" ? route.params.projectId : personalProjectId.value;
				const routeName = route.name === VIEWS.SHARED_CREDENTIALS ? VIEWS.SHARED_CREDENTIALS : route.name === VIEWS.CREDENTIALS ? VIEWS.CREDENTIALS : VIEWS.PROJECTS_CREDENTIALS;
				router.push({
					name: routeName,
					params: {
						projectId: currentProjectId,
						credentialId: "create"
					}
				});
			}
		};
		return [
			...hasCreatePermission ? [newCredentialCommand] : [],
			{
				id: ITEM_ID$4.OPEN_CREDENTIAL,
				title: i18n$2.baseText("commandBar.credentials.open"),
				section: i18n$2.baseText("commandBar.sections.credentials"),
				placeholder: i18n$2.baseText("commandBar.credentials.searchPlaceholder"),
				children: openCredentialCommands.value,
				icon: {
					component: N8nIcon_default,
					props: {
						icon: "lock",
						color: "text-light"
					}
				}
			},
			...rootCredentialItems.value
		];
	});
	function onCommandBarChange(query) {
		const trimmed = query.trim();
		const isInCredentialParent = activeNodeId.value === ITEM_ID$4.OPEN_CREDENTIAL;
		const isRootWithQuery = activeNodeId.value === null && trimmed.length > 2;
		if (isInCredentialParent || isRootWithQuery) {
			isLoading.value = true;
			fetchCredentialsDebounced(trimmed);
		}
	}
	function onCommandBarNavigateTo(to) {
		activeNodeId.value = to;
		if (to === ITEM_ID$4.OPEN_CREDENTIAL) {
			isLoading.value = true;
			fetchCredentialsImpl("");
		} else if (to === null) {
			isLoading.value = false;
			credentialResults.value = [];
		}
	}
	async function initialize() {
		await credentialsStore.fetchCredentialTypes(false);
	}
	return {
		commands: credentialNavigationCommands,
		handlers: {
			onCommandBarChange,
			onCommandBarNavigateTo
		},
		isLoading,
		initialize
	};
}
function useExecutionNavigationCommands() {
	const i18n$2 = useI18n();
	const projectsStore = useProjectsStore();
	const workflowsStore = useWorkflowsStore();
	const router = useRouter();
	const route = useRoute();
	const personalProjectId = computed(() => {
		return projectsStore.myProjects.find((p) => p.type === "personal")?.id;
	});
	const currentProjectId = computed(() => {
		return typeof route.params.projectId === "string" ? route.params.projectId : personalProjectId.value;
	});
	return { commands: computed(() => {
		if (!workflowsStore.canViewWorkflows) return [];
		return [{
			id: "open-executions",
			title: i18n$2.baseText("commandBar.executions.open"),
			section: i18n$2.baseText("commandBar.sections.executions"),
			icon: {
				component: N8nIcon_default,
				props: { icon: "arrow-right" }
			},
			handler: () => {
				if (currentProjectId.value === personalProjectId.value) router.push({ name: VIEWS.EXECUTIONS });
				else router.push({
					name: VIEWS.PROJECTS_EXECUTIONS,
					params: { projectId: currentProjectId.value }
				});
			}
		}];
	}) };
}
var ITEM_ID$3 = {
	CREATE_PROJECT: "create-project",
	OPEN_PROJECT: "open-project"
};
function useProjectNavigationCommands(options$1) {
	const i18n$2 = useI18n();
	const { lastQuery, activeNodeId } = options$1;
	const projectsStore = useProjectsStore();
	const globalEntityCreation = useGlobalEntityCreation();
	const router = useRouter();
	const filteredProjects = computed(() => {
		const trimmed = (lastQuery.value || "").trim().toLowerCase();
		const allProjects = projectsStore.availableProjects;
		if (!trimmed) return allProjects;
		return allProjects.filter((project) => project.name?.toLowerCase().includes(trimmed) || project.id?.toLowerCase().includes(trimmed));
	});
	const openProjectCommand = (project, isRoot) => {
		let title$7 = project.type === "personal" ? i18n$2.baseText("projects.menu.personal") : project.name ? project.name : i18n$2.baseText("commandBar.projects.unnamed");
		if (isRoot) title$7 = i18n$2.baseText("generic.openResource", { interpolate: { resource: title$7 } });
		const section$1 = isRoot ? i18n$2.baseText("commandBar.sections.projects") : i18n$2.baseText("commandBar.projects.open");
		return {
			id: project.id,
			title: title$7,
			section: section$1,
			keywords: [title$7],
			handler: () => {
				router.push({
					name: VIEWS.PROJECTS_WORKFLOWS,
					params: { projectId: project.id }
				});
			}
		};
	};
	const openProjectCommands = computed(() => {
		if (!(activeNodeId.value === ITEM_ID$3.OPEN_PROJECT)) return [];
		return filteredProjects.value.map((project) => openProjectCommand(project, false));
	});
	const rootProjectItems = computed(() => {
		if (!(activeNodeId.value === null && lastQuery.value.trim().length > 2) || !projectsStore.canViewProjects) return [];
		return filteredProjects.value.map((project) => openProjectCommand(project, true));
	});
	const projectNavigationCommands = computed(() => {
		const commands = [];
		if (projectsStore.hasPermissionToCreateProjects && projectsStore.canCreateProjects) commands.push({
			id: ITEM_ID$3.CREATE_PROJECT,
			title: i18n$2.baseText("commandBar.projects.create"),
			section: i18n$2.baseText("commandBar.sections.projects"),
			icon: {
				component: N8nIcon_default,
				props: {
					icon: "layers",
					color: "text-light"
				}
			},
			handler: () => {
				globalEntityCreation.createProject("command_bar");
			}
		});
		if (projectsStore.availableProjects.length > 0 && projectsStore.canViewProjects) commands.push({
			id: ITEM_ID$3.OPEN_PROJECT,
			title: i18n$2.baseText("commandBar.projects.open"),
			section: i18n$2.baseText("commandBar.sections.projects"),
			placeholder: i18n$2.baseText("commandBar.projects.searchPlaceholder"),
			children: openProjectCommands.value,
			icon: {
				component: N8nIcon_default,
				props: {
					icon: "layers",
					color: "text-light"
				}
			}
		});
		return [...commands, ...rootProjectItems.value];
	});
	function onCommandBarChange(query) {
		lastQuery.value = query;
	}
	function onCommandBarNavigateTo(to) {
		activeNodeId.value = to;
	}
	return {
		commands: projectNavigationCommands,
		handlers: {
			onCommandBarChange,
			onCommandBarNavigateTo
		}
	};
}
var ITEM_ID$2 = {
	DELETE_EXECUTION: "delete-execution",
	RETRY_CURRENT_WORKFLOW: "retry-current-workflow",
	RETRY_ORIGINAL_WORKFLOW: "retry-original-workflow",
	STOP_EXECUTION: "stop-execution",
	DEBUG_EXECUTION: "debug-execution",
	VOTE_UP: "vote-up",
	VOTE_DOWN: "vote-down"
};
function useExecutionCommands() {
	const i18n$2 = useI18n();
	const router = useRouter();
	const route = useRoute();
	const executionsStore = useExecutionsStore();
	const workflowsListStore = useWorkflowsListStore();
	const settingsStore = useSettingsStore();
	const toast = useToast();
	const message$2 = useMessage();
	const telemetry$1 = useTelemetry();
	const workflowId = computed(() => route.params.name);
	const activeExecution = computed(() => {
		return executionsStore.activeExecution;
	});
	const workflowPermissions = computed(() => getResourcePermissions(workflowsListStore.getWorkflowById(workflowId.value)?.scopes).workflow);
	const isAnnotationEnabled = computed(() => settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.AdvancedExecutionFilters]);
	const hasAnnotation = computed(() => !!activeExecution.value?.annotation && (activeExecution.value?.annotation.vote || activeExecution.value?.annotation.tags.length > 0));
	const vote = computed(() => activeExecution.value?.annotation?.vote || null);
	const executions = computed(() => workflowId.value ? [...executionsStore.currentExecutionsByWorkflowId[workflowId.value] ?? [], ...executionsStore.executionsByWorkflowId[workflowId.value] ?? []] : []);
	const isRetriable = computed(() => {
		if (!activeExecution.value) return false;
		const status = activeExecution.value.status;
		return status === "error" || status === "crashed" || status === "canceled";
	});
	const isRunning = computed(() => {
		if (!activeExecution.value) return false;
		return activeExecution.value.status === "running" || activeExecution.value.status === "new";
	});
	async function handleDeleteExecution() {
		const confirmationText = [hasAnnotation.value && i18n$2.baseText("executionDetails.confirmMessage.annotationsNote"), i18n$2.baseText("executionDetails.confirmMessage.message")].filter(Boolean).join(" ");
		if (await message$2.confirm(confirmationText, i18n$2.baseText("executionDetails.confirmMessage.headline"), {
			type: "warning",
			confirmButtonText: i18n$2.baseText("executionDetails.confirmMessage.confirmButtonText"),
			cancelButtonText: ""
		}) !== "confirm") return;
		try {
			const executionId = activeExecution.value.id;
			const executionIndex = executions.value.findIndex((e) => e.id === executionId);
			const nextExecution = executions.value[executionIndex + 1] || executions.value[executionIndex - 1] || executions.value[0];
			await executionsStore.deleteExecutions({ ids: [executionId] });
			if (executions.value.length > 0) await router.replace({
				name: VIEWS.EXECUTION_PREVIEW,
				params: {
					name: workflowId.value,
					executionId: nextExecution.id
				}
			}).catch(() => {});
			else await router.replace({
				name: VIEWS.EXECUTION_HOME,
				params: { name: workflowId.value }
			});
			toast.showMessage({
				title: i18n$2.baseText("executionsList.showMessage.handleDeleteSelected.title"),
				type: "success"
			});
		} catch (error$2) {
			toast.showError(error$2, i18n$2.baseText("executionsList.showError.handleDeleteSelected.title"));
		}
	}
	async function handleRetryExecution(loadWorkflow) {
		toast.showMessage({
			title: i18n$2.baseText("executionDetails.runningMessage"),
			type: "info",
			duration: 2e3
		});
		try {
			const retryMessage = executionRetryMessage((await executionsStore.retryExecution(activeExecution.value.id, loadWorkflow)).status);
			if (retryMessage) toast.showMessage(retryMessage);
			telemetry$1.track("User clicked retry execution button", {
				workflow_id: workflowId.value,
				execution_id: activeExecution.value.id,
				retry_type: loadWorkflow ? "current" : "original"
			});
		} catch (error$2) {
			toast.showError(error$2, i18n$2.baseText("executionsList.showError.retryExecution.title"));
		}
	}
	async function handleStopExecution() {
		try {
			await executionsStore.stopCurrentExecution(activeExecution.value.id);
			toast.showMessage({
				title: i18n$2.baseText("executionsList.showMessage.stopExecution.title"),
				message: i18n$2.baseText("executionsList.showMessage.stopExecution.message", { interpolate: { activeExecutionId: activeExecution.value.id } }),
				type: "success"
			});
		} catch (error$2) {
			toast.showError(error$2, i18n$2.baseText("executionsList.showError.stopExecution.title"));
		}
	}
	function handleDebugExecution() {
		router.push({
			name: VIEWS.EXECUTION_DEBUG,
			params: {
				name: activeExecution.value.workflowId,
				executionId: activeExecution.value.id
			}
		});
	}
	async function handleVoteClick(voteValue) {
		const voteToSet = voteValue === vote.value ? null : voteValue;
		try {
			await executionsStore.annotateExecution(activeExecution.value.id, { vote: voteToSet });
		} catch (e) {
			toast.showError(e, "executionAnnotationView.vote.error");
		}
	}
	return { commands: computed(() => {
		if (!activeExecution.value) return [];
		const commands = [];
		if (workflowPermissions.value.update) {
			const isSuccess = activeExecution.value.status === "success";
			commands.push({
				id: ITEM_ID$2.DEBUG_EXECUTION,
				title: isSuccess ? i18n$2.baseText("executionsList.debug.button.copyToEditor") : i18n$2.baseText("executionsList.debug.button.debugInEditor"),
				section: i18n$2.baseText("commandBar.sections.execution"),
				handler: handleDebugExecution,
				icon: {
					component: N8nIcon_default,
					props: { icon: isSuccess ? "copy" : "bug" }
				}
			});
		}
		if (isRetriable.value && workflowPermissions.value.update) {
			commands.push({
				id: ITEM_ID$2.RETRY_CURRENT_WORKFLOW,
				title: i18n$2.baseText("executionsList.retryWithCurrentlySavedWorkflow"),
				section: i18n$2.baseText("commandBar.sections.execution"),
				handler: async () => await handleRetryExecution(true),
				icon: {
					component: N8nIcon_default,
					props: { icon: "redo-2" }
				}
			});
			commands.push({
				id: ITEM_ID$2.RETRY_ORIGINAL_WORKFLOW,
				title: i18n$2.baseText("executionsList.retryWithOriginalWorkflow"),
				section: i18n$2.baseText("commandBar.sections.execution"),
				handler: async () => await handleRetryExecution(false),
				icon: {
					component: N8nIcon_default,
					props: { icon: "redo" }
				}
			});
		}
		if (isRunning.value && workflowPermissions.value.execute) commands.push({
			id: ITEM_ID$2.STOP_EXECUTION,
			title: i18n$2.baseText("executionsList.stopExecution"),
			section: i18n$2.baseText("commandBar.sections.execution"),
			handler: handleStopExecution,
			icon: {
				component: N8nIcon_default,
				props: { icon: "stop" }
			}
		});
		if (isAnnotationEnabled.value) {
			commands.push({
				id: ITEM_ID$2.VOTE_UP,
				title: vote.value === "up" ? i18n$2.baseText("executionAnnotationView.vote.removeUp") : i18n$2.baseText("executionAnnotationView.vote.up"),
				section: i18n$2.baseText("commandBar.sections.execution"),
				handler: async () => await handleVoteClick("up"),
				icon: {
					component: N8nIcon_default,
					props: { icon: "thumbs-up" }
				}
			});
			commands.push({
				id: ITEM_ID$2.VOTE_DOWN,
				title: vote.value === "down" ? i18n$2.baseText("executionAnnotationView.vote.removeDown") : i18n$2.baseText("executionAnnotationView.vote.down"),
				section: i18n$2.baseText("commandBar.sections.execution"),
				handler: async () => await handleVoteClick("down"),
				icon: {
					component: N8nIcon_default,
					props: { icon: "thumbs-down" }
				}
			});
		}
		if (workflowPermissions.value.update) commands.push({
			id: ITEM_ID$2.DELETE_EXECUTION,
			title: i18n$2.baseText("executionDetails.deleteExecution"),
			section: i18n$2.baseText("commandBar.sections.execution"),
			handler: handleDeleteExecution,
			icon: {
				component: N8nIcon_default,
				props: { icon: "trash-2" }
			}
		});
		return commands;
	}) };
}
var ITEM_ID$1 = {
	CHAT_HUB: "chat-hub",
	WHATS_NEW: "whats-new",
	SETTINGS: "settings",
	SIGN_OUT: "sign-out",
	TEMPLATES: "templates",
	VARIABLES: "variables",
	INSIGHTS: "insights",
	QUICKSTART: "quickstart",
	DOCUMENTATION: "documentation",
	FORUM: "forum",
	COURSE: "course",
	REPORT_BUG: "report-bug",
	ABOUT: "about"
};
function useGenericCommands() {
	const i18n$2 = useI18n();
	const uiStore = useUIStore();
	const router = useRouter();
	const settingsStore = useSettingsStore();
	const projectsStore = useProjectsStore();
	const templatesStore = useTemplatesStore();
	const { getReportingURL } = useBugReporting();
	return { commands: computed(() => [
		{
			id: ITEM_ID$1.WHATS_NEW,
			title: i18n$2.baseText("mainSidebar.whatsNew"),
			section: i18n$2.baseText("commandBar.sections.general"),
			handler: () => {
				uiStore.openModal(WHATS_NEW_MODAL_KEY);
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "bell" }
			},
			keywords: [i18n$2.baseText("mainSidebar.whatsNew").toLowerCase(), i18n$2.baseText("mainSidebar.whatsNew.fullChangelog").toLowerCase()]
		},
		...settingsStore.isChatFeatureEnabled ? [{
			id: ITEM_ID$1.CHAT_HUB,
			title: i18n$2.baseText("projects.menu.chat"),
			section: i18n$2.baseText("commandBar.sections.general"),
			handler: () => {
				router.push({
					name: CHAT_VIEW,
					force: true
				});
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "message-circle" }
			},
			keywords: [
				"chat",
				"open chat",
				i18n$2.baseText("projects.menu.chat").toLowerCase()
			]
		}] : [],
		...projectsStore.canViewProjects ? [{
			id: ITEM_ID$1.TEMPLATES,
			title: i18n$2.baseText("generic.templates"),
			section: i18n$2.baseText("commandBar.sections.general"),
			handler: () => {
				if (templatesStore.hasCustomTemplatesHost) router.push({ name: VIEWS.TEMPLATES });
				else window.open(templatesStore.websiteTemplateRepositoryURL, "_blank");
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "package-open" }
			},
			keywords: [i18n$2.baseText("generic.templates").toLowerCase()]
		}] : [],
		...projectsStore.canViewProjects ? [{
			id: ITEM_ID$1.VARIABLES,
			title: i18n$2.baseText("mainSidebar.variables"),
			section: i18n$2.baseText("commandBar.sections.general"),
			handler: () => {
				router.push({ name: VIEWS.HOME_VARIABLES });
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "variable" }
			},
			keywords: [i18n$2.baseText("mainSidebar.variables").toLowerCase()]
		}] : [],
		...projectsStore.canViewProjects ? [{
			id: ITEM_ID$1.INSIGHTS,
			title: "Insights",
			section: i18n$2.baseText("commandBar.sections.general"),
			handler: () => {
				router.push({ name: VIEWS.INSIGHTS });
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "chart-column-decreasing" }
			},
			keywords: ["insights"]
		}] : [],
		{
			id: ITEM_ID$1.QUICKSTART,
			title: i18n$2.baseText("mainSidebar.helpMenuItems.quickstart"),
			section: i18n$2.baseText("mainSidebar.help"),
			handler: () => {
				window.open(EXTERNAL_LINKS.QUICKSTART_VIDEO, "_blank", "noreferrer");
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "video" }
			},
			keywords: [i18n$2.baseText("mainSidebar.helpMenuItems.quickstart").toLowerCase()]
		},
		{
			id: ITEM_ID$1.DOCUMENTATION,
			title: i18n$2.baseText("mainSidebar.helpMenuItems.documentation"),
			section: i18n$2.baseText("mainSidebar.help"),
			handler: () => {
				window.open(EXTERNAL_LINKS.DOCUMENTATION, "_blank", "noreferrer");
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "book" }
			},
			keywords: [i18n$2.baseText("mainSidebar.helpMenuItems.documentation").toLowerCase()]
		},
		{
			id: ITEM_ID$1.FORUM,
			title: i18n$2.baseText("mainSidebar.helpMenuItems.forum"),
			section: i18n$2.baseText("mainSidebar.help"),
			handler: () => {
				window.open(EXTERNAL_LINKS.FORUM, "_blank", "noreferrer");
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "users" }
			},
			keywords: [i18n$2.baseText("mainSidebar.helpMenuItems.forum").toLowerCase()]
		},
		{
			id: ITEM_ID$1.COURSE,
			title: i18n$2.baseText("mainSidebar.helpMenuItems.course"),
			section: i18n$2.baseText("mainSidebar.help"),
			handler: () => {
				window.open(EXTERNAL_LINKS.COURSES, "_blank", "noreferrer");
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "graduation-cap" }
			},
			keywords: [i18n$2.baseText("mainSidebar.helpMenuItems.course").toLowerCase()]
		},
		{
			id: ITEM_ID$1.REPORT_BUG,
			title: i18n$2.baseText("mainSidebar.helpMenuItems.reportBug"),
			section: i18n$2.baseText("mainSidebar.help"),
			handler: () => {
				window.open(getReportingURL(), "_blank", "noreferrer");
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "bug" }
			},
			keywords: [i18n$2.baseText("mainSidebar.helpMenuItems.reportBug").toLowerCase()]
		},
		{
			id: ITEM_ID$1.ABOUT,
			title: i18n$2.baseText("mainSidebar.aboutN8n"),
			section: i18n$2.baseText("mainSidebar.help"),
			handler: () => {
				uiStore.openModal(ABOUT_MODAL_KEY);
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "info" }
			},
			keywords: [i18n$2.baseText("mainSidebar.aboutN8n").toLowerCase()]
		},
		{
			id: ITEM_ID$1.SETTINGS,
			title: i18n$2.baseText("settings"),
			section: i18n$2.baseText("commandBar.sections.general"),
			handler: () => {
				router.push({ name: VIEWS.SETTINGS });
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "cog" }
			},
			keywords: [i18n$2.baseText("settings").toLowerCase()]
		},
		{
			id: ITEM_ID$1.SIGN_OUT,
			title: i18n$2.baseText("auth.signout"),
			section: i18n$2.baseText("commandBar.sections.general"),
			handler: () => {
				router.push({ name: VIEWS.SIGNOUT });
			},
			icon: {
				component: N8nIcon_default,
				props: { icon: "sign-out-alt" }
			},
			keywords: [i18n$2.baseText("auth.signout").toLowerCase()]
		}
	]) };
}
var ITEM_ID = {
	NEW_SESSION: "new-session",
	NEW_SESSION_WITH_MODEL: "new-session-with-model",
	OPEN_SESSION: "open-session",
	DELETE_SESSION: "delete-session",
	STOP_MESSAGE_GENERATION: "stop-message-generation"
};
function useChatHubCommands(options$1) {
	const i18n$2 = useI18n();
	const { lastQuery } = options$1;
	const router = useRouter();
	const route = useRoute();
	const chatStore = useChatStore();
	const settingsStore = useSettingsStore();
	const toast = useToast();
	const message$2 = useMessage();
	const currentSessionId = computed(() => (route.name === "chat" || route.name === "chat-conversation") && typeof route.params.id === "string" ? route.params.id : null);
	const isResponding = computed(() => {
		if (!currentSessionId.value) return false;
		return chatStore.isResponding(currentSessionId.value);
	});
	async function handleDeleteSession(sessionId) {
		if (await message$2.confirm(i18n$2.baseText("chatHub.session.delete.confirm.message"), i18n$2.baseText("chatHub.session.delete.confirm.title"), {
			confirmButtonText: i18n$2.baseText("chatHub.session.delete.confirm.button"),
			cancelButtonText: i18n$2.baseText("chatHub.session.delete.cancel.button")
		}) !== "confirm") return;
		try {
			await chatStore.deleteSession(sessionId);
			toast.showMessage({
				type: "success",
				title: i18n$2.baseText("chatHub.session.delete.success")
			});
			if (sessionId === currentSessionId.value) router.push({ name: CHAT_VIEW });
		} catch (error$2) {
			toast.showError(error$2, i18n$2.baseText("chatHub.session.delete.error"));
		}
	}
	const filteredSesssions = computed(() => {
		const trimmed = (lastQuery.value || "").trim().toLowerCase();
		const allSesssions = Object.values(chatStore.sessions.byId) ?? [];
		if (!trimmed) return allSesssions.filter((session) => !!session);
		return allSesssions.filter((session) => !!session && (session.title?.toLowerCase().includes(trimmed) ?? false));
	});
	const filteredModels = computed(() => {
		const trimmed = (lastQuery.value || "").trim().toLowerCase();
		const allModels = Object.values(chatStore.agents).flatMap((available) => available.models);
		if (!trimmed) return allModels;
		return allModels.filter((model) => {
			if (!model.metadata.available) return false;
			const provider = model.model.provider;
			if (isLlmProvider(provider)) {
				const settings = settingsStore.moduleSettings?.["chat-hub"]?.providers[provider];
				if (settings && !settings.enabled) return false;
			}
			return model.name?.toLowerCase().includes(trimmed) || model.model.provider?.toLowerCase().includes(trimmed) || providerDisplayNames[model.model.provider]?.toLowerCase().includes(trimmed);
		});
	});
	const openSessionCommand = (session, isRoot) => {
		let title$7 = session.title;
		if (isRoot) title$7 = i18n$2.baseText("generic.openResource", { interpolate: { resource: title$7 } });
		const section$1 = isRoot ? i18n$2.baseText("commandBar.sections.chat") : i18n$2.baseText("commandBar.chat.open");
		return {
			id: session.id,
			title: title$7,
			section: section$1,
			keywords: [title$7],
			handler: () => {
				router.push({
					name: CHAT_CONVERSATION_VIEW,
					params: { id: session.id }
				});
			}
		};
	};
	const openSessionCommands = computed(() => {
		return filteredSesssions.value.map((session) => openSessionCommand(session, false));
	});
	const deleteSessionCommand = (session, isRoot) => {
		let title$7 = session.title;
		if (isRoot) title$7 = i18n$2.baseText("commandBar.chat.deleteSession", { interpolate: { title: title$7 } });
		const section$1 = isRoot ? i18n$2.baseText("commandBar.sections.chat") : i18n$2.baseText("commandBar.chat.delete");
		return {
			id: session.id,
			title: title$7,
			section: section$1,
			handler: () => {
				handleDeleteSession(session.id);
			}
		};
	};
	const deleteSessionCommands = computed(() => {
		return filteredSesssions.value.map((session) => deleteSessionCommand(session, false));
	});
	const newSessionWithModelCommand = (model) => {
		return {
			id: stringifyModel(model.model),
			title: {
				component: CommandBarItemTitle_default,
				props: {
					title: providerDisplayNames[model.model.provider],
					suffix: model.name
				}
			},
			section: i18n$2.baseText("commandBar.chat.newWithModel"),
			keywords: [model.name, providerDisplayNames[model.model.provider]],
			handler: () => {
				router.push({
					...getAgentRoute(model.model),
					force: true
				});
			}
		};
	};
	const newSessionWithCommands = computed(() => {
		return filteredModels.value.map((model) => newSessionWithModelCommand(model));
	});
	return { commands: computed(() => {
		const commands = [
			{
				id: ITEM_ID.NEW_SESSION,
				title: i18n$2.baseText("commandBar.chat.new"),
				section: i18n$2.baseText("commandBar.sections.chat"),
				handler: () => {
					router.push({
						name: CHAT_VIEW,
						force: true
					});
				},
				icon: {
					component: N8nIcon_default,
					props: { icon: "plus" }
				},
				keywords: [
					i18n$2.baseText("commandBar.chat.new"),
					i18n$2.baseText("commandBar.sections.chat"),
					i18n$2.baseText("generic.create"),
					i18n$2.baseText("generic.start")
				]
			},
			{
				id: ITEM_ID.NEW_SESSION_WITH_MODEL,
				title: i18n$2.baseText("commandBar.chat.newWithModel"),
				section: i18n$2.baseText("commandBar.sections.chat"),
				children: newSessionWithCommands.value,
				icon: {
					component: N8nIcon_default,
					props: { icon: "message-square-plus" }
				},
				keywords: [
					i18n$2.baseText("commandBar.chat.new"),
					i18n$2.baseText("commandBar.sections.chat"),
					i18n$2.baseText("generic.create"),
					i18n$2.baseText("generic.start")
				]
			},
			{
				id: ITEM_ID.OPEN_SESSION,
				title: i18n$2.baseText("commandBar.chat.open"),
				section: i18n$2.baseText("commandBar.sections.chat"),
				placeholder: i18n$2.baseText("commandBar.chat.open.searchPlaceholder"),
				children: openSessionCommands.value,
				icon: {
					component: N8nIcon_default,
					props: {
						icon: "message-square",
						color: "text-light"
					}
				}
			},
			{
				id: ITEM_ID.DELETE_SESSION,
				title: i18n$2.baseText("commandBar.chat.delete"),
				section: i18n$2.baseText("commandBar.sections.chat"),
				placeholder: i18n$2.baseText("commandBar.chat.open.searchPlaceholder"),
				children: deleteSessionCommands.value,
				icon: {
					component: N8nIcon_default,
					props: {
						icon: "trash-2",
						color: "text-light"
					}
				}
			}
		];
		if (isResponding.value && currentSessionId.value) commands.push({
			id: ITEM_ID.STOP_MESSAGE_GENERATION,
			title: i18n$2.baseText("commandBar.chat.stop"),
			section: i18n$2.baseText("commandBar.sections.chat"),
			handler: async () => {
				if (!currentSessionId.value) return;
				await chatStore.stopStreamingMessage(currentSessionId.value);
			}
		});
		return commands;
	}) };
}
function useCommandBar() {
	const nodeTypesStore = useNodeTypesStore();
	const projectsStore = useProjectsStore();
	const workflowStore = useWorkflowsStore();
	const router = useRouter();
	const route = useRoute();
	const i18n$2 = useI18n();
	const telemetry$1 = useTelemetry();
	const placeholder = i18n$2.baseText("commandBar.placeholder");
	const activeNodeId = ref(null);
	const lastQuery = ref("");
	const currentProjectName = computed(() => {
		const projectId = route.params.projectId || projectsStore.currentProjectId;
		if (projectId === projectsStore.personalProject?.id) return "Personal";
		return projectsStore.myProjects.find((p) => p.id === projectId)?.name ?? "Personal";
	});
	const nodeCommandGroup = useNodeCommands({
		lastQuery,
		activeNodeId
	});
	const workflowCommandGroup = useWorkflowCommands();
	const executionCommandGroup = useExecutionCommands();
	const workflowNavigationGroup = useWorkflowNavigationCommands({
		lastQuery,
		activeNodeId,
		currentProjectName
	});
	const dataTableNavigationGroup = useDataTableNavigationCommands({
		lastQuery,
		activeNodeId,
		currentProjectName
	});
	const credentialNavigationGroup = useCredentialNavigationCommands({
		lastQuery,
		activeNodeId,
		currentProjectName
	});
	const executionNavigationGroup = useExecutionNavigationCommands();
	const projectNavigationGroup = useProjectNavigationCommands({
		lastQuery,
		activeNodeId
	});
	const genericCommandGroup = useGenericCommands();
	const recentResourcesGroup = useRecentResources();
	const chatHubCommandGroup = useChatHubCommands({ lastQuery });
	const canvasViewGroups = [
		recentResourcesGroup,
		nodeCommandGroup,
		workflowCommandGroup,
		workflowNavigationGroup,
		genericCommandGroup
	];
	const executionViewGroups = [
		recentResourcesGroup,
		executionCommandGroup,
		workflowNavigationGroup,
		projectNavigationGroup,
		credentialNavigationGroup,
		dataTableNavigationGroup,
		executionNavigationGroup,
		genericCommandGroup
	];
	const workflowsListViewGroups = [
		recentResourcesGroup,
		workflowNavigationGroup,
		projectNavigationGroup,
		credentialNavigationGroup,
		dataTableNavigationGroup,
		executionNavigationGroup,
		genericCommandGroup
	];
	const credentialsListViewGroups = [
		recentResourcesGroup,
		credentialNavigationGroup,
		projectNavigationGroup,
		workflowNavigationGroup,
		dataTableNavigationGroup,
		executionNavigationGroup,
		genericCommandGroup
	];
	const executionsListViewGroups = [
		recentResourcesGroup,
		workflowNavigationGroup,
		projectNavigationGroup,
		credentialNavigationGroup,
		dataTableNavigationGroup,
		genericCommandGroup
	];
	const dataStoresListViewGroups = [
		recentResourcesGroup,
		dataTableNavigationGroup,
		projectNavigationGroup,
		workflowNavigationGroup,
		credentialNavigationGroup,
		executionNavigationGroup,
		genericCommandGroup
	];
	const evaluationViewGroups = [
		recentResourcesGroup,
		workflowNavigationGroup,
		projectNavigationGroup,
		credentialNavigationGroup,
		dataTableNavigationGroup,
		executionNavigationGroup,
		genericCommandGroup
	];
	const chatHubViewGroups = [
		chatHubCommandGroup,
		recentResourcesGroup,
		genericCommandGroup,
		projectNavigationGroup,
		workflowNavigationGroup,
		credentialNavigationGroup,
		dataTableNavigationGroup,
		executionNavigationGroup
	];
	const fallbackViewCommands = [
		recentResourcesGroup,
		projectNavigationGroup,
		workflowNavigationGroup,
		credentialNavigationGroup,
		dataTableNavigationGroup,
		executionNavigationGroup,
		genericCommandGroup
	];
	const activeCommandGroups = computed(() => {
		switch (router.currentRoute.value.name) {
			case VIEWS.WORKFLOW:
			case VIEWS.NEW_WORKFLOW: return canvasViewGroups;
			case VIEWS.EXECUTION_PREVIEW:
			case VIEWS.EXECUTION_DEBUG: return executionViewGroups;
			case VIEWS.WORKFLOWS:
			case VIEWS.PROJECTS_WORKFLOWS: return workflowsListViewGroups;
			case VIEWS.CREDENTIALS:
			case VIEWS.PROJECTS_CREDENTIALS: return credentialsListViewGroups;
			case VIEWS.EXECUTIONS:
			case VIEWS.PROJECTS_EXECUTIONS: return executionsListViewGroups;
			case PROJECT_DATA_TABLES:
			case DATA_TABLE_VIEW: return dataStoresListViewGroups;
			case VIEWS.EVALUATION:
			case VIEWS.EVALUATION_EDIT:
			case VIEWS.EVALUATION_RUNS_DETAIL: return evaluationViewGroups;
			case CHAT_VIEW:
			case CHAT_CONVERSATION_VIEW:
			case CHAT_PERSONAL_AGENTS_VIEW:
			case CHAT_WORKFLOW_AGENTS_VIEW: return chatHubViewGroups;
			default: return fallbackViewCommands;
		}
	});
	const context = computed(() => {
		switch (router.currentRoute.value.name) {
			case VIEWS.WORKFLOW:
			case VIEWS.NEW_WORKFLOW: return workflowStore.workflow.name ? i18n$2.baseText("commandBar.sections.workflow") + "  " + workflowStore.workflow.name : "";
			case VIEWS.EXECUTION_PREVIEW:
			case VIEWS.EXECUTION_DEBUG: return workflowStore.workflow.name ? i18n$2.baseText("commandBar.sections.execution") + "  " + workflowStore.workflow.name : "";
			case VIEWS.EVALUATION:
			case VIEWS.EVALUATION_EDIT:
			case VIEWS.EVALUATION_RUNS_DETAIL: return workflowStore.workflow.name ? "  " + workflowStore.workflow.name : "";
			default: return "";
		}
	});
	const trackCommand = (item$2, view, parentItem) => {
		telemetry$1.track("User executed command bar command", {
			command_id: item$2.id,
			command_section: item$2.section,
			view,
			parent_command_id: parentItem?.id
		});
	};
	const wrapItemWithTelemetry = (item$2) => {
		const wrappedItem = { ...item$2 };
		const routeName = (router.currentRoute.value.name ?? "").toString();
		if (item$2.handler) {
			const originalHandler = item$2.handler;
			wrappedItem.handler = async () => {
				trackCommand(item$2, routeName);
				return await originalHandler();
			};
		}
		if (item$2.children) wrappedItem.children = item$2.children.map((child) => {
			if (child.handler) {
				const originalChildHandler = child.handler;
				return {
					...child,
					handler: async () => {
						trackCommand(child, routeName, item$2);
						return await originalChildHandler();
					}
				};
			}
			return child;
		});
		return wrappedItem;
	};
	const items = computed(() => {
		return activeCommandGroups.value.flatMap((group) => group.commands.value).map(wrapItemWithTelemetry);
	});
	const isLoading = computed(() => {
		return activeCommandGroups.value.some((group) => group.isLoading?.value === true);
	});
	function onCommandBarChange(query) {
		lastQuery.value = query;
		for (const group of activeCommandGroups.value) if (group.handlers?.onCommandBarChange) group.handlers.onCommandBarChange(query);
	}
	function onCommandBarNavigateTo(to) {
		for (const group of activeCommandGroups.value) if (group.handlers?.onCommandBarNavigateTo) group.handlers.onCommandBarNavigateTo(to);
	}
	async function initialize() {
		await nodeTypesStore.loadNodeTypesIfNotLoaded();
		const initPromises = activeCommandGroups.value.map(async (group) => {
			if (group.initialize) await group.initialize();
		});
		await Promise.all(initPromises);
	}
	return {
		items,
		initialize,
		onCommandBarChange,
		onCommandBarNavigateTo,
		placeholder,
		context,
		isLoading
	};
}
var AppCommandBar_default = /* @__PURE__ */ defineComponent({
	__name: "AppCommandBar",
	setup(__props) {
		const route = useRoute();
		const { APP_Z_INDEXES } = useStyles();
		const { initialize: initializeCommandBar, items, placeholder, context, onCommandBarChange, onCommandBarNavigateTo, isLoading: isCommandBarLoading } = useCommandBar();
		const isDemoMode = computed(() => route.name === VIEWS.DEMO);
		const showCommandBar = computed(() => hasPermission(["authenticated"]) && !isDemoMode.value);
		watch(showCommandBar, (newVal) => {
			if (newVal) initializeCommandBar();
		});
		return (_ctx, _cache) => {
			return showCommandBar.value ? (openBlock(), createBlock(unref(N8nCommandBar_default), {
				key: 0,
				items: unref(items),
				placeholder: unref(placeholder),
				context: unref(context),
				"is-loading": unref(isCommandBarLoading),
				"z-index": unref(APP_Z_INDEXES).COMMAND_BAR,
				onInputChange: unref(onCommandBarChange),
				onNavigateTo: unref(onCommandBarNavigateTo)
			}, null, 8, [
				"items",
				"placeholder",
				"context",
				"is-loading",
				"z-index",
				"onInputChange",
				"onNavigateTo"
			])) : createCommentVNode("", true);
		};
	}
});
var _hoisted_1$6 = { key: 0 };
var AppLayout_default = /* @__PURE__ */ defineComponent({
	__name: "AppLayout",
	emits: ["mounted"],
	setup(__props, { emit: __emit }) {
		const DefaultLayout = defineAsyncComponent(async () => await __vitePreload(() => import("./DefaultLayout-Cc9i-BTa.js"), __vite__mapDeps([73,2,1,3,4,5,6,7,8,9,11,12,13,14,15,16,74,75,76,77,78,79,80,81,82,83,84,18,85,86,87,31,88,89,90,91,92])));
		const SettingsLayout = defineAsyncComponent(async () => await __vitePreload(() => import("./SettingsLayout-D_sgSAI2.js"), __vite__mapDeps([93,1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,85,91,92,94])));
		const WorkflowLayout = defineAsyncComponent(async () => await __vitePreload(() => import("./WorkflowLayout-_gKnOFlM.js"), __vite__mapDeps([95,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,96,97,98,99,100,101,75,57,58,88,102,103,104,105,106,69,107,108,109,110,111,112,113,87,114,115,116,76,77,84,117,118,119,120,74,78,79,80,81,121,122,82,83,85,86,89,90,123,124,91,92,125,126,127,128,129,130,131,132,133,134,135,136,137,138])));
		const AuthLayout = defineAsyncComponent(async () => await __vitePreload(() => import("./AuthLayout-BJlUoO_k.js"), __vite__mapDeps([139,5,6,91,1,92])));
		const DemoLayout = defineAsyncComponent(async () => await __vitePreload(() => import("./DemoLayout-Bnjdf_Uk.js"), __vite__mapDeps([140,2,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,107,108,109,57,58,110,114,115,116,76,77,84,117,118,91,92])));
		const ChatLayout = defineAsyncComponent(async () => await __vitePreload(() => import("./ChatLayout-BUV3Ttqx.js"), __vite__mapDeps([141,1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,142,34,117,88,74,75,76,77,78,79,80,81,84,18,85,91,92,143,66,67,144,145])));
		const route = useRoute();
		const router = useRouter();
		const emit = __emit;
		const initialized = ref(false);
		const removeListener = router.afterEach(() => {
			initialized.value = true;
			removeListener();
		});
		function onMounted$1(element) {
			emit("mounted", element);
		}
		return (_ctx, _cache) => {
			return !initialized.value ? (openBlock(), createElementBlock("div", _hoisted_1$6)) : (openBlock(), createBlock(Suspense, { key: 1 }, {
				default: withCtx(() => [unref(route).meta.layout === "settings" ? (openBlock(), createBlock(unref(SettingsLayout), {
					key: 0,
					onMounted: onMounted$1
				})) : unref(route).meta.layout === "workflow" ? (openBlock(), createBlock(unref(WorkflowLayout), {
					key: 1,
					onMounted: onMounted$1
				})) : unref(route).meta.layout === "auth" ? (openBlock(), createBlock(unref(AuthLayout), {
					key: 2,
					onMounted: onMounted$1
				})) : unref(route).meta.layout === "demo" ? (openBlock(), createBlock(unref(DemoLayout), {
					key: 3,
					onMounted: onMounted$1
				})) : unref(route).meta.layout === "chat" ? (openBlock(), createBlock(unref(ChatLayout), {
					key: 4,
					onMounted: onMounted$1
				})) : (openBlock(), createBlock(unref(DefaultLayout), {
					key: 5,
					onMounted: onMounted$1
				}))]),
				_: 1
			}));
		};
	}
});
var _hoisted_1$5 = ["aria-label"];
var _hoisted_2$2 = ["aria-label"];
var NodeIssueItem_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "NodeIssueItem",
	props: {
		issue: {},
		getNodeType: { type: Function },
		formatIssueMessage: { type: Function }
	},
	emits: ["click"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const ndvStore = useNDVStore();
		function handleEditClick() {
			ndvStore.setActiveNodeName(props.issue.node, "other");
			emit("click");
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("li", {
				class: normalizeClass(_ctx.$style.nodeIssue),
				role: "listitem",
				"aria-label": `Edit ${__props.issue.node} node`,
				onClick: handleEditClick
			}, [
				createVNode(NodeIcon_default, {
					"node-type": __props.getNodeType(__props.issue.node),
					size: 14,
					shrink: false,
					"show-tooltip": true,
					"tooltip-position": "left",
					class: normalizeClass(_ctx.$style.nodeIcon),
					"aria-label": `${__props.issue.node} node`
				}, null, 8, [
					"node-type",
					"class",
					"aria-label"
				]),
				createBaseVNode("div", {
					class: normalizeClass(_ctx.$style.issueMessage),
					"aria-label": `Issue: ${__props.formatIssueMessage(__props.issue.value)}`
				}, [createBaseVNode("span", { class: normalizeClass(_ctx.$style.nodeName) }, toDisplayString(__props.issue.node) + ":", 3), createTextVNode(" " + toDisplayString(__props.formatIssueMessage(__props.issue.value)), 1)], 10, _hoisted_2$2),
				createVNode(unref(N8nIcon_default), {
					class: normalizeClass(_ctx.$style.chevron),
					icon: "chevron-right"
				}, null, 8, ["class"])
			], 10, _hoisted_1$5);
		};
	}
});
var NodeIssueItem_vue_vue_type_style_index_0_lang_module_default = {
	nodeIssue: "_nodeIssue_1dpuo_125",
	nodeIcon: "_nodeIcon_1dpuo_136",
	nodeName: "_nodeName_1dpuo_141",
	issueMessage: "_issueMessage_1dpuo_146",
	chevron: "_chevron_1dpuo_152"
};
var NodeIssueItem_default = /* @__PURE__ */ __plugin_vue_export_helper_default(NodeIssueItem_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": NodeIssueItem_vue_vue_type_style_index_0_lang_module_default }]]);
var MAX_VISIBLE_NODES = 3;
var CredentialsSetupCard_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "CredentialsSetupCard",
	props: { issues: {} },
	emits: ["click"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const nodeNames = computed(() => {
			const seen = /* @__PURE__ */ new Set();
			return props.issues.filter((issue) => {
				if (seen.has(issue.node)) return false;
				seen.add(issue.node);
				return true;
			}).map((issue) => issue.node);
		});
		const formattedNodeNames = computed(() => {
			const names = nodeNames.value;
			if (names.length === 0) return "";
			if (names.length === 1) return names[0];
			if (names.length === 2) return i18n$2.baseText("aiAssistant.builder.executeMessage.nodeListTwo", { interpolate: {
				first: names[0],
				second: names[1]
			} });
			if (names.length <= MAX_VISIBLE_NODES) {
				const allButLast = names.slice(0, -1).join(", ");
				return i18n$2.baseText("aiAssistant.builder.executeMessage.nodeListLast", { interpolate: {
					list: allButLast,
					last: names[names.length - 1]
				} });
			}
			const visible = names.slice(0, MAX_VISIBLE_NODES).join(", ");
			const remaining = names.length - MAX_VISIBLE_NODES;
			return i18n$2.baseText("aiAssistant.builder.executeMessage.nodeListMore", {
				interpolate: {
					list: visible,
					count: String(remaining)
				},
				adjustToNumber: remaining
			});
		});
		function handleClick() {
			emit("click");
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				class: normalizeClass(_ctx.$style.credentialsCard),
				role: "button",
				tabindex: "0",
				onClick: handleClick,
				onKeydown: withKeys(handleClick, ["enter"])
			}, [
				createVNode(unref(N8nIcon_default), {
					class: normalizeClass(_ctx.$style.keyIcon),
					icon: "key-round",
					size: 14
				}, null, 8, ["class"]),
				createBaseVNode("div", { class: normalizeClass(_ctx.$style.credentialsContent) }, [createBaseVNode("span", { class: normalizeClass(_ctx.$style.credentialsHeader) }, toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.executeMessage.addMissingCredentials")), 3), createBaseVNode("span", { class: normalizeClass(_ctx.$style.credentialsDescription) }, toDisplayString(formattedNodeNames.value), 3)], 2),
				createVNode(unref(N8nIcon_default), {
					class: normalizeClass(_ctx.$style.chevron),
					icon: "chevron-right"
				}, null, 8, ["class"])
			], 34);
		};
	}
});
var CredentialsSetupCard_vue_vue_type_style_index_0_lang_module_default = {
	credentialsCard: "_credentialsCard_1ux5v_125",
	keyIcon: "_keyIcon_1ux5v_135",
	credentialsContent: "_credentialsContent_1ux5v_141",
	credentialsHeader: "_credentialsHeader_1ux5v_147",
	credentialsDescription: "_credentialsDescription_1ux5v_151",
	chevron: "_chevron_1ux5v_155"
};
var CredentialsSetupCard_default = /* @__PURE__ */ __plugin_vue_export_helper_default(CredentialsSetupCard_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": CredentialsSetupCard_vue_vue_type_style_index_0_lang_module_default }]]);
var ExecuteMessage_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ExecuteMessage",
	emits: ["workflowExecuted"],
	setup(__props, { emit: __emit }) {
		const emit = __emit;
		const router = useRouter();
		const workflowsStore = useWorkflowsStore();
		const nodeTypesStore = useNodeTypesStore();
		const uiStore = useUIStore();
		const i18n$2 = useI18n();
		const logsStore = useLogsStore();
		const toast = useToast();
		const builderStore = useBuilderStore();
		const { runWorkflow } = useRunWorkflow({ router });
		let executionWatcherStop;
		const containerRef = ref();
		const stopExecutionWatcher = () => {
			if (executionWatcherStop) {
				executionWatcherStop();
				executionWatcherStop = void 0;
			}
		};
		const ensureExecutionWatcher = () => {
			if (executionWatcherStop) return;
			const RUNNING_STATES = ["running", "waiting"];
			executionWatcherStop = watch(() => workflowsStore.workflowExecutionData?.status, async (status) => {
				await nextTick();
				if (!status || RUNNING_STATES.includes(status)) return;
				stopExecutionWatcher();
				if (status !== "canceled") emit("workflowExecuted");
			});
		};
		const hasValidationIssues = computed(() => builderStore.workflowTodos.length > 0);
		const triggerNodes = computed(() => workflowsStore.workflow.nodes.filter((node) => nodeTypesStore.isTriggerNode(node.type)));
		const issuesByType = computed(() => {
			const credentials = [];
			const other = [];
			for (const issue of builderStore.workflowTodos) (issue.type === "credentials" ? credentials : other).push(issue);
			return {
				credentials,
				other
			};
		});
		function localePatternToRegex(localeKey) {
			const withPlaceholder = i18n$2.baseText(localeKey, { interpolate: { type: ".+" } }).replace(/[.*+?^${}()|[\]\\]/g, "\\$&").replace("\\.\\+", ".+");
			return new RegExp(withPlaceholder, "i");
		}
		const credentialsNotSetPattern = localePatternToRegex("nodeIssues.credentials.notSet");
		const parameterRequiredPattern = /Parameter\s+".+"\s+is\s+required/i;
		function formatIssueMessage(issue) {
			const baseMessage = workflowsStore.formatIssueMessage(issue);
			if (parameterRequiredPattern.test(baseMessage)) {
				if (baseMessage.match(/Parameter\s+"(.+)"\s+is\s+required/i)?.[1]?.toLowerCase() === "model") return i18n$2.baseText("aiAssistant.builder.executeMessage.chooseModel");
			}
			if (credentialsNotSetPattern.test(baseMessage)) return i18n$2.baseText("aiAssistant.builder.executeMessage.chooseCredentials");
			return baseMessage;
		}
		function getNodeTypeByName(nodeName$3) {
			const node = workflowsStore.workflow.nodes.find((n) => n.name === nodeName$3);
			if (!node) return null;
			return nodeTypesStore.getNodeType(node.type);
		}
		const isWorkflowRunning = computed(() => workflowsStore.isWorkflowRunning);
		const isExecutionWaitingForWebhook = computed(() => workflowsStore.executionWaitingForWebhook);
		const availableTriggerNodes = computed(() => hasValidationIssues.value ? [] : triggerNodes.value);
		const executeButtonTooltip = computed(() => hasValidationIssues.value ? i18n$2.baseText("aiAssistant.builder.executeMessage.validationTooltip") : "");
		const showUnpinSection = computed(() => builderStore.isCodeBuilder && builderStore.hasTodosHiddenByPinnedData && builderStore.hasHadSuccessfulExecution);
		function onUnpinAll() {
			builderStore.unpinAllNodes();
			builderStore.trackWorkflowBuilderJourney("user_clicked_unpin_all");
		}
		async function onExecute() {
			if (hasValidationIssues.value) return;
			ensureExecutionWatcher();
			const selectedTriggerNode = workflowsStore.selectedTriggerNodeName ?? availableTriggerNodes.value[0]?.name;
			const selectedTriggerNodeType = selectedTriggerNode ? workflowsStore.getNodeByName(selectedTriggerNode) : null;
			if (selectedTriggerNodeType && isChatNode(selectedTriggerNodeType)) {
				toast.showMessage({
					title: i18n$2.baseText("aiAssistant.builder.toast.title"),
					message: i18n$2.baseText("aiAssistant.builder.toast.description"),
					type: "info"
				});
				logsStore.toggleOpen(true);
				return;
			}
			const runOptions = {};
			if (selectedTriggerNode) runOptions.triggerNode = selectedTriggerNode;
			await runWorkflow(runOptions);
		}
		function scrollIntoView() {
			containerRef.value?.scrollIntoView({
				behavior: "smooth",
				block: "nearest",
				inline: "nearest"
			});
		}
		function trackBuilderPlaceholders(issue) {
			builderStore.trackWorkflowBuilderJourney("user_clicked_todo", {
				node_type: workflowsStore.getNodeByName(issue.node)?.type,
				type: issue.type
			});
		}
		function openCredentialsModal() {
			uiStore.openModalWithData({
				name: SETUP_CREDENTIALS_MODAL_KEY,
				data: { source: "builder" }
			});
			builderStore.trackWorkflowBuilderJourney("user_clicked_todo", {
				type: "credentials",
				count: issuesByType.value.credentials.length,
				source: "builder"
			});
		}
		onMounted(scrollIntoView);
		watch(hasValidationIssues, (hasIssues, hadIssues) => {
			if (hadIssues && !hasIssues) builderStore.trackWorkflowBuilderJourney("no_placeholder_values_left");
		});
		onBeforeUnmount(() => {
			stopExecutionWatcher();
		});
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				ref_key: "containerRef",
				ref: containerRef,
				class: normalizeClass(_ctx.$style.container),
				role: "region",
				"aria-label": "Workflow execution panel"
			}, [
				hasValidationIssues.value ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [createBaseVNode("p", { class: normalizeClass(_ctx.$style.description) }, toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.executeMessage.description")), 3), createBaseVNode("div", { class: normalizeClass(_ctx.$style.issuesBox) }, [issuesByType.value.credentials.length > 0 ? (openBlock(), createBlock(CredentialsSetupCard_default, {
					key: 0,
					issues: issuesByType.value.credentials,
					"get-node-type": getNodeTypeByName,
					onClick: openCredentialsModal
				}, null, 8, ["issues"])) : createCommentVNode("", true), issuesByType.value.other.length > 0 ? (openBlock(), createBlock(TransitionGroup, {
					key: 1,
					name: "fade",
					tag: "ul",
					class: normalizeClass(_ctx.$style.issuesList),
					role: "list",
					"aria-label": "Workflow validation issues"
				}, {
					default: withCtx(() => [(openBlock(true), createElementBlock(Fragment, null, renderList(issuesByType.value.other, (issue) => {
						return openBlock(), createBlock(NodeIssueItem_default, {
							key: `${formatIssueMessage(issue.value)}_${issue.node}`,
							issue,
							"get-node-type": getNodeTypeByName,
							"format-issue-message": formatIssueMessage,
							onClick: () => trackBuilderPlaceholders(issue)
						}, null, 8, ["issue", "onClick"]);
					}), 128))]),
					_: 1
				}, 8, ["class"])) : createCommentVNode("", true)], 2)], 64)) : triggerNodes.value.length > 0 ? (openBlock(), createElementBlock("p", {
					key: 1,
					class: normalizeClass(_ctx.$style.noIssuesMessage)
				}, [createTextVNode(toDisplayString(unref(builderStore).hasTodosHiddenByPinnedData ? unref(i18n$2).baseText("aiAssistant.builder.executeMessage.noIssuesWithPinData") : unref(i18n$2).baseText("aiAssistant.builder.executeMessage.noIssues")) + " ", 1), unref(builderStore).hasTodosHiddenByPinnedData ? (openBlock(), createBlock(unref(N8nTooltip_default), {
					key: 0,
					placement: "top"
				}, {
					content: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.executeMessage.unpinTooltip")), 1)]),
					default: withCtx(() => [createVNode(unref(N8nIcon_default), {
						icon: "circle-help",
						size: "small",
						class: normalizeClass(_ctx.$style.infoIcon)
					}, null, 8, ["class"])]),
					_: 1
				})) : createCommentVNode("", true)], 2)) : createCommentVNode("", true),
				triggerNodes.value.length > 0 ? (openBlock(), createBlock(unref(N8nTooltip_default), {
					key: 2,
					disabled: !hasValidationIssues.value,
					content: executeButtonTooltip.value,
					placement: "left"
				}, {
					default: withCtx(() => [createVNode(CanvasRunWorkflowButton_default, {
						class: normalizeClass(_ctx.$style.runButton),
						disabled: hasValidationIssues.value || unref(builderStore).hasNoCreditsRemaining,
						"waiting-for-webhook": isExecutionWaitingForWebhook.value,
						"hide-tooltip": true,
						label: unref(i18n$2).baseText("aiAssistant.builder.executeMessage.execute"),
						executing: isWorkflowRunning.value,
						"include-chat-trigger": true,
						size: "medium",
						"trigger-nodes": availableTriggerNodes.value,
						"get-node-type": unref(nodeTypesStore).getNodeType,
						"selected-trigger-node-name": unref(workflowsStore).selectedTriggerNodeName,
						onExecute,
						onSelectTriggerNode: unref(workflowsStore).setSelectedTriggerNodeName
					}, null, 8, [
						"class",
						"disabled",
						"waiting-for-webhook",
						"label",
						"executing",
						"trigger-nodes",
						"get-node-type",
						"selected-trigger-node-name",
						"onSelectTriggerNode"
					])]),
					_: 1
				}, 8, ["disabled", "content"])) : createCommentVNode("", true),
				showUnpinSection.value ? (openBlock(), createElementBlock("div", {
					key: 3,
					class: normalizeClass(_ctx.$style.unpinSection)
				}, [createVNode(unref(N8nButton_default), {
					type: "secondary",
					size: "medium",
					icon: "pin",
					label: unref(i18n$2).baseText("aiAssistant.builder.executeMessage.unpinAll"),
					onClick: onUnpinAll
				}, null, 8, ["label"]), createBaseVNode("span", { class: normalizeClass(_ctx.$style.unpinIndividuallyText) }, [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.executeMessage.unpinIndividually")) + " ", 1), createVNode(unref(N8nTooltip_default), { placement: "top" }, {
					content: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.executeMessage.unpinTooltip")), 1)]),
					default: withCtx(() => [createVNode(unref(N8nIcon_default), {
						icon: "circle-help",
						size: "small",
						class: normalizeClass(_ctx.$style.infoIcon)
					}, null, 8, ["class"])]),
					_: 1
				})], 2)], 2)) : createCommentVNode("", true)
			], 2);
		};
	}
});
var ExecuteMessage_vue_vue_type_style_index_1_lang_module_default = {
	container: "_container_uywbd_125",
	description: "_description_uywbd_134",
	noIssuesMessage: "_noIssuesMessage_uywbd_140",
	issuesBox: "_issuesBox_uywbd_145",
	issuesList: "_issuesList_uywbd_152",
	runButton: "_runButton_uywbd_161",
	unpinSection: "_unpinSection_uywbd_165",
	unpinIndividuallyText: "_unpinIndividuallyText_uywbd_172",
	infoIcon: "_infoIcon_uywbd_180"
};
var ExecuteMessage_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ExecuteMessage_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ExecuteMessage_vue_vue_type_style_index_1_lang_module_default }], ["__scopeId", "data-v-1370372a"]]);
var NotificationPermissionBanner_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "NotificationPermissionBanner",
	setup(__props) {
		const { requestPermission, recordDismissal, resetMetadata } = useBrowserNotifications();
		const i18n$2 = useI18n();
		const builderStore = useBuilderStore();
		async function onNotifyClick() {
			const { permission } = await requestPermission();
			if (permission === "denied" || permission === "granted") resetMetadata();
			builderStore.trackWorkflowBuilderJourney("browser_notification_accept");
		}
		function onDismissClick() {
			builderStore.trackWorkflowBuilderJourney("browser_notification_dismiss");
			recordDismissal();
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				class: normalizeClass(_ctx.$style.banner),
				"data-test-id": "notification-permission-banner"
			}, [
				createVNode(unref(N8nIcon_default), {
					icon: "bell",
					size: "medium",
					class: normalizeClass(_ctx.$style.icon)
				}, null, 8, ["class"]),
				createBaseVNode("span", { class: normalizeClass(_ctx.$style.text) }, toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.notificationBanner.text")), 3),
				createVNode(unref(N8nButton_default), {
					variant: "solid",
					size: "xsmall",
					"data-test-id": "notification-banner-notify",
					onClick: onNotifyClick
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.notificationBanner.notify")), 1)]),
					_: 1
				}),
				createVNode(unref(N8nIcon_default), {
					icon: "x",
					size: "small",
					class: normalizeClass(_ctx.$style.closeIcon),
					"data-test-id": "notification-banner-dismiss",
					onClick: onDismissClick
				}, null, 8, ["class"])
			], 2);
		};
	}
});
var NotificationPermissionBanner_vue_vue_type_style_index_0_lang_module_default = {
	banner: "_banner_gny94_125",
	icon: "_icon_gny94_138",
	text: "_text_gny94_142",
	closeIcon: "_closeIcon_gny94_148"
};
var NotificationPermissionBanner_default = /* @__PURE__ */ __plugin_vue_export_helper_default(NotificationPermissionBanner_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": NotificationPermissionBanner_vue_vue_type_style_index_0_lang_module_default }]]);
function useNodeMention(options$1 = {}) {
	const { maxResults = 50 } = options$1;
	const focusedNodesStore = useFocusedNodesStore();
	const workflowsStore = useWorkflowsStore();
	const showDropdown = ref(false);
	const searchQuery = ref("");
	const highlightedIndex = ref(0);
	const dropdownPosition = ref({
		top: 0,
		left: 0
	});
	const mentionStartIndex = ref(-1);
	const inputElementRef = ref(null);
	const openedViaButton = ref(false);
	const filteredNodes = computed(() => {
		const query = searchQuery.value.toLowerCase();
		const allNodes = workflowsStore.allNodes;
		const confirmedIds = new Set(focusedNodesStore.confirmedNodeIds);
		let result = allNodes.filter((node) => !confirmedIds.has(node.id));
		if (query) result = result.filter((node) => node.name.toLowerCase().includes(query));
		return result.slice(0, maxResults);
	});
	watch(() => workflowsStore.allNodes.length, () => {
		if (showDropdown.value) closeDropdown();
	});
	function calculateDropdownPosition(inputElement, options$2 = {}) {
		const rect = inputElement.getBoundingClientRect();
		if (options$2.alignRight) dropdownPosition.value = {
			top: rect.top - 8,
			right: window.innerWidth - rect.right
		};
		else dropdownPosition.value = {
			top: rect.top - 8,
			left: rect.left
		};
	}
	function openDropdown(inputElement, options$2 = {}) {
		openedViaButton.value = options$2.viaButton ?? false;
		if (options$2.viaButton) {
			inputElementRef.value = null;
			mentionStartIndex.value = -1;
		} else {
			const textInput = inputElement;
			inputElementRef.value = textInput;
			mentionStartIndex.value = textInput.selectionStart ?? textInput.value.length;
		}
		showDropdown.value = true;
		searchQuery.value = "";
		highlightedIndex.value = 0;
		calculateDropdownPosition(inputElement, options$2);
	}
	function closeDropdown(removeQueryFromInput = false) {
		if (removeQueryFromInput && inputElementRef.value && mentionStartIndex.value >= 0) {
			const input$1 = inputElementRef.value;
			const value = input$1.value;
			const cursorPosition = input$1.selectionStart ?? value.length;
			input$1.value = value.substring(0, mentionStartIndex.value) + value.substring(cursorPosition);
			const newPosition = mentionStartIndex.value;
			input$1.setSelectionRange(newPosition, newPosition);
			input$1.dispatchEvent(new Event("input", { bubbles: true }));
		}
		showDropdown.value = false;
		searchQuery.value = "";
		highlightedIndex.value = 0;
		mentionStartIndex.value = -1;
	}
	function handleInput(_event, inputElement) {
		const value = inputElement.value;
		const cursorPosition = inputElement.selectionStart ?? value.length;
		if (!showDropdown.value) {
			if (value.charAt(cursorPosition - 1) === "@") {
				openDropdown(inputElement);
				mentionStartIndex.value = cursorPosition - 1;
				return;
			}
		} else {
			if (mentionStartIndex.value >= 0 && cursorPosition > mentionStartIndex.value) {
				searchQuery.value = value.substring(mentionStartIndex.value + 1, cursorPosition);
				highlightedIndex.value = 0;
			} else closeDropdown();
			if (!value.includes("@") || cursorPosition <= mentionStartIndex.value) closeDropdown();
		}
	}
	function handleKeyDown(event) {
		if (!showDropdown.value) return false;
		switch (event.key) {
			case "ArrowDown":
				event.preventDefault();
				highlightedIndex.value = Math.min(highlightedIndex.value + 1, filteredNodes.value.length - 1);
				return true;
			case "ArrowUp":
				event.preventDefault();
				highlightedIndex.value = Math.max(highlightedIndex.value - 1, 0);
				return true;
			case "Enter":
				if (filteredNodes.value.length > 0) {
					event.preventDefault();
					event.stopPropagation();
					selectNode(filteredNodes.value[highlightedIndex.value]);
					return true;
				}
				return false;
			case "Escape":
				event.preventDefault();
				closeDropdown(filteredNodes.value.length === 0);
				return true;
			case "Tab":
				if (filteredNodes.value.length > 0) {
					event.preventDefault();
					selectNode(filteredNodes.value[highlightedIndex.value]);
					return true;
				}
				closeDropdown();
				return false;
			default: return false;
		}
	}
	function selectNode(node) {
		focusedNodesStore.confirmNodes([node.id], "mention");
		if (inputElementRef.value && mentionStartIndex.value >= 0) {
			const input$1 = inputElementRef.value;
			const value = input$1.value;
			const cursorPosition = input$1.selectionStart ?? value.length;
			const beforeMention = value.substring(0, mentionStartIndex.value);
			const afterCursor = value.substring(cursorPosition);
			const insertedName = node.name + " ";
			input$1.value = beforeMention + insertedName + afterCursor;
			const newPosition = mentionStartIndex.value + insertedName.length;
			input$1.setSelectionRange(newPosition, newPosition);
			input$1.dispatchEvent(new Event("input", { bubbles: true }));
		}
		closeDropdown();
	}
	return {
		showDropdown,
		searchQuery,
		highlightedIndex,
		dropdownPosition,
		filteredNodes,
		openedViaButton,
		handleInput,
		handleKeyDown,
		selectNode,
		closeDropdown,
		openDropdown
	};
}
function useFocusedNodesChipUI() {
	const focusedNodesStore = useFocusedNodesStore();
	const nodeTypesStore = useNodeTypesStore();
	const workflowsStore = useWorkflowsStore();
	const confirmedNodes = computed(() => focusedNodesStore.confirmedNodes);
	const unconfirmedNodes = computed(() => focusedNodesStore.filteredUnconfirmedNodes);
	const confirmedCount = computed(() => confirmedNodes.value.length);
	const unconfirmedCount = computed(() => unconfirmedNodes.value.length);
	const allNodesConfirmed = computed(() => confirmedCount.value > 0 && workflowsStore.allNodes.length > 0 && confirmedCount.value >= workflowsStore.allNodes.length);
	const allNodesUnconfirmed = computed(() => confirmedCount.value === 0 && unconfirmedCount.value > 0 && workflowsStore.allNodes.length > 0 && unconfirmedCount.value >= workflowsStore.allNodes.length);
	const shouldBundleConfirmed = computed(() => confirmedCount.value >= 3);
	const shouldBundleUnconfirmed = computed(() => unconfirmedCount.value >= 3);
	const individualConfirmedNodes = computed(() => confirmedCount.value >= 1 && confirmedCount.value < 3 ? confirmedNodes.value : []);
	const individualUnconfirmedNodes = computed(() => unconfirmedCount.value >= 1 && unconfirmedCount.value < 3 ? unconfirmedNodes.value : []);
	function getNodeType(nodeTypeName) {
		return nodeTypesStore.getNodeType(nodeTypeName);
	}
	function handleChipClick(nodeId) {
		if (focusedNodesStore.focusedNodesMap[nodeId]?.state === "confirmed") canvasEventBus.emit("nodes:select", {
			ids: [nodeId],
			panIntoView: true
		});
		else {
			const isSelectedOnCanvas = focusedNodesStore.isNodeSelectedOnCanvas(nodeId);
			focusedNodesStore.toggleNode(nodeId, isSelectedOnCanvas);
		}
	}
	function handleRemove(nodeId) {
		if (focusedNodesStore.isNodeSelectedOnCanvas(nodeId)) focusedNodesStore.setState(nodeId, "unconfirmed");
		else focusedNodesStore.removeNode(nodeId);
	}
	return {
		confirmedNodes,
		unconfirmedNodes,
		confirmedCount,
		unconfirmedCount,
		allNodesConfirmed,
		allNodesUnconfirmed,
		shouldBundleConfirmed,
		shouldBundleUnconfirmed,
		individualConfirmedNodes,
		individualUnconfirmedNodes,
		getNodeType,
		handleChipClick,
		handleRemove
	};
}
var _hoisted_1$4 = ["placeholder"];
var _hoisted_2$1 = ["onClick", "onMouseenter"];
var NodeMentionDropdown_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "NodeMentionDropdown",
	props: {
		nodes: {},
		selectedNodeIds: {},
		highlightedIndex: {},
		position: {},
		searchQuery: {},
		viaButton: { type: Boolean }
	},
	emits: [
		"select",
		"highlight",
		"keydown",
		"close",
		"update:searchQuery"
	],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const nodeTypesStore = useNodeTypesStore();
		const inputRef = ref(null);
		const listRef = ref(null);
		const localQuery = ref(props.searchQuery);
		watch(() => props.searchQuery, (newQuery) => {
			localQuery.value = newQuery;
		});
		watch(localQuery, (newQuery) => {
			emit("update:searchQuery", newQuery);
		});
		const positionStyle = computed(() => {
			const style = {
				top: `${props.position.top}px`,
				transform: "translateY(-100%)"
			};
			if (props.position.right !== void 0) style.right = `${props.position.right}px`;
			else if (props.position.left !== void 0) style.left = `${props.position.left}px`;
			return style;
		});
		function getNodeType(nodeTypeName) {
			return nodeTypesStore.getNodeType(nodeTypeName);
		}
		function handleSelect(node) {
			emit("select", node);
		}
		function handleMouseEnter(index) {
			emit("highlight", index);
		}
		function handleKeyDown(event) {
			emit("keydown", event);
		}
		function handleClickOutside(event) {
			if (!event.target.closest("[data-node-mention-dropdown]")) emit("close");
		}
		watch(() => props.highlightedIndex, (index) => {
			nextTick(() => {
				const listElement = listRef.value;
				if (!listElement) return;
				listElement.querySelectorAll("[data-mention-item]")[index]?.scrollIntoView({ block: "nearest" });
			});
		});
		onMounted(() => {
			if (props.viaButton) nextTick(() => {
				inputRef.value?.focus();
			});
			document.addEventListener("click", handleClickOutside);
		});
		onUnmounted(() => {
			document.removeEventListener("click", handleClickOutside);
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(Teleport, { to: "body" }, [createBaseVNode("div", {
				"data-node-mention-dropdown": "",
				class: normalizeClass(_ctx.$style.dropdown),
				style: normalizeStyle(positionStyle.value)
			}, [__props.viaButton ? (openBlock(), createElementBlock("div", {
				key: 0,
				class: normalizeClass(_ctx.$style.searchWrapper)
			}, [createVNode(unref(N8nIcon_default), {
				icon: "search",
				size: "small",
				class: normalizeClass(_ctx.$style.searchIcon)
			}, null, 8, ["class"]), withDirectives(createBaseVNode("input", {
				ref_key: "inputRef",
				ref: inputRef,
				"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => localQuery.value = $event),
				type: "text",
				class: normalizeClass(_ctx.$style.searchInput),
				placeholder: unref(i18n$2).baseText("focusedNodes.mentionPlaceholder"),
				onKeydown: handleKeyDown
			}, null, 42, _hoisted_1$4), [[vModelText, localQuery.value]])], 2)) : createCommentVNode("", true), createBaseVNode("div", {
				ref_key: "listRef",
				ref: listRef,
				class: normalizeClass(_ctx.$style.list)
			}, [(openBlock(true), createElementBlock(Fragment, null, renderList(__props.nodes, (node, index) => {
				return openBlock(), createElementBlock("div", {
					key: node.id,
					"data-mention-item": "",
					class: normalizeClass([
						_ctx.$style.item,
						{ [_ctx.$style.highlighted]: index === __props.highlightedIndex },
						{ [_ctx.$style.selected]: __props.selectedNodeIds.includes(node.id) }
					]),
					onClick: ($event) => handleSelect(node),
					onMouseenter: ($event) => handleMouseEnter(index)
				}, [
					createVNode(NodeIcon_default, {
						"node-type": getNodeType(node.type),
						size: 16
					}, null, 8, ["node-type"]),
					createBaseVNode("span", { class: normalizeClass(_ctx.$style.nodeName) }, toDisplayString(node.name), 3),
					__props.selectedNodeIds.includes(node.id) ? (openBlock(), createBlock(unref(N8nIcon_default), {
						key: 0,
						icon: "check",
						size: "small",
						class: normalizeClass(_ctx.$style.checkIcon)
					}, null, 8, ["class"])) : createCommentVNode("", true)
				], 42, _hoisted_2$1);
			}), 128)), __props.nodes.length === 0 ? (openBlock(), createElementBlock("div", {
				key: 0,
				class: normalizeClass(_ctx.$style.emptyState)
			}, toDisplayString(unref(i18n$2).baseText("focusedNodes.noMatches", { interpolate: { query: __props.searchQuery } })), 3)) : createCommentVNode("", true)], 2)], 6)]);
		};
	}
});
var NodeMentionDropdown_vue_vue_type_style_index_0_lang_module_default = {
	dropdown: "_dropdown_d2t4b_125",
	searchWrapper: "_searchWrapper_d2t4b_136",
	searchIcon: "_searchIcon_d2t4b_144",
	searchInput: "_searchInput_d2t4b_149",
	list: "_list_d2t4b_163",
	item: "_item_d2t4b_169",
	highlighted: "_highlighted_d2t4b_179",
	selected: "_selected_d2t4b_182",
	nodeName: "_nodeName_d2t4b_189",
	checkIcon: "_checkIcon_d2t4b_199",
	emptyState: "_emptyState_d2t4b_203"
};
var NodeMentionDropdown_default = /* @__PURE__ */ __plugin_vue_export_helper_default(NodeMentionDropdown_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": NodeMentionDropdown_vue_vue_type_style_index_0_lang_module_default }]]);
var FocusedNodeChip_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "FocusedNodeChip",
	props: { node: {} },
	emits: ["click", "remove"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const nodeTypesStore = useNodeTypesStore();
		const isConfirmed = computed(() => props.node.state === "confirmed");
		const isUnconfirmed = computed(() => props.node.state === "unconfirmed");
		const nodeType = computed(() => nodeTypesStore.getNodeType(props.node.nodeType));
		const truncatedName = computed(() => {
			const name$3 = props.node.nodeName;
			const maxLength = 20;
			if (name$3.length <= maxLength) return name$3;
			return `${name$3.substring(0, maxLength - 1)}...`;
		});
		function handleClick(event) {
			event.stopPropagation();
			emit("click");
		}
		function handleRemove(event) {
			event.stopPropagation();
			emit("remove");
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(N8nTooltip_default), {
				content: unref(i18n$2).baseText("focusedNodes.unconfirmedTooltip"),
				disabled: !isUnconfirmed.value,
				placement: "top",
				"show-after": 300
			}, {
				default: withCtx(() => [createBaseVNode("span", {
					class: normalizeClass([_ctx.$style.chip, { [_ctx.$style.unconfirmed]: isUnconfirmed.value }]),
					onClick: handleClick
				}, [createBaseVNode("span", { class: normalizeClass([_ctx.$style.iconWrapper, { [_ctx.$style.confirmedIcon]: isConfirmed.value }]) }, [isUnconfirmed.value ? (openBlock(), createBlock(unref(N8nIcon_default), {
					key: 0,
					icon: "plus",
					size: "xsmall",
					class: normalizeClass(_ctx.$style.prefixIcon)
				}, null, 8, ["class"])) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [createVNode(NodeIcon_default, {
					"node-type": nodeType.value,
					size: 12,
					class: normalizeClass(_ctx.$style.nodeIcon)
				}, null, 8, ["node-type", "class"]), createBaseVNode("button", {
					type: "button",
					class: normalizeClass(_ctx.$style.removeButton),
					onClick: handleRemove
				}, [createVNode(unref(N8nIcon_default), {
					icon: "x",
					class: normalizeClass(_ctx.$style.closeIcon)
				}, null, 8, ["class"])], 2)], 64))], 2), createBaseVNode("span", { class: normalizeClass(_ctx.$style.label) }, toDisplayString(truncatedName.value), 3)], 2)]),
				_: 1
			}, 8, ["content", "disabled"]);
		};
	}
});
var FocusedNodeChip_vue_vue_type_style_index_0_lang_module_default = {
	chip: "_chip_1061o_125",
	unconfirmed: "_unconfirmed_1061o_142",
	iconWrapper: "_iconWrapper_1061o_152",
	confirmedIcon: "_confirmedIcon_1061o_162",
	nodeIcon: "_nodeIcon_1061o_172",
	removeButton: "_removeButton_1061o_176",
	closeIcon: "_closeIcon_1061o_190",
	prefixIcon: "_prefixIcon_1061o_195",
	label: "_label_1061o_199"
};
var FocusedNodeChip_default = /* @__PURE__ */ __plugin_vue_export_helper_default(FocusedNodeChip_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": FocusedNodeChip_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$3 = ["onClick"];
var ChatInputWithMention_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "ChatInputWithMention",
	props: {
		modelValue: { default: "" },
		placeholder: { default: "" },
		disabled: {
			type: Boolean,
			default: false
		},
		disabledTooltip: { default: void 0 },
		streaming: {
			type: Boolean,
			default: false
		},
		creditsQuota: { default: void 0 },
		creditsRemaining: { default: void 0 },
		showAskOwnerTooltip: {
			type: Boolean,
			default: false
		},
		maxLength: { default: void 0 }
	},
	emits: [
		"update:modelValue",
		"submit",
		"stop",
		"upgrade-click"
	],
	setup(__props, { expose: __expose, emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const focusedNodesStore = useFocusedNodesStore();
		const isFeatureEnabled = computed(() => focusedNodesStore.isFeatureEnabled);
		const { confirmedNodes, unconfirmedNodes, confirmedCount, unconfirmedCount, allNodesConfirmed, allNodesUnconfirmed, shouldBundleConfirmed, shouldBundleUnconfirmed, individualConfirmedNodes, individualUnconfirmedNodes, getNodeType, handleChipClick, handleRemove } = useFocusedNodesChipUI();
		const inputRef = ref(null);
		const textValue = ref(props.modelValue);
		watch(() => props.modelValue, (newValue) => {
			textValue.value = newValue;
		});
		watch(textValue, (newValue) => {
			emit("update:modelValue", newValue);
		});
		const { showDropdown, searchQuery, highlightedIndex, dropdownPosition, filteredNodes, openedViaButton, handleInput, handleKeyDown, selectNode, closeDropdown, openDropdown } = useNodeMention();
		const confirmedNodeIds = computed(() => focusedNodesStore.confirmedNodeIds);
		const hasConfirmedNodes = computed(() => confirmedNodes.value.length > 0);
		const hasUnconfirmedNodes = computed(() => unconfirmedNodes.value.length > 0);
		function confirmAllUnconfirmed() {
			focusedNodesStore.confirmAllUnconfirmed();
		}
		function removeAllConfirmed() {
			focusedNodesStore.removeAllConfirmed();
		}
		function onInput(event) {
			if (!isFeatureEnabled.value) return;
			const inputEvent = event;
			const target = event.target;
			if (target) handleInput(inputEvent, target);
		}
		function onKeyDown(event) {
			if (handleKeyDown(event)) event.preventDefault();
		}
		function onSubmit() {
			if (!showDropdown.value) emit("submit");
		}
		function onStop() {
			emit("stop");
		}
		function onUpgradeClick() {
			emit("upgrade-click");
		}
		function handleDropdownKeyDown(event) {
			if (handleKeyDown(event) && (event.key === "Enter" || event.key === "Tab")) nextTick(() => {
				focusInput();
			});
		}
		function handleDropdownSelect(node) {
			selectNode(node);
			nextTick(() => {
				focusInput();
			});
		}
		function handleSearchQueryUpdate(query) {
			searchQuery.value = query;
		}
		function handleClose() {
			closeDropdown(filteredNodes.value.length === 0);
		}
		function focusInput() {
			inputRef.value?.focusInput?.();
		}
		function handleMentionButtonClick(event) {
			event.stopPropagation();
			const button$2 = event.currentTarget;
			if (button$2) openDropdown(button$2, {
				viaButton: true,
				alignRight: true
			});
		}
		__expose({ focusInput });
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { class: normalizeClass(_ctx.$style.wrapper) }, [createVNode(unref(N8nPromptInput_default), {
				ref_key: "inputRef",
				ref: inputRef,
				modelValue: textValue.value,
				"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => textValue.value = $event),
				placeholder: __props.placeholder,
				disabled: __props.disabled,
				"disabled-tooltip": __props.disabledTooltip,
				streaming: __props.streaming,
				"credits-quota": __props.creditsQuota,
				"credits-remaining": __props.creditsRemaining,
				"show-ask-owner-tooltip": __props.showAskOwnerTooltip,
				"max-length": __props.maxLength,
				"refocus-after-send": true,
				"data-test-id": "chat-input-with-mention",
				autofocus: "",
				onInput,
				onKeydown: onKeyDown,
				onSubmit,
				onStop,
				onUpgradeClick
			}, createSlots({ _: 2 }, [
				isFeatureEnabled.value && hasConfirmedNodes.value ? {
					name: "inline-chips",
					fn: withCtx(() => [unref(allNodesConfirmed) ? (openBlock(), createElementBlock("span", {
						key: 0,
						class: normalizeClass(_ctx.$style.bundledConfirmedChip)
					}, [createBaseVNode("span", { class: normalizeClass(_ctx.$style.bundledIconWrapper) }, [createVNode(unref(N8nIcon_default), {
						icon: "layers",
						size: "small",
						class: normalizeClass(_ctx.$style.bundledConfirmedIcon)
					}, null, 8, ["class"]), createBaseVNode("button", {
						type: "button",
						class: normalizeClass(_ctx.$style.bundledRemoveButton),
						onClick: withModifiers(removeAllConfirmed, ["stop"])
					}, [createVNode(unref(N8nIcon_default), {
						icon: "x",
						size: "small"
					})], 2)], 2), createBaseVNode("span", null, toDisplayString(unref(i18n$2).baseText("focusedNodes.allNodes")), 1)], 2)) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(individualConfirmedNodes), (node) => {
						return openBlock(), createBlock(FocusedNodeChip_default, {
							key: node.nodeId,
							node,
							onClick: ($event) => unref(handleChipClick)(node.nodeId),
							onRemove: ($event) => unref(handleRemove)(node.nodeId)
						}, null, 8, [
							"node",
							"onClick",
							"onRemove"
						]);
					}), 128)), unref(shouldBundleConfirmed) ? (openBlock(), createBlock(unref(N8nPopover_default), {
						key: 0,
						side: "top",
						width: "220px",
						"z-index": 2e3
					}, {
						trigger: withCtx(() => [createBaseVNode("span", { class: normalizeClass(_ctx.$style.bundledConfirmedChip) }, [createBaseVNode("span", { class: normalizeClass(_ctx.$style.bundledIconWrapper) }, [createVNode(unref(N8nIcon_default), {
							icon: "layers",
							size: "small",
							class: normalizeClass(_ctx.$style.bundledConfirmedIcon)
						}, null, 8, ["class"]), createBaseVNode("button", {
							type: "button",
							class: normalizeClass(_ctx.$style.bundledRemoveButton),
							onClick: withModifiers(removeAllConfirmed, ["stop"])
						}, [createVNode(unref(N8nIcon_default), {
							icon: "x",
							size: "small"
						})], 2)], 2), createBaseVNode("span", null, toDisplayString(unref(i18n$2).baseText("focusedNodes.nodesCount", { interpolate: { count: unref(confirmedCount) } })), 1)], 2)]),
						content: withCtx(() => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.expandedNodeList) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(confirmedNodes), (node) => {
							return openBlock(), createElementBlock("div", {
								key: node.nodeId,
								class: normalizeClass(_ctx.$style.expandedNodeItem)
							}, [
								createVNode(NodeIcon_default, {
									"node-type": unref(getNodeType)(node.nodeType),
									size: 12
								}, null, 8, ["node-type"]),
								createBaseVNode("span", { class: normalizeClass(_ctx.$style.expandedNodeName) }, toDisplayString(node.nodeName), 3),
								createBaseVNode("button", {
									type: "button",
									class: normalizeClass(_ctx.$style.expandedRemoveButton),
									onClick: withModifiers(($event) => unref(handleRemove)(node.nodeId), ["stop"])
								}, [createVNode(unref(N8nIcon_default), {
									icon: "x",
									size: "xsmall"
								})], 10, _hoisted_1$3)
							], 2);
						}), 128))], 2)]),
						_: 1
					})) : createCommentVNode("", true)], 64))]),
					key: "0"
				} : void 0,
				isFeatureEnabled.value || _ctx.$slots["extra-actions"] ? {
					name: "extra-actions",
					fn: withCtx(() => [renderSlot(_ctx.$slots, "extra-actions"), isFeatureEnabled.value ? (openBlock(), createBlock(unref(N8nIconButton_default), {
						key: 0,
						icon: "at-sign",
						variant: "ghost",
						text: true,
						size: "small",
						title: unref(i18n$2).baseText("focusedNodes.mentionTooltip"),
						"data-test-id": "mention-node-button",
						onClick: handleMentionButtonClick
					}, null, 8, ["title"])) : createCommentVNode("", true)]),
					key: "1"
				} : void 0,
				isFeatureEnabled.value && hasUnconfirmedNodes.value ? {
					name: "bottom-actions-chips",
					fn: withCtx(() => [unref(allNodesUnconfirmed) ? (openBlock(), createBlock(unref(N8nTooltip_default), {
						key: 0,
						content: unref(i18n$2).baseText("focusedNodes.unconfirmedTooltip"),
						placement: "top"
					}, {
						default: withCtx(() => [createBaseVNode("button", {
							type: "button",
							class: normalizeClass(_ctx.$style.bundledUnconfirmedChip),
							onClick: confirmAllUnconfirmed
						}, [createVNode(unref(N8nIcon_default), {
							icon: "plus",
							size: "xsmall",
							class: normalizeClass(_ctx.$style.bundledUnconfirmedIcon)
						}, null, 8, ["class"]), createBaseVNode("span", null, toDisplayString(unref(i18n$2).baseText("focusedNodes.allNodes")), 1)], 2)]),
						_: 1
					}, 8, ["content"])) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [(openBlock(true), createElementBlock(Fragment, null, renderList(unref(individualUnconfirmedNodes), (node) => {
						return openBlock(), createBlock(FocusedNodeChip_default, {
							key: node.nodeId,
							node,
							onClick: ($event) => unref(handleChipClick)(node.nodeId),
							onRemove: ($event) => unref(handleRemove)(node.nodeId)
						}, null, 8, [
							"node",
							"onClick",
							"onRemove"
						]);
					}), 128)), unref(shouldBundleUnconfirmed) ? (openBlock(), createBlock(unref(N8nTooltip_default), {
						key: 0,
						content: unref(i18n$2).baseText("focusedNodes.unconfirmedTooltip"),
						placement: "top"
					}, {
						default: withCtx(() => [createBaseVNode("button", {
							type: "button",
							class: normalizeClass(_ctx.$style.bundledUnconfirmedChip),
							onClick: confirmAllUnconfirmed
						}, [createVNode(unref(N8nIcon_default), {
							icon: "plus",
							size: "xsmall",
							class: normalizeClass(_ctx.$style.bundledUnconfirmedIcon)
						}, null, 8, ["class"]), createBaseVNode("span", null, toDisplayString(unref(i18n$2).baseText("focusedNodes.nodesCount", { interpolate: { count: unref(unconfirmedCount) } })), 1)], 2)]),
						_: 1
					}, 8, ["content"])) : createCommentVNode("", true)], 64))]),
					key: "2"
				} : void 0
			]), 1032, [
				"modelValue",
				"placeholder",
				"disabled",
				"disabled-tooltip",
				"streaming",
				"credits-quota",
				"credits-remaining",
				"show-ask-owner-tooltip",
				"max-length"
			]), isFeatureEnabled.value && unref(showDropdown) ? (openBlock(), createBlock(NodeMentionDropdown_default, {
				key: 0,
				nodes: unref(filteredNodes),
				"selected-node-ids": confirmedNodeIds.value,
				"highlighted-index": unref(highlightedIndex),
				position: unref(dropdownPosition),
				"search-query": unref(searchQuery),
				"via-button": unref(openedViaButton),
				onSelect: handleDropdownSelect,
				onHighlight: _cache[1] || (_cache[1] = ($event) => highlightedIndex.value = $event),
				onKeydown: handleDropdownKeyDown,
				onClose: handleClose,
				"onUpdate:searchQuery": handleSearchQueryUpdate
			}, null, 8, [
				"nodes",
				"selected-node-ids",
				"highlighted-index",
				"position",
				"search-query",
				"via-button"
			])) : createCommentVNode("", true)], 2);
		};
	}
});
var ChatInputWithMention_vue_vue_type_style_index_0_lang_module_default = {
	wrapper: "_wrapper_1qi5n_125",
	overflowText: "_overflowText_1qi5n_129",
	bundledConfirmedChip: "_bundledConfirmedChip_1qi5n_135",
	bundledIconWrapper: "_bundledIconWrapper_1qi5n_150",
	bundledConfirmedIcon: "_bundledConfirmedIcon_1qi5n_158",
	bundledRemoveButton: "_bundledRemoveButton_1qi5n_165",
	bundledUnconfirmedChip: "_bundledUnconfirmedChip_1qi5n_182",
	bundledUnconfirmedIcon: "_bundledUnconfirmedIcon_1qi5n_202",
	expandedNodeList: "_expandedNodeList_1qi5n_206",
	expandedNodeItem: "_expandedNodeItem_1qi5n_212",
	expandedNodeName: "_expandedNodeName_1qi5n_225",
	expandedRemoveButton: "_expandedRemoveButton_1qi5n_233"
};
var ChatInputWithMention_default = /* @__PURE__ */ __plugin_vue_export_helper_default(ChatInputWithMention_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": ChatInputWithMention_vue_vue_type_style_index_0_lang_module_default }]]);
var MessageFocusedNodesChips_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "MessageFocusedNodesChips",
	props: { focusedNodeNames: {} },
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		const nodeTypesStore = useNodeTypesStore();
		const workflowsStore = useWorkflowsStore();
		const nodeCount = computed(() => props.focusedNodeNames?.length ?? 0);
		const shouldBundle = computed(() => nodeCount.value >= 3);
		const allNodesSelected = computed(() => nodeCount.value > 0 && workflowsStore.allNodes.length > 0 && nodeCount.value >= workflowsStore.allNodes.length);
		const resolvedNodes = computed(() => {
			if (!props.focusedNodeNames?.length) return [];
			return props.focusedNodeNames.map((name$3) => {
				const workflowNode = workflowsStore.allNodes.find((n) => n.name === name$3);
				return {
					name: name$3,
					nodeType: workflowNode ? nodeTypesStore.getNodeType(workflowNode.type) : null
				};
			});
		});
		const truncatedName = (name$3) => {
			const maxLength = 20;
			if (name$3.length <= maxLength) return name$3;
			return `${name$3.substring(0, maxLength - 1)}...`;
		};
		return (_ctx, _cache) => {
			return __props.focusedNodeNames?.length ? (openBlock(), createElementBlock("div", {
				key: 0,
				class: normalizeClass(_ctx.$style.container)
			}, [allNodesSelected.value ? (openBlock(), createElementBlock("span", {
				key: 0,
				class: normalizeClass(_ctx.$style.chip)
			}, [createVNode(unref(N8nIcon_default), {
				icon: "layers",
				size: "small",
				class: normalizeClass(_ctx.$style.chipIcon)
			}, null, 8, ["class"]), createBaseVNode("span", { class: normalizeClass(_ctx.$style.chipLabel) }, toDisplayString(unref(i18n$2).baseText("focusedNodes.allNodes")), 3)], 2)) : shouldBundle.value ? (openBlock(), createElementBlock("span", {
				key: 1,
				class: normalizeClass(_ctx.$style.chip)
			}, [createVNode(unref(N8nIcon_default), {
				icon: "layers",
				size: "small",
				class: normalizeClass(_ctx.$style.chipIcon)
			}, null, 8, ["class"]), createBaseVNode("span", { class: normalizeClass(_ctx.$style.chipLabel) }, toDisplayString(unref(i18n$2).baseText("focusedNodes.nodesCount", { interpolate: { count: nodeCount.value } })), 3)], 2)) : (openBlock(true), createElementBlock(Fragment, { key: 2 }, renderList(resolvedNodes.value, (node) => {
				return openBlock(), createElementBlock("span", {
					key: node.name,
					class: normalizeClass(_ctx.$style.chip)
				}, [createBaseVNode("span", { class: normalizeClass(_ctx.$style.chipIconWrapper) }, [node.nodeType ? (openBlock(), createBlock(NodeIcon_default, {
					key: 0,
					"node-type": node.nodeType,
					size: 12
				}, null, 8, ["node-type"])) : (openBlock(), createBlock(unref(N8nIcon_default), {
					key: 1,
					icon: "crosshair",
					size: "xsmall",
					class: normalizeClass(_ctx.$style.chipIcon)
				}, null, 8, ["class"]))], 2), createBaseVNode("span", { class: normalizeClass(_ctx.$style.chipLabel) }, toDisplayString(truncatedName(node.name)), 3)], 2);
			}), 128))], 2)) : createCommentVNode("", true);
		};
	}
});
var MessageFocusedNodesChips_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_rsqvg_125",
	chip: "_chip_rsqvg_131",
	chipIconWrapper: "_chipIconWrapper_rsqvg_145",
	chipIcon: "_chipIcon_rsqvg_145",
	chipLabel: "_chipLabel_rsqvg_164"
};
var MessageFocusedNodesChips_default = /* @__PURE__ */ __plugin_vue_export_helper_default(MessageFocusedNodesChips_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": MessageFocusedNodesChips_vue_vue_type_style_index_0_lang_module_default }]]);
const WORKFLOW_SUGGESTIONS = [
	{
		id: "multi-agent-research",
		summary: "Multi-agent research workflow",
		prompt: "Create a multi-agent AI workflow using `gpt-4.1-mini` where several agents work together to research a topic, fact-check the findings, and write a report that's sent as an HTML email. One agent should gather recent, credible information about the topic. Another agent should verify the facts and only mark something as \"verified\" if it appears in at least two independent sources. A third agent should combine the verified information into a clear, well-written report under 1,000 words. A final agent should edit and format the report to make it look clean and professional in the body of the email. Use Gmail to send the report."
	},
	{
		id: "email-summary",
		summary: "Summarize emails with AI",
		prompt: "Create an automation that runs on Monday mornings. It reads my Gmail inbox from the weekend, analyzes them with `gpt-4.1-mini` to find action items and priorities, and emails me a structured email using Gmail."
	},
	{
		id: "ai-news-digest",
		summary: "Daily AI news digest",
		prompt: "Build an automation that runs every night 8pm. Use the NewsAPI \"/everything\" endpoint to search for AI-related news from the day. Pick the top 5 articles and use OpenAI `gpt-4.1-mini` to summarize each in two sentences. Generate an image using OpenAI based on the top article's summary. Send a structured Telegram message."
	},
	{
		id: "daily-weather-report",
		summary: "Daily weather report",
		prompt: "Create an automation that checks the weather for my location every morning at 5 a.m using OpenWeather. Send me a short weather report by email using Gmail. Use OpenAI `gpt-4.1-mini` to write a short, fun formatted email body by adding personality when describing the weather and how the day might feel. Include all details relevant to decide on my plans and clothes for the day."
	},
	{
		id: "invoice-pipeline",
		summary: "Invoice processing pipeline",
		prompt: "Create an invoice processing workflow using an n8n Form. When a user submits an invoice file (PDF or image) with their email address, use OpenAI `gpt-4.1-mini` to extract invoice data. Then, validate the date format is correct, the currency is valid, and the total amount is greater than zero. If validation fails, email the user a clear error message that explains which check failed from my Gmail. If the data passes validation, store the structured result in a datatable plus email the user. Every Monday morning, generate a weekly spending report using `gpt-4.1-mini` based on stored invoices and send a clean email using Gmail."
	},
	{
		id: "rag-assistant",
		summary: "RAG knowledge assistant",
		prompt: "Build an automation that creates a document-to-chat RAG pipeline. The workflow starts with an n8n Form where a user uploads one or more files (PDF, CSV, or JSON). Each upload should trigger a process that reads the file, splits it into chunks, and generates embeddings using OpenAI `gpt-4.1-mini` model, saved in one Pinecone table. Add a second part of the workflow for querying: use a Chat Message Trigger to act as a chatbot interface. When a user sends a question, retrieve the top 5 most relevant chunks from Pinecone, pass them into `gpt-4.1-mini` as context, and have it answer naturally using only the retrieved information. If a question can't be answered confidently, the bot should respond with: \"I couldn't find that in the uploaded documents.\" Log each chat interaction in a Data Table with the user query, matched file(s), and timestamp. Send a daily summary email through Gmail showing total questions asked, top files referenced, and any failed lookups."
	},
	{
		id: "lead-qualification",
		summary: "Lead qualification and call scheduling",
		prompt: "Create an n8n form with a lead generation form I can embed on my website homepage. Build an automation that processes form submissions, uses AI to qualify the lead, sends data to an n8n data table. For high-score leads, it should also email them to offer to schedule a 15-min call in a free slot in my calendar."
	},
	{
		id: "youtube-auto-chapters",
		summary: "YouTube video chapters",
		prompt: "Build an n8n workflow that automatically generates YouTube chapter timestamps from video captions. Use the n8n chat trigger for me to enter the URL of the YouTube video. Use the YouTube Get a video node to get the video title, description, and existing metadata. Use the YouTube Captions API to download the transcript for the given video ID. Send the transcript to AI agent using Anthropic's Claude model. Prompt the model to identify topic shifts and return structured output in timestamp - chapter format. Append the generated chapter list to the existing video description. Use the YouTube Update a video node to update the video description. Respond back with the updates using the respond to chat node."
	}
];
var import_isEqual = /* @__PURE__ */ __toESM(require_isEqual(), 1);
function useWorkflowUpdate() {
	const workflowsStore = useWorkflowsStore();
	const workflowState = injectWorkflowState();
	const credentialsStore = useCredentialsStore();
	const nodeTypesStore = useNodeTypesStore();
	const builderStore = useBuilderStore();
	const canvasOperations = useCanvasOperations();
	const nodeHelpers = useNodeHelpers();
	function categorizeNodes(workflowData) {
		const existingNodesById = new Map(workflowsStore.allNodes.map((n) => [n.id, n]));
		const existingNodesByNameType = new Map(workflowsStore.allNodes.map((n) => [`${n.type}::${n.name}`, n]));
		const nodesToUpdate = [];
		const nodesToAdd = [];
		const nodesToRemove = [];
		const processedExistingIds = /* @__PURE__ */ new Set();
		workflowData.nodes?.forEach((newNode) => {
			let existing = existingNodesById.get(newNode.id);
			if (!existing) {
				const nameTypeKey = `${newNode.type}::${newNode.name}`;
				existing = existingNodesByNameType.get(nameTypeKey);
			}
			if (existing) {
				nodesToUpdate.push({
					existing,
					updated: {
						...newNode,
						id: existing.id
					}
				});
				processedExistingIds.add(existing.id);
			} else nodesToAdd.push(newNode);
		});
		existingNodesById.forEach((node, id) => {
			if (!processedExistingIds.has(id)) nodesToRemove.push(node);
		});
		return {
			nodesToUpdate,
			nodesToAdd,
			nodesToRemove
		};
	}
	async function updateExistingNodes(nodesToUpdate) {
		if (nodesToUpdate.length === 0) return;
		const renamedNodes = /* @__PURE__ */ new Map();
		for (const { existing, updated } of nodesToUpdate) if (existing.name !== updated.name) {
			const actualNewName = await canvasOperations.renameNode(existing.name, updated.name, {
				trackHistory: true,
				trackBulk: false,
				showErrorToast: false
			});
			if (actualNewName) renamedNodes.set(existing.id, actualNewName);
		}
		const workflow = workflowsStore.cloneWorkflowObject();
		for (const { existing, updated } of nodesToUpdate) {
			const nodeName$3 = renamedNodes.get(existing.id) ?? existing.name;
			const node = workflow.nodes[nodeName$3];
			if (!node) continue;
			Object.assign(node, {
				...updated,
				position: existing.position,
				name: nodeName$3
			});
			const nodeTypeDescription = nodeTypesStore.getNodeType(node.type, node.typeVersion);
			if (nodeTypeDescription) node.parameters = getNodeParameters(nodeTypeDescription.properties ?? [], node.parameters, true, false, node, nodeTypeDescription) ?? {};
			if (!(0, import_isEqual.default)(existing.parameters, updated.parameters)) workflowState.resetParametersLastUpdatedAt(nodeName$3);
		}
		workflowsStore.setNodes(Object.values(workflow.nodes));
		workflowsStore.setConnections(workflow.connectionsBySourceNode);
		for (const { existing } of nodesToUpdate) {
			const nodeName$3 = renamedNodes.get(existing.id) ?? existing.name;
			nodeHelpers.updateNodeParameterIssuesByName(nodeName$3);
		}
	}
	function removeStaleNodes(nodesToRemove) {
		for (const node of nodesToRemove) canvasOperations.deleteNode(node.id, {
			trackHistory: true,
			trackBulk: false
		});
	}
	async function addNewNodes(nodesToAdd) {
		if (nodesToAdd.length === 0) return [];
		return await canvasOperations.addNodes(nodesToAdd.map((node) => ({ ...node })), {
			trackHistory: true,
			trackBulk: false,
			forcePosition: true,
			telemetry: false
		});
	}
	function isSameConnection(a, b) {
		return a.source === b.source && a.target === b.target && (a.sourceHandle ?? null) === (b.sourceHandle ?? null) && (a.targetHandle ?? null) === (b.targetHandle ?? null);
	}
	async function updateConnections(newConnections) {
		const existingConnections = workflowsStore.workflow.connections;
		const existingCanvasConnections = mapLegacyConnectionsToCanvasConnections(existingConnections, workflowsStore.allNodes);
		const newCanvasConnections = mapLegacyConnectionsToCanvasConnections(newConnections, workflowsStore.allNodes);
		const connectionsToRemove = existingCanvasConnections.filter((existing) => !newCanvasConnections.some((newConn) => isSameConnection(existing, newConn)));
		const connectionsToAdd = newCanvasConnections.filter((newConn) => !existingCanvasConnections.some((existing) => isSameConnection(existing, newConn)));
		for (const connection of connectionsToRemove) canvasOperations.deleteConnection(connection, {
			trackHistory: true,
			trackBulk: false
		});
		if (connectionsToAdd.length > 0) await canvasOperations.addConnections(connectionsToAdd, {
			trackHistory: true,
			trackBulk: false
		});
	}
	function setDefaultCredentialsOnNodes(nodes$3) {
		for (const node of nodes$3) {
			if (node.credentials && Object.keys(node.credentials).length > 0) continue;
			const nodeType = nodeTypesStore.getNodeType(node.type);
			if (!nodeType?.credentials) continue;
			for (const credentialConfig of nodeType.credentials) {
				const credentials = credentialsStore.getCredentialsByType(credentialConfig.name);
				if (!credentials || credentials.length === 0) continue;
				const credential = credentials[0];
				node.credentials = { [credential.type]: {
					id: credential.id,
					name: credential.name
				} };
				const authField = getMainAuthField(nodeType);
				const authType = getAuthTypeForNodeCredential(nodeType, credentialConfig);
				if (authField && authType) node.parameters[authField.name] = authType.value;
				break;
			}
		}
	}
	function updateWorkflowNameIfNeeded(name$3, isInitialGeneration) {
		if (name$3 && isInitialGeneration && workflowsStore.workflow.name.startsWith("My workflow")) workflowState.setWorkflowName({
			newName: name$3,
			setStateDirty: false
		});
	}
	function tidyUpNewNodes(nodeIds) {
		if (nodeIds.length === 0) return;
		canvasEventBus.emit("tidyUp", {
			source: "builder-update",
			nodeIdsFilter: nodeIds,
			trackEvents: false,
			trackHistory: true,
			trackBulk: false
		});
	}
	async function updateWorkflow(workflowData, options$1) {
		try {
			setDefaultCredentialsOnNodes(workflowData.nodes ?? []);
			const { nodesToUpdate, nodesToAdd, nodesToRemove } = categorizeNodes(workflowData);
			await updateExistingNodes(nodesToUpdate);
			removeStaleNodes(nodesToRemove);
			const newNodeIds = (await addNewNodes(nodesToAdd)).map((n) => n.id);
			await updateConnections(workflowData.connections ?? {});
			updateWorkflowNameIfNeeded(workflowData.name, options$1?.isInitialGeneration);
			if (workflowData.pinData) workflowsStore.setWorkflowPinData({
				...workflowsStore.workflow.pinData,
				...workflowData.pinData
			});
			builderStore.setBuilderMadeEdits(true);
			tidyUpNewNodes([...newNodeIds, ...options$1?.nodeIdsToTidyUp ?? []]);
			return {
				success: true,
				newNodeIds
			};
		} catch (error$2) {
			return {
				success: false,
				error: error$2
			};
		}
	}
	return { updateWorkflow };
}
function useErrorHandler(options$1) {
	const toast = useToast();
	const i18n$2 = useI18n();
	function handleError(error$2, errorOptions) {
		const errorMessage = error$2 instanceof Error ? error$2.message : String(error$2);
		const context = errorOptions?.context;
		console.error(`[${options$1.source}${context ? ` - ${context}` : ""}]`, error$2);
		captureException(error$2, { tags: {
			source: options$1.source,
			context
		} });
		const title$7 = errorOptions?.title ?? (options$1.titleKey ? i18n$2.baseText(options$1.titleKey) : "Error");
		toast.showMessage({
			type: "error",
			title: title$7,
			message: errorOptions?.message ?? errorMessage
		});
	}
	return { handleError };
}
var import_shuffle = /* @__PURE__ */ __toESM(require_shuffle(), 1);
var AISettingsButton_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "AISettingsButton",
	props: {
		disabled: {
			type: Boolean,
			default: false
		},
		showUsabilityNotice: {
			type: Boolean,
			default: false
		}
	},
	setup(__props) {
		const props = __props;
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				class: normalizeClass(_ctx.$style.container),
				"data-test-id": "ai-settings-button"
			}, [props.showUsabilityNotice ? (openBlock(), createBlock(unref(N8nInfoTip_default), {
				key: 0,
				theme: "warning",
				type: "tooltip"
			}, {
				default: withCtx(() => [createBaseVNode("span", null, toDisplayString(unref(i18n$2).baseText("aiAssistant.reducedHelp.chat.notice")), 1)]),
				_: 1
			})) : createCommentVNode("", true), createVNode(unref(N8nTooltip_default), {
				content: unref(i18n$2).baseText("settings.ai.button.tooltip"),
				disabled: props.disabled
			}, {
				default: withCtx(() => [createVNode(unref(N8nLink_default), {
					to: props.disabled ? void 0 : { name: unref(VIEWS).AI_SETTINGS },
					"aria-label": unref(i18n$2).baseText("settings.ai.button.tooltip"),
					class: normalizeClass({
						[_ctx.$style.link]: true,
						[_ctx.$style.disabled]: props.disabled
					})
				}, {
					default: withCtx(() => [createVNode(unref(N8nIcon_default), {
						icon: "settings",
						size: "large",
						color: "text-light"
					})]),
					_: 1
				}, 8, [
					"to",
					"aria-label",
					"class"
				])]),
				_: 1
			}, 8, ["content", "disabled"])], 2);
		};
	}
});
var AISettingsButton_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_1w2a4_125",
	link: "_link_1w2a4_132",
	disabled: "_disabled_1w2a4_148"
};
var AISettingsButton_default = /* @__PURE__ */ __plugin_vue_export_helper_default(AISettingsButton_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": AISettingsButton_vue_vue_type_style_index_0_lang_module_default }]]);
var BuildModeEmptyState_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "BuildModeEmptyState",
	setup(__props) {
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { class: normalizeClass(_ctx.$style.container) }, [
				createVNode(unref(N8nIcon_default), {
					icon: "wand-sparkles",
					class: normalizeClass(_ctx.$style.icon)
				}, null, 8, ["class"]),
				createBaseVNode("h3", { class: normalizeClass(_ctx.$style.title) }, toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.existingWorkflow.emptyState.title")), 3),
				createBaseVNode("p", { class: normalizeClass(_ctx.$style.body) }, toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.existingWorkflow.emptyState.body")), 3)
			], 2);
		};
	}
});
var BuildModeEmptyState_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_d7kbl_125",
	icon: "_icon_d7kbl_133",
	title: "_title_d7kbl_139",
	body: "_body_d7kbl_147"
};
var BuildModeEmptyState_default = /* @__PURE__ */ __plugin_vue_export_helper_default(BuildModeEmptyState_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": BuildModeEmptyState_vue_vue_type_style_index_0_lang_module_default }]]);
var PlanDisplayMessage_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "PlanDisplayMessage",
	props: {
		message: {},
		disabled: { type: Boolean },
		showActions: {
			type: Boolean,
			default: true
		}
	},
	emits: ["decision"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const isSubmitted = ref(false);
		const plan = computed(() => props.message.data.plan);
		function approve() {
			if (isSubmitted.value) return;
			isSubmitted.value = true;
			emit("decision", { action: "approve" });
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				class: normalizeClass(_ctx.$style.message),
				"data-test-id": "plan-mode-plan-message"
			}, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.card) }, [
				createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [createTextVNode(toDisplayString(plan.value.summary), 1)]),
					_: 1
				}),
				createBaseVNode("div", { class: normalizeClass(_ctx.$style.triggerSection) }, [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.planMode.plan.triggerLabel")) + ":", 1)]),
					_: 1
				}), createVNode(unref(N8nText_default), { tag: "p" }, {
					default: withCtx(() => [createTextVNode(toDisplayString(plan.value.trigger), 1)]),
					_: 1
				})], 2),
				createBaseVNode("ol", { class: normalizeClass(_ctx.$style.steps) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(plan.value.steps, (step, idx) => {
					return openBlock(), createElementBlock("li", { key: idx }, [createVNode(unref(N8nText_default), null, {
						default: withCtx(() => [createTextVNode(toDisplayString(step.description), 1)]),
						_: 2
					}, 1024), step.subSteps?.length ? (openBlock(), createElementBlock("ul", {
						key: 0,
						class: normalizeClass(_ctx.$style.subSteps)
					}, [(openBlock(true), createElementBlock(Fragment, null, renderList(step.subSteps, (sub, subIdx) => {
						return openBlock(), createElementBlock("li", { key: subIdx }, [createVNode(unref(N8nText_default), null, {
							default: withCtx(() => [createTextVNode(toDisplayString(sub), 1)]),
							_: 2
						}, 1024)]);
					}), 128))], 2)) : createCommentVNode("", true)]);
				}), 128))], 2),
				plan.value.additionalSpecs?.length ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.section)
				}, [createVNode(unref(N8nText_default), null, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.planMode.plan.notesLabel")), 1)]),
					_: 1
				}), createBaseVNode("ul", { class: normalizeClass(_ctx.$style.notes) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(plan.value.additionalSpecs, (note, idx) => {
					return openBlock(), createElementBlock("li", { key: idx }, [createVNode(unref(N8nText_default), null, {
						default: withCtx(() => [createTextVNode(toDisplayString(note), 1)]),
						_: 2
					}, 1024)]);
				}), 128))], 2)], 2)) : createCommentVNode("", true),
				__props.showActions ? (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.actions)
				}, [createVNode(unref(N8nButton_default), {
					type: "primary",
					disabled: __props.disabled || isSubmitted.value,
					"data-test-id": "plan-mode-plan-approve",
					onClick: approve
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.planMode.actions.implement")), 1)]),
					_: 1
				}, 8, ["disabled"])], 2)) : createCommentVNode("", true)
			], 2)], 2);
		};
	}
});
var PlanDisplayMessage_vue_vue_type_style_index_0_lang_module_default = {
	message: "_message_1jt83_125",
	card: "_card_1jt83_132",
	section: "_section_1jt83_139",
	triggerSection: "_triggerSection_1jt83_145",
	steps: "_steps_1jt83_151",
	subSteps: "_subSteps_1jt83_158",
	notes: "_notes_1jt83_165",
	actions: "_actions_1jt83_172"
};
var PlanDisplayMessage_default = /* @__PURE__ */ __plugin_vue_export_helper_default(PlanDisplayMessage_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": PlanDisplayMessage_vue_vue_type_style_index_0_lang_module_default }]]);
var PlanModeSelector_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "PlanModeSelector",
	props: { modelValue: {} },
	emits: ["update:modelValue"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const modeOptions = computed(() => [{
			id: "build",
			label: i18n$2.baseText("aiAssistant.builder.planMode.selector.build"),
			description: i18n$2.baseText("aiAssistant.builder.planMode.selector.build.description"),
			icon: "box",
			checked: props.modelValue === "build"
		}, {
			id: "plan",
			label: i18n$2.baseText("aiAssistant.builder.planMode.selector.plan"),
			description: i18n$2.baseText("aiAssistant.builder.planMode.selector.plan.description"),
			icon: "scroll-text",
			checked: props.modelValue === "plan"
		}]);
		const currentMode = computed(() => {
			return modeOptions.value.find((opt) => opt.id === props.modelValue) ?? modeOptions.value[0];
		});
		function onSelect(value) {
			emit("update:modelValue", value);
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				class: normalizeClass(_ctx.$style.container),
				"data-test-id": "plan-mode-selector"
			}, [createVNode(unref(N8nActionDropdown_default), {
				items: modeOptions.value,
				placement: "bottom-end",
				"hide-arrow": "",
				onSelect
			}, {
				activator: withCtx(() => [createVNode(unref(N8nButton_default), {
					type: "secondary",
					size: "small",
					class: normalizeClass(_ctx.$style.trigger)
				}, {
					default: withCtx(() => [
						currentMode.value.icon ? (openBlock(), createBlock(unref(N8nIcon_default), {
							key: 0,
							icon: currentMode.value.icon,
							size: "small"
						}, null, 8, ["icon"])) : createCommentVNode("", true),
						createBaseVNode("span", { class: normalizeClass(_ctx.$style.triggerLabel) }, toDisplayString(currentMode.value.label), 3),
						createVNode(unref(N8nIcon_default), {
							icon: "chevron-down",
							size: "xsmall"
						})
					]),
					_: 1
				}, 8, ["class"])]),
				menuItem: withCtx((item$2) => [createBaseVNode("div", { class: normalizeClass(_ctx.$style.menuItem) }, [createBaseVNode("span", { class: normalizeClass(_ctx.$style.label) }, toDisplayString(item$2.label), 3), createBaseVNode("span", { class: normalizeClass(_ctx.$style.description) }, toDisplayString(item$2.description), 3)], 2)]),
				_: 1
			}, 8, ["items"])], 2);
		};
	}
});
var PlanModeSelector_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_1su38_125",
	trigger: "_trigger_1su38_130",
	triggerLabel: "_triggerLabel_1su38_137",
	menuItem: "_menuItem_1su38_141",
	label: "_label_1su38_147",
	description: "_description_1su38_153"
};
var PlanModeSelector_default = /* @__PURE__ */ __plugin_vue_export_helper_default(PlanModeSelector_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": PlanModeSelector_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$2 = { key: 1 };
var OTHER_SENTINEL = "__other__";
var PlanQuestionsMessage_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "PlanQuestionsMessage",
	props: {
		questions: {},
		introMessage: {},
		disabled: { type: Boolean },
		answered: { type: Boolean }
	},
	emits: ["submit"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const i18n$2 = useI18n();
		const emit = __emit;
		const currentIndex = ref(0);
		const isSubmitted = ref(false);
		const answers = ref(/* @__PURE__ */ new Map());
		const currentQuestion = computed(() => props.questions[currentIndex.value]);
		const isFirstQuestion = computed(() => currentIndex.value === 0);
		const isLastQuestion = computed(() => currentIndex.value === props.questions.length - 1);
		const filteredOptions = computed(() => {
			return (currentQuestion.value.options ?? []).filter((opt) => !opt.toLowerCase().trim().startsWith("other"));
		});
		const currentAnswer = computed(() => {
			const q = currentQuestion.value;
			return q ? answers.value.get(q.id) : void 0;
		});
		const hasValidAnswer = computed(() => {
			const answer = currentAnswer.value;
			if (!answer) return false;
			if (answer.skipped) return true;
			const hasCustomText = !!answer.customText?.trim();
			const hasSelectedOptions = answer.selectedOptions.length > 0;
			if (currentQuestion.value?.type === "text") return hasCustomText;
			if (answer.selectedOptions.includes(OTHER_SENTINEL)) return hasCustomText;
			return hasSelectedOptions || hasCustomText;
		});
		const nextButtonLabel = computed(() => {
			if (!hasValidAnswer.value) return isLastQuestion.value ? i18n$2.baseText("aiAssistant.builder.planMode.questions.skipAndSubmit") : i18n$2.baseText("aiAssistant.builder.planMode.questions.skip");
			return isLastQuestion.value ? i18n$2.baseText("aiAssistant.builder.planMode.questions.submitButton") : i18n$2.baseText("aiAssistant.builder.planMode.questions.next");
		});
		watch(currentIndex, () => {
			const q = currentQuestion.value;
			if (q && !answers.value.has(q.id)) answers.value.set(q.id, {
				questionId: q.id,
				question: q.question,
				selectedOptions: [],
				customText: "",
				skipped: false
			});
		}, { immediate: true });
		function onSingleSelect(option) {
			const answer = currentAnswer.value;
			if (!answer) return;
			answer.selectedOptions = [option];
			if (option !== OTHER_SENTINEL) answer.customText = "";
			answer.skipped = false;
		}
		function onMultiToggle(option, checked) {
			const answer = currentAnswer.value;
			if (!answer) return;
			const opts = answer.selectedOptions;
			if (checked && !opts.includes(option)) opts.push(option);
			else if (!checked) {
				const idx = opts.indexOf(option);
				if (idx > -1) opts.splice(idx, 1);
			}
			answer.skipped = false;
		}
		function onCustomTextChange(text$2) {
			const answer = currentAnswer.value;
			if (!answer) return;
			answer.customText = text$2;
			answer.skipped = false;
		}
		function goToPrevious() {
			if (!isFirstQuestion.value) currentIndex.value--;
		}
		function goToNext() {
			if (!hasValidAnswer.value) {
				const answer = currentAnswer.value;
				if (answer) answer.skipped = true;
			}
			if (isLastQuestion.value) submitAnswers();
			else currentIndex.value++;
		}
		function submitAnswers() {
			if (isSubmitted.value) return;
			isSubmitted.value = true;
			emit("submit", props.questions.map((q) => {
				const answer = answers.value.get(q.id);
				if (!answer) return {
					questionId: q.id,
					question: q.question,
					selectedOptions: [],
					customText: "",
					skipped: true
				};
				return {
					...answer,
					selectedOptions: answer.selectedOptions.filter((o) => o !== OTHER_SENTINEL)
				};
			}));
		}
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				class: normalizeClass(_ctx.$style.wrapper),
				"data-test-id": "plan-mode-questions-message"
			}, [__props.introMessage ? (openBlock(), createBlock(unref(N8nText_default), {
				key: 0,
				class: normalizeClass(_ctx.$style.intro)
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(__props.introMessage), 1)]),
				_: 1
			}, 8, ["class"])) : createCommentVNode("", true), !__props.answered && currentQuestion.value && currentAnswer.value ? (openBlock(), createElementBlock("div", {
				key: 1,
				class: normalizeClass(_ctx.$style.container)
			}, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.question) }, [
				createVNode(unref(N8nText_default), {
					tag: "p",
					bold: true,
					class: normalizeClass(_ctx.$style.questionText)
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(currentQuestion.value.question), 1)]),
					_: 1
				}, 8, ["class"]),
				currentQuestion.value.type === "single" ? (openBlock(), createElementBlock("div", {
					key: 0,
					class: normalizeClass(_ctx.$style.options)
				}, [(openBlock(true), createElementBlock(Fragment, null, renderList(filteredOptions.value, (option) => {
					return openBlock(), createBlock(unref(ElRadio), {
						key: option,
						"model-value": currentAnswer.value.selectedOptions[0],
						label: option,
						disabled: __props.disabled,
						"onUpdate:modelValue": () => onSingleSelect(option)
					}, {
						default: withCtx(() => [createTextVNode(toDisplayString(option), 1)]),
						_: 2
					}, 1032, [
						"model-value",
						"label",
						"disabled",
						"onUpdate:modelValue"
					]);
				}), 128))], 2)) : currentQuestion.value.type === "multi" ? (openBlock(), createElementBlock("div", {
					key: 1,
					class: normalizeClass(_ctx.$style.options)
				}, [(openBlock(true), createElementBlock(Fragment, null, renderList(filteredOptions.value, (option) => {
					return openBlock(), createElementBlock("label", {
						key: option,
						class: normalizeClass([_ctx.$style.checkboxOption, { [_ctx.$style.selected]: currentAnswer.value.selectedOptions.includes(option) }])
					}, [createVNode(unref(Checkbox_default), {
						"model-value": currentAnswer.value.selectedOptions.includes(option),
						disabled: __props.disabled,
						"onUpdate:modelValue": (checked) => onMultiToggle(option, checked)
					}, null, 8, [
						"model-value",
						"disabled",
						"onUpdate:modelValue"
					]), createBaseVNode("span", { class: normalizeClass(_ctx.$style.optionLabel) }, toDisplayString(option), 3)], 2);
				}), 128))], 2)) : currentQuestion.value.type === "text" ? (openBlock(), createBlock(unref(Input_default), {
					key: 2,
					"model-value": currentAnswer.value.customText,
					type: "textarea",
					rows: 3,
					disabled: __props.disabled,
					placeholder: unref(i18n$2).baseText("aiAssistant.builder.planMode.questions.customPlaceholder"),
					"onUpdate:modelValue": onCustomTextChange
				}, null, 8, [
					"model-value",
					"disabled",
					"placeholder"
				])) : createCommentVNode("", true),
				currentQuestion.value.type === "single" ? (openBlock(), createElementBlock("div", {
					key: 3,
					class: normalizeClass(_ctx.$style.otherOption)
				}, [createVNode(unref(ElRadio), {
					"model-value": currentAnswer.value.selectedOptions[0],
					label: OTHER_SENTINEL,
					disabled: __props.disabled,
					"onUpdate:modelValue": _cache[1] || (_cache[1] = () => onSingleSelect(OTHER_SENTINEL))
				}, {
					default: withCtx(() => [createVNode(unref(Input_default), {
						"model-value": currentAnswer.value.customText,
						disabled: __props.disabled,
						placeholder: unref(i18n$2).baseText("aiAssistant.builder.planMode.questions.other"),
						size: "small",
						class: normalizeClass(_ctx.$style.otherInput),
						"onUpdate:modelValue": onCustomTextChange,
						onFocus: _cache[0] || (_cache[0] = () => onSingleSelect(OTHER_SENTINEL))
					}, null, 8, [
						"model-value",
						"disabled",
						"placeholder",
						"class"
					])]),
					_: 1
				}, 8, ["model-value", "disabled"])], 2)) : currentQuestion.value.type === "multi" ? (openBlock(), createElementBlock("div", {
					key: 4,
					class: normalizeClass(_ctx.$style.otherOption)
				}, [createVNode(unref(Checkbox_default), {
					"model-value": !!currentAnswer.value.customText?.trim(),
					disabled: __props.disabled,
					"onUpdate:modelValue": _cache[2] || (_cache[2] = (checked) => {
						if (!checked) onCustomTextChange("");
					})
				}, null, 8, ["model-value", "disabled"]), createVNode(unref(Input_default), {
					"model-value": currentAnswer.value.customText,
					disabled: __props.disabled,
					placeholder: unref(i18n$2).baseText("aiAssistant.builder.planMode.questions.other"),
					size: "small",
					class: normalizeClass(_ctx.$style.otherInput),
					"onUpdate:modelValue": onCustomTextChange
				}, null, 8, [
					"model-value",
					"disabled",
					"placeholder",
					"class"
				])], 2)) : createCommentVNode("", true)
			], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.footer) }, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.progress) }, [(openBlock(true), createElementBlock(Fragment, null, renderList(__props.questions, (_, i$1) => {
				return openBlock(), createElementBlock("div", {
					key: i$1,
					class: normalizeClass([_ctx.$style.progressDot, { [_ctx.$style.active]: i$1 <= currentIndex.value }])
				}, null, 2);
			}), 128))], 2), createBaseVNode("div", { class: normalizeClass(_ctx.$style.navigation) }, [!isFirstQuestion.value ? (openBlock(), createBlock(unref(N8nButton_default), {
				key: 0,
				variant: "subtle",
				size: "small",
				disabled: __props.disabled,
				onClick: goToPrevious
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.planMode.questions.back")), 1)]),
				_: 1
			}, 8, ["disabled"])) : (openBlock(), createElementBlock("div", _hoisted_1$2)), createVNode(unref(N8nButton_default), {
				type: isLastQuestion.value && hasValidAnswer.value ? "primary" : "secondary",
				size: "small",
				disabled: __props.disabled || isSubmitted.value,
				"data-test-id": "plan-mode-questions-next",
				onClick: goToNext
			}, {
				default: withCtx(() => [createTextVNode(toDisplayString(nextButtonLabel.value), 1)]),
				_: 1
			}, 8, ["type", "disabled"])], 2)], 2)], 2)) : createCommentVNode("", true)], 2);
		};
	}
});
var PlanQuestionsMessage_vue_vue_type_style_index_0_lang_module_default = {
	wrapper: "_wrapper_14n6a_125",
	intro: "_intro_14n6a_131",
	container: "_container_14n6a_135",
	question: "_question_14n6a_140",
	questionText: "_questionText_14n6a_144",
	options: "_options_14n6a_148",
	checkboxOption: "_checkboxOption_14n6a_165",
	selected: "_selected_14n6a_177",
	optionLabel: "_optionLabel_14n6a_181",
	otherOption: "_otherOption_14n6a_186",
	otherInput: "_otherInput_14n6a_205",
	footer: "_footer_14n6a_209",
	progress: "_progress_14n6a_217",
	progressDot: "_progressDot_14n6a_222",
	active: "_active_14n6a_229",
	navigation: "_navigation_14n6a_233"
};
var PlanQuestionsMessage_default = /* @__PURE__ */ __plugin_vue_export_helper_default(PlanQuestionsMessage_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": PlanQuestionsMessage_vue_vue_type_style_index_0_lang_module_default }]]);
var UserAnswersMessage_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "UserAnswersMessage",
	props: { answers: {} },
	setup(__props) {
		const i18n$2 = useI18n();
		function formatAnswer(answer) {
			const parts = [];
			if (answer.selectedOptions.length > 0) parts.push(answer.selectedOptions.join(", "));
			if (answer.customText?.trim()) parts.push(answer.customText.trim());
			return parts.join(", ") || i18n$2.baseText("aiAssistant.builder.planMode.answers.noAnswer");
		}
		return (_ctx, _cache) => {
			return __props.answers.length > 0 ? (openBlock(), createElementBlock("div", {
				key: 0,
				class: normalizeClass(_ctx.$style.container),
				"data-test-id": "plan-mode-user-answers"
			}, [(openBlock(true), createElementBlock(Fragment, null, renderList(__props.answers, (answer) => {
				return openBlock(), createElementBlock("div", {
					key: answer.questionId,
					class: normalizeClass(_ctx.$style.answerItem)
				}, [createVNode(unref(N8nText_default), {
					bold: true,
					class: normalizeClass(_ctx.$style.question)
				}, {
					default: withCtx(() => [createTextVNode(toDisplayString(answer.question), 1)]),
					_: 2
				}, 1032, ["class"]), answer.skipped ? (openBlock(), createBlock(unref(N8nText_default), { key: 0 }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.builder.planMode.answers.skipped")), 1)]),
					_: 1
				})) : (openBlock(), createBlock(unref(N8nText_default), { key: 1 }, {
					default: withCtx(() => [createTextVNode(toDisplayString(formatAnswer(answer)), 1)]),
					_: 2
				}, 1024))], 2);
			}), 128))], 2)) : createCommentVNode("", true);
		};
	}
});
var UserAnswersMessage_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_1vfyo_125",
	answerItem: "_answerItem_1vfyo_132",
	question: "_question_1vfyo_141"
};
var UserAnswersMessage_default = /* @__PURE__ */ __plugin_vue_export_helper_default(UserAnswersMessage_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": UserAnswersMessage_vue_vue_type_style_index_0_lang_module_default }]]);
var AskAssistantBuild_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "AskAssistantBuild",
	emits: ["close"],
	setup(__props, { expose: __expose, emit: __emit }) {
		const emit = __emit;
		const builderStore = useBuilderStore();
		const usersStore = useUsersStore();
		const workflowHistoryStore = useWorkflowHistoryStore();
		const historyStore = useHistoryStore();
		const collaborationStore = useCollaborationStore();
		const workflowAutosaveStore = useWorkflowSaveStore();
		const settingsStore = useSettingsStore();
		const telemetry$1 = useTelemetry();
		const slots = useSlots();
		const workflowsStore = useWorkflowsStore();
		const assistantStore = useAssistantStore();
		const chatPanelStateStore = useChatPanelStateStore();
		const router = useRouter();
		const i18n$2 = useI18n();
		const route = useRoute();
		const { goToUpgrade } = usePageRedirectionHelper();
		const toast = useToast();
		const { updateWorkflow } = useWorkflowUpdate();
		const { handleError } = useErrorHandler({
			source: "ai-builder",
			titleKey: "aiAssistant.builder.error.title"
		});
		const { onDocumentVisible } = useDocumentVisibility();
		const { canPrompt } = useBrowserNotifications();
		onDocumentVisible(() => {
			builderStore.clearDoneIndicatorTitle();
		});
		const processedWorkflowUpdates = ref(/* @__PURE__ */ new Set());
		const accumulatedNodeIdsToTidyUp = ref([]);
		const n8nChatRef = ref();
		const chatInputRef = ref();
		const suggestionsInputRef = ref();
		const inputText = ref("");
		const notificationsPermissionsBannerTriggered = ref(false);
		watch(() => builderStore.streaming, (isStreaming) => {
			if (isStreaming && canPrompt.value) notificationsPermissionsBannerTriggered.value = true;
		});
		const showSettingsButton = computed(() => {
			return assistantStore.canManageAISettings;
		});
		const allowSendingParameterValues = computed(() => settingsStore.settings.ai.allowSendingParameterValues);
		const shouldShowNotificationBanner = computed(() => {
			return notificationsPermissionsBannerTriggered.value && canPrompt.value;
		});
		watch(shouldShowNotificationBanner, (isShown) => {
			if (isShown) builderStore.trackWorkflowBuilderJourney("browser_notification_ask_permission");
		});
		const user$1 = computed(() => ({
			firstName: usersStore.currentUser?.firstName ?? "",
			lastName: usersStore.currentUser?.lastName ?? ""
		}));
		const loadingMessage = computed(() => {
			if (builderStore.getRunningTools(builderStore.chatMessages).length > 0) return;
			return builderStore.builderThinkingMessage;
		});
		const currentRoute = computed(() => route.name);
		const showExecuteMessage = computed(() => {
			const messages = builderStore.chatMessages;
			const builderUpdatedWorkflowMessageIndex = messages.findLastIndex((msg) => msg.type === "workflow-updated" || msg.type === "tool" && msg.toolName === "update_node_parameters");
			const messagesAfterUpdate = messages.slice(builderUpdatedWorkflowMessageIndex + 1);
			const hasErrorAfterUpdate = messagesAfterUpdate.some((msg) => msg.type === "error");
			const hasTaskAbortedAfterUpdate = messagesAfterUpdate.some((msg) => isTaskAbortedMessage(msg));
			const lastAssistantMessage = messages.findLast((msg) => msg.role === "assistant");
			const hasPendingInteraction = lastAssistantMessage && (isPlanModeQuestionsMessage(lastAssistantMessage) || isPlanModePlanMessage(lastAssistantMessage));
			return !builderStore.streaming && workflowsStore.workflow.nodes.length > 0 && builderUpdatedWorkflowMessageIndex > -1 && !hasErrorAfterUpdate && !hasTaskAbortedAfterUpdate && !hasPendingInteraction;
		});
		const creditsQuota = computed(() => builderStore.creditsQuota);
		const creditsRemaining = computed(() => builderStore.creditsRemaining);
		const showAskOwnerTooltip = computed(() => !usersStore.isInstanceOwner);
		const thinkingCompletionMessage = computed(() => builderStore.isCodeBuilder ? i18n$2.baseText("aiAssistant.builder.thinkingCompletionMessage.codeBuilder") : void 0);
		const workflowSuggestions = computed(() => {
			if (builderStore.hasMessages || workflowsStore.workflow.nodes.length > 0) return;
			return (0, import_shuffle.default)(WORKFLOW_SUGGESTIONS);
		});
		const isAutosaving = computed(() => {
			return workflowAutosaveStore.autoSaveState === AutoSaveState.Scheduled || workflowAutosaveStore.autoSaveState === AutoSaveState.InProgress;
		});
		const isInputDisabled = computed(() => {
			return collaborationStore.shouldBeReadOnly || isAutosaving.value;
		});
		const isChatInputDisabled = computed(() => {
			return isInputDisabled.value || builderStore.shouldDisableChatInput;
		});
		const disabledTooltip = computed(() => {
			if (!isChatInputDisabled.value) return;
			if (isAutosaving.value) return i18n$2.baseText("aiAssistant.builder.disabledTooltip.autosaving");
			if (collaborationStore.shouldBeReadOnly) return i18n$2.baseText("aiAssistant.builder.disabledTooltip.readOnly");
		});
		function isQuestionsAnswered(questionsMessage) {
			const messages = builderStore.chatMessages;
			const questionsIndex = messages.findIndex((m) => m.id === questionsMessage.id);
			if (questionsIndex === -1) return false;
			for (let i$1 = questionsIndex + 1; i$1 < messages.length; i$1++) if (isPlanModeUserAnswersMessage(messages[i$1])) return true;
			return false;
		}
		function isLastPlanMessage(message$2) {
			const messages = builderStore.chatMessages;
			const idx = messages.findLastIndex((m) => m.id === message$2.id);
			if (idx === -1) return false;
			return !messages.slice(idx + 1).some((m) => m.role === "user");
		}
		async function onUserMessage(content$13) {
			collaborationStore.requestWriteAccess();
			accumulatedNodeIdsToTidyUp.value = [];
			const isInitialGeneration = workflowsStore.workflow.nodes.length === 0;
			await builderStore.sendChatMessage({
				text: content$13,
				initialGeneration: isInitialGeneration
			});
		}
		async function onCustomInputSubmit() {
			if (!inputText.value.trim()) return;
			const content$13 = inputText.value;
			inputText.value = "";
			await onUserMessage(content$13);
		}
		function onNewWorkflow() {
			builderStore.resetBuilderChat();
			processedWorkflowUpdates.value.clear();
			accumulatedNodeIdsToTidyUp.value = [];
			notificationsPermissionsBannerTriggered.value = false;
		}
		function onFeedback(feedback$1) {
			if (feedback$1.rating) telemetry$1.track("User rated workflow generation", {
				helpful: feedback$1.rating === "up",
				workflow_id: workflowsStore.workflowId,
				session_id: builderStore.trackingSessionId
			});
			if (feedback$1.feedback) telemetry$1.track("User submitted workflow generation feedback", {
				feedback: feedback$1.feedback,
				workflow_id: workflowsStore.workflowId,
				session_id: builderStore.trackingSessionId,
				user_message_id: builderStore.lastUserMessageId
			});
		}
		async function onWorkflowExecuted() {
			const executionData = workflowsStore.workflowExecutionData;
			const executionStatus = executionData?.status ?? "unknown";
			const errorNodeName = executionData?.data?.resultData.lastNodeExecuted;
			const errorNodeType = errorNodeName ? workflowsStore.workflow.nodes.find((node) => node.name === errorNodeName)?.type : void 0;
			if (!executionData) {
				await builderStore.sendChatMessage({
					text: i18n$2.baseText("aiAssistant.builder.executeMessage.noExecutionData"),
					type: "execution",
					executionStatus: "error",
					errorMessage: "Workflow execution data missing after run attempt."
				});
				return;
			}
			if (executionStatus === "success") {
				await builderStore.sendChatMessage({
					text: i18n$2.baseText("aiAssistant.builder.executeMessage.executionSuccess"),
					type: "execution",
					executionStatus
				});
				return;
			}
			const executionError = executionData.data?.resultData.error?.message ?? "Unknown error";
			const scopedErrorMessage = errorNodeName ? i18n$2.baseText("aiAssistant.builder.executeMessage.executionFailedOnNode", { interpolate: {
				nodeName: errorNodeName,
				errorMessage: executionError
			} }) : i18n$2.baseText("aiAssistant.builder.executeMessage.executionFailed", { interpolate: { errorMessage: executionError } });
			const failureStatus = executionStatus === "unknown" ? "error" : executionStatus;
			await builderStore.sendChatMessage({
				text: scopedErrorMessage,
				type: "execution",
				errorMessage: executionError,
				errorNodeType,
				executionStatus: failureStatus
			});
		}
		function parseWorkflowJson(workflowJson) {
			try {
				return jsonParse(workflowJson);
			} catch (error$2) {
				handleError(error$2, {
					context: "workflow-json-parse",
					title: i18n$2.baseText("aiAssistant.builder.workflowParsingError.title"),
					message: i18n$2.baseText("aiAssistant.builder.workflowParsingError.content")
				});
				return;
			}
		}
		watch(() => builderStore.workflowMessages, async (messages) => {
			for (const msg of messages) {
				if (!msg.id || processedWorkflowUpdates.value.has(msg.id)) continue;
				if (!isWorkflowUpdatedMessage(msg)) continue;
				processedWorkflowUpdates.value.add(msg.id);
				const workflowData = parseWorkflowJson(msg.codeSnippet);
				if (!workflowData) continue;
				const result = await updateWorkflow(workflowData, {
					isInitialGeneration: builderStore.initialGeneration,
					nodeIdsToTidyUp: accumulatedNodeIdsToTidyUp.value
				});
				if (!result.success) {
					handleError(result.error, { context: "workflow-update" });
					builderStore.abortStreaming();
					return;
				}
				if (result.newNodeIds.length > 0) accumulatedNodeIdsToTidyUp.value = [...accumulatedNodeIdsToTidyUp.value, ...result.newNodeIds];
			}
		}, { deep: true });
		watch(() => builderStore.streaming, (isStreaming, wasStreaming) => {
			if (isStreaming && !wasStreaming) historyStore.startRecordingUndo();
			else if (!isStreaming && wasStreaming) historyStore.stopRecordingUndo();
		});
		watch(() => builderStore.streaming, async (isStreaming, wasStreaming) => {
			if (!wasStreaming || isStreaming) return;
			if (builderStore.initialGeneration && workflowsStore.workflow.nodes.length > 0) builderStore.initialGeneration = false;
			if (accumulatedNodeIdsToTidyUp.value.length > 0) {
				await nextTick();
				canvasEventBus.emit("fitView");
			}
		});
		async function onRestoreConfirm(versionId, messageId) {
			try {
				const updatedWorkflow = await builderStore.restoreToVersion(versionId, messageId);
				if (!updatedWorkflow) return;
				builderStore.clearExistingWorkflow();
				nodeViewEventBus.emit("importWorkflowData", {
					data: updatedWorkflow,
					tidyUp: false,
					regenerateIds: false,
					trackEvents: false,
					setStateDirty: false
				});
			} catch (e) {
				toast.showMessage({
					type: "error",
					title: i18n$2.baseText("aiAssistant.builder.restoreError.title"),
					message: e instanceof Error ? e.message : "Unknown error"
				});
			}
		}
		function onShowVersion(versionId) {
			const route$1 = router.resolve({
				name: VIEWS.WORKFLOW_HISTORY,
				params: {
					workflowId: workflowsStore.workflowId,
					versionId
				}
			});
			window.open(route$1.href, "_blank");
		}
		watch(currentRoute, () => {
			if (!builderStore.streaming) onNewWorkflow();
		});
		watch(() => chatPanelStateStore.focusRequested, () => {
			nextTick(() => {
				suggestionsInputRef.value?.focusInput() ?? chatInputRef.value?.focusInput() ?? n8nChatRef.value?.focusInput();
			});
		});
		__expose({ focusInput: () => {
			suggestionsInputRef.value?.focusInput() ?? chatInputRef.value?.focusInput() ?? n8nChatRef.value?.focusInput();
		} });
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				"data-test-id": "ask-assistant-chat",
				tabindex: "0",
				class: normalizeClass(_ctx.$style.container),
				onKeydown: _cache[4] || (_cache[4] = withModifiers(() => {}, ["stop"]))
			}, [createVNode(unref(AskAssistantChat_default$1), {
				ref_key: "n8nChatRef",
				ref: n8nChatRef,
				user: user$1.value,
				messages: unref(builderStore).chatMessages,
				streaming: unref(builderStore).streaming,
				"loading-message": loadingMessage.value,
				"thinking-completion-message": thinkingCompletionMessage.value,
				mode: unref(i18n$2).baseText("aiAssistant.builder.mode"),
				"show-stop": true,
				"scroll-on-new-message": true,
				"credits-quota": creditsQuota.value,
				"credits-remaining": creditsRemaining.value,
				"show-ask-owner-tooltip": showAskOwnerTooltip.value,
				suggestions: workflowSuggestions.value,
				"input-placeholder": unref(i18n$2).baseText("aiAssistant.builder.assistantPlaceholder"),
				"workflow-id": unref(workflowsStore).workflowId,
				"prune-time-hours": unref(workflowHistoryStore).evaluatedPruneTime,
				disabled: isChatInputDisabled.value,
				"disabled-tooltip": disabledTooltip.value,
				onClose: _cache[2] || (_cache[2] = ($event) => emit("close")),
				onMessage: onUserMessage,
				onUpgradeClick: _cache[3] || (_cache[3] = () => unref(goToUpgrade)("ai-builder-sidebar", "upgrade-builder")),
				onFeedback,
				onStop: unref(builderStore).abortStreaming,
				onRestoreConfirm,
				onShowVersion
			}, {
				"focused-nodes-chips": withCtx(({ message: message$2 }) => [createVNode(MessageFocusedNodesChips_default, { "focused-node-names": message$2.focusedNodeNames }, null, 8, ["focused-node-names"])]),
				header: withCtx(() => [createBaseVNode("div", { class: normalizeClass({
					[_ctx.$style.header]: true,
					[_ctx.$style["with-slot"]]: !!unref(slots).header
				}) }, [renderSlot(_ctx.$slots, "header", {}, void 0, true), showSettingsButton.value ? (openBlock(), createBlock(AISettingsButton_default, {
					key: 0,
					"show-usability-notice": !allowSendingParameterValues.value,
					disabled: unref(builderStore).streaming
				}, null, 8, ["show-usability-notice", "disabled"])) : createCommentVNode("", true)], 2)]),
				inputHeader: withCtx(() => [createVNode(Transition, { name: "slide" }, {
					default: withCtx(() => [shouldShowNotificationBanner.value ? (openBlock(), createBlock(NotificationPermissionBanner_default, { key: 0 })) : createCommentVNode("", true)]),
					_: 1
				})]),
				messagesFooter: withCtx(() => [showExecuteMessage.value ? (openBlock(), createBlock(ExecuteMessage_default, {
					key: 0,
					onWorkflowExecuted
				})) : createCommentVNode("", true)]),
				placeholder: withCtx(() => [createVNode(BuildModeEmptyState_default)]),
				"custom-message": withCtx(({ message: message$2 }) => [unref(isPlanModeQuestionsMessage)(message$2) ? (openBlock(), createBlock(PlanQuestionsMessage_default, {
					key: 0,
					questions: message$2.data.questions,
					"intro-message": message$2.data.introMessage,
					disabled: unref(builderStore).streaming,
					answered: isQuestionsAnswered(message$2),
					onSubmit: unref(builderStore).resumeWithQuestionsAnswers
				}, null, 8, [
					"questions",
					"intro-message",
					"disabled",
					"answered",
					"onSubmit"
				])) : unref(isPlanModePlanMessage)(message$2) ? (openBlock(), createBlock(PlanDisplayMessage_default, {
					key: 1,
					message: message$2,
					disabled: unref(builderStore).streaming,
					"show-actions": isLastPlanMessage(message$2),
					onDecision: unref(builderStore).resumeWithPlanDecision
				}, null, 8, [
					"message",
					"disabled",
					"show-actions",
					"onDecision"
				])) : unref(isPlanModeUserAnswersMessage)(message$2) ? (openBlock(), createBlock(UserAnswersMessage_default, {
					key: 2,
					answers: message$2.data.answers
				}, null, 8, ["answers"])) : createCommentVNode("", true)]),
				"suggestions-input": withCtx(({ modelValue, onUpdateModelValue, placeholder, disabled: slotDisabled, disabledTooltip: slotDisabledTooltip, streaming: slotStreaming, creditsQuota: slotCreditsQuota, creditsRemaining: slotCreditsRemaining, showAskOwnerTooltip: slotShowAskOwnerTooltip, onSubmit, onStop, onUpgradeClick, registerFocus }) => [createVNode(ChatInputWithMention_default, {
					ref_key: "suggestionsInputRef",
					ref: suggestionsInputRef,
					"model-value": modelValue,
					placeholder,
					disabled: slotDisabled,
					"disabled-tooltip": slotDisabledTooltip,
					streaming: slotStreaming,
					"credits-quota": slotCreditsQuota,
					"credits-remaining": slotCreditsRemaining,
					"show-ask-owner-tooltip": slotShowAskOwnerTooltip,
					"onUpdate:modelValue": onUpdateModelValue,
					onSubmit,
					onStop,
					onUpgradeClick,
					onVnodeMounted: ($event) => registerFocus(() => suggestionsInputRef.value?.focusInput())
				}, createSlots({ _: 2 }, [unref(builderStore).isPlanModeAvailable ? {
					name: "extra-actions",
					fn: withCtx(() => [createVNode(PlanModeSelector_default, {
						"model-value": unref(builderStore).builderMode,
						"onUpdate:modelValue": unref(builderStore).setBuilderMode
					}, null, 8, ["model-value", "onUpdate:modelValue"])]),
					key: "0"
				} : void 0]), 1032, [
					"model-value",
					"placeholder",
					"disabled",
					"disabled-tooltip",
					"streaming",
					"credits-quota",
					"credits-remaining",
					"show-ask-owner-tooltip",
					"onUpdate:modelValue",
					"onSubmit",
					"onStop",
					"onUpgradeClick",
					"onVnodeMounted"
				])]),
				inputPlaceholder: withCtx(() => [createVNode(ChatInputWithMention_default, {
					ref_key: "chatInputRef",
					ref: chatInputRef,
					modelValue: inputText.value,
					"onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => inputText.value = $event),
					placeholder: unref(i18n$2).baseText("aiAssistant.builder.assistantPlaceholder"),
					disabled: isInputDisabled.value,
					"disabled-tooltip": disabledTooltip.value,
					streaming: unref(builderStore).streaming,
					"credits-quota": creditsQuota.value,
					"credits-remaining": creditsRemaining.value,
					"show-ask-owner-tooltip": showAskOwnerTooltip.value,
					onSubmit: onCustomInputSubmit,
					onStop: unref(builderStore).abortStreaming,
					onUpgradeClick: _cache[1] || (_cache[1] = () => unref(goToUpgrade)("ai-builder-sidebar", "upgrade-builder"))
				}, createSlots({ _: 2 }, [unref(builderStore).isPlanModeAvailable ? {
					name: "extra-actions",
					fn: withCtx(() => [createVNode(PlanModeSelector_default, {
						"model-value": unref(builderStore).builderMode,
						"onUpdate:modelValue": unref(builderStore).setBuilderMode
					}, null, 8, ["model-value", "onUpdate:modelValue"])]),
					key: "0"
				} : void 0]), 1032, [
					"modelValue",
					"placeholder",
					"disabled",
					"disabled-tooltip",
					"streaming",
					"credits-quota",
					"credits-remaining",
					"show-ask-owner-tooltip",
					"onStop"
				])]),
				_: 3
			}, 8, [
				"user",
				"messages",
				"streaming",
				"loading-message",
				"thinking-completion-message",
				"mode",
				"credits-quota",
				"credits-remaining",
				"show-ask-owner-tooltip",
				"suggestions",
				"input-placeholder",
				"workflow-id",
				"prune-time-hours",
				"disabled",
				"disabled-tooltip",
				"onStop"
			])], 34);
		};
	}
});
const container$1 = "_container_vqbbm_125";
const header$1 = "_header_vqbbm_130";
const newWorkflowButtonWrapper = "_newWorkflowButtonWrapper_vqbbm_140";
const newWorkflowText = "_newWorkflowText_vqbbm_150";
var AskAssistantBuild_vue_vue_type_style_index_1_lang_module_default = {
	container: container$1,
	header: header$1,
	"with-slot": "_with-slot_vqbbm_136",
	newWorkflowButtonWrapper,
	newWorkflowText
};
var AskAssistantBuild_default = /* @__PURE__ */ __plugin_vue_export_helper_default(AskAssistantBuild_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": AskAssistantBuild_vue_vue_type_style_index_1_lang_module_default }], ["__scopeId", "data-v-a353f097"]]);
var AskModeEmptyState_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "AskModeEmptyState",
	setup(__props) {
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", { class: normalizeClass(_ctx.$style.container) }, [
				createVNode(unref(N8nIcon_default), {
					icon: "lightbulb",
					class: normalizeClass(_ctx.$style.icon)
				}, null, 8, ["class"]),
				createBaseVNode("h3", { class: normalizeClass(_ctx.$style.title) }, toDisplayString(unref(i18n$2).baseText("aiAssistant.askMode.emptyState.title")), 3),
				createBaseVNode("p", { class: normalizeClass(_ctx.$style.body) }, toDisplayString(unref(i18n$2).baseText("aiAssistant.askMode.emptyState.body1")), 3),
				createBaseVNode("p", { class: normalizeClass(_ctx.$style.body) }, [
					createTextVNode(toDisplayString(unref(i18n$2).baseText("aiAssistant.askMode.emptyState.body2")) + " ", 1),
					createVNode(unref(InlineAskAssistantButton_default), {
						size: "small",
						static: true,
						class: normalizeClass(_ctx.$style.inlineButton)
					}, null, 8, ["class"]),
					createTextVNode(" " + toDisplayString(unref(i18n$2).baseText("aiAssistant.askMode.emptyState.body3")), 1)
				], 2)
			], 2);
		};
	}
});
var AskModeEmptyState_vue_vue_type_style_index_0_lang_module_default = {
	container: "_container_18k35_125",
	icon: "_icon_18k35_133",
	title: "_title_18k35_139",
	body: "_body_18k35_147",
	inlineButton: "_inlineButton_18k35_155"
};
var AskModeEmptyState_default = /* @__PURE__ */ __plugin_vue_export_helper_default(AskModeEmptyState_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": AskModeEmptyState_vue_vue_type_style_index_0_lang_module_default }]]);
var AskAssistantChat_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "AskAssistantChat",
	emits: ["close"],
	setup(__props, { expose: __expose, emit: __emit }) {
		const emit = __emit;
		const assistantStore = useAssistantStore();
		const workflowState = injectWorkflowState();
		const usersStore = useUsersStore();
		const settingsStore = useSettingsStore();
		const telemetry$1 = useTelemetry();
		const slots = useSlots();
		const i18n$2 = useI18n();
		const n8nChatRef = ref();
		const allowSendingParameterValues = computed(() => settingsStore.settings.ai.allowSendingParameterValues);
		const user$1 = computed(() => ({
			firstName: usersStore.currentUser?.firstName ?? "",
			lastName: usersStore.currentUser?.lastName ?? ""
		}));
		const loadingMessage = computed(() => assistantStore.assistantThinkingMessage);
		const showSettingsButton = computed(() => {
			return assistantStore.canManageAISettings;
		});
		async function onUserMessage(content$13, quickReplyType, isFeedback = false) {
			if (!assistantStore.currentSessionId) await assistantStore.initSupportChat(content$13);
			else await assistantStore.sendMessage({
				text: content$13,
				quickReplyType
			});
			const task = assistantStore.chatSessionTask;
			const solutionCount = assistantStore.chatMessages.filter((msg) => msg.role === "assistant" && !["text", "event"].includes(msg.type)).length;
			if (isFeedback) telemetry$1.track("User gave feedback", {
				task,
				chat_session_id: assistantStore.currentSessionId,
				is_quick_reply: !!quickReplyType,
				is_positive: quickReplyType === "all-good",
				solution_count: solutionCount,
				response: content$13
			});
		}
		async function onCodeReplace(index) {
			await assistantStore.applyCodeDiff(workflowState, index);
			telemetry$1.track("User clicked solution card action", { action: "replace_code" });
		}
		async function undoCodeDiff(index) {
			await assistantStore.undoCodeDiff(workflowState, index);
			telemetry$1.track("User clicked solution card action", { action: "undo_code_replace" });
		}
		__expose({ focusInput: () => {
			n8nChatRef.value?.focusInput();
		} });
		return (_ctx, _cache) => {
			return openBlock(), createElementBlock("div", {
				"data-test-id": "ask-assistant-chat",
				tabindex: "0",
				class: normalizeClass(_ctx.$style.wrapper),
				onKeydown: _cache[1] || (_cache[1] = withModifiers(() => {}, ["stop"]))
			}, [createVNode(unref(AskAssistantChat_default$1), {
				ref_key: "n8nChatRef",
				ref: n8nChatRef,
				user: user$1.value,
				messages: unref(assistantStore).chatMessages,
				streaming: unref(assistantStore).streaming,
				"loading-message": loadingMessage.value,
				"session-id": unref(assistantStore).currentSessionId,
				"input-placeholder": unref(i18n$2).baseText("aiAssistant.askMode.inputPlaceholder"),
				onClose: _cache[0] || (_cache[0] = ($event) => emit("close")),
				onMessage: onUserMessage,
				onCodeReplace,
				onCodeUndo: undoCodeDiff
			}, {
				header: withCtx(() => [createBaseVNode("div", { class: normalizeClass({
					[_ctx.$style.header]: true,
					[_ctx.$style["with-slot"]]: !!unref(slots).header
				}) }, [renderSlot(_ctx.$slots, "header"), showSettingsButton.value ? (openBlock(), createBlock(AISettingsButton_default, {
					key: 0,
					"show-usability-notice": !allowSendingParameterValues.value,
					disabled: unref(assistantStore).streaming
				}, null, 8, ["show-usability-notice", "disabled"])) : createCommentVNode("", true)], 2)]),
				placeholder: withCtx(() => [createVNode(AskModeEmptyState_default)]),
				_: 3
			}, 8, [
				"user",
				"messages",
				"streaming",
				"loading-message",
				"session-id",
				"input-placeholder"
			])], 34);
		};
	}
});
var AskAssistantChat_vue_vue_type_style_index_0_lang_module_default = {
	wrapper: "_wrapper_1692g_125",
	header: "_header_1692g_130",
	"with-slot": "_with-slot_1692g_136"
};
var AskAssistantChat_default = /* @__PURE__ */ __plugin_vue_export_helper_default(AskAssistantChat_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": AskAssistantChat_vue_vue_type_style_index_0_lang_module_default }]]);
var _hoisted_1$1 = { class: "ask-mode-coachmark__header" };
var _hoisted_2 = { class: "ask-mode-coachmark__title" };
var _hoisted_3 = { class: "ask-mode-coachmark__body" };
var _hoisted_4 = { class: "ask-mode-coachmark__footer" };
var AskModeCoachmark_default = /* @__PURE__ */ defineComponent({
	__name: "AskModeCoachmark",
	props: { visible: { type: Boolean } },
	emits: ["dismiss"],
	setup(__props, { emit: __emit }) {
		const emit = __emit;
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(N8nPopover_default), {
				open: __props.visible,
				"show-arrow": true,
				"enable-scrolling": false,
				"suppress-auto-focus": true,
				side: "bottom",
				align: "center",
				"side-offset": 8,
				"z-index": 2200,
				"content-class": "ask-mode-coachmark"
			}, {
				trigger: withCtx(() => [renderSlot(_ctx.$slots, "default")]),
				content: withCtx(() => [
					createBaseVNode("div", _hoisted_1$1, [createBaseVNode("span", _hoisted_2, toDisplayString(unref(i18n$2).baseText("aiAssistant.coachmark.title")), 1)]),
					createBaseVNode("p", _hoisted_3, toDisplayString(unref(i18n$2).baseText("aiAssistant.coachmark.body")), 1),
					createBaseVNode("div", _hoisted_4, [createVNode(unref(N8nButton_default), {
						size: "small",
						label: unref(i18n$2).baseText("aiAssistant.coachmark.gotIt"),
						class: "ask-mode-coachmark__button",
						onClick: _cache[0] || (_cache[0] = ($event) => emit("dismiss"))
					}, null, 8, ["label"])])
				]),
				_: 3
			}, 8, ["open"]);
		};
	}
});
const ASK_MODE_COACHMARK_KEY = "ask-mode-coachmark";
var isBuilderEnabledView = (name$3) => typeof name$3 === "string" && BUILDER_ENABLED_VIEWS.includes(name$3);
function useAskModeCoachmark() {
	const chatPanelStore = useChatPanelStore();
	const builderStore = useBuilderStore();
	const settingsStore = useSettingsStore();
	const route = useRoute();
	const { isCalloutDismissed, dismissCallout } = useCalloutHelpers();
	const isBuildMode = computed(() => chatPanelStore.isBuilderModeActive);
	const canToggleModes = computed(() => {
		return settingsStore.isAiAssistantEnabled && builderStore.isAIBuilderEnabled && isBuilderEnabledView(route?.name);
	});
	const shouldShowCoachmark = computed(() => {
		return Boolean(chatPanelStore.isOpen && !isBuildMode.value && chatPanelStore.showCoachmark && canToggleModes.value && !isCalloutDismissed("ask-mode-coachmark"));
	});
	async function onDismissCoachmark() {
		await dismissCallout(ASK_MODE_COACHMARK_KEY);
	}
	return {
		isBuildMode,
		canToggleModes,
		shouldShowCoachmark,
		onDismissCoachmark
	};
}
var HubSwitcher_default = /* @__PURE__ */ defineComponent({
	__name: "HubSwitcher",
	props: {
		isBuildMode: { type: Boolean },
		disabled: {
			type: Boolean,
			default: false
		}
	},
	emits: ["toggle"],
	setup(__props, { emit: __emit }) {
		const props = __props;
		const emit = __emit;
		const i18n$2 = useI18n();
		const options$1 = computed(() => [{
			label: i18n$2.baseText("aiAssistant.tabs.ask"),
			value: false
		}, {
			label: i18n$2.baseText("aiAssistant.tabs.build"),
			value: true
		}]);
		function toggle(value) {
			emit("toggle", value);
		}
		return (_ctx, _cache) => {
			return openBlock(), createBlock(unref(N8nTooltip_default), {
				content: unref(i18n$2).baseText("aiAssistant.tabs.builder.disabled.tooltip"),
				disabled: !props.disabled
			}, {
				default: withCtx(() => [createVNode(unref(N8nRadioButtons_default), {
					size: "small",
					"model-value": props.isBuildMode,
					options: options$1.value,
					disabled: props.disabled,
					"onUpdate:modelValue": toggle
				}, null, 8, [
					"model-value",
					"options",
					"disabled"
				])]),
				_: 1
			}, 8, ["content", "disabled"]);
		};
	}
});
var AssistantsHub_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "AssistantsHub",
	setup(__props) {
		const builderStore = useBuilderStore();
		const assistantStore = useAssistantStore();
		const chatPanelStore = useChatPanelStore();
		const settingsStore = useSettingsStore();
		const { isBuildMode, canToggleModes, shouldShowCoachmark, onDismissCoachmark } = useAskModeCoachmark();
		const slideAnimationComplete = ref(false);
		const canShowCoachmark = computed(() => shouldShowCoachmark.value && slideAnimationComplete.value);
		watch(() => chatPanelStore.isOpen, (isOpen) => {
			if (!isOpen) slideAnimationComplete.value = false;
		});
		const askAssistantBuildRef = ref();
		const askAssistantChatRef = ref();
		const chatWidth = computed(() => chatPanelStore.width);
		function onResize(data) {
			chatPanelStore.updateWidth(data.width);
		}
		function onResizeDebounced(data) {
			useDebounce().callDebounced(onResize, {
				debounceTime: 10,
				trailing: true
			}, data);
		}
		async function toggleAssistantMode() {
			const wasOpen = chatPanelStore.isOpen;
			const switchingToBuild = !isBuildMode.value;
			const newMode = switchingToBuild ? "builder" : "assistant";
			if (wasOpen) {
				if (switchingToBuild) {
					if (builderStore.chatMessages.length === 0) {
						await builderStore.fetchBuilderCredits();
						await builderStore.loadSessions();
					}
				}
				chatPanelStore.switchMode(newMode);
			} else if (switchingToBuild) await chatPanelStore.open({ mode: "builder" });
			else await chatPanelStore.open({ mode: "assistant" });
		}
		function onClose() {
			chatPanelStore.close();
		}
		function onSlideEnterComplete() {
			slideAnimationComplete.value = true;
			if (isBuildMode.value) askAssistantBuildRef.value?.focusInput();
			else askAssistantChatRef.value?.focusInput();
		}
		const unsubscribeAssistantStore = assistantStore.$onAction(({ name: name$3 }) => {
			if (["initErrorHelper", "initCredHelp"].includes(name$3)) chatPanelStore.switchMode("assistant");
		});
		const unsubscribeBuilderStore = builderStore.$onAction(({ name: name$3 }) => {
			if (["sendChatMessage"].includes(name$3)) chatPanelStore.switchMode("builder");
		});
		onMounted(() => {
			if (!canToggleModes.value) {
				if (builderStore.isAIBuilderEnabled) chatPanelStore.switchMode("builder");
				else if (settingsStore.isAiAssistantEnabled) chatPanelStore.switchMode("assistant");
			}
		});
		onBeforeUnmount(() => {
			unsubscribeAssistantStore();
			unsubscribeBuilderStore();
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(SlideTransition_default, { onAfterEnter: onSlideEnterComplete }, {
				default: withCtx(() => [withDirectives(createVNode(unref(N8nResizeWrapper_default), {
					"supported-directions": ["left"],
					width: chatWidth.value,
					"min-width": unref(chatPanelStore).MIN_CHAT_WIDTH,
					"max-width": unref(chatPanelStore).MAX_CHAT_WIDTH,
					class: normalizeClass(_ctx.$style.resizeWrapper),
					"data-test-id": "ask-assistant-sidebar",
					onResize: onResizeDebounced
				}, {
					default: withCtx(() => [createBaseVNode("div", {
						style: normalizeStyle({ width: `${chatWidth.value}px` }),
						class: normalizeClass(_ctx.$style.wrapper)
					}, [createBaseVNode("div", { class: normalizeClass(_ctx.$style.assistantContent) }, [unref(isBuildMode) ? (openBlock(), createBlock(AskAssistantBuild_default, {
						key: 0,
						ref_key: "askAssistantBuildRef",
						ref: askAssistantBuildRef,
						onClose
					}, createSlots({ _: 2 }, [unref(canToggleModes) ? {
						name: "header",
						fn: withCtx(() => [createVNode(HubSwitcher_default, {
							"is-build-mode": unref(isBuildMode),
							onToggle: toggleAssistantMode
						}, null, 8, ["is-build-mode"])]),
						key: "0"
					} : void 0]), 1536)) : (openBlock(), createBlock(AskAssistantChat_default, {
						key: 1,
						ref_key: "askAssistantChatRef",
						ref: askAssistantChatRef,
						onClose
					}, createSlots({ _: 2 }, [unref(canToggleModes) ? {
						name: "header",
						fn: withCtx(() => [createVNode(AskModeCoachmark_default, {
							visible: canShowCoachmark.value,
							onDismiss: unref(onDismissCoachmark)
						}, {
							default: withCtx(() => [createVNode(HubSwitcher_default, {
								"is-build-mode": unref(isBuildMode),
								onToggle: toggleAssistantMode
							}, null, 8, ["is-build-mode"])]),
							_: 1
						}, 8, ["visible", "onDismiss"])]),
						key: "0"
					} : void 0]), 1536))], 2)], 6)]),
					_: 1
				}, 8, [
					"width",
					"min-width",
					"max-width",
					"class"
				]), [[vShow, unref(chatPanelStore).isOpen]])]),
				_: 1
			});
		};
	}
});
var AssistantsHub_vue_vue_type_style_index_0_lang_module_default = {
	resizeWrapper: "_resizeWrapper_nk2fr_125",
	wrapper: "_wrapper_nk2fr_129",
	assistantContent: "_assistantContent_nk2fr_135"
};
var AssistantsHub_default = /* @__PURE__ */ __plugin_vue_export_helper_default(AssistantsHub_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": AssistantsHub_vue_vue_type_style_index_0_lang_module_default }]]);
var AppChatPanel_default = /* @__PURE__ */ defineComponent({
	__name: "AppChatPanel",
	props: { layoutRef: {} },
	setup(__props) {
		const props = __props;
		const chatPanelStore = useChatPanelStore();
		const uiStore = useUIStore();
		const chatPanelWidth = computed(() => chatPanelStore.width);
		const updateGridWidth = async () => {
			await nextTick();
			if (props.layoutRef) {
				const { width, height } = props.layoutRef.getBoundingClientRect();
				uiStore.appGridDimensions = {
					width,
					height
				};
			}
		};
		onMounted(async () => {
			window.addEventListener("resize", updateGridWidth);
			await updateGridWidth();
		});
		onBeforeUnmount(() => {
			window.removeEventListener("resize", updateGridWidth);
		});
		watch(chatPanelWidth, async () => {
			await updateGridWidth();
		});
		return (_ctx, _cache) => {
			return openBlock(), createBlock(AssistantsHub_default);
		};
	}
});
var ELEMENT_UI_OVERLAY_SELECTOR = ".el-overlay";
function useHistoryHelper(activeRoute) {
	const telemetry$1 = useTelemetry();
	const ndvStore = useNDVStore();
	const historyStore = useHistoryStore();
	const uiStore = useUIStore();
	const { isCtrlKeyPressed } = useDeviceSupport();
	const undo = async () => {
		const command = historyStore.popUndoableToUndo();
		if (!command) return;
		const timestamp = Date.now();
		if (command instanceof BulkCommand) {
			historyStore.bulkInProgress = true;
			const commands = command.commands;
			const reverseCommands = [];
			for (let i$1 = commands.length - 1; i$1 >= 0; i$1--) {
				await commands[i$1].revert();
				reverseCommands.push(commands[i$1].getReverseCommand(timestamp));
			}
			historyStore.pushUndoableToRedo(new BulkCommand(reverseCommands));
			await nextTick();
			historyStore.bulkInProgress = false;
		}
		if (command instanceof Command) {
			await command.revert();
			historyStore.pushUndoableToRedo(command.getReverseCommand(timestamp));
			uiStore.markStateDirty();
		}
		trackCommand(command, "undo");
	};
	const redo = async () => {
		const command = historyStore.popUndoableToRedo();
		if (!command) return;
		const timestamp = Date.now();
		if (command instanceof BulkCommand) {
			historyStore.bulkInProgress = true;
			const commands = command.commands;
			const reverseCommands = [];
			for (let i$1 = commands.length - 1; i$1 >= 0; i$1--) {
				await commands[i$1].revert();
				reverseCommands.push(commands[i$1].getReverseCommand(timestamp));
			}
			historyStore.pushBulkCommandToUndo(new BulkCommand(reverseCommands), false);
			await nextTick();
			historyStore.bulkInProgress = false;
		}
		if (command instanceof Command) {
			await command.revert();
			historyStore.pushCommandToUndo(command.getReverseCommand(timestamp), false);
			uiStore.markStateDirty();
		}
		trackCommand(command, "redo");
	};
	function trackCommand(command, type) {
		if (command instanceof Command) telemetry$1.track(`User hit ${type}`, {
			commands_length: 1,
			commands: [command.name]
		});
		else if (command instanceof BulkCommand) telemetry$1.track(`User hit ${type}`, {
			commands_length: command.commands.length,
			commands: command.commands.map((c$1) => c$1.name)
		});
	}
	function trackUndoAttempt() {
		const activeNode = ndvStore.activeNode;
		if (activeNode) telemetry$1?.track("User hit undo in NDV", { node_type: activeNode.type });
	}
	function isMessageDialogOpen() {
		return document.querySelector(`${ELEMENT_UI_OVERLAY_SELECTOR}:not([style*="display: none"])`) !== null;
	}
	function handleKeyDown(event) {
		const currentNodeViewTab = getNodeViewTab(activeRoute);
		const isNDVOpen = ndvStore.isNDVOpen;
		const isAnyModalOpen = uiStore.isAnyModalOpen || isMessageDialogOpen();
		const undoKeysPressed = isCtrlKeyPressed(event) && event.key.toLowerCase() === "z";
		if (event.repeat || currentNodeViewTab !== MAIN_HEADER_TABS.WORKFLOW || event.target instanceof HTMLElement && shouldIgnoreCanvasShortcut(event.target)) return;
		if (isNDVOpen || isAnyModalOpen) {
			if (isNDVOpen && undoKeysPressed && !event.shiftKey) trackUndoAttempt();
			return;
		}
		if (undoKeysPressed) {
			event.preventDefault();
			if (event.shiftKey) redo();
			else undo();
		}
	}
	onMounted(() => {
		document.addEventListener("keydown", handleKeyDown);
	});
	onUnmounted(() => {
		document.removeEventListener("keydown", handleKeyDown);
	});
	return {
		undo,
		redo
	};
}
var HEALTH_CHECK_INTERVAL = 1e4;
var HEALTH_CHECK_TIMEOUT = 5e3;
function useBackendStatus() {
	const backendConnectionStore = useBackendConnectionStore();
	const settingsStore = useSettingsStore();
	const checking = ref(false);
	async function checkBackendConnection() {
		if (!settingsStore.endpointHealth) return true;
		const controller = new AbortController();
		const timeoutId = setTimeout(() => controller.abort(), HEALTH_CHECK_TIMEOUT);
		try {
			return (await fetch(settingsStore.endpointHealth, {
				cache: "no-store",
				signal: controller.signal
			})).ok;
		} catch {
			return false;
		} finally {
			clearTimeout(timeoutId);
		}
	}
	async function updateOnlineStatus() {
		if (checking.value) return;
		checking.value = true;
		try {
			const isConnected = await checkBackendConnection();
			backendConnectionStore.setOnline(isConnected);
		} finally {
			checking.value = false;
		}
	}
	const { startHeartbeat, stopHeartbeat } = useHeartbeat({
		interval: HEALTH_CHECK_INTERVAL,
		onHeartbeat: () => {
			updateOnlineStatus();
		}
	});
	onMounted(() => {
		updateOnlineStatus();
		startHeartbeat();
	});
	onUnmounted(() => {
		stopHeartbeat();
	});
	return { isOnline: backendConnectionStore.isOnline };
}
function useTelemetryInitializer() {
	const isTelemetryInitialized = ref(false);
	const rootStore = useRootStore();
	const settingsStore = useSettingsStore();
	const usersStore = useUsersStore();
	const projectsStore = useProjectsStore();
	const telemetryPlugin = useTelemetry();
	const route = useRoute();
	const currentUserId = computed(() => {
		return usersStore.currentUserId ?? "";
	});
	const isTelemetryEnabledOnRoute = computed(() => {
		const routeMeta = route.meta;
		return routeMeta?.telemetry ? !routeMeta.telemetry.disabled : true;
	});
	const telemetry$1 = computed(() => {
		return settingsStore.telemetry;
	});
	const isTelemetryEnabled = computed(() => {
		return !!telemetry$1.value?.enabled;
	});
	function init$2() {
		if (isTelemetryInitialized.value || !isTelemetryEnabledOnRoute.value || !isTelemetryEnabled.value) return;
		telemetryPlugin.init(telemetry$1.value, {
			instanceId: rootStore.instanceId,
			userId: currentUserId.value,
			projectId: projectsStore.personalProject?.id,
			versionCli: rootStore.versionCli
		});
		isTelemetryInitialized.value = true;
	}
	watch(telemetry$1, () => {
		init$2();
	});
	watch(isTelemetryEnabledOnRoute, (enabled) => {
		if (enabled) init$2();
	});
	onMounted(() => {
		init$2();
	});
}
function useWorkflowDiffRouting() {
	const route = useRoute();
	const uiStore = useUIStore();
	const workflowDiffEventBus = createEventBus();
	const closeModal = (modalKey) => {
		if (uiStore.modalsById[modalKey]?.open) uiStore.closeModal(modalKey);
	};
	const reopenSourceControlModal = (direction, preserveData = false) => {
		const modalKey = direction === "push" ? SOURCE_CONTROL_PUSH_MODAL_KEY : SOURCE_CONTROL_PULL_MODAL_KEY;
		const modalData = preserveData && uiStore.modalsById[modalKey]?.data?.eventBus ? uiStore.modalsById[modalKey].data : { eventBus: createEventBus() };
		uiStore.openModalWithData({
			name: modalKey,
			data: modalData
		});
	};
	const handleDiffModal = (diffWorkflowId, diffWorkflowStatus, direction) => {
		const shouldOpen = diffWorkflowId && direction;
		const isOpen = uiStore.modalsById[WORKFLOW_DIFF_MODAL_KEY]?.open;
		if (shouldOpen && !isOpen) uiStore.openModalWithData({
			name: WORKFLOW_DIFF_MODAL_KEY,
			data: {
				eventBus: workflowDiffEventBus,
				workflowId: diffWorkflowId,
				workflowStatus: diffWorkflowStatus,
				direction
			}
		});
		else if (!shouldOpen && isOpen) uiStore.closeModal(WORKFLOW_DIFF_MODAL_KEY);
	};
	const handleSourceControlModals = (sourceControl, diffWorkflowId, direction) => {
		if (sourceControl && !diffWorkflowId) {
			const modalKey = sourceControl === "push" ? SOURCE_CONTROL_PUSH_MODAL_KEY : SOURCE_CONTROL_PULL_MODAL_KEY;
			if (!uiStore.modalsById[modalKey]?.open) reopenSourceControlModal(sourceControl);
			return;
		}
		if (direction && !diffWorkflowId && !sourceControl) {
			const modalKey = direction === "push" ? SOURCE_CONTROL_PUSH_MODAL_KEY : SOURCE_CONTROL_PULL_MODAL_KEY;
			if (!uiStore.modalsById[modalKey]?.open) reopenSourceControlModal(direction, true);
			return;
		}
		if (!sourceControl && !diffWorkflowId) {
			closeModal(SOURCE_CONTROL_PUSH_MODAL_KEY);
			closeModal(SOURCE_CONTROL_PULL_MODAL_KEY);
		}
	};
	const handleRouteChange = () => {
		const diffWorkflowId = typeof route.query.diff === "string" ? route.query.diff : void 0;
		const diffWorkflowStatus = diffWorkflowId && isSourceControlledFileStatus(route.query.workflowStatus) ? route.query.workflowStatus : void 0;
		const direction = typeof route.query.direction === "string" && (route.query.direction === "push" || route.query.direction === "pull") ? route.query.direction : void 0;
		const sourceControl = typeof route.query.sourceControl === "string" && (route.query.sourceControl === "push" || route.query.sourceControl === "pull") ? route.query.sourceControl : void 0;
		handleDiffModal(diffWorkflowId, diffWorkflowStatus, direction);
		handleSourceControlModals(sourceControl, diffWorkflowId, direction);
	};
	watch(() => [
		route.query.diff,
		route.query.direction,
		route.query.sourceControl
	], handleRouteChange, { immediate: true });
	handleRouteChange();
	return { workflowDiffEventBus };
}
function useExposeCssVar(name$3, value) {
	const originalValue = document.documentElement.style.getPropertyValue(name$3);
	const variable = useCssVar(name$3);
	watch(() => toValue(value), (latest) => {
		variable.value = latest;
	}, { immediate: true });
	onBeforeUnmount(() => {
		document.documentElement.style.setProperty(name$3, originalValue ?? null);
	});
}
var ASSISTANT_FLOATING_BUTTON_SIZE = 42;
function useFloatingUiOffsets() {
	const assistantStore = useAssistantStore();
	const ndvStore = useNDVStore();
	const logsStore = useLogsStore();
	const isNDVV2 = computed(() => true);
	const askAiOffset = computed(() => ndvStore.isNDVOpen && !isNDVV2.value ? 48 : 16);
	return {
		askAiFloatingButtonBottomOffset: computed(() => `${askAiOffset.value}px`),
		toastBottomOffset: computed(() => {
			return `${(ndvStore.isNDVOpen ? 0 : logsStore.height) + (assistantStore.isFloatingButtonShown ? ASSISTANT_FLOATING_BUTTON_SIZE + askAiOffset.value : 0)}px`;
		})
	};
}
var _hoisted_1 = ["id"];
var App_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
	__name: "App",
	setup(__props) {
		const route = useRoute();
		const rootStore = useRootStore();
		const settingsStore = useSettingsStore();
		const ndvStore = useNDVStore();
		const { setAppZIndexes } = useStyles();
		const { toastBottomOffset, askAiFloatingButtonBottomOffset } = useFloatingUiOffsets();
		useHistoryHelper(route);
		useWorkflowDiffRouting();
		useTelemetryInitializer();
		useBackendStatus();
		const loading$2 = ref(true);
		const defaultLocale = computed(() => rootStore.defaultLocale);
		const isDemoMode = computed(() => route.name === VIEWS.DEMO);
		const hasContentFooter = ref(false);
		useTelemetryContext({ ndv_source: computed(() => ndvStore.lastSetActiveNodeSource) });
		onMounted(async () => {
			setAppZIndexes();
			logHiringBanner();
			loading$2.value = false;
		});
		const logHiringBanner = () => {
			if (settingsStore.isHiringBannerEnabled && !isDemoMode.value) console.log(HIRING_BANNER);
		};
		watch(route, (r) => {
			hasContentFooter.value = r.matched.some((matchedRoute) => matchedRoute.components?.footer !== void 0);
		});
		watch(defaultLocale, async (newLocale) => {
			setLanguage(newLocale);
			axios_default.defaults.headers.common["Accept-Language"] = newLocale;
			use(newLocale);
		}, { immediate: true });
		const layoutRef = ref(null);
		const setLayoutRef = (el) => {
			layoutRef.value = el;
		};
		useExposeCssVar("--toast--offset", toastBottomOffset);
		useExposeCssVar("--ask-assistant--floating-button--margin-bottom", askAiFloatingButtonBottomOffset);
		return (_ctx, _cache) => {
			const _component_RouterView = resolveComponent("RouterView");
			return loading$2.value ? (openBlock(), createBlock(LoadingView_default, { key: 0 })) : (openBlock(), createBlock(BaseLayout_default, {
				key: 1,
				id: "n8n-app",
				class: normalizeClass(_ctx.$style.app)
			}, {
				banners: withCtx(() => [createVNode(AppBanners_default)]),
				aside: withCtx(() => [layoutRef.value ? (openBlock(), createBlock(AppChatPanel_default, {
					key: 0,
					"layout-ref": layoutRef.value
				}, null, 8, ["layout-ref"])) : createCommentVNode("", true)]),
				default: withCtx(() => [
					createVNode(AppLayout_default, { onMounted: setLayoutRef }, {
						default: withCtx(() => [createVNode(_component_RouterView)]),
						_: 1
					}),
					createVNode(AppModals_default),
					createVNode(AppCommandBar_default),
					createBaseVNode("div", { id: unref(CODEMIRROR_TOOLTIP_CONTAINER_ELEMENT_ID) }, null, 8, _hoisted_1)
				]),
				_: 1
			}, 8, ["class"]));
		};
	}
});
var App_vue_vue_type_style_index_0_lang_module_default = { app: "_app_1lj2z_125" };
var App_default = /* @__PURE__ */ __plugin_vue_export_helper_default(App_vue_vue_type_script_setup_true_lang_default, [["__cssModules", { "$style": App_vue_vue_type_style_index_0_lang_module_default }]]);
(/* @__PURE__ */ __commonJSMin(((exports, module) => {
	var runtime = function(exports) {
		"use strict";
		var Op = Object.prototype;
		var hasOwn = Op.hasOwnProperty;
		var defineProperty = Object.defineProperty || function(obj, key, desc) {
			obj[key] = desc.value;
		};
		var undefined$1;
		var $Symbol = typeof Symbol === "function" ? Symbol : {};
		var iteratorSymbol = $Symbol.iterator || "@@iterator";
		var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
		var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";
		function define(obj, key, value) {
			Object.defineProperty(obj, key, {
				value,
				enumerable: true,
				configurable: true,
				writable: true
			});
			return obj[key];
		}
		try {
			define({}, "");
		} catch (err) {
			define = function(obj, key, value) {
				return obj[key] = value;
			};
		}
		function wrap$1(innerFn, outerFn, self, tryLocsList) {
			var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
			var generator = Object.create(protoGenerator.prototype);
			defineProperty(generator, "_invoke", { value: makeInvokeMethod(innerFn, self, new Context(tryLocsList || [])) });
			return generator;
		}
		exports.wrap = wrap$1;
		function tryCatch(fn, obj, arg) {
			try {
				return {
					type: "normal",
					arg: fn.call(obj, arg)
				};
			} catch (err) {
				return {
					type: "throw",
					arg: err
				};
			}
		}
		var GenStateSuspendedStart = "suspendedStart";
		var GenStateSuspendedYield = "suspendedYield";
		var GenStateExecuting = "executing";
		var GenStateCompleted = "completed";
		var ContinueSentinel = {};
		function Generator() {}
		function GeneratorFunction() {}
		function GeneratorFunctionPrototype() {}
		var IteratorPrototype = {};
		define(IteratorPrototype, iteratorSymbol, function() {
			return this;
		});
		var getProto = Object.getPrototypeOf;
		var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
		if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) IteratorPrototype = NativeIteratorPrototype;
		var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);
		GeneratorFunction.prototype = GeneratorFunctionPrototype;
		defineProperty(Gp, "constructor", {
			value: GeneratorFunctionPrototype,
			configurable: true
		});
		defineProperty(GeneratorFunctionPrototype, "constructor", {
			value: GeneratorFunction,
			configurable: true
		});
		GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction");
		function defineIteratorMethods(prototype) {
			[
				"next",
				"throw",
				"return"
			].forEach(function(method) {
				define(prototype, method, function(arg) {
					return this._invoke(method, arg);
				});
			});
		}
		exports.isGeneratorFunction = function(genFun) {
			var ctor = typeof genFun === "function" && genFun.constructor;
			return ctor ? ctor === GeneratorFunction || (ctor.displayName || ctor.name) === "GeneratorFunction" : false;
		};
		exports.mark = function(genFun) {
			if (Object.setPrototypeOf) Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
			else {
				genFun.__proto__ = GeneratorFunctionPrototype;
				define(genFun, toStringTagSymbol, "GeneratorFunction");
			}
			genFun.prototype = Object.create(Gp);
			return genFun;
		};
		exports.awrap = function(arg) {
			return { __await: arg };
		};
		function AsyncIterator(generator, PromiseImpl) {
			function invoke(method, arg, resolve$1, reject) {
				var record = tryCatch(generator[method], generator, arg);
				if (record.type === "throw") reject(record.arg);
				else {
					var result = record.arg;
					var value = result.value;
					if (value && typeof value === "object" && hasOwn.call(value, "__await")) return PromiseImpl.resolve(value.__await).then(function(value$1) {
						invoke("next", value$1, resolve$1, reject);
					}, function(err) {
						invoke("throw", err, resolve$1, reject);
					});
					return PromiseImpl.resolve(value).then(function(unwrapped) {
						result.value = unwrapped;
						resolve$1(result);
					}, function(error$2) {
						return invoke("throw", error$2, resolve$1, reject);
					});
				}
			}
			var previousPromise;
			function enqueue(method, arg) {
				function callInvokeWithMethodAndArg() {
					return new PromiseImpl(function(resolve$1, reject) {
						invoke(method, arg, resolve$1, reject);
					});
				}
				return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();
			}
			defineProperty(this, "_invoke", { value: enqueue });
		}
		defineIteratorMethods(AsyncIterator.prototype);
		define(AsyncIterator.prototype, asyncIteratorSymbol, function() {
			return this;
		});
		exports.AsyncIterator = AsyncIterator;
		exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
			if (PromiseImpl === void 0) PromiseImpl = Promise;
			var iter = new AsyncIterator(wrap$1(innerFn, outerFn, self, tryLocsList), PromiseImpl);
			return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function(result) {
				return result.done ? result.value : iter.next();
			});
		};
		function makeInvokeMethod(innerFn, self, context) {
			var state = GenStateSuspendedStart;
			return function invoke(method, arg) {
				if (state === GenStateExecuting) throw new Error("Generator is already running");
				if (state === GenStateCompleted) {
					if (method === "throw") throw arg;
					return doneResult();
				}
				context.method = method;
				context.arg = arg;
				while (true) {
					var delegate = context.delegate;
					if (delegate) {
						var delegateResult = maybeInvokeDelegate(delegate, context);
						if (delegateResult) {
							if (delegateResult === ContinueSentinel) continue;
							return delegateResult;
						}
					}
					if (context.method === "next") context.sent = context._sent = context.arg;
					else if (context.method === "throw") {
						if (state === GenStateSuspendedStart) {
							state = GenStateCompleted;
							throw context.arg;
						}
						context.dispatchException(context.arg);
					} else if (context.method === "return") context.abrupt("return", context.arg);
					state = GenStateExecuting;
					var record = tryCatch(innerFn, self, context);
					if (record.type === "normal") {
						state = context.done ? GenStateCompleted : GenStateSuspendedYield;
						if (record.arg === ContinueSentinel) continue;
						return {
							value: record.arg,
							done: context.done
						};
					} else if (record.type === "throw") {
						state = GenStateCompleted;
						context.method = "throw";
						context.arg = record.arg;
					}
				}
			};
		}
		function maybeInvokeDelegate(delegate, context) {
			var methodName = context.method;
			var method = delegate.iterator[methodName];
			if (method === undefined$1) {
				context.delegate = null;
				if (methodName === "throw" && delegate.iterator["return"]) {
					context.method = "return";
					context.arg = undefined$1;
					maybeInvokeDelegate(delegate, context);
					if (context.method === "throw") return ContinueSentinel;
				}
				if (methodName !== "return") {
					context.method = "throw";
					context.arg = /* @__PURE__ */ new TypeError("The iterator does not provide a '" + methodName + "' method");
				}
				return ContinueSentinel;
			}
			var record = tryCatch(method, delegate.iterator, context.arg);
			if (record.type === "throw") {
				context.method = "throw";
				context.arg = record.arg;
				context.delegate = null;
				return ContinueSentinel;
			}
			var info$1 = record.arg;
			if (!info$1) {
				context.method = "throw";
				context.arg = /* @__PURE__ */ new TypeError("iterator result is not an object");
				context.delegate = null;
				return ContinueSentinel;
			}
			if (info$1.done) {
				context[delegate.resultName] = info$1.value;
				context.next = delegate.nextLoc;
				if (context.method !== "return") {
					context.method = "next";
					context.arg = undefined$1;
				}
			} else return info$1;
			context.delegate = null;
			return ContinueSentinel;
		}
		defineIteratorMethods(Gp);
		define(Gp, toStringTagSymbol, "Generator");
		define(Gp, iteratorSymbol, function() {
			return this;
		});
		define(Gp, "toString", function() {
			return "[object Generator]";
		});
		function pushTryEntry(locs) {
			var entry = { tryLoc: locs[0] };
			if (1 in locs) entry.catchLoc = locs[1];
			if (2 in locs) {
				entry.finallyLoc = locs[2];
				entry.afterLoc = locs[3];
			}
			this.tryEntries.push(entry);
		}
		function resetTryEntry(entry) {
			var record = entry.completion || {};
			record.type = "normal";
			delete record.arg;
			entry.completion = record;
		}
		function Context(tryLocsList) {
			this.tryEntries = [{ tryLoc: "root" }];
			tryLocsList.forEach(pushTryEntry, this);
			this.reset(true);
		}
		exports.keys = function(val) {
			var object = Object(val);
			var keys = [];
			for (var key in object) keys.push(key);
			keys.reverse();
			return function next() {
				while (keys.length) {
					var key$1 = keys.pop();
					if (key$1 in object) {
						next.value = key$1;
						next.done = false;
						return next;
					}
				}
				next.done = true;
				return next;
			};
		};
		function values(iterable) {
			if (iterable != null) {
				var iteratorMethod = iterable[iteratorSymbol];
				if (iteratorMethod) return iteratorMethod.call(iterable);
				if (typeof iterable.next === "function") return iterable;
				if (!isNaN(iterable.length)) {
					var i$1 = -1, next = function next$1() {
						while (++i$1 < iterable.length) if (hasOwn.call(iterable, i$1)) {
							next$1.value = iterable[i$1];
							next$1.done = false;
							return next$1;
						}
						next$1.value = undefined$1;
						next$1.done = true;
						return next$1;
					};
					return next.next = next;
				}
			}
			throw new TypeError(typeof iterable + " is not iterable");
		}
		exports.values = values;
		function doneResult() {
			return {
				value: undefined$1,
				done: true
			};
		}
		Context.prototype = {
			constructor: Context,
			reset: function(skipTempReset) {
				this.prev = 0;
				this.next = 0;
				this.sent = this._sent = undefined$1;
				this.done = false;
				this.delegate = null;
				this.method = "next";
				this.arg = undefined$1;
				this.tryEntries.forEach(resetTryEntry);
				if (!skipTempReset) {
					for (var name$3 in this) if (name$3.charAt(0) === "t" && hasOwn.call(this, name$3) && !isNaN(+name$3.slice(1))) this[name$3] = undefined$1;
				}
			},
			stop: function() {
				this.done = true;
				var rootRecord = this.tryEntries[0].completion;
				if (rootRecord.type === "throw") throw rootRecord.arg;
				return this.rval;
			},
			dispatchException: function(exception) {
				if (this.done) throw exception;
				var context = this;
				function handle(loc, caught) {
					record.type = "throw";
					record.arg = exception;
					context.next = loc;
					if (caught) {
						context.method = "next";
						context.arg = undefined$1;
					}
					return !!caught;
				}
				for (var i$1 = this.tryEntries.length - 1; i$1 >= 0; --i$1) {
					var entry = this.tryEntries[i$1];
					var record = entry.completion;
					if (entry.tryLoc === "root") return handle("end");
					if (entry.tryLoc <= this.prev) {
						var hasCatch = hasOwn.call(entry, "catchLoc");
						var hasFinally = hasOwn.call(entry, "finallyLoc");
						if (hasCatch && hasFinally) {
							if (this.prev < entry.catchLoc) return handle(entry.catchLoc, true);
							else if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);
						} else if (hasCatch) {
							if (this.prev < entry.catchLoc) return handle(entry.catchLoc, true);
						} else if (hasFinally) {
							if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);
						} else throw new Error("try statement without catch or finally");
					}
				}
			},
			abrupt: function(type, arg) {
				for (var i$1 = this.tryEntries.length - 1; i$1 >= 0; --i$1) {
					var entry = this.tryEntries[i$1];
					if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) {
						var finallyEntry = entry;
						break;
					}
				}
				if (finallyEntry && (type === "break" || type === "continue") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) finallyEntry = null;
				var record = finallyEntry ? finallyEntry.completion : {};
				record.type = type;
				record.arg = arg;
				if (finallyEntry) {
					this.method = "next";
					this.next = finallyEntry.finallyLoc;
					return ContinueSentinel;
				}
				return this.complete(record);
			},
			complete: function(record, afterLoc) {
				if (record.type === "throw") throw record.arg;
				if (record.type === "break" || record.type === "continue") this.next = record.arg;
				else if (record.type === "return") {
					this.rval = this.arg = record.arg;
					this.method = "return";
					this.next = "end";
				} else if (record.type === "normal" && afterLoc) this.next = afterLoc;
				return ContinueSentinel;
			},
			finish: function(finallyLoc) {
				for (var i$1 = this.tryEntries.length - 1; i$1 >= 0; --i$1) {
					var entry = this.tryEntries[i$1];
					if (entry.finallyLoc === finallyLoc) {
						this.complete(entry.completion, entry.afterLoc);
						resetTryEntry(entry);
						return ContinueSentinel;
					}
				}
			},
			"catch": function(tryLoc) {
				for (var i$1 = this.tryEntries.length - 1; i$1 >= 0; --i$1) {
					var entry = this.tryEntries[i$1];
					if (entry.tryLoc === tryLoc) {
						var record = entry.completion;
						if (record.type === "throw") {
							var thrown = record.arg;
							resetTryEntry(entry);
						}
						return thrown;
					}
				}
				throw new Error("illegal catch attempt");
			},
			delegateYield: function(iterable, resultName, nextLoc) {
				this.delegate = {
					iterator: values(iterable),
					resultName,
					nextLoc
				};
				if (this.method === "next") this.arg = undefined$1;
				return ContinueSentinel;
			}
		};
		return exports;
	}(typeof module === "object" ? module.exports : {});
	try {
		regeneratorRuntime = runtime;
	} catch (accidentalStrictMode) {
		if (typeof globalThis === "object") globalThis.regeneratorRuntime = runtime;
		else Function("r", "regeneratorRuntime = r")(runtime);
	}
})))();
const GlobalComponentsPlugin = { install(app$2) {
	const messageService = useMessage();
	app$2.use(N8nPlugin, {});
	app$2.use(ElLoading);
	app$2.config.globalProperties.$loading = ElLoading.service;
	app$2.config.globalProperties.$msgbox = ElMessageBox;
	app$2.config.globalProperties.$alert = messageService.alert;
	app$2.config.globalProperties.$confirm = messageService.confirm;
	app$2.config.globalProperties.$prompt = messageService.prompt;
	app$2.config.globalProperties.$message = messageService.message;
} };
function touchX(event) {
	if (event.type.indexOf("mouse") !== -1) return event.clientX;
	return event.touches[0].clientX;
}
function touchY(event) {
	if (event.type.indexOf("mouse") !== -1) return event.clientY;
	return event.touches[0].clientY;
}
var isPassiveSupported = (function() {
	var supportsPassive = false;
	try {
		var opts = Object.defineProperty({}, "passive", { get: function() {
			supportsPassive = true;
		} });
		window.addEventListener("test", null, opts);
	} catch (e) {}
	return supportsPassive;
})();
var vue3_touch_events_default = { install: function(app$2, constructorOptions) {
	var globalOptions = Object.assign({}, {
		disableClick: false,
		tapTolerance: 10,
		swipeTolerance: 30,
		touchHoldTolerance: 400,
		longTapTimeInterval: 400,
		touchClass: "",
		dragFrequency: 100,
		rollOverFrequency: 100
	}, constructorOptions);
	function touchStartEvent(event) {
		var $this = this.$$touchObj, isTouchEvent = event.type.indexOf("touch") >= 0, isMouseEvent = event.type.indexOf("mouse") >= 0, $el = this;
		if (isTouchEvent) $this.lastTouchStartTime = event.timeStamp;
		if (isMouseEvent && $this.lastTouchStartTime && event.timeStamp - $this.lastTouchStartTime < 350) return;
		if ($this.touchStarted) return;
		addTouchClass(this);
		$this.touchStarted = true;
		$this.touchMoved = false;
		$this.swipeOutBounded = false;
		$this.startX = touchX(event);
		$this.startY = touchY(event);
		$this.currentX = 0;
		$this.currentY = 0;
		$this.touchStartTime = event.timeStamp;
		$this.hasSwipe = hasEvent(this, "swipe") || hasEvent(this, "swipe.left") || hasEvent(this, "swipe.right") || hasEvent(this, "swipe.top") || hasEvent(this, "swipe.bottom");
		if (hasEvent(this, "hold")) $this.touchHoldTimer = setTimeout(function() {
			$this.touchHoldTimer = null;
			triggerEvent(event, $el, "hold");
		}, $this.options.touchHoldTolerance);
		triggerEvent(event, this, "press");
	}
	function touchMoveEvent(event) {
		var $this = this.$$touchObj;
		var curX = touchX(event);
		var curY = touchY(event);
		var movedAgain = $this.currentX != curX || $this.currentY != curY;
		$this.currentX = curX;
		$this.currentY = curY;
		if (!$this.touchMoved) {
			var tapTolerance = $this.options.tapTolerance;
			$this.touchMoved = Math.abs($this.startX - $this.currentX) > tapTolerance || Math.abs($this.startY - $this.currentY) > tapTolerance;
			if ($this.touchMoved) {
				cancelTouchHoldTimer($this);
				triggerEvent(event, this, "drag.once");
			}
		} else if ($this.hasSwipe && !$this.swipeOutBounded) {
			var swipeOutBounded = $this.options.swipeTolerance;
			$this.swipeOutBounded = Math.abs($this.startX - $this.currentX) > swipeOutBounded && Math.abs($this.startY - $this.currentY) > swipeOutBounded;
		}
		if (hasEvent(this, "rollover") && movedAgain) {
			var now = event.timeStamp;
			var throttle = $this.options.rollOverFrequency;
			if ($this.touchRollTime == null || now > $this.touchRollTime + throttle) {
				$this.touchRollTime = now;
				triggerEvent(event, this, "rollover");
			}
		}
		if (hasEvent(this, "drag") && $this.touchStarted && $this.touchMoved && movedAgain) {
			var now = event.timeStamp;
			var throttle = $this.options.dragFrequency;
			if ($this.touchDragTime == null || now > $this.touchDragTime + throttle) {
				$this.touchDragTime = now;
				triggerEvent(event, this, "drag");
			}
		}
	}
	function touchCancelEvent() {
		var $this = this.$$touchObj;
		cancelTouchHoldTimer($this);
		removeTouchClass(this);
		$this.touchStarted = $this.touchMoved = false;
		$this.startX = $this.startY = 0;
	}
	function touchEndEvent(event) {
		var $this = this.$$touchObj, isTouchEvent = event.type.indexOf("touch") >= 0, isMouseEvent = event.type.indexOf("mouse") >= 0;
		if (isTouchEvent) $this.lastTouchEndTime = event.timeStamp;
		var touchholdEnd = isTouchEvent && !$this.touchHoldTimer;
		cancelTouchHoldTimer($this);
		$this.touchStarted = false;
		removeTouchClass(this);
		if (isMouseEvent && $this.lastTouchEndTime && event.timeStamp - $this.lastTouchEndTime < 350) return;
		triggerEvent(event, this, "release");
		if (!$this.touchMoved) if (hasEvent(this, "longtap") && event.timeStamp - $this.touchStartTime > $this.options.longTapTimeInterval) {
			if (event.cancelable) event.preventDefault();
			triggerEvent(event, this, "longtap");
		} else if (hasEvent(this, "hold") && touchholdEnd) {
			if (event.cancelable) event.preventDefault();
			return;
		} else triggerEvent(event, this, "tap");
		else if ($this.hasSwipe && !$this.swipeOutBounded) {
			var swipeOutBounded = $this.options.swipeTolerance, direction, distanceY = Math.abs($this.startY - $this.currentY), distanceX = Math.abs($this.startX - $this.currentX);
			if (distanceY > swipeOutBounded || distanceX > swipeOutBounded) {
				if (distanceY > swipeOutBounded) direction = $this.startY > $this.currentY ? "top" : "bottom";
				else direction = $this.startX > $this.currentX ? "left" : "right";
				if (hasEvent(this, "swipe." + direction)) triggerEvent(event, this, "swipe." + direction, direction);
				else triggerEvent(event, this, "swipe", direction);
			}
		}
	}
	function mouseEnterEvent() {
		addTouchClass(this);
	}
	function mouseLeaveEvent() {
		removeTouchClass(this);
	}
	function hasEvent($el, eventType) {
		var callbacks = $el.$$touchObj.callbacks[eventType];
		return callbacks != null && callbacks.length > 0;
	}
	function triggerEvent(e, $el, eventType, param) {
		var callbacks = $el.$$touchObj.callbacks[eventType];
		if (callbacks == null || callbacks.length === 0) return null;
		for (var i$1 = 0; i$1 < callbacks.length; i$1++) {
			var binding = callbacks[i$1];
			if (binding.modifiers.stop) e.stopPropagation();
			if (binding.modifiers.prevent) e.preventDefault();
			if (binding.modifiers.self && e.target !== e.currentTarget) continue;
			if (typeof binding.value === "function") if (param) binding.value(param, e);
			else binding.value(e);
		}
	}
	function addTouchClass($el) {
		var className = $el.$$touchObj.options.touchClass;
		className && $el.classList.add(className);
	}
	function removeTouchClass($el) {
		var className = $el.$$touchObj.options.touchClass;
		className && $el.classList.remove(className);
	}
	function cancelTouchHoldTimer($this) {
		if ($this.touchHoldTimer) {
			clearTimeout($this.touchHoldTimer);
			$this.touchHoldTimer = null;
		}
	}
	function buildTouchObj($el, extraOptions) {
		var touchObj = $el.$$touchObj || {
			callbacks: {},
			hasBindTouchEvents: false,
			options: globalOptions
		};
		if (extraOptions) touchObj.options = Object.assign({}, touchObj.options, extraOptions);
		$el.$$touchObj = touchObj;
		return $el.$$touchObj;
	}
	app$2.directive("touch", {
		beforeMount: function($el, binding) {
			var $this = buildTouchObj($el);
			var passiveOpt = isPassiveSupported ? { passive: true } : false;
			var eventType = binding.arg || "tap";
			switch (eventType) {
				case "swipe":
					var _m = binding.modifiers;
					if (_m.left || _m.right || _m.top || _m.bottom) {
						for (var i$1 in binding.modifiers) if ([
							"left",
							"right",
							"top",
							"bottom"
						].indexOf(i$1) >= 0) {
							var _e = "swipe." + i$1;
							$this.callbacks[_e] = $this.callbacks[_e] || [];
							$this.callbacks[_e].push(binding);
						}
					} else {
						$this.callbacks.swipe = $this.callbacks.swipe || [];
						$this.callbacks.swipe.push(binding);
					}
					break;
				case "press":
				case "drag": if (binding.modifiers.disablePassive) passiveOpt = false;
				default:
					$this.callbacks[eventType] = $this.callbacks[eventType] || [];
					$this.callbacks[eventType].push(binding);
			}
			if ($this.hasBindTouchEvents) return;
			$el.addEventListener("touchstart", touchStartEvent, passiveOpt);
			$el.addEventListener("touchmove", touchMoveEvent, passiveOpt);
			$el.addEventListener("touchcancel", touchCancelEvent);
			$el.addEventListener("touchend", touchEndEvent);
			if (!$this.options.disableClick) {
				$el.addEventListener("mousedown", touchStartEvent);
				$el.addEventListener("mousemove", touchMoveEvent);
				$el.addEventListener("mouseup", touchEndEvent);
				$el.addEventListener("mouseenter", mouseEnterEvent);
				$el.addEventListener("mouseleave", mouseLeaveEvent);
			}
			$this.hasBindTouchEvents = true;
		},
		unmounted: function($el) {
			$el.removeEventListener("touchstart", touchStartEvent);
			$el.removeEventListener("touchmove", touchMoveEvent);
			$el.removeEventListener("touchcancel", touchCancelEvent);
			$el.removeEventListener("touchend", touchEndEvent);
			if ($el.$$touchObj && !$el.$$touchObj.options.disableClick) {
				$el.removeEventListener("mousedown", touchStartEvent);
				$el.removeEventListener("mousemove", touchMoveEvent);
				$el.removeEventListener("mouseup", touchEndEvent);
				$el.removeEventListener("mouseenter", mouseEnterEvent);
				$el.removeEventListener("mouseleave", mouseLeaveEvent);
			}
			delete $el.$$touchObj;
		}
	});
	app$2.directive("touch-class", { beforeMount: function($el, binding) {
		buildTouchObj($el, { touchClass: binding.value });
	} });
	app$2.directive("touch-options", { beforeMount: function($el, binding) {
		buildTouchObj($el, binding.value);
	} });
} };
const GlobalDirectivesPlugin = { install(app$2) {
	app$2.use(vue3_touch_events_default);
} };
const ChartJSPlugin = { install: () => {
	Chart.register(CategoryScale, LinearScale, BarElement, LineElement, PointElement, plugin_title, plugin_tooltip, plugin_legend, LineController);
} };
var ignoredErrors = [
	{ instanceof: AxiosError },
	{
		instanceof: ResponseError,
		message: /ECONNREFUSED/
	},
	{
		instanceof: ResponseError,
		message: "Can't connect to n8n."
	},
	{
		instanceof: ResponseError,
		message: "Unauthorized"
	},
	{
		instanceof: RangeError,
		message: /Position \d+ is out of range for changeset of length \d+/
	},
	{
		instanceof: RangeError,
		message: /Invalid change range \d+ to \d+/
	},
	{
		instanceof: RangeError,
		message: /Selection points outside of document$/
	},
	{
		instanceof: Error,
		message: /ResizeObserver/
	}
];
function beforeSend(event, { originalException }) {
	if (!originalException || ignoredErrors.some((entry) => {
		if (!(originalException instanceof entry.instanceof)) return false;
		if ("message" in entry) if (entry.message instanceof RegExp) return entry.message.test(originalException.message ?? "");
		else return originalException.message === entry.message;
		return true;
	})) return null;
	return event;
}
const SentryPlugin = { install: (app$2) => {
	const sentryConfig = getAndParseConfigFromMetaTag("sentry");
	if (!sentryConfig?.dsn) return;
	const { dsn, release, environment, serverName } = sentryConfig;
	init$1({
		app: app$2,
		dsn,
		release,
		environment,
		integrations: [captureConsoleIntegration({ levels: ["error"] }), rewriteFramesIntegration({
			prefix: "",
			root: window.location.origin + "/"
		})],
		beforeSend
	});
	if (serverName) {
		setTag("server_name", serverName);
		setUser({ id: serverName });
	}
} };
var pinia = createPinia();
var app = createApp(App_default);
app.use(SentryPlugin);
registerModuleRoutes(router_default);
app.use(TelemetryPlugin);
app.use(PiniaVuePlugin);
app.use(GlobalComponentsPlugin);
app.use(GlobalDirectivesPlugin);
app.use(pinia);
app.use(router_default);
app.use(i18nInstance);
app.use(ChartJSPlugin);
app.mount("#app");
